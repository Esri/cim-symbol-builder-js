"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[5456],{68197:(e,t,r)=>{r.d(t,{A:()=>f});var s,n,o=r(40876),i=r(34727),a=r(56507);function l(e){return(0,i.qE)((0,a.Vr)(e),0,255)}function c(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}function h(e,t){const r=e.toString(16).padStart(2,"0");return t?r.slice(0,1):r}class u{static blendColors(e,t,r,s=new u){return s.r=Math.round(e.r+(t.r-e.r)*r),s.g=Math.round(e.g+(t.g-e.g)*r),s.b=Math.round(e.b+(t.b-e.b)*r),s.a=e.a+(t.a-e.a)*r,s._sanitize()}static fromRgb(e,t){const r=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(r){const e=r[2].split(/\s*,\s*/),s=r[1];if("rgb"===s&&3===e.length||"rgba"===s&&4===e.length){const r=e[0];if("%"===r.charAt(r.length-1)){const r=e.map((e=>2.56*parseFloat(e)));return 4===e.length&&(r[3]=parseFloat(e[3])),u.fromArray(r,t)}return u.fromArray(e.map((e=>parseFloat(e))),t)}if("hsl"===s&&3===e.length||"hsla"===s&&4===e.length)return u.fromArray((0,o.z$)(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100,parseFloat(e[3])),t)}return null}static fromHex(e,t=new u){if("#"!==e[0]||isNaN(Number(`0x${e.slice(1)}`)))return null;switch(e.length){case 4:case 5:{const r=parseInt(e.slice(1,2),16),s=parseInt(e.slice(2,3),16),n=parseInt(e.slice(3,4),16),o=5===e.length?15:parseInt(e.slice(4),16);return u.fromArray([r+16*r,s+16*s,n+16*n,(o+16*o)/255],t)}case 7:case 9:{const r=parseInt(e.slice(1,3),16),s=parseInt(e.slice(3,5),16),n=parseInt(e.slice(5,7),16),o=7===e.length?255:parseInt(e.slice(7),16);return u.fromArray([r,s,n,o/255],t)}default:return null}}static fromArray(e,t=new u){return t._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(t.a)&&(t.a=1),t._sanitize()}static fromString(e,t){const r=(0,o.V6)(e)?(0,o.TS)(e):null;return r&&u.fromArray(r,t)||u.fromRgb(e,t)||u.fromHex(e,t)}static fromJSON(e){return null!=e?new u([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return null!=e?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return null!=e?[e.r/255,e.g/255,e.b/255,null!=e.a?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return.299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return"string"==typeof e?u.fromString(e,this):Array.isArray(e)?u.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof u||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const t=e?.capitalize??!1,r=e?.digits??6,s=3===r||4===r,n=4===r||8===r,o=`#${h(this.r,s)}${h(this.g,s)}${h(this.b,s)}${n?h(Math.round(255*this.a),s):""}`;return t?o.toUpperCase():o}toCss(e=!1){const t=this.r+", "+this.g+", "+this.b;return e?`rgba(${t}, ${this.a})`:`rgb(${t})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=u.AlphaMode.ALWAYS){const t=l(this.r),r=l(this.g),s=l(this.b);return e===u.AlphaMode.ALWAYS||1!==this.a?[t,r,s,l(255*this.a)]:[t,r,s]}clone(){return new u(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return null!=e&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Math.round(c(this.r,0,255)),this.g=Math.round(c(this.g,0,255)),this.b=Math.round(c(this.b,0,255)),this.a=c(this.a,0,1),this}_set(e,t,r,s){this.r=e,this.g=t,this.b=r,this.a=s}}u.prototype.declaredClass="esri.Color",(n=(s=u||(u={})).AlphaMode||(s.AlphaMode={}))[n.ALWAYS=0]="ALWAYS",n[n.UNLESS_OPAQUE=1]="UNLESS_OPAQUE";const f=u},73354:(e,t,r)=>{r.d(t,{a:()=>u,b:()=>a,c:()=>i,d:()=>n,e:()=>f,f:()=>h,l:()=>c,n:()=>d,t:()=>o});var s=r(40876);function n(e,t,r){o(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function o(e,t,r,s=3,n=s){if(e.length/s!==Math.ceil(t.length/n))return e;const o=e.length/s,i=r[0],a=r[1],l=r[2],c=r[4],h=r[5],u=r[6],f=r[8],d=r[9],g=r[10],m=r[12],p=r[13],b=r[14];let y=0,w=0;for(let r=0;r<o;r++){const r=t[y],o=t[y+1],_=t[y+2];e[w]=i*r+c*o+f*_+m,e[w+1]=a*r+h*o+d*_+p,e[w+2]=l*r+u*o+g*_+b,y+=n,w+=s}return e}function i(e,t,r){a(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function a(e,t,r,s=3,n=s){if(e.length/s!==Math.ceil(t.length/n))return;const o=e.length/s,i=r[0],a=r[1],l=r[2],c=r[3],h=r[4],u=r[5],f=r[6],d=r[7],g=r[8];let m=0,p=0;for(let r=0;r<o;r++){const r=t[m],o=t[m+1],b=t[m+2];e[p]=i*r+c*o+f*b,e[p+1]=a*r+h*o+d*b,e[p+2]=l*r+u*o+g*b,m+=n,p+=s}}function l(e,t,r,s=3,n=s){const o=Math.min(e.length/s,t.length/n);let i=0,a=0;for(let l=0;l<o;l++)e[a]=r*t[i],e[a+1]=r*t[i+1],e[a+2]=r*t[i+2],i+=n,a+=s;return e}function c(e,t,r,s){h(e.typedBuffer,t.typedBuffer,r,s,e.typedBufferStride,t.typedBufferStride)}function h(e,t,r,n,o=3,i=o){const a=Math.min(e.length/o,t.length/i);let l=0,c=0;const h=1/s.Tf;for(let s=0;s<a;s++)e[c]=n*(r*t[l])**h,e[c+1]=n*(r*t[l+1])**h,e[c+2]=n*(r*t[l+2])**h,l+=i,c+=o}function u(e,t,r,s=3,n=s){const o=e.length/s;if(o!==Math.ceil(t.length/n))return e;let i=0,a=0;for(let l=0;l<o;l++)e[a]=t[i]+r[0],e[a+1]=t[i+1]+r[1],e[a+2]=t[i+2]+r[2],i+=n,a+=s;return e}function f(e,t){d(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function d(e,t,r=3,s=r){const n=Math.min(e.length/r,t.length/s);let o=0,i=0;for(let a=0;a<n;a++){const n=t[o],a=t[o+1],l=t[o+2],c=n*n+a*a+l*l;if(c>0){const t=1/Math.sqrt(c);e[i]=t*n,e[i+1]=t*a,e[i+2]=t*l}o+=s,i+=r}}r(44208),r(53966),Object.freeze(Object.defineProperty({__proto__:null,linearToSRGB:h,linearToSRGBView:c,normalize:d,normalizeView:f,scale:l,scaleView:function(e,t,r){l(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)},shiftRight:function(e,t,r){const s=Math.min(e.count,t.count),n=e.typedBuffer,o=e.typedBufferStride,i=t.typedBuffer,a=t.typedBufferStride;let l=0,c=0;for(let e=0;e<s;e++)n[c]=i[l]>>r,n[c+1]=i[l+1]>>r,n[c+2]=i[l+2]>>r,l+=a,c+=o},transformMat3:a,transformMat3View:i,transformMat4:o,transformMat4View:n,translate:u},Symbol.toStringTag,{value:"Module"}))},9775:(e,t,r)=>{r.d(t,{A:()=>o});var s=r(62788),n=r(95488);class o{constructor(e=e=>e.values().next().value){this._peeker=e,this._observable=new n.I,this._items=new Set}get length(){return(0,s.gc)(this._observable),this._items.size}clear(){0!==this.length&&(this._items.clear(),this._observable.notify())}last(){if(0===this.length)return;let e;for(e of this._items);return e}peek(){if(0!==this.length)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return(0,s.gc)(this._observable),this._items.has(e)}pop(){if(0===this.length)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(0===this.length)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const t=this.length;return this._items.forEach((t=>{e(t)||this._items.delete(t)})),t!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){(0,s.gc)(this._observable),yield*this._items}}},21818:(e,t,r)=>{function s(e){}r.d(t,{Xb:()=>s}),r(44208)},10382:(e,t,r)=>{r.d(t,{A:()=>c});var s=r(36563),n=(r(44208),r(74887)),o=r(9775),i=r(72457),a=r(52268),l=r(61322);class c{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new o.A}destroy(){this.close()}get closed(){return!this._clients?.length}open(e,t){return new Promise(((r,s)=>{let o=!0;const i=e=>{(0,n.Te)(t.signal),o&&(o=!1,e())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let o=0;o<e.length;++o){const a=e[o];(0,n.$X)(a)?this._clientPromises[o]=a.then((e=>(this._clients[o]=new l.default(e,t,this._ongoingJobsQueue),i(r),this._clients[o])),(()=>(i(s),null))):(this._clients[o]=new l.default(a,t,this._ongoingJobsQueue),this._clientPromises[o]=Promise.resolve(this._clients[o]),i(r))}}))}broadcast(e,t,r){const s=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const o=this._clientPromises[n];s[n]=o.then((s=>s?.invoke(e,t,r)))}return s}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject((0,n.NK)(`Worker closing, aborting job calling '${e.methodName}'`));for(const e of this._clientPromises)e.then((e=>e?.close()));this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,(0,i.h)(this)}invoke(e,t,r){return this.apply(e,[t],r)}apply(e,t,r){const s=(0,n.Tw)();this._ongoingJobsQueue.push({methodName:e,data:t,invokeOptions:r,resolver:s});for(let e=0;e<this._clientPromises.length;e++){const t=this._clients[e];t?t.jobAdded():this._clientPromises[e].then((e=>e?.jobAdded()))}return s.promise}createInvokeProxy(e){return(0,a.L)(this,e)}on(e,t){return Promise.all(this._clientPromises).then((()=>(0,s.vE)(this._clients.map((r=>r.on(e,t))))))}openPorts(){return new Promise((e=>{const t=new Array(this._clientPromises.length);let r=t.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then((n=>{n&&(t[s]=n.openPort()),0==--r&&e(t)}))}))}get test(){}}},35982:(e,t,r)=>{r.d(t,{B:()=>l});var s=r(4576),n=r(36563),o=r(53966),i=r(74887),a=r(29953);class l{constructor(e,t,r,s,n={}){this._mainMethod=t,this._transferLists=r,this._listeners=[],this._promise=(0,a.ho)(e,{...n,schedule:s}).then((e=>{if(void 0===this._thread){this._thread=e,this._promise=null,n.hasInitialize&&this.broadcast({},"initialize");for(const e of this._listeners)this._connectListener(e)}else e.close()})),this._promise.catch((t=>o.A.getLogger("esri.core.workers.WorkerHandle").error(`Failed to initialize ${e} worker: ${t}`)))}on(e,t){const r={removed:!1,eventName:e,callback:t,threadHandle:null};return this._listeners.push(r),this._connectListener(r),(0,n.hA)((()=>{r.removed=!0,(0,s.TF)(this._listeners,r),this._thread&&null!=r.threadHandle&&r.threadHandle.remove()}))}destroy(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null,this._listeners.length=0,this._transferLists={}}invoke(e,t){return this.invokeMethod(this._mainMethod,e,t)}invokeMethod(e,t,r){if(this._thread){const s=this._transferLists[e],n=s?s(t):[];return this._thread.invoke(e,t,{transferList:n,signal:r})}return this._promise?this._promise.then((()=>((0,i.Te)(r),this.invokeMethod(e,t,r)))):Promise.reject(null)}broadcast(e,t){return this._thread?Promise.all(this._thread.broadcast(t,e)).then((()=>{})):this._promise?this._promise.then((()=>this.broadcast(e,t))):Promise.reject()}get promise(){return this._promise}_connectListener(e){this._thread&&this._thread.on(e.eventName,e.callback).then((t=>{e.removed||(e.threadHandle=t)}))}}},72457:(e,t,r)=>{r.d(t,{h:()=>o,k:()=>n});const s=new FinalizationRegistry((e=>{e.close()}));function n(e,t){s.register(e,t,t)}function o(e){s.unregister(e)}},29953:(e,t,r)=>{r.d(t,{ho:()=>J});var s=r(49186),n=r(44208),o=r(74887),i=r(10382),a=r(72457),l=r(61322),c=r(53966),h=r(97768),u=r(78888),f=r(84952);const d={async request(e,t){const r=e.options,s=r.responseType;r.signal=t?.signal,r.responseType="native"===s||"native-request-init"===s?"native-request-init":s&&["blob","json","text"].includes(s)&&(0,f.sC)(e.url)?.after?s:"array-buffer";const n=await(0,u.A)(e.url,r),o={data:n.data,httpStatus:n.httpStatus,ssl:n.ssl};switch(n.requestOptions?.responseType){case"native-request-init":return delete o.data.signal,o;case"blob":o.data=await o.data.arrayBuffer();break;case"json":o.data=(new TextEncoder).encode(JSON.stringify(o.data)).buffer;break;case"text":o.data=(new TextEncoder).encode(o.data).buffer}return{result:o,transferList:[o.data]}}};var g=r(8341),m=r(2741),p=r(92602),b=(r(47566),r(70333));const y={};var w=r(26390);class _{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach((t=>{this[t]=(...r)=>e[t](...r)}))}}class v{constructor(){this._dispatcher=new _,this._workerPostMessage({type:g.Go.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){(0,w.d)((()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))}))}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,t,r){this._dispatcher.addEventListener(e,t,r)}removeEventListener(e,t,r){this._dispatcher.removeEventListener(e,t,r)}_workerPostMessage(e){(0,w.d)((()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))}))}async _workerMessageHandler(e){const t=(0,g.VI)(e);if(t&&t.type===g.Go.OPEN){const{modulePath:e,jobId:r}=t;let s=await l.default.loadWorker(e);s||(s=await import(e));const n=l.default.connect(s);this._workerPostMessage({type:g.Go.OPENED,jobId:r,data:n})}}}var A=r(73444),k=r(18357);const E=()=>c.A.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:P}=g.Go;let M,S;const N="Failed to create Worker. Fallback to execute module in main thread";async function L(e){return new Promise((t=>{function r(n){const o=(0,g.VI)(n);o&&o.type===P&&(e.removeEventListener("message",r),e.removeEventListener("error",s),t(e))}function s(t){t.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",s),E().warn("Failed to create Worker. Fallback to execute module in main thread",t),(e=new v).addEventListener("message",r),e.addEventListener("error",s)}e.addEventListener("message",r),e.addEventListener("error",s)}))}let I=0;const{ABORT:C,INVOKE:O,OPEN:R,OPENED:U,RESPONSE:j}=g.Go;class B{static async create(e){const t=await async function(){if(!(0,n.A)("esri-workers"))return L(new v);if(!M&&!S)try{const e='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});'.split("{CONFIGURATION}").join(function(){let e;if(null!=p.A.default){const t={...p.A};delete t.default,e=JSON.parse(JSON.stringify(t))}else e=JSON.parse(JSON.stringify(p.A));e.assetsPath=(0,f.s2)(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?(0,f.s2)(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=(0,A.JK)(),e.has={"esri-csp-restrictions":(0,n.A)("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":(0,n.A)("esri-2d-update-debug"),"esri-2d-log-updating":(0,n.A)("esri-2d-log-updating"),"featurelayer-pbf":(0,n.A)("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":(0,n.A)("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":(0,n.A)("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":(0,n.A)("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":(0,n.A)("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":(0,n.A)("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":(0,n.A)("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":(0,n.A)("featurelayer-snapshot-enabled"),"esri-atomics":(0,n.A)("esri-atomics"),"esri-shared-array-buffer":(0,n.A)("esri-shared-array-buffer"),"esri-tiles-debug":(0,n.A)("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":(0,n.A)("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":(0,n.A)("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=(0,f.s2)(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=(0,f.s2)(e.workers.workerPath):e.workers.workerPath=(0,f.s2)((0,m.s)("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=p.A.workers.loaderConfig,r=function(e){const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages?.slice()||[],paths:{...y.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=y.baseUrl),t}({baseUrl:t?.baseUrl,locale:(0,A.JK)(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t?.has},map:{...t?.map},paths:{...t?.paths},packages:t?.packages||[]}),s={buildDate:k.$,fullVersion:b.ol,revision:k.u};return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:s})}());M=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){S=e||{}}let e;if(M)try{e=new Worker(M,{name:"esri-worker-"+I++})}catch(t){E().warn(N,S),e=new v}else E().warn(N,S),e=new v;return L(e)}();return new B(t,e)}constructor(e,t){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=t,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",(e=>{e.preventDefault(),c.A.getLogger("esri.core.workers.WorkerOwner").error(e)}))}terminate(){this.worker.terminate()}async open(e,t={}){const{signal:r}=t,s=(0,g.Jc)();return new Promise(((t,n)=>{const i={resolve:t,reject:n,abortHandle:(0,o.NY)(r,(()=>{this._outJobs.delete(s),this._post({type:C,jobId:s})}))};this._outJobs.set(s,i),this._post({type:R,jobId:s,modulePath:e})}))}_onMessage(e){const t=(0,g.VI)(e);if(t)switch(t.type){case U:this._onOpenedMessage(t);break;case j:this._onResponseMessage(t);break;case C:this._onAbortMessage(t);break;case O:this._onInvokeMessage(t)}}_onAbortMessage(e){const t=this._inJobs,r=e.jobId,s=t.get(r);s&&(s.controller&&s.controller.abort(),t.delete(r))}_onInvokeMessage(e){const{methodName:t,jobId:r,data:s,abortable:n}=e,i=n?new AbortController:null,a=this._inJobs,l=d[t];let c;try{if("function"!=typeof l)throw new TypeError(`${t} is not a function`);c=l.call(null,s,{signal:i?i.signal:null})}catch(e){return void this._post({type:j,jobId:r,error:(0,g.mF)(e)})}(0,o.$X)(c)?(a.set(r,{controller:i,promise:c}),c.then((e=>{a.has(r)&&(a.delete(r),this._post({type:j,jobId:r},e))}),(e=>{a.has(r)&&(a.delete(r),e||(e={message:"Error encountered at method"+t}),(0,o.zf)(e)||this._post({type:j,jobId:r,error:(0,g.mF)(e||{message:`Error encountered at method ${t}`})}))}))):this._post({type:j,jobId:r},c)}_onOpenedMessage(e){const{jobId:t,data:r}=e,s=this._outJobs.get(t);s&&(this._outJobs.delete(t),(0,h.xt)(s.abortHandle),s.resolve(r))}_onResponseMessage(e){const{jobId:t,error:r,data:n}=e,o=this._outJobs.get(t);o&&(this._outJobs.delete(t),(0,h.xt)(o.abortHandle),r?o.reject(s.A.fromJSON(JSON.parse(r))):o.resolve(n))}_post(e,t,r){return(0,g.u1)(this.worker,e,t,r)}}const x=(0,n.A)("host-browser")?Math.min(navigator.hardwareConcurrency-1,(0,n.A)("workers-pool-size")??8):0;let F=(0,n.A)("esri-mobile")?Math.min(x,3):x;F||(F=(0,n.A)("safari")&&(0,n.A)("mac")?7:2);let H=0;const T=[];async function $(e,t){const r=new i.A,{registryTarget:s,...n}=t;return await r.open(e,n),s&&(0,a.k)(s,r),r}async function J(e,t={}){if("string"!=typeof e)throw new s.A("workers:undefined-module","modulePath is missing");let r=t.strategy||"distributed";if((0,n.A)("host-webworker")&&!(0,n.A)("esri-workers")&&(r="local"),"local"===r){let r=await l.default.loadWorker(e);r||(r=await import(e)),(0,o.Te)(t.signal);const s=t.client||r;return $([l.default.connect(r,t.schedule)],{...t,client:s})}if(await async function(){if(V)return V;D=new AbortController;const e=[];for(let t=0;t<F;t++){const r=B.create(t).then((e=>(T[t]=e,e)));e.push(r)}return V=Promise.all(e),V}(),(0,o.Te)(t.signal),"dedicated"===r){const r=H++%F;return $([await T[r].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const r=Math.min(t.maxNumWorkers,F);if(r<F){const s=new Array(r);for(let n=0;n<r;++n){const r=H++%F;s[n]=T[r].open(e,t)}return $(s,t)}}return $(T.map((r=>r.open(e,t))),t)}let D,V=null},95696:(e,t,r)=>{r.d(t,{A:()=>u});var s,n=r(90237),o=r(69540),i=r(25482),a=r(10107),l=(r(44208),r(53966),r(87811),r(93223)),c=r(40608);let h=s=class extends(o.A.ClonableMixin(i.A)){constructor(e){super(e),this.type="georeferenced",this.origin=null}};h.absolute=new s,(0,n._)([(0,l.e)({georeferenced:"georeferenced"},{readOnly:!0})],h.prototype,"type",void 0),(0,n._)([(0,a.MZ)({type:[Number],nonNullable:!1,json:{write:!0}})],h.prototype,"origin",void 0),h=s=(0,n._)([(0,c.$)("esri.geometry.support.MeshGeoreferencedVertexSpace")],h);const u=h},18251:(e,t,r)=>{r.d(t,{A:()=>u});var s=r(90237),n=r(69540),o=r(25482),i=r(10107),a=(r(44208),r(53966),r(87811),r(93223)),l=r(40608),c=r(51850);let h=class extends(n.A.ClonableMixin(o.A)){constructor(e){super(e),this.type="local",this.origin=(0,c.vt)()}};(0,s._)([(0,a.e)({local:"local"},{readOnly:!0})],h.prototype,"type",void 0),(0,s._)([(0,i.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],h.prototype,"origin",void 0),h=(0,s._)([(0,l.$)("esri.geometry.support.MeshLocalVertexSpace")],h);const u=h},47566:(e,t,r)=>{r(97770),r(18047),r(71754),r(73444);var s=r(10838),n=r(78888),o=r(49186);async function i(e){if(null!=a.fetchBundleAsset)return a.fetchBundleAsset(e);const t=await(0,n.A)(e,{responseType:"text"});return JSON.parse(t.data)}const a={};var l,c=r(2741);(0,s.ao)((l={pattern:"esri/",location:c.s},new class{constructor({base:e="",pattern:t,location:r=new URL(window.location.href)}){let s;s="string"==typeof r?e=>new URL(e,new URL(r,window.location.href)).href:r instanceof URL?e=>new URL(e,r).href:r,this.pattern="string"==typeof t?new RegExp(`^${t}`):t,this.getAssetUrl=s,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,t){return async function(e,t,r,n){const a=t.exec(r);if(!a)throw new o.A("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);const l=a[1]?`${a[1]}/`:"",c=a[2],h=(0,s.xO)(n),u=`${l}${c}.json`,f=h?`${l}${c}_${h}.json`:u;let d;try{d=await i(e(f))}catch(t){if(f===u)throw new o.A("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:t});try{d=await i(e(u))}catch(e){throw new o.A("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:e})}}return d}(this.getAssetUrl,this.matcher,e,t)}}(l)))},18047:(e,t,r)=>{r.d(t,{ZV:()=>a});var s=r(73444);const n={ar:"ar-u-nu-latn"};let o=new WeakMap,i={};function a(e,t){return Object.is(e,-0)&&(e=0),function(e){const t=e||i;if(!o.has(t)){const r=(0,s.JK)(),i=n[(0,s.JK)()]||r;o.set(t,new Intl.NumberFormat(i,e))}return o.get(t)}(t).format(e)}(0,s.Ml)((()=>{o=new WeakMap,i={}})),new Map},71754:(e,t,r)=>{r.d(t,{V:()=>c});var s=r(53966),n=r(93637),o=r(799),i=r(97770),a=r(18047);const l=()=>s.A.getLogger("esri.intl.substitute");function c(e,t,r={}){const{format:s={}}=r;return(0,o.HC)(e,(e=>function(e,t,r){let s,o;const i=e.indexOf(":");if(-1===i?s=e.trim():(s=e.slice(0,i).trim(),o=e.slice(i+1).trim()),!s)return"";const a=(0,n.wc)(s,t);if(null==a)return"";const l=(o?r?.[o]:null)??r?.[s];return l?h(a,l):o?u(a,o):f(a)}(e,t,s)))}function h(e,t){switch(t.type){case"date":return(0,i.Yq)(e,t.intlOptions);case"number":return(0,a.ZV)(e,t.intlOptions);default:return l().warn("missing format descriptor for key {key}"),f(e)}}function u(e,t){switch(t.toLowerCase()){case"dateformat":return(0,i.Yq)(e);case"numberformat":return(0,a.ZV)(e);default:return l().warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?(0,i.Yq)(e):/^numberformat/i.test(t)?(0,a.ZV)(e):f(e)}}function f(e){switch(typeof e){case"string":return e;case"number":return(0,a.ZV)(e);case"boolean":return""+e;default:return e instanceof Date?(0,i.Yq)(e):""}}},36233:(e,t,r)=>{r.r(t),r.d(t,{destroyContext:()=>C,dracoDecompressPointCloudData:()=>P,filterObbsForModifications:()=>M,filterObbsForModificationsSync:()=>x,initialize:()=>T,interpretObbModificationResults:()=>B,process:()=>E,project:()=>L,setLegacySchema:()=>N,setModifications:()=>S,setModificationsSync:()=>U,test:()=>J,transformNormals:()=>I});var s,n,o=r(34727),i=r(16930),a=r(95696),l=r(18251),c=r(73354);!function(e){e[e.None=0]="None",e[e.Int16=1]="Int16",e[e.Int32=2]="Int32"}(s||(s={})),function(e){e[e.Replace=0]="Replace",e[e.Outside=1]="Outside",e[e.Inside=2]="Inside",e[e.Finished=3]="Finished"}(n||(n={}));var h=r(2741);function u(e){return(0,h.s)(`esri/libs/i3s/${e}`)}let f;r(53966);var d,g,m,p,b,y,w=r(3694),_=r(51850),v=r(35982);r(57251),r(27993);class A{constructor(e,t,r,s,n,o){this.layout=e,this.interleavedVertexData=t,this.indices=r,this.hasColors=s,this.hasModifications=n,this.positionData=o}}class k{constructor(e,t,r,s,n,o,i){this.componentOffsets=e,this.featureIds=t,this.anchorIds=r,this.anchors=s,this.transformedGeometry=n,this.globalTrafo=o,this.obb=i}}async function E(e){R=await $();const t=[e.geometryBuffer];return{result:j(R,e,t),transferList:t}}async function P(e){R=await $();const t=[e.geometryBuffer],{geometryBuffer:r}=e,s=r.byteLength,n=R._malloc(s),o=new Uint8Array(R.HEAPU8.buffer,n,s);o.set(new Uint8Array(r));const i=R.dracoDecompressPointCloudData(n,o.byteLength);if(R._free(n),i.error.length>0)throw new Error(`i3s.wasm: ${i.error}`);const a=i.featureIds?.length>0?i.featureIds.slice():null,l=i.positions.slice();return a&&t.push(a.buffer),t.push(l.buffer),{result:{positions:l,featureIds:a},transferList:t}}async function M(e){await $(),x(e);const t={buffer:e.buffer};return{result:t,transferList:[t.buffer]}}async function S(e){await $(),U(e)}async function N(e){R=await $(),R.setLegacySchema(e.context,e.jsonSchema)}async function L(e){const{localMatrix:t,origin:s,positions:n,vertexSpace:o}=e,c=i.A.fromJSON(e.inSpatialReference),h=i.A.fromJSON(e.outSpatialReference);let u;const[{projectBuffer:f},{initializeProjection:d}]=await Promise.all([Promise.resolve().then(r.bind(r,9762)),Promise.resolve().then(r.bind(r,57251))]);await d(c,h);const g=[0,0,0];if(!f(s,c,0,g,h,0))throw new Error("Failed to project");if("georeferenced"===o.type&&null==o.origin){if(u=new Float64Array(n.length),!f(n,c,0,u,h,0,u.length/3))throw new Error("Failed to project")}else{const e="georeferenced"===o.type?a.A.fromJSON(o):l.A.fromJSON(o),{projectMeshVertexPositions:s}=await Promise.all([r.e(3030),r.e(4594)]).then(r.bind(r,74594)),i=s({vertexAttributes:{position:n},transform:t?{localMatrix:t}:void 0,vertexSpace:e,spatialReference:c},h);if(!i)throw new Error("Failed to project");u=i}const m=u.length,[p,b,y]=g;for(let e=0;e<m;e+=3)u[e]-=p,u[e+1]-=b,u[e+2]-=y;return{result:{projected:u,original:n,projectedOrigin:g},transferList:[u.buffer,n.buffer]}}async function I({normalMatrix:e,normals:t}){const r=new Float32Array(t.length);return(0,c.b)(r,t,e),(0,o.or)(e)&&(0,c.n)(r,r),{result:{transformed:r,original:t},transferList:[r.buffer,t.buffer]}}function C(e){F(e)}let O,R;function U(e){if(!R)return;const t=e.modifications,r=R._malloc(8*t.length),s=new Float64Array(R.HEAPU8.buffer,r,t.length);for(let e=0;e<t.length;++e)s[e]=t[e];R.setModifications(e.context,r,t.length,e.isGeodetic),R._free(r)}function j(e,t,r){const{context:n,globalTrafo:o,mbs:i,obbData:a,elevationOffset:l,geometryBuffer:c,geometryDescriptor:h,indexToVertexProjector:u,vertexToRenderProjector:f}=t,d=e._malloc(c.byteLength),g=e._malloc(33*Float64Array.BYTES_PER_ELEMENT),m=new Uint8Array(e.HEAPU8.buffer,d,c.byteLength);m.set(new Uint8Array(c));const p=new Float64Array(e.HEAPU8.buffer,g,33);H(p,[NaN,NaN,NaN]);let b=p.byteOffset+3*p.BYTES_PER_ELEMENT,y=new Float64Array(p.buffer,b);H(y,o),b+=16*p.BYTES_PER_ELEMENT,y=new Float64Array(p.buffer,b),H(y,i),b+=4*p.BYTES_PER_ELEMENT,a&&(y=new Float64Array(p.buffer,b),H(y,a));const w=h,_={isDraco:!1,isLegacy:!1,color:t.layouts.some((e=>e.some((e=>"color"===e.name)))),normal:t.needNormals&&t.layouts.some((e=>e.some((e=>"normalCompressed"===e.name)))),uv0:t.layouts.some((e=>e.some((e=>"uv0"===e.name)))),uvRegion:t.layouts.some((e=>e.some((e=>"uvRegion"===e.name)))),featureIndex:w.featureIndex},v=e.process(n,!!t.obbData,d,m.byteLength,w,_,g,l,u,f,t.normalReferenceFrame);if(e._free(g),e._free(d),v.error.length>0)throw new Error(`i3s.wasm: ${v.error}`);if(v.discarded)return null;const E=v.componentOffsets.length>0?v.componentOffsets.slice():null,P=v.featureIds.length>0?v.featureIds.slice():null,M=v.anchorIds.length>0?Array.from(v.anchorIds):null,S=v.anchors.length>0?Array.from(v.anchors):null,N=v.interleavedVertedData.slice().buffer,L=v.indicesType===s.Int16?new Uint16Array(v.indices.buffer,v.indices.byteOffset,v.indices.byteLength/2).slice():new Uint32Array(v.indices.buffer,v.indices.byteOffset,v.indices.byteLength/4).slice(),I=v.positions.slice(),{buffer:C,byteOffset:O,byteLength:R}=v.positionIndices,U=v.positionIndicesType===s.Int16?new Uint16Array(C,O,R/2).slice():new Uint32Array(C,O,R/4).slice(),j=new A(t.layouts[0],N,L,v.hasColors,v.hasModifications,{data:I,indices:U});return P&&r.push(P.buffer),E&&r.push(E.buffer),r.push(N),r.push(L.buffer),r.push(I.buffer),r.push(U.buffer),new k(E,P,M,S,j,o,v.obb)}function B(e){return 0===e?g.Unmodified:1===e?g.PotentiallyModified:2===e?g.Culled:g.Unknown}function x(e){if(!R)return;const{context:t,buffer:r}=e,s=R._malloc(r.byteLength),n=r.byteLength/Float64Array.BYTES_PER_ELEMENT,o=new Float64Array(R.HEAPU8.buffer,s,n),i=new Float64Array(r);o.set(i),R.filterOBBs(t,s,n),i.set(o),R._free(s)}function F(e){R&&0===R.destroy(e)&&(R=null)}function H(e,t){for(let r=0;r<t.length;++r)e[r]=t[r]}async function T(){R||await $()}function $(){return R?Promise.resolve(R):(O||(O=(f||(f=new Promise((e=>r.e(2980).then(r.bind(r,82980)).then((e=>e.i)).then((({default:t})=>{const r=t({locateFile:u,onRuntimeInitialized:()=>e(r)});delete r.then})))).catch((e=>{throw e}))),f).then((e=>(R=e,O=null,R)))),O)}v.B,new w.A({deallocator:null}),(0,_.vt)(),r(91829),r(97937),r(4654),(y=d||(d={}))[y.Unmodified=0]="Unmodified",y[y.Culled=1]="Culled",y[y.NotChecked=2]="NotChecked",function(e){e[e.Unmodified=0]="Unmodified",e[e.PotentiallyModified=1]="PotentiallyModified",e[e.Culled=2]="Culled",e[e.Unknown=3]="Unknown",e[e.NotChecked=4]="NotChecked"}(g||(g={})),function(e){e[e.Unknown=0]="Unknown",e[e.Uncached=1]="Uncached",e[e.Cached=2]="Cached"}(m||(m={})),function(e){e[e.None=0]="None",e[e.MaxScreenThreshold=1]="MaxScreenThreshold",e[e.ScreenSpaceRelative=2]="ScreenSpaceRelative",e[e.RemovedFeatureDiameter=3]="RemovedFeatureDiameter",e[e.DistanceRangeFromDefaultCamera=4]="DistanceRangeFromDefaultCamera"}(p||(p={})),function(e){e[e.Hole=0]="Hole",e[e.Leaf=1]="Leaf"}(b||(b={}));const J={transform:(e,t)=>R&&j(R,e,t),destroy:F}}}]);