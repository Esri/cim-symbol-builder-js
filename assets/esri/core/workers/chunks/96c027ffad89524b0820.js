"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[1423,4475],{88669:(e,t,i)=>{function s(){return[0,0,0,0]}function r(e,t,i,s){return[e,t,i,s]}function n(e,t){return new Float64Array(e,t,4)}function o(){return r(1,1,1,1)}function l(){return r(1,0,0,0)}function a(){return r(0,1,0,0)}function u(){return r(0,0,1,0)}function p(){return r(0,0,0,1)}i.d(t,{a:()=>n,c:()=>s,f:()=>r});const c=o(),d=l(),h=a(),y=u(),b=p();Object.freeze(Object.defineProperty({__proto__:null,ONES:c,UNIT_W:b,UNIT_X:d,UNIT_Y:h,UNIT_Z:y,ZEROS:[0,0,0,0],clone:function(e){return[e[0],e[1],e[2],e[3]]},create:s,createView:n,fromArray:function(e){const t=[0,0,0,0],i=Math.min(4,e.length);for(let s=0;s<i;++s)t[s]=e[s];return t},fromValues:r,ones:o,unitW:p,unitX:l,unitY:a,unitZ:u,zeros:function(){return[0,0,0,0]}},Symbol.toStringTag,{value:"Module"}))},23670:(e,t,i)=>{i.d(t,{G:()=>r});var s=i(20102);let r=class{constructor(e,t,i=""){this.major=e,this.minor=t,this._context=i}lessThan(e,t){return this.major<e||e===this.major&&this.minor<t}since(e,t){return!this.lessThan(e,t)}validate(e){if(this.major!==e.major){const t=this._context&&this._context+":",i=this._context&&this._context+" ";throw new s.Z(t+"unsupported-version",`Required major ${i}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new r(this.major,this.minor,this._context)}static parse(e,t=""){const[i,n]=e.split("."),o=/^\s*\d+\s*$/;if(!i||!i.match||!o.test(i))throw new s.Z((t&&t+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!n||!n.match||!o.test(n))throw new s.Z((t&&t+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const l=parseInt(i,10),a=parseInt(n,10);return new r(l,a,t)}}},12501:(e,t,i)=>{i.d(t,{Z:()=>y});var s,r=i(43697),n=i(22974),o=i(5600),l=(i(75215),i(52011)),a=i(30556),u=i(35671),p=i(5499),c=i(41733),d=i(84475);let h=s=class extends((0,c.W)(p.Z)){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new d.DictionaryLoader(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,i,s){s?.origin||super.writeVisualVariables(e,t,i,s)}clone(){return new s({config:(0,n.d9)(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:(0,n.d9)(this.fieldMap),url:(0,n.d9)(this.url),visualVariables:(0,n.d9)(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await(0,u.io)(e,t,this.scaleExpression);for(const i in this.fieldMap){const s=this.fieldMap[i];t.has(s)&&e.add(s)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};(0,r._)([(0,o.Cb)({type:d.DictionaryLoader})],h.prototype,"_loader",null),(0,r._)([(0,o.Cb)({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],h.prototype,"config",void 0),(0,r._)([(0,o.Cb)({type:Object,json:{write:!0}})],h.prototype,"fieldMap",void 0),(0,r._)([(0,o.Cb)({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],h.prototype,"scaleExpression",void 0),(0,r._)([(0,a.c)("scaleExpression")],h.prototype,"writeData",null),(0,r._)([(0,o.Cb)({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],h.prototype,"scaleExpressionTitle",void 0),(0,r._)([(0,o.Cb)({type:String,json:{write:!0}})],h.prototype,"url",void 0),(0,r._)([(0,a.c)("visualVariables")],h.prototype,"writeVisualVariables",null),h=s=(0,r._)([(0,l.j)("esri.renderers.DictionaryRenderer")],h);const y=h},28756:(e,t,i)=>{i.d(t,{Z:()=>v});var s,r=i(43697),n=i(22303),o=i(22974),l=i(5600),a=(i(75215),i(36030)),u=i(52011),p=i(35671),c=i(5499),d=i(41733),h=i(79887),y=i(96674);i(67676),i(80442);let b=s=class extends y.wq{constructor(){super(...arguments),this.unit=null}clone(){return new s({unit:this.unit})}};(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],b.prototype,"unit",void 0),b=s=(0,r._)([(0,u.j)("esri.renderers.support.DotDensityLegendOptions")],b);const m=b;var f,g=i(20256),_=i(4095);let w=f=class extends((0,d.W)(c.Z)){constructor(e){super(e),this.attributes=null,this.backgroundColor=new n.Z([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new _.Z,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(null==this.referenceScale)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new g.Z({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes?.reduce(((e,t)=>e+t.getAttributeHash()),"")??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new f({attributes:(0,o.d9)(this.attributes),backgroundColor:(0,o.d9)(this.backgroundColor),dotBlendingEnabled:(0,o.d9)(this.dotBlendingEnabled),dotShape:(0,o.d9)(this.dotShape),dotSize:(0,o.d9)(this.dotSize),dotValue:(0,o.d9)(this.dotValue),legendOptions:(0,o.d9)(this.legendOptions),outline:(0,o.d9)(this.outline),referenceScale:(0,o.d9)(this.referenceScale),visualVariables:(0,o.d9)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){const e=this.attributes?.map((e=>e.field||e.valueExpression||""));return`${e}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes??[])i.valueExpression&&await(0,p.io)(e,t,i.valueExpression),i.field&&e.add(i.field)}};(0,r._)([(0,l.Cb)({type:[h.Z],json:{write:!0}})],w.prototype,"attributes",void 0),(0,r._)([(0,l.Cb)({type:n.Z,json:{write:!0}})],w.prototype,"backgroundColor",void 0),(0,r._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],w.prototype,"dotBlendingEnabled",void 0),(0,r._)([(0,l.Cb)({type:String,json:{write:!1}})],w.prototype,"dotShape",void 0),(0,r._)([(0,l.Cb)({type:Number,json:{write:!0}})],w.prototype,"dotSize",void 0),(0,r._)([(0,l.Cb)({type:m,json:{write:!0}})],w.prototype,"legendOptions",void 0),(0,r._)([(0,l.Cb)({type:_.Z,json:{default:null,write:!0}})],w.prototype,"outline",void 0),(0,r._)([(0,l.Cb)({type:Number,json:{write:!0}})],w.prototype,"dotValue",void 0),(0,r._)([(0,l.Cb)({type:Number,json:{write:!0}})],w.prototype,"referenceScale",void 0),(0,r._)([(0,l.Cb)({type:Number,json:{write:!0}})],w.prototype,"seed",void 0),(0,r._)([(0,a.J)({dotDensity:"dot-density"})],w.prototype,"type",void 0),w=f=(0,r._)([(0,u.j)("esri.renderers.DotDensityRenderer")],w);const v=w},92271:(e,t,i)=>{i.d(t,{Z:()=>D});var s,r=i(43697),n=i(22303),o=(i(9790),i(60235)),l=i(22974),a=i(92604),u=i(1654),p=i(62357),c=i(5600),d=i(75215),h=i(1153),y=i(36030),b=i(52011),m=i(35671),f=i(5499),g=i(69237),_=i(96674);i(67676),i(80442);let w=s=class extends _.wq{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new s({color:this.color,ratio:this.ratio})}};(0,r._)([(0,c.Cb)({type:n.Z,json:{type:[d.z8],default:null,write:!0}})],w.prototype,"color",void 0),(0,r._)([(0,c.Cb)({type:Number,json:{write:!0}})],w.prototype,"ratio",void 0),w=s=(0,r._)([(0,b.j)("esri.renderers.support.HeatmapColorStop")],w);const v=w;var x=i(2368);let S=class extends((0,x.J)(_.wq)){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};(0,r._)([(0,c.Cb)({type:String,json:{write:!0}})],S.prototype,"minLabel",void 0),(0,r._)([(0,c.Cb)({type:String,json:{write:!0}})],S.prototype,"maxLabel",void 0),(0,r._)([(0,c.Cb)({type:String,json:{write:!0}})],S.prototype,"title",void 0),S=(0,r._)([(0,b.j)("esri.renderers.support.HeatmapLegendOptions")],S);var C,j=i(73572),I=i(77987);const Z="esri.renderers.HeatmapRenderer",P=a.Z.getLogger(Z);function M(e){if(null!=e){const{maxDensity:t,minDensity:i,radius:s}=e;if(null!=t||null!=i||null!=s){const{blurRadius:t,maxPixelIntensity:i,minPixelIntensity:s,...r}=e;return r}}return e}let E=C=class extends f.Z{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new v({ratio:0,color:new n.Z("rgba(255, 140, 0, 0)")}),new v({ratio:.75,color:new n.Z("rgba(255, 140, 0, 1)")}),new v({ratio:.9,color:new n.Z("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(e){return M(e)}get blurRadius(){return(0,j.AJ)(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",(0,j.k0)(e)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(j.nu**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(e,t){this._warnedProps[e]||"user"===(0,h.vw)(this).getDefaultOrigin()&&(this._warnedProps[e]=!0,(0,u.Os)((()=>{(0,o.Mr)(P,e,{replacement:`${String(t)} (suggested value: ${this._get(t)})`,version:"4.24"})})))}read(e,t){e=M(e),super.read(e,t)}getSymbol(){return new I.Z}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const i=this.field,s=this.valueExpression;i&&"string"==typeof i&&await(0,m.AB)(e,t,i),s&&"string"==typeof s&&await(0,m.io)(e,t,s)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new C({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:(0,l.d9)(this.colorStops),field:this.field,legendOptions:(0,l.d9)(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};(0,r._)([(0,c.Cb)({type:g.Z,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],E.prototype,"authoringInfo",void 0),(0,r._)([(0,c.Cb)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],E.prototype,"blurRadius",null),(0,r._)([(0,c.Cb)({type:[v],json:{write:!0}})],E.prototype,"colorStops",void 0),(0,r._)([(0,c.Cb)({type:String,json:{write:!0}})],E.prototype,"field",void 0),(0,r._)([(0,c.Cb)({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:null==i})},origins:{"web-scene":{write:!1}}}})],E.prototype,"fieldOffset",void 0),(0,r._)([(0,c.Cb)({type:S,json:{write:!0}})],E.prototype,"legendOptions",void 0),(0,r._)([(0,c.Cb)({type:Number,json:{write:!0}})],E.prototype,"maxDensity",void 0),(0,r._)([(0,c.Cb)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],E.prototype,"maxPixelIntensity",null),(0,r._)([(0,c.Cb)({type:Number,json:{write:!0}})],E.prototype,"minDensity",void 0),(0,r._)([(0,c.Cb)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],E.prototype,"minPixelIntensity",null),(0,r._)([(0,c.Cb)({type:Number,cast:p.t_,json:{write:!0}})],E.prototype,"radius",void 0),(0,r._)([(0,c.Cb)({type:Number,range:{min:0},json:{default:0,write:!0}})],E.prototype,"referenceScale",void 0),(0,r._)([(0,y.J)({heatmap:"heatmap"})],E.prototype,"type",void 0),(0,r._)([(0,c.Cb)({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],E.prototype,"valueExpression",void 0),(0,r._)([(0,c.Cb)({type:String})],E.prototype,"valueExpressionTitle",void 0),(0,r._)([(0,c.Cb)({readOnly:!0})],E.prototype,"_pixelIntensityToDensity",null),E=C=(0,r._)([(0,b.j)(Z)],E);const D=E},72529:(e,t,i)=>{i.d(t,{Z:()=>x});var s=i(43697),r=i(22303),n=(i(9790),i(67676)),o=i(2368),l=i(62357),a=i(5600),u=(i(75215),i(80442),i(36030)),p=i(52011),c=i(35671),d=i(5499),h=i(41733),y=i(79887),b=i(96674);let m=class extends((0,o.J)(b.wq)){constructor(){super(...arguments),this.color=new r.Z([0,0,0,0]),this.label=null,this.threshold=0}};(0,s._)([(0,a.Cb)({type:r.Z,json:{write:!0}})],m.prototype,"color",void 0),(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],m.prototype,"label",void 0),(0,s._)([(0,a.Cb)({type:Number,range:{min:0,max:1},json:{write:!0}})],m.prototype,"threshold",void 0),m=(0,s._)([(0,p.j)("esri.renderers.support.OthersCategory")],m);let f=class extends((0,o.J)(b.wq)){constructor(){super(...arguments),this.title=null}};(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],f.prototype,"title",void 0),f=(0,s._)([(0,p.j)("esri.renderers.support.PieChartLegendOptions")],f);var g=i(77987),_=i(20256),w=i(4095);let v=class extends((0,h.W)((0,o.J)(d.Z))){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new r.Z([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new m,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){return new g.Z({size:this.size?this.size/2+(this.outline?.width||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(n.pC)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return this.getSymbols().reduce(((e,t)=>e+JSON.stringify(t)),"")}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes)i.valueExpression&&await(0,c.io)(e,t,i.valueExpression),i.field&&e.add(i.field)}};(0,s._)([(0,a.Cb)({type:[y.Z],json:{write:!0}})],v.prototype,"attributes",void 0),(0,s._)([(0,a.Cb)({type:_.Z,json:{default:null,write:!0}})],v.prototype,"backgroundFillSymbol",void 0),(0,s._)([(0,a.Cb)({type:r.Z,json:{write:!0}})],v.prototype,"defaultColor",void 0),(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],v.prototype,"defaultLabel",void 0),(0,s._)([(0,a.Cb)({type:Number,range:{min:0,max:1},json:{write:!0}})],v.prototype,"holePercentage",void 0),(0,s._)([(0,a.Cb)({type:m,json:{write:!0}})],v.prototype,"othersCategory",void 0),(0,s._)([(0,a.Cb)({type:f,json:{write:!0}})],v.prototype,"legendOptions",void 0),(0,s._)([(0,a.Cb)({type:w.Z,json:{default:null,write:!0}})],v.prototype,"outline",void 0),(0,s._)([(0,a.Cb)({type:Number,cast:l.t_,json:{write:!0}})],v.prototype,"size",void 0),(0,s._)([(0,u.J)({pieChart:"pie-chart"})],v.prototype,"type",void 0),v=(0,s._)([(0,p.j)("esri.renderers.PieChartRenderer")],v);const x=v},84382:(e,t,i)=>{i.d(t,{Z:()=>h});var s,r=i(43697),n=i(22974),o=i(5600),l=(i(75215),i(36030)),a=i(52011),u=i(5499),p=i(41733),c=i(9833);let d=s=class extends((0,p.W)(u.Z)){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map((i=>i.collectRequiredFields(e,t))))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return this.getSymbols().reduce(((e,t)=>e+JSON.stringify(t)),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new s({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:(0,n.d9)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};(0,r._)([(0,o.Cb)({type:String,json:{write:!0}})],d.prototype,"description",void 0),(0,r._)([(0,o.Cb)({type:String,json:{write:!0}})],d.prototype,"label",void 0),(0,r._)([(0,o.Cb)(c.Gn)],d.prototype,"symbol",void 0),(0,r._)([(0,l.J)({simple:"simple"})],d.prototype,"type",void 0),d=s=(0,r._)([(0,a.j)("esri.renderers.SimpleRenderer")],d);const h=d},79887:(e,t,i)=>{i.d(t,{Z:()=>h});var s,r=i(43697),n=i(22303),o=i(96674),l=i(92604),a=i(5600),u=i(90578),p=(i(67676),i(80442),i(52011)),c=i(75215);let d=s=class extends o.wq{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return null==e?e:"function"==typeof e?(l.Z.getLogger(this).error(".field: field must be a string value"),null):(0,c.Zs)(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new s({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};(0,r._)([(0,a.Cb)({type:n.Z,json:{type:[Number],write:!0}})],d.prototype,"color",void 0),(0,r._)([(0,a.Cb)({type:String,json:{write:!0}})],d.prototype,"field",void 0),(0,r._)([(0,u.p)("field")],d.prototype,"castField",null),(0,r._)([(0,a.Cb)({type:String,json:{write:!0}})],d.prototype,"label",void 0),(0,r._)([(0,a.Cb)({type:String,json:{write:!0}})],d.prototype,"valueExpression",void 0),(0,r._)([(0,a.Cb)({type:String,json:{write:!0}})],d.prototype,"valueExpressionTitle",void 0),d=s=(0,r._)([(0,p.j)("esri.renderers.support.AttributeColorInfo")],d);const h=d},84475:(e,t,i)=>{i.r(t),i.d(t,{DictionaryLoader:()=>m});var s=i(22303),r=i(3172),n=i(20102),o=(i(80442),i(92604)),l=i(13867),a=i(95330),u=i(19153),p=i(23670),c=i(99514),d=i(59266),h=i(17386);const y="esri.renderers.support.DictionaryLoader",b={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class m{constructor(e,t,i){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new l.z(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=e,this.config=t,this.fieldMap=i}getSymbolFields(){return this._symbolFields}async getSymbolAsync(e,t){let i;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(t));try{i=await this._dictionaryPromise}catch(e){if((0,a.D_)(e))return this._dictionaryPromise=null,null}const r=this._dictionaryVersion&&this._dictionaryVersion.since(4,0),n={};if(this.fieldMap)for(const t of this._symbolFields){const i=this._getFieldName(this.fieldMap[t]);n[t]=i?r?e.attributes[i]:""+e.attributes[i]:""}let o=null;try{o=i?.(n,t)}catch(e){return null}if(!o||"string"!=typeof o)return null;const l=(0,u.hP)(o).toString(),p=this._symbolCache.get(l);if(p)return p.catch((()=>{this._symbolCache.pop(l)})),p;const c=o.split(";"),d=[],h=[];for(const e of c)if(e)if(e.includes("po:")){const t=e.substr(3).split("|");if(3===t.length){const e=t[0],i=t[1];let r=t[2];if("DashTemplate"===i)r=r.split(" ").map((e=>Number(e)));else if("Color"===i){const e=new s.Z(r).toRgba();r=[e[0],e[1],e[2],255*e[3]]}else r=Number(r);h.push({primitiveName:e,propertyName:i,value:r})}}else if(e.includes("|")){for(const t of e.split("|"))if(this._itemNames.has(t)){d.push(t);break}}else this._itemNames.has(e)&&d.push(e);const y=null==e.geometry||!e.geometry.hasZ&&"point"===e.geometry.type,b=this._cimPartsToCIMSymbol(d,h,y,t);return this._symbolCache.put(l,b,1),b}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void o.Z.getLogger(y).error("no valid URL!");const t=(0,r.default)(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:null!=e?e.signal:null}),[{data:i}]=await Promise.all([t,(0,d.LC)()]);if(!i)throw this._dictionaryPromise=null,new n.Z("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:s,dictionary_version:l,expression:a,itemsNames:u}=i,h=a;let b=!1;l&&(this._dictionaryVersion=p.G.parse(l),b=this._dictionaryVersion.since(4,0)),this._refSymbolUrlTemplate=this.url+"/"+i.cimRefTemplateUrl,this._itemNames=new Set(u),this._symbolFields=s.symbol;const m={};if(this.config){const e=this.config;for(const t in e)m[t]=e[t]}if(s.configuration)for(const e of s.configuration)m.hasOwnProperty(e.name)||(m[e.name]=e.value);const f=[];if(null!=e&&e.fields&&this.fieldMap)for(const t of this._symbolFields){const i=this.fieldMap[t],s=e.fields.filter((e=>e.name.toLowerCase()===i?.toLowerCase()));s.length>0&&f.push({...s[0],type:b?s[0].type:"esriFieldTypeString"})}f.length>0&&(this._fieldIndex=new c.Z(f));const g=(0,d.pp)(h,null!=e?e.spatialReference:null,f,m).then((e=>{const t={scale:0};return(i,s)=>{if(null==e)return null;const r=e.repurposeFeature({geometry:null,attributes:i});return t.scale=null!=s?s.scale??void 0:void 0,e.evaluate({$feature:r,$view:t},e.services)}})).catch((e=>(o.Z.getLogger(y).error("Creating dictinoary expression failed:",e),null)));return this._dictionaryPromise=g,g}async _cimPartsToCIMSymbol(e,t,i,s){const r=new Array(e.length);for(let t=0;t<e.length;t++)r[t]=this._getSymbolPart(e[t],s);const n=await Promise.all(r),o=this.fieldMap;if(o)for(const e of n)f(e,o);return new h.Z({data:this._combineSymbolParts(n,t,i)})}async _getSymbolPart(e,t){if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then((e=>e.data));const i=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,e),s=(0,r.default)(i,{responseType:"json",query:{f:"json"},...t});this._ongoingRequests.set(e,s);try{return(await s).data}catch(t){throw this._ongoingRequests.delete(e),t}}_combineSymbolParts(e,t,i){if(!e||0===e.length)return null;const s={...e[0]};if(e.length>1){s.symbolLayers=[];for(const t of e){const e=t;s.symbolLayers.unshift(...e.symbolLayers)}}return i&&(s.callout=b),{type:"CIMSymbolReference",symbol:s,primitiveOverrides:t}}_getFieldName(e){if(null!==this._fieldIndex){const t=this._fieldIndex.get(e);return t?t.name:e}return e}}function f(e,t){if(!e)return;const i=e.symbolLayers;if(!i)return;let s=i.length;for(;s--;){const e=i[s];e&&!1!==e.enable&&"CIMVectorMarker"===e.type&&g(e,t)}}function g(e,t){const i=e.markerGraphics;if(i)for(const e of i){if(!e)continue;const i=e.symbol;if(i)switch(i.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":f(i,t);break;case"CIMTextSymbol":i.fieldMap=t}}}},73572:(e,t,i)=>{i.d(t,{AJ:()=>o,If:()=>a,QM:()=>l,k0:()=>n,nu:()=>r,wx:()=>u}),i(22021);var s=i(62357);i(98766),i(88669);const r=2.4;function n(e){return(0,s.Wz)(e*r)}function o(e){return(0,s.F2)(e)/r}function l(e,t,i,r){const{radius:n,fieldOffset:o,field:l}=t,u=Math.round((0,s.F2)(n)),p=new Float64Array(i*r);let c,d=Number.NEGATIVE_INFINITY;const h=function(e,t){return null!=e?"string"==typeof t?t=>-1*+t.readAttribute(e):i=>+i.readAttribute(e)+t:e=>1}(l,o),y=new Set;for(const t of e){const e=t.getCursor();for(;e.next();){const t=e.getObjectId();if(y.has(t))continue;y.add(t);const s=e.readLegacyPointGeometry(),n=128;if(s.x<-n||s.x>=i+n||s.y<-n||s.y>r+n)continue;const o=+h(e),l=Math.max(0,Math.round(s.x)-u),b=Math.max(0,Math.round(s.y)-u),m=Math.min(r,Math.round(s.y)+u),f=Math.min(i,Math.round(s.x)+u);for(let e=b;e<m;e++)for(let t=l;t<f;t++){const r=e*i+t,n=a(s.x-t,s.y-e,u);c=p[r]+=n*o,c>d&&(d=c)}}}return{matrix:p.buffer,max:d}}function a(e,t,i){const s=Math.sqrt(e**2+t**2)/i;return s>1?0:3/(Math.PI*i**2)*(1-s**2)**2}function u(e,t){return"function"==typeof e?e:e?"string"==typeof t?t=>-1*+t[e]:i=>+i[e]+t:()=>1}},91423:(e,t,i)=>{i.d(t,{a:()=>a,i:()=>o});var s=i(20941),r=i(63213),n=i(32400);function o(e,t){return a(e,null,t)}const l=(0,r.d)({types:n.A});function a(e,t,i){return e?e&&(e.styleName||e.styleUrl)&&"uniqueValue"!==e.type?(i&&i.messages&&i.messages.push(new s.Z("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:i})),null):l(e,t,i):null}},32400:(e,t,i)=>{i.d(t,{A:()=>c,o:()=>d});var s=i(16050),r=i(12501),n=i(28756),o=i(92271),l=i(72529),a=i(5499),u=i(84382),p=i(81571);const c={key:"type",base:a.Z,typeMap:{heatmap:o.Z,simple:u.Z,"unique-value":p.Z,"class-breaks":s.Z,"dot-density":n.Z,dictionary:r.Z,"pie-chart":l.Z},errorContext:"renderer"},d={key:"type",base:a.Z,typeMap:{simple:u.Z,"unique-value":p.Z,"class-breaks":s.Z,heatmap:o.Z},errorContext:"renderer"}}}]);