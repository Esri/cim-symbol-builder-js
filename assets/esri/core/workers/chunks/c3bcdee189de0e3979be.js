"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[6354],{69540:(e,t,r)=>{r.d(t,{O:()=>u,P:()=>d});var n=r(90237),i=r(69622),a=(r(44208),r(4718)),s=(r(53966),r(97768)),o=r(35666),l=r(88620),c=r(40608);const u=e=>{let t=class extends e{clone(){const e=(0,l.oY)(this);(0,s.Lw)(e,"unable to clone instance of non-accessor class");const t=e.metadata,r=e.store,n={},i=new Map;for(const e in t){const s=t[e],l=r?.originOf(e),c=s.clonable;if(s.readOnly||!1===c||l!==o.Gr.USER&&l!==o.Gr.DEFAULTS&&l!==o.Gr.WEB_MAP&&l!==o.Gr.WEB_SCENE)continue;const u=this[e];let d=null;d="function"==typeof c?c(u):"reference"===c?u:(0,a.TU)(u),null!=u&&null==d||(l===o.Gr.DEFAULTS?i.set(e,d):n[e]=d)}const c=new(0,Object.getPrototypeOf(this).constructor)(n);if(i.size){const e=(0,l.oY)(c)?.store;if(e)for(const[t,r]of i)e.set(t,r,o.Gr.DEFAULTS)}return c}};return t=(0,n._)([(0,c.$)("esri.core.Clonable")],t),t};let d=class extends(u(i.A)){};d=(0,n._)([(0,c.$)("esri.core.Clonable")],d)},95488:(e,t,r)=>{r.d(t,{I:()=>i});var n=r(11406);class i extends n.T{notify(){const e=this._observers;if(e&&e.length>0){const t=e.slice();for(const e of t)e.onInvalidated(),e.onCommitted()}}}},60999:(e,t,r)=>{r.d(t,{DZ:()=>p,Ke:()=>m,Tj:()=>u,UT:()=>f,jJ:()=>c});var n=r(90237),i=r(69622),a=r(97768),s=r(74887),o=r(10107),l=r(40608);function c(e,t,r){return(0,s.Lx)(e.map(((e,n)=>t.apply(r,[e,n]))))}async function u(e,t,r){return(await(0,s.Lx)(e.map(((e,n)=>t.apply(r,[e,n]))))).map((e=>e.value))}function d(e){return{ok:!0,value:e}}function h(e){return{ok:!1,error:e}}async function m(e){if(null==e)return{ok:!1,error:new Error("no promise provided")};try{return d(await e)}catch(e){return h(e)}}async function p(e){try{return d(await e)}catch(e){return(0,s.QP)(e),h(e)}}function f(e,t){return new g(e,t)}let g=class extends i.A{get value(){return null!=(e=this._result)&&!0===e.ok?e.value:null;var e}get error(){return null!=(e=this._result)&&!1===e.ok?e.error:null;var e}get finished(){return null!=this._result}constructor(e,t){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=(0,a.DC)(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then((e=>{this._result=d(e),this._cleanup()}),(e=>{this._result=h(e),this._cleanup()})),this._abortHandle=(0,s.u7)(t,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=(0,a.xt)(this._abortHandle),this._abortController=null}};(0,n._)([(0,o.MZ)()],g.prototype,"value",null),(0,n._)([(0,o.MZ)()],g.prototype,"error",null),(0,n._)([(0,o.MZ)()],g.prototype,"finished",null),(0,n._)([(0,o.MZ)()],g.prototype,"promise",void 0),(0,n._)([(0,o.MZ)()],g.prototype,"_result",void 0),g=(0,n._)([(0,l.$)("esri.core.asyncUtils.ReactiveTask")],g)},51624:(e,t,r)=>{r.d(t,{A:()=>u});var n,i,a=r(44208),s=r(93687);(i=n||(n={}))[i.varint=0]="varint",i[i.fixed64=1]="fixed64",i[i.delimited=2]="delimited",i[i.fixed32=5]="fixed32",i[i.unknown=99]="unknown";const o=4294967296,l=new TextDecoder("utf-8"),c=(0,a.A)("safari")||(0,a.A)("ios")?6:(0,a.A)("ff")?12:32;class u{constructor(e,t,r=0,i=(e?e.byteLength:0)){this._tag=0,this._dataType=n.unknown,this._init(e,t,r,i)}_init(e,t,r,n){this._data=e,this._dataView=t,this._pos=r,this._end=n}asUnsafe(){return this}clone(){return new u(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(e){this._pos=e}nextTag(e){for(;;){if(this._pos===this._end)return!1;const t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let e=4294967295;if(e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128)return e;if(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128)return e;if(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128)return e;if(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128)return e;if(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128)return e;throw new Error("Varint overflow")}getUInt64(){return this._decodeVarint()}getSInt32(){const e=this.getUInt32();return e>>>1^-(1&e)}getSInt64(){return this._decodeSVarint()}getBool(){const e=0!==this._data[this._pos];return this._skip(1),e}getEnum(){return this._decodeVarint()}getFixed64(){const e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+e.getUint32(t+4,!0)*o;return this._skip(8),r}getSFixed64(){const e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+e.getInt32(t+4,!0)*o;return this._skip(8),r}getDouble(){const e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}getFixed32(){const e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}getSFixed32(){const e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}getFloat(){const e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}getString(){const e=this._getLength(),t=this._pos,r=this._toString(this._data,t,t+e);return this._skip(e),r}getBytes(){const e=this._getLength(),t=this._pos,r=this._toBytes(this._data,t,t+e);return this._skip(e),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(e,t,r,n){const i=this.getMessage(),a=e(i,t,r,n);return i.release(),a}processMessage(e){const t=this.getMessage(),r=e(t);return t.release(),r}getMessage(){const e=this._getLength(),t=u.pool.acquire();return t._init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),t}release(){u.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case n.varint:this._decodeVarint();break;case n.fixed64:this._skip(8);break;case n.delimited:this._skip(this._getLength());break;case n.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(e){this._skip(e)}_skip(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}_decodeVarint(){const e=this._data;let t=this._pos,r=0,n=0;if(this._end-t>=10)do{if(n=e[t++],r|=127&n,!(128&n))break;if(n=e[t++],r|=(127&n)<<7,!(128&n))break;if(n=e[t++],r|=(127&n)<<14,!(128&n))break;if(n=e[t++],r|=(127&n)<<21,!(128&n))break;if(n=e[t++],r+=268435456*(127&n),!(128&n))break;if(n=e[t++],r+=34359738368*(127&n),!(128&n))break;if(n=e[t++],r+=4398046511104*(127&n),!(128&n))break;if(n=e[t++],r+=562949953421312*(127&n),!(128&n))break;if(n=e[t++],r+=72057594037927940*(127&n),!(128&n))break;if(n=e[t++],r+=0x8000000000000000*(127&n),!(128&n))break;throw new Error("Varint too long!")}while(0);else{let i=1;for(;t!==this._end&&(n=e[t],128&n);)++t,r+=(127&n)*i,i*=128;if(t===this._end)throw new Error("Varint overrun!");++t,r+=n*i}return this._pos=t,r}_decodeSVarint(){const e=this._data;let t,r=0,n=0;const i=1&e[this._pos];if(n=e[this._pos++],r|=127&n,!(128&n))return i?-(r+1)/2:r/2;if(n=e[this._pos++],r|=(127&n)<<7,!(128&n))return i?-(r+1)/2:r/2;if(n=e[this._pos++],r|=(127&n)<<14,!(128&n))return i?-(r+1)/2:r/2;if(n=e[this._pos++],r|=(127&n)<<21,!(128&n))return i?-(r+1)/2:r/2;if(n=e[this._pos++],r+=268435456*(127&n),!(128&n))return i?-(r+1)/2:r/2;if(n=e[this._pos++],r+=34359738368*(127&n),!(128&n))return i?-(r+1)/2:r/2;if(n=e[this._pos++],r+=4398046511104*(127&n),!(128&n))return i?-(r+1)/2:r/2;if(t=BigInt(r),n=e[this._pos++],t+=0x2000000000000n*BigInt(127&n),!(128&n))return Number(i?-(t+1n)/2n:t/2n);if(n=e[this._pos++],t+=0x100000000000000n*BigInt(127&n),!(128&n))return Number(i?-(t+1n)/2n:t/2n);if(n=e[this._pos++],t+=0x8000000000000000n*BigInt(127&n),!(128&n))return Number(i?-(t+1n)/2n:t/2n);throw new Error("Varint too long!")}_getLength(){if(this._dataType!==n.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(e,t,r){if((r=Math.min(this._end,r))-t>c){const n=e.subarray(t,r);return l.decode(n)}let n="",i="";for(let a=t;a<r;++a){const t=e[a];128&t?i+="%"+t.toString(16):(n+=decodeURIComponent(i)+String.fromCharCode(t),i="")}return i.length&&(n+=decodeURIComponent(i)),n}_toBytes(e,t,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,t,r-t)}}u.pool=new s.A(u,void 0,(e=>{e._data=null,e._dataView=null}))},88930:(e,t,r)=>{r.d(t,{S1:()=>o,lL:()=>c,mi:()=>l,t:()=>u,vf:()=>s});var n=r(97770),i=r(56400),a=r(96285);const s={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function o(e,t,r,s=i.qU){const o=new a.oh((0,n.wj)(s)),l=a.c9.fromJSDate(e,{zone:o}),c="decades"===r||"centuries"===r?"year":d(r);return"decades"===r&&(t*=10),"centuries"===r&&(t*=100),l.plus({[c]:t}).toJSDate()}function l(e,t,r="milliseconds"){const n=e.getTime(),i=u(t,r,"milliseconds");return new Date(n+i)}function c(e,t,r=i.qU){const s=new a.oh((0,n.wj)(r)),o=a.c9.fromJSDate(e,{zone:s});if("decades"===t||"centuries"===t){const e=o.startOf("year"),{year:r}=e,n=r-r%("decades"===t?10:100);return e.set({year:n}).toJSDate()}const l=d(t);return o.startOf(l).toJSDate()}function u(e,t,r){return 0===e?0:e*s[t]/s[r]}function d(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}},59456:(e,t,r)=>{r.d(t,{yR:()=>u});var n=r(56507),i=r(5443),a=r(91075),s=r(48526),o=r(86738),l=r(39829),c=r(82799);r(16930),r(50498),r(65864);const u={base:a.A,key:"type",typeMap:{extent:i.A,multipoint:s.A,point:o.A,polyline:c.A,polygon:l.A}};(0,n.aq)(u)},65806:(e,t,r)=>{r.d(t,{g:()=>s});var n=r(51850),i=r(57251),a=r(9762);function s(e,t,r,n){if((0,i.canProjectWithoutEngine)(e.spatialReference,r)){o[0]=e.x,o[1]=e.y;const i=e.z;return o[2]=i??n??0,(0,a.projectBuffer)(o,e.spatialReference,0,t,r,0,1)}const s=(0,i.tryProjectWithZConversion)(e,r);return!!s&&(t[0]=s?.x,t[1]=s?.y,t[2]=s?.z??n??0,!0)}const o=(0,n.vt)()},27993:(e,t,r)=>{r.d(t,{F:()=>a}),r(57251);var n=r(16930),i=r(65806);function a(e,t,r,n,a){return!(null==t||null==n||e.length<2)&&(s.x=e[0],s.y=e[1],s.z=e[2],s.spatialReference=t,(0,i.g)(s,r,n,a))}const s=function(e,t,r,n){return{x:0,y:0,z:0,hasZ:!0,hasM:!1,spatialReference:n,type:"point"}}(0,0,0,n.A.WGS84)},65864:(e,t,r)=>{r.d(t,{$B:()=>f,Bi:()=>m,Rg:()=>h,U9:()=>u,ZC:()=>c,fT:()=>d,rS:()=>p,xD:()=>y});var n=r(5443),i=r(91075),a=r(48526),s=r(86738),o=r(39829),l=r(82799);function c(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}function u(e){return void 0!==e.points}function d(e){return void 0!==e.x&&void 0!==e.y}function h(e){return void 0!==e.paths}function m(e){return void 0!==e.rings}function p(e){return null==e?null:e instanceof i.A?e:d(e)?s.A.fromJSON(e):h(e)?l.A.fromJSON(e):m(e)?o.A.fromJSON(e):u(e)?a.A.fromJSON(e):c(e)?n.A.fromJSON(e):null}function f(e){return e?d(e)?"esriGeometryPoint":h(e)?"esriGeometryPolyline":m(e)?"esriGeometryPolygon":c(e)?"esriGeometryEnvelope":u(e)?"esriGeometryMultipoint":null:null}const g={esriGeometryPoint:s.A,esriGeometryPolyline:l.A,esriGeometryPolygon:o.A,esriGeometryEnvelope:n.A,esriGeometryMultipoint:a.A};function y(e){return e&&g[e]||null}},17136:(e,t,r)=>{r.d(t,{el:()=>_});var n=r(92602),i=r(49186),a=r(53966),s=r(39829),o=r(82799),l=r(80754),c=r(21325),u=r(28735),d=(r(59456),r(78888)),h=r(65864),m=r(2272),p=r(84952),f=r(92300);const g=()=>a.A.getLogger("esri.geometry.support.normalizeUtils");function y(e){return"polygon"===e[0].type}function T(e){return"polyline"===e[0].type}function S(e,t,r){if(t){const t=function(e,t){if(!(e instanceof o.A||e instanceof s.A)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw g().error(e),new i.A(e)}const r=(0,l.r8)(e),n=[];for(const e of r){const r=[];n.push(r),r.push([e[0][0],e[0][1]]);for(let n=0;n<e.length-1;n++){const i=e[n][0],a=e[n][1],s=e[n+1][0],o=e[n+1][1],l=Math.sqrt((s-i)*(s-i)+(o-a)*(o-a)),c=(o-a)/l,u=(s-i)/l,d=l/t;if(d>1){for(let e=1;e<=d-1;e++){const n=e*t,s=u*n+i,o=c*n+a;r.push([s,o])}const e=(l+Math.floor(d-1)*t)/2,n=u*e+i,s=c*e+a;r.push([n,s])}r.push([s,o])}}return function(e){return"polygon"===e.type}(e)?new s.A({rings:n,spatialReference:e.spatialReference}):new o.A({paths:n,spatialReference:e.spatialReference})}(e,1e6);e=(0,u.ci)(t,!0)}return r&&(e=(0,l.kS)(e,r)),e}function A(e,t,r){if(Array.isArray(e)){const n=e[0];if(n>t){const r=(0,l.kd)(n,t);e[0]=n+r*(-2*t)}else if(n<r){const t=(0,l.kd)(n,r);e[0]=n+t*(-2*r)}}else{const n=e.x;if(n>t){const r=(0,l.kd)(n,t);e=e.clone().offset(r*(-2*t),0)}else if(n<r){const t=(0,l.kd)(n,r);e=e.clone().offset(t*(-2*r),0)}}return e}function b(e,t){let r=-1;for(let n=0;n<t.cutIndexes.length;n++){const i=t.cutIndexes[n],a=t.geometries[n],s=(0,l.r8)(a);for(let e=0;e<s.length;e++){const t=s[e];t.some((r=>{if(r[0]<180)return!0;{let r=0;for(let e=0;e<t.length;e++){const n=t[e][0];r=n>r?n:r}r=Number(r.toFixed(9));const n=-360*(0,l.kd)(r,180);for(let r=0;r<t.length;r++){const t=a.getPoint(e,r);a.setPoint(e,r,t.clone().offset(n,0))}return!0}}))}if(i===r){if(y(e))for(const t of(0,l.r8)(a))e[i]=e[i].addRing(t);else if(T(e))for(const t of(0,l.r8)(a))e[i]=e[i].addPath(t)}else r=i,e[i]=a}return e}async function _(e,t,r){if(!Array.isArray(e))return _([e],t);t&&"string"!=typeof t&&g().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const i="string"==typeof t?t:t?.url??n.A.geometryServiceUrl;let a,y,T,w,E,k,I,M,x=0;const O=[],v=[];for(const t of e)if(null!=t)if(a||(a=t.spatialReference,y=(0,c.Vp)(a),T=a.isWebMercator,k=T?102100:4326,w=l.j7[k].maxX,E=l.j7[k].minX,I=l.j7[k].plus180Line,M=l.j7[k].minus180Line),y)if("mesh"===t.type)v.push(t);else if("point"===t.type)v.push(A(t.clone(),w,E));else if("multipoint"===t.type){const e=t.clone();e.points=e.points.map((e=>A(e,w,E))),v.push(e)}else if("extent"===t.type){const e=t.clone()._normalize(!1,!1,y);v.push(e.rings?new s.A(e):e)}else if(t.extent){const e=t.extent,r=(0,l.kd)(e.xmin,E)*(2*w);let n=0===r?t.clone():(0,l.kS)(t.clone(),r);e.offset(r,0);let{xmin:i,xmax:a}=e;i=Number(i.toFixed(9)),a=Number(a.toFixed(9)),e.intersects(I)&&a!==w?(x=a>x?a:x,n=S(n,T),O.push(n),v.push("cut")):e.intersects(M)&&i!==E?(x=a*(2*w)>x?a*(2*w):x,n=S(n,T,360),O.push(n),v.push("cut")):v.push(n)}else v.push(t.clone());else v.push(t);else v.push(t);let C=(0,l.kd)(x,w),R=-90;const N=C,F=new o.A;for(;C>0;){const e=360*C-180;F.addPath([[e,R],[e,-1*R]]),R*=-1,C--}if(O.length>0&&N>0){const t=b(O,await async function(e,t,r,n){const i=(0,m.Dl)(e),a=t[0].spatialReference,s={...n,responseType:"json",query:{...i.query,f:"json",sr:(0,c.YX)(a),target:JSON.stringify({geometryType:(0,h.$B)(t[0]),geometries:t}),cutter:JSON.stringify(r)}},o=await(0,d.A)(i.path+"/cut",s),{cutIndexes:l,geometries:u=[]}=o.data;return{cutIndexes:l,geometries:u.map((e=>{const t=(0,h.rS)(e);return t.spatialReference=a,t}))}}(i,O,F,r)),n=[],a=[];for(let r=0;r<v.length;r++){const i=v[r];if("cut"!==i)a.push(i);else{const i=t.shift(),s=e[r];null!=s&&"polygon"===s.type&&s.rings&&s.rings.length>1&&i.rings.length>=s.rings.length?(n.push(i),a.push("simplify")):a.push(T?(0,u.Gh)(i):i)}}if(!n.length)return a;const s=await async function(e,t,r){const n="string"==typeof e?(0,p.An)(e):e,i=t[0].spatialReference,a=(0,h.$B)(t[0]),s={...r,query:{...n.query,f:"json",sr:(0,c.YX)(i),geometries:JSON.stringify((0,f.X)(t))}},{data:o}=await(0,d.A)(n.path+"/simplify",s);return(0,f.V)(o.geometries,a,i)}(i,n,r),o=[];for(let e=0;e<a.length;e++){const t=a[e];"simplify"!==t?o.push(t):o.push(T?(0,u.Gh)(s.shift()):s.shift())}return o}const L=[];for(let e=0;e<v.length;e++){const t=v[e];if("cut"!==t)L.push(t);else{const e=O.shift();L.push(!0===T?(0,u.Gh)(e):e)}}return L}},80754:(e,t,r)=>{r.d(t,{j7:()=>s,kS:()=>l,kd:()=>o,r8:()=>c});var n=r(82799),i=r(16930),a=r(65864);const s={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new n.A({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:i.A.WebMercator}),minus180Line:new n.A({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:i.A.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new n.A({paths:[[[180,-180],[180,180]]],spatialReference:i.A.WGS84}),minus180Line:new n.A({paths:[[[-180,-180],[-180,180]]],spatialReference:i.A.WGS84})}};function o(e,t){return Math.ceil((e-t)/(2*t))}function l(e,t){const r=c(e);for(const e of r)for(const r of e)r[0]+=t;return e}function c(e){return(0,a.Bi)(e)?e.rings:e.paths}},62577:(e,t,r)=>{function n(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:null!=e.extent?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null}function i(e){if(function(e){return"lowerLeft"===e.originPosition&&4===e.scale.length&&4===e.translate.length}(e))return e;const{originPosition:t,scale:r,translate:n}=e,i=r[0]??1,a=r[1]??1;return{originPosition:"lowerLeft",scale:[i,"lowerLeft"===t?a:-a,r[2]??1,r[3]??1],translate:[n[0]??0,n[1]??0,n[2]??0,n[3]??0]}}function a({scale:e,translate:t},r){return r*e[0]+t[0]}function s({scale:e,translate:t},r){return r*e[1]+t[1]}function o({scale:e,translate:t},r){return(r??0)*e[2]+t[2]}function l({scale:e,translate:t},r){return r?r*e[3]+t[3]:0}function c(e,t){return e&&t?m:e&&!t?d:!e&&t?h:u}r.d(t,{$X:()=>T,Gy:()=>f,P5:()=>S,Q1:()=>i,SW:()=>g,Tr:()=>y,VV:()=>n}),r(65864);const u=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const n=t[0];let i=a(e,n[0]),o=s(e,n[1]);r[0]=[i,o];const{scale:l,originPosition:c}=e,u=l[0],d="lowerLeft"===c?l[1]:-l[1];for(let e=1;e<t.length;e++){const[n,a]=t[e];i+=u*n,o+=d*a,r[e]=[i,o]}return r},d=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const n=t[0];let i=a(e,n[0]),l=s(e,n[1]);r[0]=[i,l,o(e,n[2])];const{scale:c,originPosition:u}=e,d=c[0],h="lowerLeft"===u?c[1]:-c[1];for(let n=1;n<t.length;n++){const[a,s,c]=t[n];i+=d*a,l+=h*s,r[n]=[i,l,o(e,c)]}return r},h=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const n=t[0];let i=a(e,n[0]),o=s(e,n[1]);r[0]=[i,o,l(e,n[2])];const{scale:c,originPosition:u}=e,d=c[0],h="lowerLeft"===u?c[1]:-c[1];for(let n=1;n<t.length;n++){const[a,s,c]=t[n];i+=d*a,o+=h*s,r[n]=[i,o,l(e,c)]}return r},m=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const n=t[0];let i=a(e,n[0]),c=s(e,n[1]);r[0]=[i,c,o(e,n[2]),l(e,n[3])];const{scale:u,originPosition:d}=e,h=u[0],m="lowerLeft"===d?u[1]:-u[1];for(let n=1;n<t.length;n++){const[a,s,u,d]=t[n];i+=h*a,c+=m*s,r[n]=[i,c,o(e,u),l(e,d)]}return r};function p(e,t,r){const n=new Array(r.length);for(let i=0;i<r.length;i++)n[i]=t(e,r[i]);return n}function f(e,t,r){const n=i(e);return t.x=function({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}(n,r.x),t.y=function({scale:e,translate:t},r){return Math.round((r-t[1])/e[1])}(n,r.y),null!=r.z&&(t.z=function({scale:e,translate:t},r){return Math.round(((r??0)-t[2])/e[2])}(n,r.z)),null!=r.m&&(t.m=function({scale:e,translate:t},r){return r?Math.round((r-t[3])/e[3]):0}(n,r.m)),t}function g(e,t,r,n=r?.hasZ??!1,a=r?.hasM??!1){if(null!=r){const s=i(e);t.points=c(n,a)(s,r.points),t.hasZ=n,t.hasM=a}return t}function y(e,t,r,n=null!=r?.z,c=null!=r?.m){if(null==r)return t;const u=i(e);return t.x=a(u,r.x),t.y=s(u,r.y),n&&(t.z=o(u,r.z)),c&&(t.m=l(u,r.m)),t}function T(e,t,r,n=r?.hasZ??!1,a=r?.hasM??!1){if(null!=r){const s=i(e);t.rings=p(s,c(n,a),r.rings),t.hasZ=n,t.hasM=a}return t}function S(e,t,r,n=r?.hasZ??!1,a=r?.hasM??!1){if(null!=r){const s=i(e);t.paths=p(s,c(n,a),r.paths),t.hasZ=n,t.hasM=a}return t}},50498:(e,t,r)=>{r.d(t,{Y:()=>a,g:()=>i});var n=r(66552);const i=(0,n.O)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),a=(0,n.O)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"})},97770:(e,t,r)=>{r.d(t,{J2:()=>A,Yq:()=>b,_v:()=>g,wj:()=>_});var n=r(66552),i=r(73444),a=r(56400);r(96285),a.n$;const s={year:"numeric",month:"numeric",day:"numeric"},o={year:"numeric",month:"long",day:"numeric"},l={year:"numeric",month:"short",day:"numeric"},c={year:"numeric",month:"long",weekday:"long",day:"numeric"},u={hour:"numeric",minute:"numeric"},d={...u,second:"numeric"},h={hourCycle:"h23"},m={...u,...h},p={...d,...h},f={"short-date":s,"short-date-short-time":{...s,...u},"short-date-short-time-24":{...s,...m},"short-date-long-time":{...s,...d},"short-date-long-time-24":{...s,...p},"short-date-le":s,"short-date-le-short-time":{...s,...u},"short-date-le-short-time-24":{...s,...m},"short-date-le-long-time":{...s,...d},"short-date-le-long-time-24":{...s,...p},"long-month-day-year":o,"long-month-day-year-short-time":{...o,...u},"long-month-day-year-short-time-24":{...o,...m},"long-month-day-year-long-time":{...o,...d},"long-month-day-year-long-time-24":{...o,...p},"day-short-month-year":l,"day-short-month-year-short-time":{...l,...u},"day-short-month-year-short-time-24":{...l,...m},"day-short-month-year-long-time":{...l,...d},"day-short-month-year-long-time-24":{...l,...p},"long-date":c,"long-date-short-time":{...c,...u},"long-date-short-time-24":{...c,...m},"long-date-long-time":{...c,...d},"long-date-long-time-24":{...c,...p},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":u,"long-time":d},g=(0,n.O)()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),y={ar:"ar-u-nu-latn-ca-gregory"};let T=new WeakMap;const S=f["short-date-short-time"];function A(e){return f[e]}function b(e,t=S){return function(e){let t=T.get(e);if(!t){const r=(0,i.JK)(),n=y[r]||r,s=_(e.timeZone??a.qU),o={...e,timeZone:s};t=new Intl.DateTimeFormat(n,o),T.set(e,t)}return t}(t).format(e)}function _(e){switch(e){case a.qU:return a.N5;case a.L5:return a.n$;default:return e}}(0,i.Ml)((()=>{T=new WeakMap}))},73444:(e,t,r)=>{r.d(t,{JK:()=>o,Ml:()=>h,Z0:()=>l,oQ:()=>u});var n=r(36563);let i;const a=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale;function s(){return a??globalThis.navigator?.language??"en"}function o(){return void 0===i&&(i=s()),i}function l(e=o()){const t=/^([a-zA-Z]{2,3})(?:[_-][a-zA-Z0-9]+)*$/.exec(e);return t?.[1].toLowerCase()}const c=[];function u(e){return c.push(e),(0,n.hA)((()=>c.splice(c.indexOf(e),1)))}const d=[];function h(e){return d.push(e),(0,n.hA)((()=>d.splice(d.indexOf(e),1)))}globalThis.addEventListener?.("languagechange",(function(){const e=s();i!==e&&([...d].forEach((t=>t(e))),i=e,[...c].forEach((t=>t(e))))}))},43334:(e,t,r)=>{r.d(t,{N3:()=>a,Om:()=>i});var n=r(92722);class i{constructor(e=null,t={},r,n){this.geometry=e,this.attributes=t,this.centroid=r,this.objectId=n,this.displayId=0,this.geohashX=0,this.geohashY=0}static fromJSON(e,t){const r=e.geometry?n.A.fromJSON(e.geometry):null,a=e.centroid?n.A.fromJSON(e.centroid):null,s=e.attributes[t];return new i(r,e.attributes,a,s)}weakClone(){const e=new i(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}clone(){const e=this.geometry?.clone(),t=new i(e,{...this.attributes},this.centroid?.clone(),this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function a(e){return!!e.geometry?.coords?.length}},58512:(e,t,r)=>{r.d(t,{A:()=>n});class n{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new n;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}}},92722:(e,t,r)=>{r.d(t,{A:()=>n});class n{constructor(e=[],t=[],r=!1){this.lengths=e??[],this.coords=t??[],this.hasIndeterminateRingOrder=r}static fromJSON(e){return new n(e.lengths,e.coords,e.hasIndeterminateRingOrder)}static fromRect(e){const[t,r,i,a]=e,s=i-t,o=a-r;return new n([5],[t,r,s,0,0,o,-s,0,0,-o])}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((e,t)=>e+t))}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];for(let r=0;r<n;r++)e(this.coords[2*(r+t)],this.coords[2*(r+t)+1]);t+=n}}deltaDecode(){const e=this.clone(),{coords:t,lengths:r}=e;let n=0;for(const e of r){for(let r=1;r<e;r++)t[2*(n+r)]+=t[2*(n+r)-2],t[2*(n+r)+1]+=t[2*(n+r)-1];n+=e}return e}clone(e){if(0===this.lengths.length)return new n([],[this.coords[0],this.coords[1]]);const t=2*(0===this.lengths.length?1:this.lengths.reduce(((e,t)=>e+t))),r=this.coords.slice(0,t);return e?(e.set(r),new n(this.lengths,e,this.hasIndeterminateRingOrder)):new n(Array.from(this.lengths),Array.from(r),this.hasIndeterminateRingOrder)}}},20437:(e,t,r)=>{r.d(t,{A:()=>g});var n,i=r(90237),a=r(66552),s=r(25482),o=r(10107),l=r(56507),c=(r(87811),r(44208),r(93223)),u=r(36005),d=r(40608),h=r(72088),m=r(98453);const p=new a.J({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let f=n=class extends s.oY{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch(e){}return r?.value??null}readValueType(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch(e){}return r?p.fromJSON(r.fieldValueType):null}clone(){return new n({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],f.prototype,"alias",void 0),(0,i._)([(0,o.MZ)({type:[String,Number],json:{write:{allowNull:!0}}})],f.prototype,"defaultValue",void 0),(0,i._)([(0,o.MZ)()],f.prototype,"description",void 0),(0,i._)([(0,u.w)("description")],f.prototype,"readDescription",null),(0,i._)([(0,o.MZ)({types:h.gK,json:{read:{reader:h.rS},write:!0}})],f.prototype,"domain",void 0),(0,i._)([(0,o.MZ)({type:Boolean,json:{write:!0}})],f.prototype,"editable",void 0),(0,i._)([(0,o.MZ)({type:l.jz,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],f.prototype,"length",void 0),(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],f.prototype,"name",void 0),(0,i._)([(0,o.MZ)({type:Boolean,json:{write:!0}})],f.prototype,"nullable",void 0),(0,i._)([(0,c.e)(m.m)],f.prototype,"type",void 0),(0,i._)([(0,o.MZ)()],f.prototype,"valueType",void 0),(0,i._)([(0,u.w)("valueType",["description"])],f.prototype,"readValueType",null),(0,i._)([(0,o.MZ)({type:Boolean,json:{read:!1}})],f.prototype,"visible",void 0),f=n=(0,i._)([(0,d.$)("esri.layers.support.Field")],f);const g=f},72088:(e,t,r)=>{r.d(t,{rS:()=>E,gK:()=>w}),r(44208);var n,i=r(90237),a=r(4718),s=r(10107),o=(r(53966),r(93223)),l=r(40608),c=r(25482);r(87811);let u=n=class extends c.oY{constructor(e){super(e),this.name=null,this.code=null}clone(){return new n({name:this.name,code:this.code})}};(0,i._)([(0,s.MZ)({type:String,json:{write:!0}})],u.prototype,"name",void 0),(0,i._)([(0,s.MZ)({type:[String,Number],json:{write:!0}})],u.prototype,"code",void 0),u=n=(0,i._)([(0,l.$)("esri.layers.support.CodedValue")],u);const d=new(r(66552).J)({inherited:"inherited",codedValue:"coded-value",range:"range"});let h=class extends c.oY{constructor(e){super(e),this.name=null,this.type=null}};(0,i._)([(0,s.MZ)({type:String,json:{write:!0}})],h.prototype,"name",void 0),(0,i._)([(0,o.e)(d)],h.prototype,"type",void 0),h=(0,i._)([(0,l.$)("esri.layers.support.Domain")],h);const m=h;var p;let f=p=class extends m{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some((e=>(String(e.code)===r&&(t=e.name),!!t)))}return t}clone(){return new p({codedValues:(0,a.o8)(this.codedValues),name:this.name})}};(0,i._)([(0,s.MZ)({type:[u],json:{write:!0}})],f.prototype,"codedValues",void 0),(0,i._)([(0,o.e)({codedValue:"coded-value"})],f.prototype,"type",void 0),f=p=(0,i._)([(0,l.$)("esri.layers.support.CodedValueDomain")],f);const g=f;var y;r(49186);let T=y=class extends m{constructor(e){super(e),this.type="inherited"}clone(){return new y}};(0,i._)([(0,o.e)({inherited:"inherited"})],T.prototype,"type",void 0),T=y=(0,i._)([(0,l.$)("esri.layers.support.InheritedDomain")],T);const S=T;var A;let b=A=class extends m{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new A({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};(0,i._)([(0,s.MZ)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]}}}})],b.prototype,"maxValue",void 0),(0,i._)([(0,s.MZ)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[0]},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]}}}})],b.prototype,"minValue",void 0),(0,i._)([(0,o.e)({range:"range"})],b.prototype,"type",void 0),b=A=(0,i._)([(0,l.$)("esri.layers.support.RangeDomain")],b);const _=b,w={key:"type",base:m,typeMap:{range:b,"coded-value":g,inherited:S}};function E(e){if(!e?.type)return null;switch(e.type){case"range":return _.fromJSON(e);case"codedValue":return g.fromJSON(e);case"inherited":return S.fromJSON(e)}return null}},98453:(e,t,r)=>{r.d(t,{m:()=>n});const n=new(r(66552).J)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"})},92300:(e,t,r)=>{r.d(t,{V:()=>a,X:()=>i});var n=r(65864);function i(e){return{geometryType:(0,n.$B)(e[0]),geometries:e.map((e=>e.toJSON()))}}function a(e,t,r){const i=(0,n.xD)(t);return e.map((e=>{const t=i.fromJSON(e);return t.spatialReference=r,t}))}},10536:(e,t,r)=>{function n(e){const t={};for(const r in e){if("declaredClass"===r)continue;const i=e[r];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){t[r]=[];for(let e=0;e<i.length;e++)t[r][e]=n(i[e])}else"object"==typeof i?i.toJSON&&(t[r]=JSON.stringify(i)):t[r]=i}return t}r.d(t,{z:()=>n})},53655:(e,t,r)=>{r.d(t,{SH:()=>x,ae:()=>w,cn:()=>T});var n=r(49186),i=r(51624),a=r(92722),s=r(69418);const o=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],l=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],c=["upperLeft","lowerLeft"];function u(e){return e>=o.length?null:o[e]}function d(e){return e>=l.length?null:l[e]}function h(e){return e>=c.length?null:c[e]}function m(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function p(e,t,r){const n=e.asUnsafe(),i=t.createPointGeometry(r);for(;n.next();)switch(n.tag()){case 3:{const e=n.getUInt32(),r=n.pos()+e;let a=0;for(;n.pos()<r;)t.addCoordinatePoint(i,n.getSInt64(),a++);break}default:n.skip()}return i}function f(e,t,r){const n=e.asUnsafe(),i=t.createGeometry(r),a=2+(r.hasZ?1:0)+(r.hasM?1:0);for(;n.next();)switch(n.tag()){case 2:{const e=n.getUInt32(),r=n.pos()+e;let a=0;for(;n.pos()<r;)t.addLength(i,n.getUInt32(),a++);break}case 3:{const e=n.getUInt32(),r=n.pos()+e;let s=0;for(t.allocateCoordinates(i);n.pos()<r;)t.addCoordinate(i,n.getSInt64(),s),s++,s===a&&(s=0);break}default:n.skip()}return i}function g(e){const t=e.asUnsafe(),r=new a.A;let n="esriGeometryPoint";for(;t.next();)switch(t.tag()){case 2:{const e=t.getUInt32(),n=t.pos()+e;for(;t.pos()<n;)r.lengths.push(t.getUInt32());break}case 3:{const e=t.getUInt32(),n=t.pos()+e;for(;t.pos()<n;)r.coords.push(t.getSInt64());break}case 1:n=s.z[t.getEnum()];break;default:t.skip()}return{queryGeometry:r,queryGeometryType:n}}function y(e){const t=e.asUnsafe();for(;t.next();)switch(t.tag()){case 1:return t.getString();case 2:return t.getFloat();case 3:return t.getDouble();case 4:return t.getSInt32();case 5:return t.getUInt32();case 6:return t.getInt64();case 7:return t.getUInt64();case 8:return t.getSInt64();case 9:return t.getBool();default:return t.skip(),null}return null}function T(e){const t=e.asUnsafe(),r={type:u(0)};for(;t.next();)switch(t.tag()){case 1:r.name=t.getString();break;case 2:r.type=u(t.getEnum());break;case 3:r.alias=t.getString();break;case 4:r.sqlType=d(t.getEnum());break;case 5:default:t.skip();break;case 6:r.defaultValue=t.getString()}return r}function S(e){const t={},r=e.asUnsafe();for(;r.next();)switch(r.tag()){case 1:t.name=r.getString();break;case 2:t.isSystemMaintained=r.getBool();break;default:r.skip()}return t}function A(e,t,r,n){const i=t.createFeature(r);let a=0;for(;e.next();)switch(e.tag()){case 1:{const t=n[a++].name;i.attributes[t]=e.processMessage(y);break}case 2:i.geometry=e.processMessageWithArgs(f,t,r);break;case 4:i.centroid=e.processMessageWithArgs(p,t,r);break;default:e.skip()}return i}function b(e){const t=[1,1,1,1],r=e.asUnsafe();for(;r.next();)switch(r.tag()){case 1:t[0]=r.getDouble();break;case 2:t[1]=r.getDouble();break;case 4:t[2]=r.getDouble();break;case 3:t[3]=r.getDouble();break;default:r.skip()}return t}function _(e){const t=[0,0,0,0],r=e.asUnsafe();for(;r.next();)switch(r.tag()){case 1:t[0]=r.getDouble();break;case 2:t[1]=r.getDouble();break;case 4:t[2]=r.getDouble();break;case 3:t[3]=r.getDouble();break;default:r.skip()}return t}function w(e){const t={originPosition:h(0)},r=e.asUnsafe();for(;r.next();)switch(r.tag()){case 1:t.originPosition=h(r.getEnum());break;case 2:t.scale=r.processMessage(b);break;case 3:t.translate=r.processMessage(_);break;default:r.skip()}return t}function E(e){const t={},r=e.asUnsafe();for(;r.next();)switch(r.tag()){case 1:t.shapeAreaFieldName=r.getString();break;case 2:t.shapeLengthFieldName=r.getString();break;case 3:t.units=r.getString();break;default:r.skip()}return t}function k(e,t){const r=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:r.wkid=e.getUInt32();break;case 5:r.wkt=e.getString();break;case 2:r.latestWkid=e.getUInt32();break;case 3:r.vcsWkid=e.getUInt32();break;case 4:r.latestVcsWkid=e.getUInt32();break;default:e.skip()}return r}function I(e,t){const r=t.createFeatureResult(),n=e.asUnsafe();r.geometryType=m(t,0);let i=!1;for(;n.next();)switch(n.tag()){case 1:r.objectIdFieldName=n.getString();break;case 3:r.globalIdFieldName=n.getString();break;case 4:r.geohashFieldName=n.getString();break;case 5:r.geometryProperties=n.processMessage(E);break;case 7:r.geometryType=m(t,n.getEnum());break;case 8:r.spatialReference=n.processMessageWithArgs(k,t);break;case 10:r.hasZ=n.getBool();break;case 11:r.hasM=n.getBool();break;case 12:r.transform=n.processMessage(w);break;case 9:r.exceededTransferLimit=n.getBool();break;case 13:t.addField(r,n.processMessage(T));break;case 15:i||(t.prepareFeatures(r),i=!0),t.addFeature(r,n.processMessageWithArgs(A,t,r,r.fields));break;case 2:r.uniqueIdField=n.processMessage(S);break;default:n.skip()}return t.finishFeatureResult(r),r}function M(e,t){const r={};let n=null;for(;e.next();)switch(e.tag()){case 4:n=e.processMessageWithArgs(g);break;case 1:r.featureResult=e.processMessageWithArgs(I,t);break;default:e.skip()}return null!=n&&r.featureResult&&t.addQueryGeometry(r,n),r}function x(e,t){try{const r=2,n=new i.A(new Uint8Array(e),new DataView(e)),a={};for(;n.next();)n.tag()===r?a.queryResult=n.processMessageWithArgs(M,t):n.skip();return a}catch(e){throw new n.A("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:e})}}},69418:(e,t,r)=>{r.d(t,{S:()=>c,z:()=>l});var n=r(83047),i=r(21325),a=r(43334),s=r(58512),o=r(92722);const l=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class c{constructor(e){this._options=e,this.geometryTypes=l,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new s.A}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!e?.features||!e.hasZ||!this._options.sourceSpatialReference||!e.spatialReference||(0,i.aI)(e.spatialReference,this._options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const t=(0,n.G9)(this._options.sourceSpatialReference)/(0,n.G9)(e.spatialReference);if(1!==t)for(const r of e.features){if(!(0,a.N3)(r))continue;const e=r.geometry.coords;for(let r=2;r<e.length;r+=3)e[r]*=t}}addFeature(e,t){e.features.push(t)}createFeature(){return new a.Om}createSpatialReference(){return{wkid:0}}createGeometry(){return new o.A}addField(e,t){e.fields.push(t)}allocateCoordinates(e){e.coords.length=e.lengths.reduce(((e,t)=>e+t),0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,t){e.coords[this._coordinatePtr++]=t}addCoordinatePoint(e,t){e.coords.push(t)}addLength(e,t){e.lengths.push(t)}addQueryGeometry(e,t){e.queryGeometry=t.queryGeometry,e.queryGeometryType=t.queryGeometryType}createPointGeometry(){return new o.A}}},66208:(e,t,r)=>{r.d(t,{m:()=>i});var n=r(53655);function i(e,t){const r=(0,n.SH)(e,t),i=r.queryResult.featureResult,a=r.queryResult.queryGeometry,s=r.queryResult.queryGeometryType;if(i&&i.features&&i.features.length&&i.objectIdFieldName){const e=i.objectIdFieldName;for(const t of i.features)t.attributes&&(t.objectId=t.attributes[e])}return i&&(i.queryGeometry=a,i.queryGeometryType=s),i}},80893:(e,t,r)=>{r.d(t,{IJ:()=>p,Jf:()=>T,Pk:()=>g,eW:()=>m,gW:()=>y,kS:()=>f});var n=r(78888),i=r(84952),a=r(65864),s=r(17136),o=r(21325),l=r(10536),c=r(66208),u=r(58501);const d="Layer does not support extent calculation.";function h(e,t){const r=e.geometry,n=e.toJSON();delete n.compactGeometryEnabled,delete n.defaultSpatialReferenceEnabled;const i=n;let s,l,c;if(null!=r&&(l=r.spatialReference,c=(0,o.YX)(l),i.geometryType=(0,a.$B)(r),i.geometry=function(e,t){if(t&&"extent"===e.type)return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&"point"===e.type)return`${e.x},${e.y}`;const r=e.toJSON();return delete r.spatialReference,JSON.stringify(r)}(r,e.compactGeometryEnabled),i.inSR=c),n.groupByFieldsForStatistics&&(i.groupByFieldsForStatistics=n.groupByFieldsForStatistics.join(",")),n.objectIds&&(i.objectIds=n.objectIds.join(",")),n.orderByFields&&(i.orderByFields=n.orderByFields.join(",")),!n.outFields||!n.returnDistinctValues&&(t?.returnCountOnly||t?.returnExtentOnly||t?.returnIdsOnly)?delete i.outFields:n.outFields.includes("*")?i.outFields="*":i.outFields=n.outFields.join(","),n.outSR?(i.outSR=(0,o.YX)(n.outSR),s=e.outSpatialReference):r&&(n.returnGeometry||n.returnCentroid)&&(i.outSR=i.inSR,s=l),n.returnGeometry&&delete n.returnGeometry,n.outStatistics&&(i.outStatistics=JSON.stringify(n.outStatistics)),n.fullText&&(i.fullText=JSON.stringify(n.fullText)),n.pixelSize&&(i.pixelSize=JSON.stringify(n.pixelSize)),n.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&null!=l&&null!=e.quantizationParameters?.extent&&l.equals(e.quantizationParameters.extent.spatialReference)&&delete n.quantizationParameters.extent.spatialReference,i.quantizationParameters=JSON.stringify(n.quantizationParameters)),n.parameterValues&&(i.parameterValues=JSON.stringify(n.parameterValues)),n.rangeValues&&(i.rangeValues=JSON.stringify(n.rangeValues)),n.dynamicDataSource&&(i.layer=JSON.stringify({source:n.dynamicDataSource}),delete n.dynamicDataSource),n.timeExtent){const e=n.timeExtent,{start:t,end:r}=e;null==t&&null==r||(i.time=t===r?t:`${t??"null"},${r??"null"}`),delete n.timeExtent}return e.defaultSpatialReferenceEnabled&&null!=l&&null!=s&&l.equals(s)&&(i.defaultSR=i.inSR,delete i.inSR,delete i.outSR),i}async function m(e,t,r,n){const i=null!=t.timeExtent&&t.timeExtent.isEmpty?{data:{features:[]}}:await S(e,t,"json",n);return(0,u.q)(t,r,i.data),i}async function p(e,t,r,n){if(null!=t.timeExtent&&t.timeExtent.isEmpty)return{data:r.createFeatureResult()};const i=await f(e,t,n),a=i;return a.data=(0,c.m)(i.data,r),a}function f(e,t,r){return S(e,t,"pbf",r)}function g(e,t,r){return null!=t.timeExtent&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):S(e,t,"json",r,{returnIdsOnly:!0})}function y(e,t,r){return null!=t.timeExtent&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):S(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})}async function T(e,t,r){if(null!=t.timeExtent&&t.timeExtent.isEmpty)return{data:{count:0,extent:null}};const n=await S(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}),i=n.data;if(i.hasOwnProperty("extent"))return n;if(i.features)throw new Error(d);if(i.hasOwnProperty("count"))throw new Error(d);return n}async function S(e,t,r,a={},o={}){const c="string"==typeof e?(0,i.An)(e):e,u=t.geometry?[t.geometry]:[],d=await(0,s.el)(u,null,{signal:a.signal}),m=d?.[0];null!=m&&((t=t.clone()).geometry=m);const p=(0,l.z)({...c.query,f:r,...o,...h(t,o)});return(0,n.A)((0,i.fj)(c.path,(f=o,null==t.formatOf3DObjects||f.returnCountOnly||f.returnExtentOnly||f.returnIdsOnly?"query":"query3d")),{...a,responseType:"pbf"===r?"array-buffer":"json",query:{...p,...a.query}});var f}},58501:(e,t,r)=>{r.d(t,{q:()=>i});var n=r(62815);function i(e,t,r){if(!r?.features||!r.hasZ)return;const i=(0,n.N)(r.geometryType,t,e.outSpatialReference);if(null!=i)for(const e of r.features)i(e.geometry)}},2272:(e,t,r)=>{r.d(t,{Dl:()=>s,jV:()=>a,lF:()=>o}),r(92602),r(70333);var n=r(4718),i=r(84952);function a(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function s(e){return"string"==typeof e?(0,i.An)(e):(0,n.o8)(e)}function o(e,t,r){const n={};for(const i in e){if("declaredClass"===i)continue;const a=e[i];if(null!=a&&"function"!=typeof a)if(Array.isArray(a))n[i]=a.map((e=>o(e)));else if("object"==typeof a)if(a.toJSON){const e=a.toJSON(r?.[i]);n[i]=t?e:JSON.stringify(e)}else n[i]=t?a:JSON.stringify(a);else n[i]=a}return n}r(926)},79677:(e,t,r)=>{r.d(t,{A:()=>m});var n,i=r(90237),a=r(25482),s=r(88930),o=r(10107),l=(r(44208),r(53966),r(87811),r(36005)),c=r(40608),u=r(43937),d=r(56400);let h=n=class extends a.oY{static get allTime(){return p}static get empty(){return f}static fromArray(e){return new n({start:null!=e[0]?new Date(e[0]):e[0],end:null!=e[1]?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?.getTime()??null}get isAllTime(){return this.equals(n.allTime)}get isEmpty(){return this.equals(n.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?.getTime()??null}clone(){return new n({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=this.start?.getTime()??this.start,r=this.end?.getTime()??this.end,n=e.start?.getTime()??e.start,i=e.end?.getTime()??e.end;return t===n&&r===i}expandTo(e,t=d.qU){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=(0,s.lL)(r,e,t));let i=this.end;if(i){const r=(0,s.lL)(i,e,t);i=i.getTime()===r.getTime()?r:(0,s.S1)(r,1,e,t)}return new n({start:r,end:i})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return n.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=this.start?.getTime()??-1/0,r=this.end?.getTime()??1/0,i=e.start?.getTime()??-1/0,a=e.end?.getTime()??1/0;let s,o;return i>=t&&i<=r?s=i:t>=i&&t<=a&&(s=t),r>=i&&r<=a?o=r:a>=t&&a<=r&&(o=a),null==s||null==o||isNaN(s)||isNaN(o)?n.empty:new n({start:s===-1/0?null:new Date(s),end:o===1/0?null:new Date(o)})}offset(e,t,r=d.qU){if(this.isEmpty||this.isAllTime)return this.clone();const i=new n,{start:a,end:o}=this;return null!=a&&(i.start=(0,s.S1)(a,e,t,r)),null!=o&&(i.end=(0,s.S1)(o,e,t,r)),i}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return p.clone();const t=null!=this.start&&null!=e.start?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=null!=this.end&&null!=e.end?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new n({start:t,end:r})}};(0,i._)([(0,o.MZ)({type:Date,json:{write:{allowNull:!0}}})],h.prototype,"end",void 0),(0,i._)([(0,l.w)("end")],h.prototype,"readEnd",null),(0,i._)([(0,u.K)("end")],h.prototype,"writeEnd",null),(0,i._)([(0,o.MZ)({readOnly:!0,json:{read:!1}})],h.prototype,"isAllTime",null),(0,i._)([(0,o.MZ)({readOnly:!0,json:{read:!1}})],h.prototype,"isEmpty",null),(0,i._)([(0,o.MZ)({type:Date,json:{write:{allowNull:!0}}})],h.prototype,"start",void 0),(0,i._)([(0,l.w)("start")],h.prototype,"readStart",null),(0,i._)([(0,u.K)("start")],h.prototype,"writeStart",null),h=n=(0,i._)([(0,c.$)("esri.time.TimeExtent")],h);const m=h,p=new h,f=new h({start:void 0,end:void 0})},56400:(e,t,r)=>{r.d(t,{ZS:()=>u,wr:()=>d,qU:()=>a,N5:()=>l,P6:()=>c,L5:()=>s,n$:()=>o});const n=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);var i=r(96285);const a="system",s="unknown",o="UTC",l=Intl.DateTimeFormat().resolvedOptions().timeZone;function c(e,t=!1){return{json:{read:{source:e,reader:(t,r)=>r[e]?u(r[e]):null},write:!!t&&{allowNull:!0,writer(t,r){r[e]=t?function(e){return{timeZoneIANA:e}}(t):null}}}}}function u(e,t=a){return e?function(e){return"timeZoneIANA"in e}(e)?e.timeZoneIANA:function(e,t=a){if(!e||!n.has(e.timeZone))return t;const r=n.get(e.timeZone);return function(e){return e.startsWith("UTC")}(e.timeZone)||e.respectsDaylightSaving?r:function(e){const t=i.c9.local().setZone(e),r=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return 0===r?"Etc/UTC":`Etc/GMT${i.mQ.instance(-r).formatOffset(0,"narrow")}`}(r)}(e,t):t}function d(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),r=new Set(Intl.supportedValuesOf("timeZone").map((e=>e.toLowerCase())));return e===a||e===s||t.has(e.toLowerCase())||r.has(e.toLowerCase())}},19874:(e,t,r)=>{r.r(t),r.d(t,{default:()=>R});var n=r(90237),i=(r(59456),r(69622)),a=r(60999),s=r(74887),o=(r(53966),r(44208),r(87811),r(49186)),l=r(40608),c=r(61956),u=r(19419),d=r(80893);class h{constructor(e,t){this.descriptor=e,this.pages=t}}var m=r(51624),p=r(62577),f=r(53655);class g{constructor(e){const t=new m.A(new Uint8Array(e),new DataView(e));this._index=function(e){for(;e.next();){if(2===e.tag())return y(e.getMessage());e.skip()}S()}(t),this._reader=t}get featureCount(){return this._index.featureIndices.length}get exceededTransferLimit(){return this._index.exceededTransferLimit}fieldIndex(e){return this._index.fields.find((t=>t.name===e))?.index??-1}readAttribute(e,t){const{featureCount:r,_index:n}=this;if(e<0||e>=r)return;const i=n.fields.length;if(e<0||t>=i)return;const a=n.attributeIndices[e*i+t],s=this._reader;return s.move(a),function(e){const t=e.getLength(),r=e.pos()+t;for(;e.pos()<r&&e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}(s)}readAllCoordinates(e,t=0){const r=this._reader,{transform:n}=this._index,{scale:i,translate:a}=n,[s,o,l]=i,[c,u,d]=a;for(const n of this._index.featureIndices){r.move(n);const i=r.getLength(),a=r.pos()+i;for(;r.pos()<a&&r.next();)switch(r.tag()){case 2:{const n=r.getLength(),i=r.pos()+n;for(;r.pos()<i&&r.next();)3===r.tag()?(r.getUInt32(),e[t++]=c+s*r.getSInt64(),e[t++]=u+o*r.getSInt64(),e[t++]=d+l*r.getSInt64()):r.skip();break}default:r.skip()}}return t}}function y(e){for(;e.next();){if(1===e.tag())return T(e.getMessage());e.skip()}S()}function T(e){let t,r=!1,n=!1,i=0;const a=new Array,s=new Array,o=new Array;for(;e.next();)switch(e.tag()){case 7:0!==e.getEnum()&&S();break;case 9:r=e.getBool()??!1;break;case 12:t=(0,p.Q1)(e.processMessage(f.ae));break;case 13:{const t=e.processMessage(f.cn);t.index=i++,a.push(t);break}case 15:{s.push(e.pos());const t=e.getUInt32(),r=e.pos()+t;for(;e.pos()<r&&e.next();)1===e.tag()?(o.push(e.pos()),e.skip()):e.skip();break}case 10:n=e.getBool()??!1;break;default:e.skip()}return null!=t&&n||S(),{transform:t,exceededTransferLimit:r,fields:a,featureIndices:s,attributeIndices:o}}function S(){const e=new o.A("pbf-parsing-failed","Error while parsing PBF",new Error);throw console.error(e),e}class A{constructor(e,t,r,n,i){this.spatialReference=e,this.url=r,this.objectIdField=n,this.capabilities=i;const{supportsMaxRecordCountFactor:a,maxRecordCount:s}=this.capabilities.query,o=s??8e3,l=(a?4:null)??1,c=o*l;this._pageSize=Math.min(8e3,c);const u=t.clone();u.cacheHint=!0,u.resultType="tile",u.outSpatialReference=e,u.returnGeometry=!0,u.returnZ=!0,u.maxRecordCountFactor=l,u.num=o,u.outFields=[n],this._baseQuery=u}async fetch(e,t){const{spatialReference:r}=this,n=(0,u.w1)(e.extent,r),i=this._baseQuery.clone();i.geometry=n;const a=new Array;let o=0,l=!1,c=1;for(;!l;){const e=[];for(let r=0;r<c;++r)e.push(this._fetchPage(i,o++,t));const r=await Promise.all(e);(0,s.Te)(t);for(const e of r){const t=0!==e.featureCount;l||=!e.exceededTransferLimit||!t,t&&a.push(e)}c=Math.min(c+1,4)}return new h(e,a)}async _fetchPage(e,t,r){const n=e.clone();n.start=t*this._pageSize;const i=(await(0,d.kS)(this.url,n,{signal:r})).data;return(0,s.Te)(r),new g(i)}}var b=r(51850),_=r(9762),w=r(27993);class E{constructor(e,t,r){this.objectIdField=e,this.spatialReference=t,this.renderSpatialReference=r}process(e){const{pages:t}=e;if(0===t.length)return null;const r=t.reduce(((e,{featureCount:t})=>e+t),0);if(0===r)return null;const n=this.objectIdField,i=this.spatialReference,a=this.renderSpatialReference,s=new Float64Array(3*r),o=new Uint32Array(r);let l=0;for(const e of t){l=e.readAllCoordinates(s,l);const t=e.fieldIndex(n);if(t<0)throw new Error("Failed to find object id field");for(let n=0;n<r;++n)o[n]=e.readAttribute(n,t)}const c=new Float64Array(s.length);if(!(0,_.projectBuffer)(s,i,0,c,a,0,r))throw new Error("Failed to project coordinates");const d=e.descriptor.extent,h=(0,u.gX)(d),m=(0,b.vt)();return(0,w.F)([h[0],h[1],0],i,m,a),{numFeatures:r,coordinates:c,objectIds:o,tileId:e.descriptor.id,localOrigin:m}}}class k{constructor(){this.counter=0}generate(e=""){return`${e}${this.counter++}`}}var I=r(46540);class M{constructor(){this.idGenerator=new k,this.commands=[],this.transferables=new Set}createMaterial(){const e=this.idGenerator.generate("material");return this.commands.push({id:"create-material",materialId:e}),e}createAttribute(e,t,r,n){return this.transferables.add(e.buffer),this.transferables.add(t.buffer),{data:e,indices:t,size:r,exclusive:n}}createRenderGeometry(e,t,r,n){this.commands.push({id:"create-rendergeometry",contentId:e,attributes:t,localOrigin:r,materialId:n})}destroyRenderGeometry(e){this.commands.push({id:"destroy-rendergeometry",contentId:e})}dispatch(){const e={commands:this.commands,transferList:Array.from(this.transferables)};return this._clearCommandBuffer(),e}_clearCommandBuffer(){this.commands=[],this.transferables.clear()}}let x=class extends i.A{constructor(){super(),this.materialId=null}async remove(e,t){t.destroyRenderGeometry(e)}async render(e,t){null==this.materialId&&(this.materialId=t.createMaterial());const r=e.numFeatures,n=new Float64Array([0,0,1]),i=new Float64Array([255,255,255,255]),a=new Float64Array([24,24]),s=new Float64Array([0,0,0,1]),o=new Float64Array([0,0]),l=new Float64Array([0]),c=new Uint32Array(r);for(let e=0;e<r;++e)c[e]=e;const u=new Uint32Array(r);for(let e=0;e<r;++e)u[e]=0;const d=[[I.r.POSITION,t.createAttribute(e.coordinates,c,3,!0)],[I.r.NORMAL,t.createAttribute(n,u,3,!0)],[I.r.UV0,t.createAttribute(o,u,2,!0)],[I.r.COLOR,t.createAttribute(i,u,4,!0)],[I.r.ROTATION,t.createAttribute(l,u,1,!0)],[I.r.SIZE,t.createAttribute(a,u,2,!0)],[I.r.CENTEROFFSETANDDISTANCE,t.createAttribute(s,u,4,!0)]];t.createRenderGeometry(e.tileId,d,e.localOrigin,this.materialId)}};x=(0,n._)([(0,l.$)("esri.views.3d.layers.graphics.pipeline.symbolization.TestSymbol")],x);class O{constructor(){this._testSymbol=new x}async remove(e,t){this._testSymbol.remove(e,t)}async symbolize(e,t){this._testSymbol.render(e,t)}}var v=r(16930);let C=class extends i.A{constructor(){super(...arguments),this.remoteClient=null,this._pendingTiles=new Map,this._loadedTiles=new Map,this._fetcher=null,this._processor=null,this._symbolizer=null,this._renderer=null}destroy(){for(const e of this._pendingTiles.values())e.abort();this._pendingTiles.clear(),this._loadedTiles.clear()}setup({spatialReference:e,renderSpatialReference:t,baseQuery:r,url:n,objectIdField:i,capabilities:a}){const s=v.A.fromJSON(e);this._fetcher=new A(s,c.A.fromJSON(r),n,i,a),this._processor=new E(i,s,v.A.fromJSON(t)),this._symbolizer=new O,this._renderer=new M}async onTileTreeChange(e){const{added:t,removed:r}=e;for(const e of r){this._loadedTiles.delete(e);const t=this._pendingTiles.get(e);t?.abort(),this._pendingTiles.delete(e)}for(const e of t){const t=this._pendingTiles.get(e.id);t?.abort(),this._pendingTiles.set(e.id,(0,a.UT)((t=>this._addTile(e,t))))}await this._removeTiles(r)}async _addTile(e,t){const r=await this._fetcher.fetch(e,t);(0,s.Te)(t);const n=this._processor.process(r);if(null==n)return void this._pendingTiles.delete(e.id);await this._symbolizer.symbolize(n,this._renderer);const{commands:i,transferList:a}=this._renderer.dispatch();await this.remoteClient.invoke("dispatchRenderCommands",i,{signal:t,transferList:a}),this._pendingTiles.delete(e.id),this._loadedTiles.set(e.id,r)}async _removeTiles(e){for(const t of e)await this._symbolizer.remove(t,this._renderer);const{commands:t,transferList:r}=this._renderer.dispatch();await this.remoteClient.invoke("dispatchRenderCommands",t,{transferList:r})}};C=(0,n._)([(0,l.$)("esri.views.3d.layers.graphics.pipeline.Feature3DPipelineWorker")],C);const R=C},46540:(e,t,r)=>{var n;r.d(t,{r:()=>n}),function(e){e.POSITION="position",e.NORMAL="normal",e.NORMALCOMPRESSED="normalCompressed",e.UV0="uv0",e.COLOR="color",e.SYMBOLCOLOR="symbolColor",e.SIZE="size",e.ROTATION="rotation",e.TANGENT="tangent",e.OFFSET="offset",e.PERSPECTIVEDIVIDE="perspectiveDivide",e.CENTEROFFSETANDDISTANCE="centerOffsetAndDistance",e.LENGTH="length",e.PREVPOSITION="prevPosition",e.NEXTPOSITION="nextPosition",e.SUBDIVISIONFACTOR="subdivisionFactor",e.COLORFEATUREATTRIBUTE="colorFeatureAttribute",e.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",e.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",e.DISTANCETOSTART="distanceToStart",e.UVMAPSPACE="uvMapSpace",e.BOUNDINGRECT="boundingRect",e.UVREGION="uvRegion",e.PROFILERIGHT="profileRight",e.PROFILEUP="profileUp",e.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",e.FEATUREVALUE="featureValue",e.INSTANCEMODELORIGINHI="instanceModelOriginHi",e.INSTANCEMODELORIGINLO="instanceModelOriginLo",e.INSTANCEMODEL="instanceModel",e.INSTANCEMODELNORMAL="instanceModelNormal",e.INSTANCECOLOR="instanceColor",e.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",e.LOCALTRANSFORM="localTransform",e.GLOBALTRANSFORM="globalTransform",e.BOUNDINGSPHERE="boundingSphere",e.MODELORIGIN="modelOrigin",e.MODELSCALEFACTORS="modelScaleFactors",e.FEATUREATTRIBUTE="featureAttribute",e.STATE="state",e.LODLEVEL="lodLevel",e.POSITION0="position0",e.POSITION1="position1",e.NORMAL2COMPRESSED="normal2Compressed",e.COMPONENTINDEX="componentIndex",e.VARIANTOFFSET="variantOffset",e.VARIANTSTROKE="variantStroke",e.VARIANTEXTENSION="variantExtension",e.SIDENESS="sideness",e.START="start",e.END="end",e.UP="up",e.EXTRUDE="extrude",e.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor",e.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"}(n||(n={}))}}]);