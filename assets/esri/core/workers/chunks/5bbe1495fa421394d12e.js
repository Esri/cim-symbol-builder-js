"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[6404],{44543:(e,t,i)=>{i.d(t,{F:()=>b,M:()=>r});const r={Base64:0,Hex:1,String:2,Raw:3},n=8,s=(1<<n)-1;function o(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function l(e){const t=[];for(let i=0,r=e.length*n;i<r;i+=n)t[i>>5]|=(e.charCodeAt(i/n)&s)<<i%32;return t}function a(e){const t=[];for(let i=0,r=32*e.length;i<r;i+=n)t.push(String.fromCharCode(e[i>>5]>>>i%32&s));return t.join("")}function u(e,t,i,r,n,s){return o(function(e,t){return e<<t|e>>>32-t}(o(o(t,e),o(r,s)),n),i)}function p(e,t,i,r,n,s,o){return u(t&i|~t&r,e,t,n,s,o)}function d(e,t,i,r,n,s,o){return u(t&r|i&~r,e,t,n,s,o)}function c(e,t,i,r,n,s,o){return u(t^i^r,e,t,n,s,o)}function f(e,t,i,r,n,s,o){return u(i^(t|~r),e,t,n,s,o)}function y(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let i=1732584193,r=-271733879,n=-1732584194,s=271733878;for(let t=0;t<e.length;t+=16){const l=i,a=r,u=n,y=s;i=p(i,r,n,s,e[t],7,-680876936),s=p(s,i,r,n,e[t+1],12,-389564586),n=p(n,s,i,r,e[t+2],17,606105819),r=p(r,n,s,i,e[t+3],22,-1044525330),i=p(i,r,n,s,e[t+4],7,-176418897),s=p(s,i,r,n,e[t+5],12,1200080426),n=p(n,s,i,r,e[t+6],17,-1473231341),r=p(r,n,s,i,e[t+7],22,-45705983),i=p(i,r,n,s,e[t+8],7,1770035416),s=p(s,i,r,n,e[t+9],12,-1958414417),n=p(n,s,i,r,e[t+10],17,-42063),r=p(r,n,s,i,e[t+11],22,-1990404162),i=p(i,r,n,s,e[t+12],7,1804603682),s=p(s,i,r,n,e[t+13],12,-40341101),n=p(n,s,i,r,e[t+14],17,-1502002290),r=p(r,n,s,i,e[t+15],22,1236535329),i=d(i,r,n,s,e[t+1],5,-165796510),s=d(s,i,r,n,e[t+6],9,-1069501632),n=d(n,s,i,r,e[t+11],14,643717713),r=d(r,n,s,i,e[t],20,-373897302),i=d(i,r,n,s,e[t+5],5,-701558691),s=d(s,i,r,n,e[t+10],9,38016083),n=d(n,s,i,r,e[t+15],14,-660478335),r=d(r,n,s,i,e[t+4],20,-405537848),i=d(i,r,n,s,e[t+9],5,568446438),s=d(s,i,r,n,e[t+14],9,-1019803690),n=d(n,s,i,r,e[t+3],14,-187363961),r=d(r,n,s,i,e[t+8],20,1163531501),i=d(i,r,n,s,e[t+13],5,-1444681467),s=d(s,i,r,n,e[t+2],9,-51403784),n=d(n,s,i,r,e[t+7],14,1735328473),r=d(r,n,s,i,e[t+12],20,-1926607734),i=c(i,r,n,s,e[t+5],4,-378558),s=c(s,i,r,n,e[t+8],11,-2022574463),n=c(n,s,i,r,e[t+11],16,1839030562),r=c(r,n,s,i,e[t+14],23,-35309556),i=c(i,r,n,s,e[t+1],4,-1530992060),s=c(s,i,r,n,e[t+4],11,1272893353),n=c(n,s,i,r,e[t+7],16,-155497632),r=c(r,n,s,i,e[t+10],23,-1094730640),i=c(i,r,n,s,e[t+13],4,681279174),s=c(s,i,r,n,e[t],11,-358537222),n=c(n,s,i,r,e[t+3],16,-722521979),r=c(r,n,s,i,e[t+6],23,76029189),i=c(i,r,n,s,e[t+9],4,-640364487),s=c(s,i,r,n,e[t+12],11,-421815835),n=c(n,s,i,r,e[t+15],16,530742520),r=c(r,n,s,i,e[t+2],23,-995338651),i=f(i,r,n,s,e[t],6,-198630844),s=f(s,i,r,n,e[t+7],10,1126891415),n=f(n,s,i,r,e[t+14],15,-1416354905),r=f(r,n,s,i,e[t+5],21,-57434055),i=f(i,r,n,s,e[t+12],6,1700485571),s=f(s,i,r,n,e[t+3],10,-1894986606),n=f(n,s,i,r,e[t+10],15,-1051523),r=f(r,n,s,i,e[t+1],21,-2054922799),i=f(i,r,n,s,e[t+8],6,1873313359),s=f(s,i,r,n,e[t+15],10,-30611744),n=f(n,s,i,r,e[t+6],15,-1560198380),r=f(r,n,s,i,e[t+13],21,1309151649),i=f(i,r,n,s,e[t+4],6,-145523070),s=f(s,i,r,n,e[t+11],10,-1120210379),n=f(n,s,i,r,e[t+2],15,718787259),r=f(r,n,s,i,e[t+9],21,-343485551),i=o(i,l),r=o(r,a),n=o(n,u),s=o(s,y)}return[i,r,n,s]}function b(e,t=r.Hex){const i=t||r.Base64,s=y(l(e),e.length*n);switch(i){case r.Raw:return s;case r.Hex:return function(e){const t="0123456789abcdef",i=[];for(let r=0,n=4*e.length;r<n;r++)i.push(t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15));return i.join("")}(s);case r.String:return a(s);case r.Base64:return function(e){const t=[];for(let i=0,r=4*e.length;i<r;i+=3){const r=(e[i>>2]>>i%4*8&255)<<16|(e[i+1>>2]>>(i+1)%4*8&255)<<8|e[i+2>>2]>>(i+2)%4*8&255;for(let n=0;n<4;n++)8*i+6*n>32*e.length?t.push("="):t.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>6*(3-n)&63))}return t.join("")}(s)}}},6404:(e,t,i)=>{i.d(t,{M:()=>ee});var r=i(43697),n=i(5600),s=(i(75215),i(67676),i(80442)),o=i(52011),l=i(96674),a=i(22974),u=i(2368);let p=class extends((0,u.J)(l.wq)){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};(0,r._)([(0,n.Cb)({type:String,json:{write:!0}})],p.prototype,"expression",void 0),(0,r._)([(0,n.Cb)({type:String,json:{write:!0}})],p.prototype,"title",void 0),(0,r._)([(0,n.Cb)({type:String,json:{write:!0}})],p.prototype,"returnType",void 0),p=(0,r._)([(0,o.j)("esri.layers.support.ExpressionInfo")],p);const d=p;var c;let f=c=class extends l.wq{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new c({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:(0,a.d9)(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};(0,r._)([(0,n.Cb)({type:Boolean,json:{write:!0}})],f.prototype,"isAutoGenerated",void 0),(0,r._)([(0,n.Cb)({type:String,json:{write:!0}})],f.prototype,"name",void 0),(0,r._)([(0,n.Cb)({type:String,json:{write:!0}})],f.prototype,"alias",void 0),(0,r._)([(0,n.Cb)({type:String,json:{write:!0}})],f.prototype,"onStatisticField",void 0),(0,r._)([(0,n.Cb)({type:d,json:{write:!0}})],f.prototype,"onStatisticExpression",void 0),(0,r._)([(0,n.Cb)({type:String,json:{write:!0}})],f.prototype,"statisticType",void 0),f=c=(0,r._)([(0,o.j)("esri.layers.support.AggregateField")],f);const y=f;var b,m=i(61960),h=i(51773),v=(i(16050),i(12501),i(28756),i(92271),i(72529),i(5499),i(84382)),g=i(81571),w=i(91423),_=i(32400),x=i(9790),S=i(78286),C=i(36030),E=i(71715),I=i(30556),F=i(63213),R=i(21506),j=i(54306);const z=(0,F.d)({types:x.QT});let T=b=class extends m.B{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}writeFields(e,t,i){const r=e.filter((e=>"avg_angle"!==e.statisticType)).map((e=>e.toJSON()));(0,S.RB)(i,r,t)}readRenderer(e,t,i){const r=t.drawingInfo?.renderer;return r?(0,w.a)(r,t,i)??void 0:t.defaultSymbol?t.types&&t.types.length?new g.Z({defaultSymbol:z(t.defaultSymbol,t,i),field:t.typeIdField,uniqueValueInfos:t.types.map((e=>({id:e.id,symbol:z(e.symbol,e,i)})))}):new v.Z({symbol:z(t.defaultSymbol,t,i)}):null}clone(){return new b({fields:(0,a.d9)(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:(0,a.d9)(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:(0,a.d9)(this.popupTemplate),renderer:(0,a.d9)(this.renderer)})}};(0,r._)([(0,C.J)({binning:"binning"})],T.prototype,"type",void 0),(0,r._)([(0,C.J)({geohash:"geohash"})],T.prototype,"binType",void 0),(0,r._)([(0,n.Cb)({type:Number,range:{min:1,max:9},json:{write:!0}})],T.prototype,"fixedBinLevel",void 0),(0,r._)([(0,n.Cb)({type:[j.Z],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],T.prototype,"labelingInfo",void 0),(0,r._)([(0,n.Cb)(R.iR)],T.prototype,"labelsVisible",void 0),(0,r._)([(0,n.Cb)({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],T.prototype,"maxScale",void 0),(0,r._)([(0,n.Cb)(R.C_)],T.prototype,"popupEnabled",void 0),(0,r._)([(0,n.Cb)({type:h.Z,json:{name:"popupInfo",write:!0}})],T.prototype,"popupTemplate",void 0),(0,r._)([(0,n.Cb)({type:[y],json:{write:!0}})],T.prototype,"fields",void 0),(0,r._)([(0,I.c)("fields")],T.prototype,"writeFields",null),(0,r._)([(0,n.Cb)({types:_.A,json:{write:{target:"drawingInfo.renderer"}}})],T.prototype,"renderer",void 0),(0,r._)([(0,E.r)("renderer",["drawingInfo.renderer"])],T.prototype,"readRenderer",null),T=b=(0,r._)([(0,o.j)("esri.layers.support.FeatureReductionBinning")],T);const V=T;var A,Z=i(62357);const B=(0,F.d)({types:x.QT});function k(e){return"simple"===e.type&&!e.visualVariables?.length}let G=A=class extends l.wq{constructor(e){super(e),this.type="cluster",this.clusterRadius=(0,Z.t_)("80px"),this.clusterMinSize=(0,Z.t_)("12px"),this.clusterMaxSize=(0,Z.t_)("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}readRenderer(e,t,i){const r=t.drawingInfo?.renderer;return r?.authoringInfo?.isAutoGenerated?null:r?k(r)?null:(0,w.a)(r,t,i)??void 0:t.defaultSymbol?t.types&&t.types.length?new g.Z({defaultSymbol:B(t.defaultSymbol,t,i),field:t.typeIdField,uniqueValueInfos:t.types.map((e=>({id:e.id,symbol:B(e.symbol,e,i)})))}):new v.Z({symbol:B(t.defaultSymbol,t,i)}):null}readSymbol(e,t,i){const r=t.drawingInfo?.renderer;if(r?.authoringInfo?.isAutoGenerated)return null;if(r&&k(r)){const e=(0,w.a)(r,t,i);return e?.symbol}return null}writeSymbol(e,t,i,r){const n=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||n){const i=new v.Z({symbol:e});t.drawingInfo={renderer:i.write({},r)}}}writeFields(e,t,i){const r=e.filter((e=>"avg_angle"!==e.statisticType)).map((e=>e.toJSON()));(0,S.RB)(i,r,t)}readFields(e,t,i){return e.filter((e=>!e.isAutoGenerated)).map((e=>y.fromJSON(e)))}clone(){return new A({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:(0,a.d9)(this.labelingInfo),labelsVisible:this.labelsVisible,fields:(0,a.d9)(this.fields),maxScale:this.maxScale,renderer:(0,a.d9)(this.renderer),symbol:(0,a.d9)(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:(0,a.d9)(this.popupTemplate)})}};(0,r._)([(0,n.Cb)({type:["cluster"],readOnly:!0,json:{write:!0}})],G.prototype,"type",void 0),(0,r._)([(0,n.Cb)({type:Number,cast:e=>"auto"===e?e:(0,Z.t_)(e),json:{write:!0}})],G.prototype,"clusterRadius",void 0),(0,r._)([(0,n.Cb)({type:Number,cast:Z.t_,json:{write:!0}})],G.prototype,"clusterMinSize",void 0),(0,r._)([(0,n.Cb)({type:Number,cast:Z.t_,json:{write:!0}})],G.prototype,"clusterMaxSize",void 0),(0,r._)([(0,n.Cb)({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],G.prototype,"maxScale",void 0),(0,r._)([(0,n.Cb)(R.C_)],G.prototype,"popupEnabled",void 0),(0,r._)([(0,n.Cb)({type:h.Z,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],G.prototype,"popupTemplate",void 0),(0,r._)([(0,n.Cb)({types:_.A,json:{write:{target:"drawingInfo.renderer"}}})],G.prototype,"renderer",void 0),(0,r._)([(0,E.r)("renderer",["drawingInfo.renderer"])],G.prototype,"readRenderer",null),(0,r._)([(0,n.Cb)({types:x.AH})],G.prototype,"symbol",void 0),(0,r._)([(0,E.r)("symbol",["drawingInfo.renderer"])],G.prototype,"readSymbol",null),(0,r._)([(0,I.c)("symbol")],G.prototype,"writeSymbol",null),(0,r._)([(0,n.Cb)({type:[j.Z],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],G.prototype,"labelingInfo",void 0),(0,r._)([(0,n.Cb)(R.iR)],G.prototype,"labelsVisible",void 0),(0,r._)([(0,n.Cb)({type:[y],json:{write:!0}})],G.prototype,"fields",void 0),(0,r._)([(0,I.c)("fields")],G.prototype,"writeFields",null),(0,r._)([(0,E.r)("fields")],G.prototype,"readFields",null),G=A=(0,r._)([(0,o.j)("esri.layers.support.FeatureReductionCluster")],G);const M=G;var $=i(85857);const L={key:"type",base:m.B,typeMap:{cluster:M,binning:V}},N={types:{key:"type",base:m.B,typeMap:{selection:$.Z,cluster:M,binning:V}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:L},"portal-item":{types:L},"web-scene":{types:{key:"type",base:m.B,typeMap:{selection:$.Z}}}}}};var q,O=i(20102),D=i(92604),J=i(44543),U=i(69237),H=i(23847),Q=(i(30856),i(51706));let Y=q=class extends H.Z{writeLevels(e,t,i){for(const i in e){const e=this.levels[i];return void(t.stops=e)}}clone(){return new q({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:(0,Q.iY)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:(0,Q.iY)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map((e=>e.clone())),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:(0,a.d9)(this.levels)})}};(0,r._)([(0,n.Cb)()],Y.prototype,"levels",void 0),(0,r._)([(0,I.c)("levels")],Y.prototype,"writeLevels",null),Y=q=(0,r._)([(0,o.j)("esri.views.2d.engine.LevelDependentSizeVariable")],Y);const K=D.Z.getLogger("esri.views.2d.layers.support.clusterUtils");s.Z.add("esri-cluster-arcade-enabled",!0);const P=(0,s.Z)("esri-cluster-arcade-enabled");function W(e,t,i,r){const n=(0,J.F)(t),s="mode"===i?`cluster_type_${n}`:"sum"===i?`cluster_sum_${n}`:`cluster_avg_${n}`;return e.some((e=>e.name===s))||e.push(new y({name:s,isAutoGenerated:!0,onStatisticExpression:new d({expression:t,returnType:r}),statisticType:i})),s}function X(e,t,i,r,n){if("cluster_count"===t||e.some((e=>e.name===t)))return t;const s=function(e,t,i){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const e=i,r="field",n=t.toLowerCase()+",norm:"+r+","+e.toLowerCase();return"cluster_avg_"+(0,J.F)(n)}}}(i,t,n);return e.some((e=>e.name===s))||("avg_norm"===i?e.push(new y({name:s,isAutoGenerated:!0,onStatisticExpression:new d({expression:`$feature.${t} / $feature.${n}`,returnType:r}),statisticType:"avg"})):e.push(new y({name:s,isAutoGenerated:!0,onStatisticField:t,statisticType:i}))),s}const ee=e=>{let t=class extends e{constructor(...e){super(...e),this.own(this.watch("renderer",(()=>{if(this.featureReduction){const e=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",e)}}),!0))}set featureReduction(e){const t=this._normalizeFeatureReduction(e);this._set("featureReduction",t)}set renderer(e){}_normalizeFeatureReduction(e){if("cluster"!==e?.type)return e;const t=e.clone(),i=[new y({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],r=(t.fields??[]).filter((e=>!e.isAutoGenerated));if(e.renderer&&!e.renderer.authoringInfo?.isAutoGenerated)return t.fields=[...i,...r],t;if(e.symbol)return t.fields=[...i,...r],t.renderer=null,t;if(!this.renderer)return e;const n=((e,t,i,r,n)=>{const s=t.clone();if(!(e=>{const t=t=>K.error(new O.Z("Unsupported-renderer",t,{renderer:e}));if(!e)return!1;switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const i=e.normalizationType;if("field"!==i)return t(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!P){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some((e=>!(!("valueExpression"in e)||!e.valueExpression))))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0})(s))return s;if(s.authoringInfo||(s.authoringInfo=new U.Z),s.authoringInfo.isAutoGenerated=!0,"visualVariables"in s){const t=(s.visualVariables||[]).filter((e=>"$view.scale"!==e.valueExpression)),i=(e=>{for(const t of e)if("size"===t.type)return t;return null})(t);t.forEach((t=>{"rotation"===t.type?t.field?t.field=X(e,t.field,"avg_angle","number"):t.valueExpression&&(t.field=W(e,t.valueExpression,"avg_angle","number"),t.valueExpression=null):t.normalizationField?(t.field=X(e,t.field,"avg_norm","number",t.normalizationField),t.normalizationField=null):t.field?t.field=X(e,t.field,"avg","number"):t.valueExpression&&(t.field=W(e,t.valueExpression,"avg","number"),t.valueExpression=null)})),null==i&&(e=>{for(const t of e)if("cluster_count"===t.field)return!0})(t),s.visualVariables=t}switch(s.type){case"simple":break;case"pie-chart":for(const t of s.attributes)t.field?t.field=X(e,t.field,"sum","number"):t.valueExpression&&(t.field=W(e,t.valueExpression,"sum","number"),t.valueExpression=null);break;case"unique-value":s.field?s.field=X(e,s.field,"mode","string"):s.valueExpression&&(s.field=W(e,s.valueExpression,"mode","string"),s.valueExpression=null);break;case"class-breaks":s.normalizationField?(s.field=X(e,s.field,"avg_norm","number",s.normalizationField),s.normalizationField=null):s.field?s.field=X(e,s.field,"avg","number"):s.valueExpression&&(s.field=W(e,s.valueExpression,"avg","number"),s.valueExpression=null)}return s})(i,this.renderer);return t.fields=[...i,...r],t.renderer=n,t}};return(0,r._)([(0,n.Cb)(N)],t.prototype,"featureReduction",null),t=(0,r._)([(0,o.j)("esri.layers.mixins.FeatureReductionLayer")],t),t}},61960:(e,t,i)=>{i.d(t,{B:()=>l});var r=i(43697),n=i(96674),s=i(5600),o=(i(75215),i(67676),i(80442),i(52011));let l=class extends n.wq{constructor(){super(...arguments),this.type=null}};(0,r._)([(0,s.Cb)({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],l.prototype,"type",void 0),l=(0,r._)([(0,o.j)("esri.layers.support.FeatureReduction")],l)},85857:(e,t,i)=>{i.d(t,{Z:()=>u});var r,n=i(43697),s=i(5600),o=(i(75215),i(67676),i(80442),i(52011)),l=i(61960);let a=r=class extends l.B{constructor(e){super(e),this.type="selection"}clone(){return new r}};(0,n._)([(0,s.Cb)({type:["selection"]})],a.prototype,"type",void 0),a=r=(0,n._)([(0,o.j)("esri.layers.support.FeatureReductionSelection")],a);const u=a}}]);