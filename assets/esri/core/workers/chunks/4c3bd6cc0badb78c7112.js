"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[3610],{4902:(t,e,r)=>{r.d(e,{A:()=>u});var s=r(90237),i=r(40608);let o=0;const n=t=>{let e=class extends t{constructor(...t){super(...t),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+o++})}};return e=(0,s._)([(0,i.$)("esri.core.Identifiable")],e),e};let l=class extends(n(class{})){};var a;l=(0,s._)([(0,i.$)("esri.core.Identifiable")],l),(a=l||(l={})).IdentifiableMixin=n,a.NumericIdentifiableMixin=t=>{let e=class extends t{constructor(...t){super(...t),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:o++})}};return e=(0,s._)([(0,i.$)("esri.core.Identifiable.NumericIdentifiable")],e),e};const u=l},8303:(t,e,r)=>{r.d(e,{A:()=>v});var s=r(90237),i=r(92602),o=r(70333),n=r(78888),l=r(60999),a=r(49186),u=r(53966),h=r(97768),c=r(74887),p=r(84952),d=r(10107),y=(r(44208),r(87811),r(36005)),m=r(40608),g=r(43937),f=r(77548),S=r(20655),w=r(80812),b=r(41318),_=r(10407);const v=t=>{let e=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,h.pR)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(t){t!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",t))}readPortalItem(t,e,r){if(e.itemId)return new w.default({id:e.itemId,portal:r?.portal})}writePortalItem(t,e){t?.id&&(e.itemId=t.id)}async loadFromPortal(t,e){if(this.portalItem?.id)try{const{load:s}=await r.e(1204).then(r.bind(r,41204));return(0,c.Te)(e),await s({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData,layerModuleTypeMap:t.layerModuleTypeMap,populateGroupLayer:t.populateGroupLayer},e)}catch(t){throw(0,c.zf)(t)||u.A.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${t}`),t}}async finishLoadEditablePortalLayer(t){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(t).catch((t=>((0,c.QP)(t),!0))))}async setUserPrivileges(t,e){if(!i.A.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(e);if(this.url)try{const{features:{edit:r,fullEdit:s},content:{updateItem:i}}=await this._fetchUserPrivileges(t,e);this._set("userHasEditingPrivileges",r),this._set("userHasFullEditingPrivileges",s),this._set("userHasUpdateItemPrivileges",i)}catch(t){(0,c.QP)(t)}}async _fetchUserPrivileges(t,e){let r=this.portalItem;if(!t||!r||!r.loaded||r.sourceUrl)return this._fetchFallbackUserPrivileges(e);const s=!o.id?.findCredential(this.url),i=t===r.id;if(i&&r.portal.user)return this._getUserPrivileges(r,s);let n,l;if(i)n=r.portal.url;else try{n=await(0,f.wI)(this.url,e)}catch(t){(0,c.QP)(t)}if(!n||!(0,p.b8)(n,r.portal.url))return this._fetchFallbackUserPrivileges(e);try{const t=null!=e?e.signal:null;l=await(o.id?.getCredential(`${n}/sharing`,{prompt:!1,signal:t}))}catch(t){(0,c.QP)(t)}const a=!0,u=!1,h=!1;if(!l)return{features:{edit:a,fullEdit:u},content:{updateItem:h}};try{if(i?await r.reload():(r=new w.default({id:t,portal:{url:n}}),await r.load(e)),r.portal.user)return this._getUserPrivileges(r,s)}catch(t){(0,c.QP)(t)}return{features:{edit:a,fullEdit:u},content:{updateItem:h}}}_getUserPrivileges(t,e){const r=(0,_.It)(t);return e&&(r.features.edit=!0),r}async _fetchFallbackUserPrivileges(t){let e=!0;try{e=await this._fetchUserHasEditingPrivileges(t)}catch(t){(0,c.QP)(t)}return{features:{edit:e,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(t){const e=this.url?o.id?.findCredential(this.url):null;if(!e)return!0;const r=M.credential===e?M.user:await this._fetchEditingUser(t);return M.credential=e,M.user=r,null==r?.privileges||r.privileges.includes("features:user:edit")}async _fetchEditingUser(t){const e=this.portalItem?.portal?.user;if(e)return e;const r=o.id?.findServerInfo(this.url??"");if(!r?.owningSystemUrl)return null;const s=`${r.owningSystemUrl}/sharing/rest`,i=S.A.getDefault();if(i&&i.loaded&&(0,p.S8)(i.restUrl)===(0,p.S8)(s))return i.user;const a=`${s}/community/self`,u=null!=t?t.signal:null,h=await(0,l.Ke)((0,n.A)(a,{authMode:"no-prompt",query:{f:"json"},signal:u}));return h.ok?b.A.fromJSON(h.value.data):null}read(t,e){e&&(e.layer=this),super.read(t,e)}write(t,e){const r=e?.portal,s=this.portalItem?.id&&(this.portalItem.portal||S.A.getDefault());return r&&s&&!(0,p.ut)(s.restUrl,r.restUrl)?(e.messages&&e.messages.push(new a.A("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(t,{...e,layer:this})}};return(0,s._)([(0,d.MZ)({type:w.default})],e.prototype,"portalItem",null),(0,s._)([(0,y.w)("web-document","portalItem",["itemId"])],e.prototype,"readPortalItem",null),(0,s._)([(0,g.K)("web-document","portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null),(0,s._)([(0,d.MZ)({clonable:!1})],e.prototype,"resourceReferences",void 0),(0,s._)([(0,d.MZ)({type:Boolean,readOnly:!0})],e.prototype,"userHasEditingPrivileges",void 0),(0,s._)([(0,d.MZ)({type:Boolean,readOnly:!0})],e.prototype,"userHasFullEditingPrivileges",void 0),(0,s._)([(0,d.MZ)({type:Boolean,readOnly:!0})],e.prototype,"userHasUpdateItemPrivileges",void 0),e=(0,s._)([(0,m.$)("esri.layers.mixins.PortalLayer")],e),e},M={credential:null,user:null}},20378:(t,e,r)=>{r.d(e,{A:()=>p});var s=r(90237),i=r(68197),o=r(66552),n=r(25482),l=r(10107),a=(r(44208),r(53966),r(87811),r(36005)),u=r(40608);const h=new o.J({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let c=0,p=class extends n.A{constructor(t){super(t),this.id="sym"+c++,this.type=null,this.color=new i.A([0,0,0,1])}readColor(t){return null!=t?.[0]?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,e){}hash(){return JSON.stringify(this.toJSON())}clone(){}};(0,s._)([(0,l.MZ)({type:h.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:h.write,isRequired:!0}}})],p.prototype,"type",void 0),(0,s._)([(0,l.MZ)({type:i.A,json:{write:{allowNull:!0}}})],p.prototype,"color",void 0),(0,s._)([(0,a.w)("color")],p.prototype,"readColor",null),p=(0,s._)([(0,u.$)("esri.symbols.Symbol")],p)},27865:(t,e,r)=>{r.d(e,{O9:()=>o,dw:()=>n,mj:()=>i});var s=r(59247);function i(t,e){const r=t.length>e.length?t:e;return(t.length>e.length?e:t).every(((t,e)=>t.type===r[e].type))}function o(t,e){const r=t.length>e.length?t:e,i=t.length>e.length?e:t;for(let t=i.length;t<r.length;t++)i.push((0,s.sK)(r[t]))}function n(t){const e=t[0];return!!e&&"type"in e}},31593:(t,e,r)=>{r.d(e,{A:()=>v});var s=r(90237),i=r(66552),o=r(4718),n=r(90629),l=r(10107),a=(r(44208),r(53966),r(93223)),u=r(40608),h=(r(87811),r(20378));let c=class extends h.A{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};(0,s._)([(0,a.e)({esriSLS:"simple-line"},{readOnly:!0})],c.prototype,"type",void 0),(0,s._)([(0,l.MZ)({type:Number,cast:n.cr,json:{write:!0}})],c.prototype,"width",void 0),c=(0,s._)([(0,u.$)("esri.symbols.LineSymbol")],c);var p,d=r(68197),y=r(25482),m=r(36005),g=r(43937),f=r(83213);let S=p=class extends y.A{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,r,s){e[r]="web-map"===s?.origin?"arrow":t}set color(t){this._set("color",t)}readColor(t){return null!=t?.[0]?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,r,s){"web-map"===s?.origin||(e[r]=t)}clone(){return new p({color:(0,o.o8)(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};(0,s._)([(0,l.MZ)({type:["begin","end","begin-end"],json:{write:!0}})],S.prototype,"placement",void 0),(0,s._)([(0,a.e)({"line-marker":"line-marker"},{readOnly:!0}),(0,l.MZ)({json:{origins:{"web-map":{write:!1}}}})],S.prototype,"type",void 0),(0,s._)([(0,l.MZ)({type:f.z})],S.prototype,"style",void 0),(0,s._)([(0,g.K)("style")],S.prototype,"writeStyle",null),(0,s._)([(0,l.MZ)({type:d.A,value:null,json:{write:{allowNull:!0}}})],S.prototype,"color",null),(0,s._)([(0,m.w)("color")],S.prototype,"readColor",null),(0,s._)([(0,g.K)("color")],S.prototype,"writeColor",null),S=p=(0,s._)([(0,u.$)("esri.symbols.LineSymbolMarker")],S);const w=S;var b;const _=new i.J({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let v=b=class extends c{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,r,s,i,o){if(t&&"string"!=typeof t)return t;const l={};return null!=t&&(l.style=t),null!=e&&(l.color=e),null!=r&&(l.width=(0,n.cr)(r)),null!=s&&(l.cap=s),null!=i&&(l.join=i),null!=o&&(l.miterLimit=(0,n.cr)(o)),l}clone(){return new b({color:(0,o.o8)(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};(0,s._)([(0,a.e)({esriSLS:"simple-line"},{readOnly:!0})],v.prototype,"type",void 0),(0,s._)([(0,l.MZ)({type:_.apiValues,json:{read:_.read,write:_.write}})],v.prototype,"style",void 0),(0,s._)([(0,l.MZ)({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,r)=>({enabled:"round"!==t&&null==r?.origin})}}})],v.prototype,"cap",void 0),(0,s._)([(0,l.MZ)({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,r)=>({enabled:"round"!==t&&null==r?.origin})}}})],v.prototype,"join",void 0),(0,s._)([(0,l.MZ)({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":w}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],v.prototype,"marker",void 0),(0,s._)([(0,l.MZ)({type:Number,json:{read:!1,write:!1}})],v.prototype,"miterLimit",void 0),v=b=(0,s._)([(0,u.$)("esri.symbols.SimpleLineSymbol")],v)},53930:(t,e,r)=>{r.d(e,{A:()=>g});var s,i=r(90237),o=r(68197),n=r(66552),l=r(4718),a=r(90629),u=r(10107),h=(r(44208),r(53966),r(93223)),c=r(40608),p=r(43937),d=r(89420),y=r(31593);const m=new n.J({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let g=s=class extends d.A{constructor(...t){super(...t),this.color=new o.A([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new y.A}normalizeCtorArgs(t,e,r,s){if(t&&"string"!=typeof t)return t;const i={};return t&&(i.style=t),null!=e&&(i.size=(0,a.cr)(e)),r&&(i.outline=r),s&&(i.color=s),i}writeColor(t,e){t&&"x"!==this.style&&"cross"!==this.style&&(e.color=t.toJSON()),null===t&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new s({angle:this.angle,color:(0,l.o8)(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};(0,i._)([(0,u.MZ)()],g.prototype,"color",void 0),(0,i._)([(0,p.K)("color")],g.prototype,"writeColor",null),(0,i._)([(0,h.e)({esriSMS:"simple-marker"},{readOnly:!0})],g.prototype,"type",void 0),(0,i._)([(0,u.MZ)()],g.prototype,"size",void 0),(0,i._)([(0,u.MZ)({type:m.apiValues,json:{read:m.read,write:m.write}})],g.prototype,"style",void 0),(0,i._)([(0,u.MZ)({type:String,json:{write:!0}})],g.prototype,"path",null),(0,i._)([(0,u.MZ)({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":y.A}},json:{default:null,write:!0}})],g.prototype,"outline",void 0),g=s=(0,i._)([(0,c.$)("esri.symbols.SimpleMarkerSymbol")],g)},58592:(t,e,r)=>{r.d(e,{A:()=>d});var s,i=r(90237),o=r(4718),n=r(90629),l=r(10107),a=(r(44208),r(53966),r(93223)),u=r(36005),h=r(40608),c=r(89420),p=r(77040);let d=s=class extends c.A{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,r){if(t&&"string"!=typeof t&&null==t.imageData)return t;const s={};return t&&(s.url=t),null!=e&&(s.width=(0,n.cr)(e)),null!=r&&(s.height=(0,n.cr)(r)),s}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new s({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",(0,o.o8)(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};(0,i._)([(0,l.MZ)({json:{write:!1}})],d.prototype,"color",void 0),(0,i._)([(0,a.e)({esriPMS:"picture-marker"},{readOnly:!0})],d.prototype,"type",void 0),(0,i._)([(0,l.MZ)(p.ku)],d.prototype,"url",void 0),(0,i._)([(0,l.MZ)(p.k7)],d.prototype,"source",void 0),(0,i._)([(0,l.MZ)({type:Number,cast:n.cr,json:{write:!0}})],d.prototype,"height",void 0),(0,i._)([(0,u.w)("height",["height","size"])],d.prototype,"readHeight",null),(0,i._)([(0,l.MZ)({type:Number,cast:n.cr,json:{write:!0}})],d.prototype,"width",void 0),(0,i._)([(0,l.MZ)({json:{write:!1}})],d.prototype,"size",void 0),d=s=(0,i._)([(0,h.$)("esri.symbols.PictureMarkerSymbol")],d)},59247:(t,e,r)=>{r.d(e,{bv:()=>a,Fk:()=>u,yG:()=>h,$b:()=>c,Nd:()=>p,jm:()=>d,sK:()=>g});var s=r(40876),i=r(90629);function o(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}const n=o();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:n,clone:function(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},create:o,fromValues:function(t,e,r,s,i,o,n,l,a,u,h,c,p,d,y,m){const g=new Float32Array(16);return g[0]=t,g[1]=e,g[2]=r,g[3]=s,g[4]=i,g[5]=o,g[6]=n,g[7]=l,g[8]=a,g[9]=u,g[10]=h,g[11]=c,g[12]=p,g[13]=d,g[14]=y,g[15]=m,g}},Symbol.toStringTag,{value:"Module"}));var l=r(58083);class a{constructor(t,e,r){this.strength=t,this.radius=e,this.threshold=r,this.type="bloom"}interpolate(t,e,r){this.strength=y(t.strength,e.strength,r),this.radius=y(t.radius,e.radius,r),this.threshold=y(t.threshold,e.threshold,r)}clone(){return new a(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:m(this.radius),strength:this.strength,threshold:this.threshold}}}class u{constructor(t){this.radius=t,this.type="blur"}interpolate(t,e,r){this.radius=Math.round(y(t.radius,e.radius,r))}clone(){return new u(this.radius)}toJSON(){return{type:"blur",radius:m(this.radius)}}}class h{constructor(t,e){this.type=t,this.amount=e,"invert"!==this.type&&"grayscale"!==this.type&&"sepia"!==this.type||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,e,r){this.amount=y(t.amount,e.amount,r),this._updateMatrix()}clone(){return new h(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||o();switch(this.type){case"brightness":this._colorMatrix=((t,e)=>{const r=(0,l.hZ)(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return(0,l.mg)(r,r)})(t,this.amount);break;case"contrast":this._colorMatrix=((t,e)=>{const r=(0,l.hZ)(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return(0,l.mg)(r,r)})(t,this.amount);break;case"grayscale":this._colorMatrix=(t=>{const e=1-this.amount,r=(0,l.hZ)(t,.2126+.7874*e,.7152-.7152*e,.0722-.0722*e,0,.2126-.2126*e,.7152+.2848*e,.0722-.0722*e,0,.2126-.2126*e,.7152-.7152*e,.0722+.9278*e,0,0,0,0,1);return(0,l.mg)(r,r)})(t);break;case"invert":this._colorMatrix=((t,e)=>{const r=1-2*e,s=(0,l.hZ)(t,r,0,0,e,0,r,0,e,0,0,r,e,0,0,0,1);return(0,l.mg)(s,s)})(t,this.amount);break;case"saturate":this._colorMatrix=((t,e)=>{const r=(0,l.hZ)(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return(0,l.mg)(r,r)})(t,this.amount);break;case"sepia":this._colorMatrix=(t=>{const e=1-this.amount,r=(0,l.hZ)(t,.393+.607*e,.769-.769*e,.189-.189*e,0,.349-.349*e,.686+.314*e,.168-.168*e,0,.272-.272*e,.534-.534*e,.131+.869*e,0,0,0,0,1);return(0,l.mg)(r,r)})(t)}}}class c{constructor(t,e,r,s){this.offsetX=t,this.offsetY=e,this.blurRadius=r,this.color=s,this.type="drop-shadow"}interpolate(t,e,r){this.offsetX=y(t.offsetX,e.offsetX,r),this.offsetY=y(t.offsetY,e.offsetY,r),this.blurRadius=y(t.blurRadius,e.blurRadius,r),this.color[0]=Math.round(y(t.color[0],e.color[0],r)),this.color[1]=Math.round(y(t.color[1],e.color[1],r)),this.color[2]=Math.round(y(t.color[2],e.color[2],r)),this.color[3]=y(t.color[3],e.color[3],r)}clone(){return new c(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:m(this.offsetX),yoffset:m(this.offsetY),blurRadius:m(this.blurRadius),color:t}}}class p{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,e,r){this.angle=y(t.angle,e.angle,r),this._updateMatrix()}clone(){return new p(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||o();this._colorMatrix=((t,e)=>{const r=Math.sin(e*Math.PI/180),s=Math.cos(e*Math.PI/180),i=(0,l.hZ)(t,.213+.787*s-.213*r,.715-.715*s-.715*r,.072-.072*s+.928*r,0,.213-.213*s+.143*r,.715+.285*s+.14*r,.072-.072*s-.283*r,0,.213-.213*s-.787*r,.715-.715*s+.715*r,.072+.928*s+.072*r,0,0,0,0,1);return(0,l.mg)(i,i)})(t,this.angle)}}class d{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,e,r){this.amount=y(t.amount,e.amount,r)}clone(){return new d(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function y(t,e,r){return t+(e-t)*r}function m(t){return Math.round(1e3*(0,i.PN)(t))/1e3}function g(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new h(t.type,0);case"saturate":case"brightness":case"contrast":return new h(t.type,1);case"opacity":return new d(1);case"hue-rotate":return new p(0);case"blur":return new u(0);case"drop-shadow":return new c(0,0,0,[...(0,s.TS)("transparent")]);case"bloom":return new a(0,0,1)}}},63201:(t,e,r)=>{r.r(e),r.d(e,{default:()=>L});var s=r(90237),i=r(92602),o=r(78888),n=r(92071),l=r(74887),a=r(84952),u=r(10107),h=(r(44208),r(53966),r(87811),r(36005)),c=r(40608),p=r(5443),d=r(21325),y=r(4146),m=r(63074),g=r(16131),f=r(8303),S=r(54310),w=r(25036),b=r(10873),_=r(58592),v=r(94985),M=r(31593),A=r(53930),x=r(20378);const P=["atom","xml"],$={base:x.A,key:"type",typeMap:{"simple-line":M.A},errorContext:"symbol"},Z={base:x.A,key:"type",typeMap:{"picture-marker":_.A,"simple-marker":A.A},errorContext:"symbol"},D={base:x.A,key:"type",typeMap:{"simple-fill":v.A},errorContext:"symbol"};let T=class extends((0,m.dM)((0,S.J)((0,g.q)((0,f.A)((0,w.j)((0,n.P)(y.A))))))){constructor(...t){super(...t),this.description=null,this.fullExtent=null,this.legendEnabled=!0,this.lineSymbol=null,this.pointSymbol=null,this.polygonSymbol=null,this.operationalLayerType="GeoRSS",this.url=null,this.type="geo-rss"}normalizeCtorArgs(t,e){return"string"==typeof t?{url:t,...e}:t}readFeatureCollections(t,e){return e.featureCollection.layers.forEach((t=>{const e=t.layerDefinition.drawingInfo.renderer.symbol;e&&"esriSFS"===e.type&&e.outline?.style.includes("esriSFS")&&(e.outline.style="esriSLSSolid")})),e.featureCollection.layers}get hasPoints(){return this._hasGeometry("esriGeometryPoint")}get hasPolylines(){return this._hasGeometry("esriGeometryPolyline")}get hasPolygons(){return this._hasGeometry("esriGeometryPolygon")}get title(){const t=this._get("title");return t&&"defaults"!==this.originOf("title")?t:this.url?(0,a.e7)(this.url,P)||"GeoRSS":t}set title(t){this._set("title",t)}load(t){const e=null!=t?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service","Feature Service","Feature Collection","Scene Service"]},t).catch(l.QP).then((()=>this._fetchService(e))).then((t=>{this.read(t,{origin:"service"})}))),Promise.resolve(this)}async hasDataChanged(){const t=await this._fetchService();return this.read(t,{origin:"service",ignoreDefaults:!0}),!0}async _fetchService(t){const e=this.spatialReference,{data:r}=await(0,o.A)(i.A.geoRSSServiceUrl,{query:{url:this.url,refresh:!!this.loaded||void 0,outSR:(0,d.oT)(e)?void 0:e.wkid??JSON.stringify(e)},signal:t});return r}_hasGeometry(t){return this.featureCollections?.some((e=>e.featureSet?.geometryType===t&&e.featureSet.features?.length>0))??!1}};(0,s._)([(0,u.MZ)()],T.prototype,"description",void 0),(0,s._)([(0,u.MZ)()],T.prototype,"featureCollections",void 0),(0,s._)([(0,h.w)("service","featureCollections",["featureCollection.layers"])],T.prototype,"readFeatureCollections",null),(0,s._)([(0,u.MZ)({type:p.A,json:{name:"lookAtExtent"}})],T.prototype,"fullExtent",void 0),(0,s._)([(0,u.MZ)(b.id)],T.prototype,"id",void 0),(0,s._)([(0,u.MZ)(b.fV)],T.prototype,"legendEnabled",void 0),(0,s._)([(0,u.MZ)({types:$,json:{write:!0}})],T.prototype,"lineSymbol",void 0),(0,s._)([(0,u.MZ)({type:["show","hide"]})],T.prototype,"listMode",void 0),(0,s._)([(0,u.MZ)({types:Z,json:{write:!0}})],T.prototype,"pointSymbol",void 0),(0,s._)([(0,u.MZ)({types:D,json:{write:!0}})],T.prototype,"polygonSymbol",void 0),(0,s._)([(0,u.MZ)({type:["GeoRSS"]})],T.prototype,"operationalLayerType",void 0),(0,s._)([(0,u.MZ)(b.OZ)],T.prototype,"url",void 0),(0,s._)([(0,u.MZ)({json:{origins:{service:{read:{source:"name",reader:t=>t||void 0}}}}})],T.prototype,"title",null),(0,s._)([(0,u.MZ)({readOnly:!0,json:{read:!1},value:"geo-rss"})],T.prototype,"type",void 0),T=(0,s._)([(0,c.$)("esri.layers.GeoRSSLayer")],T);const L=T},64272:(t,e,r)=>{r.d(e,{T:()=>p});var s,i=r(90237),o=r(25482),n=r(88930),l=r(10107),a=(r(44208),r(53966),r(87811),r(36005)),u=r(40608),h=r(43937),c=r(98623);let p=class extends o.A{static{s=this}static get allTime(){return d}static get empty(){return y}static fromArray(t){return new s({start:null!=t[0]?new Date(t[0]):t[0],end:null!=t[1]?new Date(t[1]):t[1]})}constructor(t){super(t),this.end=null,this.start=null}readEnd(t,e){return null!=e.end?new Date(e.end):null}writeEnd(t,e){e.end=t?.getTime()??null}get isAllTime(){return this.equals(s.allTime)}get isEmpty(){return this.equals(s.empty)}readStart(t,e){return null!=e.start?new Date(e.start):null}writeStart(t,e){e.start=t?.getTime()??null}clone(){return new s({end:this.end,start:this.start})}equals(t){if(!t)return!1;const e=this.start?.getTime()??this.start,r=this.end?.getTime()??this.end,s=t.start?.getTime()??t.start,i=t.end?.getTime()??t.end;return e===s&&r===i}expandTo(t,e=c.qU){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=(0,n.lL)(r,t,e));let i=this.end;if(i){const r=(0,n.lL)(i,t,e);i=i.getTime()===r.getTime()?r:(0,n.S1)(r,1,t,e)}return new s({start:r,end:i})}intersection(t){if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return s.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const e=this.start?.getTime()??-1/0,r=this.end?.getTime()??1/0,i=t.start?.getTime()??-1/0,o=t.end?.getTime()??1/0;let n,l;return i>=e&&i<=r?n=i:e>=i&&e<=o&&(n=e),r>=i&&r<=o?l=r:o>=e&&o<=r&&(l=o),null==n||null==l||isNaN(n)||isNaN(l)?s.empty:new s({start:n===-1/0?null:new Date(n),end:l===1/0?null:new Date(l)})}offset(t,e,r=c.qU){if(this.isEmpty||this.isAllTime)return this.clone();const i=new s,{start:o,end:l}=this;return null!=o&&(i.start=(0,n.S1)(o,t,e,r)),null!=l&&(i.end=(0,n.S1)(l,t,e,r)),i}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return d.clone();const e=null!=this.start&&null!=t.start?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,r=null!=this.end&&null!=t.end?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new s({start:e,end:r})}};(0,i._)([(0,l.MZ)({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"end",void 0),(0,i._)([(0,a.w)("end")],p.prototype,"readEnd",null),(0,i._)([(0,h.K)("end")],p.prototype,"writeEnd",null),(0,i._)([(0,l.MZ)({readOnly:!0,json:{read:!1}})],p.prototype,"isAllTime",null),(0,i._)([(0,l.MZ)({readOnly:!0,json:{read:!1}})],p.prototype,"isEmpty",null),(0,i._)([(0,l.MZ)({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"start",void 0),(0,i._)([(0,a.w)("start")],p.prototype,"readStart",null),(0,i._)([(0,h.K)("start")],p.prototype,"writeStart",null),p=s=(0,i._)([(0,u.$)("esri.time.TimeExtent")],p);const d=new p,y=new p({start:void 0,end:void 0})},65851:(t,e,r)=>{r.d(e,{A:()=>a});var s=r(90237),i=r(10107),o=(r(44208),r(53966),r(87811),r(40608)),n=r(31593),l=r(20378);let a=class extends l.A{constructor(t){super(t),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline?.hash()}`}};(0,s._)([(0,i.MZ)({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":n.A}},json:{default:null,write:!0}})],a.prototype,"outline",void 0),(0,s._)([(0,i.MZ)({type:["simple-fill","picture-fill"],readOnly:!0})],a.prototype,"type",void 0),a=(0,s._)([(0,o.$)("esri.symbols.FillSymbol")],a)},68197:(t,e,r)=>{r.d(e,{A:()=>c});var s,i,o=r(40876),n=r(34727),l=r(56507);function a(t){return(0,n.qE)((0,l.Vr)(t),0,255)}function u(t,e){const r=t.toString(16).padStart(2,"0");return e?r.slice(0,1):r}class h{static blendColors(t,e,r,s=new h){return s.r=Math.round(t.r+(e.r-t.r)*r),s.g=Math.round(t.g+(e.g-t.g)*r),s.b=Math.round(t.b+(e.b-t.b)*r),s.a=t.a+(e.a-t.a)*r,s._sanitize()}static fromRgb(t,e){const r=(0,o.lT)(t);return r?h.fromArray(r,e):null}static fromHex(t,e=new h){const r=(0,o.oW)(t);return r?h.fromArray(r,e):null}static fromArray(t,e=new h){return e._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(e.a)&&(e.a=1),e._sanitize()}static fromString(t,e){const r=(0,o.Eq)(t);return r?h.fromArray(r,e):null}static fromJSON(t){return null!=t?new h([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return null!=t?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return null!=t?[t.r/255,t.g/255,t.b/255,null!=t.a?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return.299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return"string"==typeof t?h.fromString(t,this):Array.isArray(t)?h.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof h||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const e=t?.capitalize??!1,r=t?.digits??6,s=3===r||4===r,i=4===r||8===r,o=`#${u(this.r,s)}${u(this.g,s)}${u(this.b,s)}${i?u(Math.round(255*this.a),s):""}`;return e?o.toUpperCase():o}toCss(t=!1){const e=this.r+", "+this.g+", "+this.b;return t?`rgba(${e}, ${this.a})`:`rgb(${e})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=h.AlphaMode.ALWAYS){const e=a(this.r),r=a(this.g),s=a(this.b);return t===h.AlphaMode.ALWAYS||1!==this.a?[e,r,s,a(255*this.a)]:[e,r,s]}clone(){return new h(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return null!=t&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=(0,o.c1)(this.r),this.g=(0,o.c1)(this.g),this.b=(0,o.c1)(this.b),this.a=(0,o.G1)(this.a),this}_set(t,e,r,s){this.r=t,this.g=e,this.b=r,this.a=s}}h.prototype.declaredClass="esri.Color",(i=(s=h||(h={})).AlphaMode||(s.AlphaMode={}))[i.ALWAYS=0]="ALWAYS",i[i.UNLESS_OPAQUE=1]="UNLESS_OPAQUE";const c=h},69540:(t,e,r)=>{r.d(e,{A:()=>p});var s=r(90237),i=r(69622),o=(r(44208),r(4718)),n=(r(53966),r(97768)),l=r(35666),a=r(88620),u=r(40608);const h=t=>{let e=class extends t{clone(){const t=(0,a.oY)(this);(0,n.Lw)(t,"unable to clone instance of non-accessor class");const e=t.metadata,r=t.store,s={},i=new Map;for(const t in e){const n=e[t],a=r?.originOf(t),u=n.clonable;if(n.readOnly||!1===u||a!==l.Gr.USER&&a!==l.Gr.DEFAULTS&&a!==l.Gr.WEB_MAP&&a!==l.Gr.WEB_SCENE)continue;const h=this[t];let c=null;c="function"==typeof u?u(h):"reference"===u?h:(0,o.TU)(h),null!=h&&null==c||(a===l.Gr.DEFAULTS?i.set(t,c):s[t]=c)}const u=new(0,Object.getPrototypeOf(this).constructor)(s);if(i.size){const t=(0,a.oY)(u)?.store;if(t)for(const[e,r]of i)t.set(e,r,l.Gr.DEFAULTS)}return u}};return e=(0,s._)([(0,u.$)("esri.core.Clonable")],e),e};let c=class extends(h(i.A)){};c=(0,s._)([(0,u.$)("esri.core.Clonable")],c),(c||(c={})).ClonableMixin=h;const p=c},77040:(t,e,r)=>{r.d(e,{k7:()=>l,ku:()=>n});var s=r(84952),i=r(97159);function o(t,e){if(!(0,s.oP)(t)){const r=function(t){if(!t)return null;const{origin:e,layer:r}=t;if("service"!==e&&"portal-item"!==e)return null;const s=r?.type;return"feature"===s||"stream"===s?r.parsedUrl?.path:"map-image"===s||"tile"===s?t.url?.path:null}(e);if(r)return(0,s.fj)(r,"images",t)}return(0,i.f)(t,e)}const n={json:{read:{source:["imageData","url"],reader:function(t,e,r){return e.imageData?(0,s.Hg)({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):o(e.url,r)}},write:{writer(t,e,r,o){!function(t,e,r,o){if((0,s.DB)(t)){const n=(0,s.r$)(t);if(!n)return;e.contentType=n.mediaType,e.imageData=n.data,r&&r.imageData===e.imageData&&r.url&&(0,i.w)(r.url,e,"url",o)}else(0,i.w)(t,e,"url",o)}(t,e,this.source,o)}}}},l={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,r){const s={};return e.imageData&&(s.imageData=e.imageData),e.contentType&&(s.contentType=e.contentType),e.url&&(s.url=o(e.url,r)),s}}}}},78553:(t,e,r)=>{r.d(e,{D:()=>o,p:()=>i});var s=r(56507);function i(t){const e=(0,s.Vr)(100*(1-t));return Math.max(0,Math.min(e,100))}function o(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}},83213:(t,e,r)=>{r.d(e,{x:()=>s,z:()=>i});const s=["begin","end","begin-end"],i=["arrow","circle","square","diamond","cross","x"]},89420:(t,e,r)=>{r.d(e,{A:()=>u});var s=r(90237),i=r(90629),o=r(10107),n=r(56507),l=(r(44208),r(87811),r(40608)),a=r(20378);let u=class extends a.A{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};(0,s._)([(0,o.MZ)({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],u.prototype,"angle",void 0),(0,s._)([(0,o.MZ)({type:["simple-marker","picture-marker"],readOnly:!0})],u.prototype,"type",void 0),(0,s._)([(0,o.MZ)({type:Number,cast:i.cr,json:{write:!0}})],u.prototype,"xoffset",void 0),(0,s._)([(0,o.MZ)({type:Number,cast:i.cr,json:{write:!0}})],u.prototype,"yoffset",void 0),(0,s._)([(0,o.MZ)({cast:t=>"auto"===t?t:(0,n.GB)((0,i.cr)(t)),json:{write:!0}})],u.prototype,"size",void 0),u=(0,s._)([(0,l.$)("esri.symbols.MarkerSymbol")],u)},90629:(t,e,r)=>{r.d(e,{Lz:()=>n,PN:()=>l,cr:()=>a,tc:()=>u});const s=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,i="screenUtils.toPt: input not recognized!",o=96;function n(t){return t?t/72*o:0}function l(t){return t?72*t/o:0}function a(t){if("string"==typeof t){const e=t.match(s);if(e){const r=Number(e[1]),s=e[3]&&e[3].toLowerCase(),i="-"===t.charAt(0),o="px"===s?l(r):r;return i?-o:o}return console.warn(i),null}return t}function u(t=0,e=0){return{x:t,y:e}}},94985:(t,e,r)=>{r.d(e,{A:()=>y});var s,i=r(90237),o=r(68197),n=r(66552),l=r(4718),a=r(10107),u=(r(44208),r(53966),r(93223)),h=r(40608),c=r(65851),p=r(31593);const d=new n.J({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let y=s=class extends c.A{constructor(...t){super(...t),this.color=new o.A([0,0,0,.25]),this.outline=new p.A,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,r){if(t&&"string"!=typeof t)return t;const s={};return t&&(s.style=t),e&&(s.outline=e),r&&(s.color=r),s}clone(){return new s({color:(0,l.o8)(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};(0,i._)([(0,a.MZ)()],y.prototype,"color",void 0),(0,i._)([(0,a.MZ)()],y.prototype,"outline",void 0),(0,i._)([(0,u.e)({esriSFS:"simple-fill"},{readOnly:!0})],y.prototype,"type",void 0),(0,i._)([(0,a.MZ)({type:d.apiValues,json:{read:d.read,write:d.write}})],y.prototype,"style",void 0),y=s=(0,i._)([(0,h.$)("esri.symbols.SimpleFillSymbol")],y)}}]);