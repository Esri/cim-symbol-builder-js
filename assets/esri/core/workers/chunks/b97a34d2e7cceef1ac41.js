"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[7799],{46521:(t,e,n)=>{function o(){return[1,0,0,0,1,0,0,0,1]}function i(t,e){return new Float64Array(t,e,9)}n.d(e,{a:()=>i,c:()=>o}),Object.freeze(Object.defineProperty({__proto__:null,create:o,clone:function(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},fromValues:function(t,e,n,o,i,r,s,c,a){return[t,e,n,o,i,r,s,c,a]},createView:i},Symbol.toStringTag,{value:"Module"}))},13598:(t,e,n)=>{function o(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function r(t,e){return new Float64Array(t,e,16)}n.d(e,{I:()=>s,a:()=>r,b:()=>i,c:()=>o});const s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,create:o,clone:i,fromValues:function(t,e,n,o,i,r,s,c,a,u,d,h,l,_,f,T){return[t,e,n,o,i,r,s,c,a,u,d,h,l,_,f,T]},createView:r,IDENTITY:s},Symbol.toStringTag,{value:"Module"}))},94961:(t,e,n)=>{function o(){return[0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3]]}function r(t,e){return new Float64Array(t,e,4)}n.d(e,{I:()=>s,a:()=>o,b:()=>i,c:()=>r});const s=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,create:o,clone:i,fromValues:function(t,e,n,o){return[t,e,n,o]},createView:r,IDENTITY:s},Symbol.toStringTag,{value:"Module"}))},2643:(t,e,n)=>{n.d(e,{b:()=>m,c:()=>g,d:()=>p,g:()=>O,i:()=>N,m:()=>x}),n(80442);var o,i,r=n(92604),s=n(22021),c=n(70586),a=n(52138),u=n(17896),d=n(65617),h=n(98766),l=n(88669);(i=o||(o={}))[i.X=0]="X",i[i.Y=1]="Y",i[i.Z=2]="Z";var _=n(78341);(0,d.c)(),(0,d.c)();var f=n(12981);const T=r.Z.getLogger("esri.geometry.support.sphere");function g(){return(0,l.c)()}function m(t,e=g()){return(0,h.c)(e,t)}function p(t){return t[3]}function O(t){return t}function b(t,e,n){if((0,c.Wi)(e))return!1;const{origin:o,direction:i}=e,r=E;r[0]=o[0]-t[0],r[1]=o[1]-t[1],r[2]=o[2]-t[2];const s=i[0]*i[0]+i[1]*i[1]+i[2]*i[2],a=2*(i[0]*r[0]+i[1]*r[1]+i[2]*r[2]),u=a*a-4*s*(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]-t[3]*t[3]);if(u<0)return!1;const d=Math.sqrt(u);let h=(-a-d)/(2*s);const l=(-a+d)/(2*s);return(h<0||l<h&&l>0)&&(h=l),!(h<0||(n&&(n[0]=o[0]+i[0]*h,n[1]=o[1]+i[1]*h,n[2]=o[2]+i[2]*h),0))}const E=(0,d.c)();function N(t,e){return b(t,e,null)}function R(t,e,n){const o=f.WM.get(),i=f.MP.get();(0,u.f)(o,e.origin,e.direction);const r=p(t);(0,u.f)(n,o,e.origin),(0,u.g)(n,n,1/(0,u.l)(n)*r);const c=A(t,e.origin),d=function(t,e){const n=(0,u.e)(t,e)/((0,u.l)(t)*(0,u.l)(e));return-(0,s.ZF)(n)}(e.origin,n);return(0,a.d)(i,d+c,o),(0,u.m)(n,n,i),n}function M(t,e,n){const o=(0,u.b)(f.WM.get(),e,t),i=(0,u.g)(f.WM.get(),o,t[3]/(0,u.l)(o));return(0,u.a)(n,i,t)}function A(t,e){const n=(0,u.b)(f.WM.get(),e,t),o=(0,u.l)(n),i=p(t),r=i+Math.abs(i-o);return(0,s.ZF)(i/r)}const F=(0,d.c)();function I(t,e,n,i){const r=(0,u.b)(F,e,t);switch(n){case o.X:{const t=(0,s.jE)(r,F)[2];return(0,u.s)(i,-Math.sin(t),Math.cos(t),0)}case o.Y:{const t=(0,s.jE)(r,F),e=t[1],n=t[2],o=Math.sin(e);return(0,u.s)(i,-o*Math.cos(n),-o*Math.sin(n),Math.cos(e))}case o.Z:return(0,u.n)(i,r);default:return}}function S(t,e){const n=(0,u.b)(j,e,t);return(0,u.l)(n)-t[3]}function x(t,e){const n=(0,u.d)(t,e),o=p(t);return n<=o*o}const j=(0,d.c)(),P=g();Object.freeze(Object.defineProperty({__proto__:null,create:g,copy:m,fromCenterAndRadius:function(t,e){return(0,l.f)(t[0],t[1],t[2],e)},wrap:function(t){return t},clear:function(t){t[0]=t[1]=t[2]=t[3]=0},fromRadius:function(t,e){return t[0]=t[1]=t[2]=0,t[3]=e,t},getRadius:p,getCenter:O,fromValues:function(t,e,n,o){return(0,l.f)(t,e,n,o)},elevate:function(t,e,n){return t!==n&&(0,u.c)(n,t),n[3]=t[3]+e,n},setExtent:function(t,e,n){return T.error("sphere.setExtent is not yet supported"),t===n?n:m(t,n)},intersectRay:b,intersectsRay:N,intersectRayClosestSilhouette:function(t,e,n){if(b(t,e,n))return n;const o=R(t,e,f.WM.get());return(0,u.a)(n,e.origin,(0,u.g)(f.WM.get(),e.direction,(0,u.i)(e.origin,o)/(0,u.l)(e.direction))),n},closestPointOnSilhouette:R,closestPoint:function(t,e,n){return b(t,e,n)?n:((0,_.JI)(e,t,n),M(t,n,n))},projectPoint:M,distanceToSilhouette:function(t,e){const n=(0,u.b)(f.WM.get(),e,t),o=(0,u.p)(n),i=t[3]*t[3];return Math.sqrt(Math.abs(o-i))},angleToSilhouette:A,axisAt:I,altitudeAt:S,setAltitudeAt:function(t,e,n,i){const r=S(t,e),s=I(t,e,o.Z,j),c=(0,u.g)(j,s,n-r);return(0,u.a)(i,e,c)},containsPoint:x,tmpSphere:P},Symbol.toStringTag,{value:"Module"}))},78341:(t,e,n)=>{n.d(e,{JI:()=>a,Ue:()=>s,re:()=>c}),n(67676);var o=n(22807),i=n(17896),r=n(65617);function s(t){return t?{origin:(0,r.a)(t.origin),direction:(0,r.a)(t.direction)}:{origin:(0,r.c)(),direction:(0,r.c)()}}function c(t,e){const n=u.get();return n.origin=t,n.direction=e,n}function a(t,e,n){const o=(0,i.e)(t.direction,(0,i.b)(n,e,t.origin));return(0,i.a)(n,t.origin,(0,i.g)(n,t.direction,o)),n}n(12981);const u=new o.x((function(){return{origin:null,direction:null}}))},11726:(t,e,n)=>{n.d(e,{hu:()=>i,yK:()=>r}),n(97323),n(98766),(0,n(88669).c)();class o{constructor(t){this.message=t}toString(){return`AssertException: ${this.message}`}}function i(t,e){if(!t)throw e=e||"assert",console.log(new Error(e).stack),new o(e)}function r(t,e,n,o){let i,r=(n[0]-t[0])/e[0],s=(o[0]-t[0])/e[0];r>s&&(i=r,r=s,s=i);let c=(n[1]-t[1])/e[1],a=(o[1]-t[1])/e[1];if(c>a&&(i=c,c=a,a=i),r>a||c>s)return!1;c>r&&(r=c),a<s&&(s=a);let u=(n[2]-t[2])/e[2],d=(o[2]-t[2])/e[2];return u>d&&(i=u,u=d,d=i),!(r>d||u>s||(d<s&&(s=d),s<0))}},28615:(t,e,n)=>{n.r(e),n.d(e,{SceneLayerSnappingSourceWorker:()=>et,default:()=>nt});var o,i,r,s,c,a,u,d=n(43697),h=n(70586),l=n(95330),_=(n(92604),n(75215),n(67676),n(80442),n(37697),n(52011)),f=n(17896),T=n(65617),g=n(16996),m=n(2643),p=n(98370),O=n(71143),b=n(44553),E=n(22807),N=(n(52138),n(98766),n(88669)),R=n(78341);function M(t,e){for(let n=0;n<a.NUM;n++){const o=t[n];if(o[0]*e[0]+o[1]*e[1]+o[2]*e[2]+o[3]>=e[3])return!1}return!0}n(12981),new E.x((()=>({c0:0,c1:0,ray:null}))),n(22021),(0,T.c)(),(0,T.c)(),(0,T.c)(),(0,T.c)(),(0,T.c)(),(i=o||(o={}))[i.NONE=0]="NONE",i[i.CLAMP=1]="CLAMP",i[i.INFINITE_MIN=4]="INFINITE_MIN",i[i.INFINITE_MAX=8]="INFINITE_MAX",o.INFINITE_MIN,o.INFINITE_MAX,o.INFINITE_MAX,(c=r||(r={}))[c.LEFT=0]="LEFT",c[c.RIGHT=1]="RIGHT",c[c.BOTTOM=2]="BOTTOM",c[c.TOP=3]="TOP",c[c.NEAR=4]="NEAR",c[c.FAR=5]="FAR",function(t){t[t.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",t[t.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",t[t.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",t[t.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",t[t.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",t[t.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",t[t.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",t[t.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(s||(s={})),s.FAR_BOTTOM_RIGHT,s.NEAR_BOTTOM_RIGHT,s.NEAR_BOTTOM_LEFT,s.FAR_BOTTOM_LEFT,s.NEAR_BOTTOM_LEFT,s.NEAR_BOTTOM_RIGHT,s.NEAR_TOP_RIGHT,s.NEAR_TOP_LEFT,s.FAR_BOTTOM_RIGHT,s.FAR_BOTTOM_LEFT,s.FAR_TOP_LEFT,s.FAR_TOP_RIGHT,s.NEAR_BOTTOM_RIGHT,s.FAR_BOTTOM_RIGHT,s.FAR_TOP_RIGHT,s.NEAR_TOP_RIGHT,s.FAR_BOTTOM_LEFT,s.NEAR_BOTTOM_LEFT,s.NEAR_TOP_LEFT,s.FAR_TOP_LEFT,s.FAR_TOP_LEFT,s.NEAR_TOP_LEFT,s.NEAR_TOP_RIGHT,s.FAR_TOP_RIGHT,function(t){t[t.NUM=6]="NUM"}(a||(a={})),function(t){t[t.NUM=8]="NUM"}(u||(u={})),(0,N.f)(-1,-1,-1,1),(0,N.f)(1,-1,-1,1),(0,N.f)(1,1,-1,1),(0,N.f)(-1,1,-1,1),(0,N.f)(-1,-1,1,1),(0,N.f)(1,-1,1,1),(0,N.f)(1,1,1,1),(0,N.f)(-1,1,1,1),new E.x((function(t){return t?{ray:(0,R.Ue)(t.ray),c0:t.c0,c1:t.c1}:{ray:(0,R.Ue)(),c0:0,c1:Number.MAX_VALUE}})),(0,T.c)(),(0,T.c)(),(0,T.c)(),(0,T.c)(),(0,T.c)(),(0,T.c)(),(0,T.c)(),(0,T.c)();var A,F,I=n(11726);class S{constructor(t,e){this._objectToBoundingSphere=t,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new x,this._objectCount=0,e&&(void 0!==e.maximumObjectsPerNode&&(this._maximumObjectsPerNode=e.maximumObjectsPerNode),void 0!==e.maximumDepth&&(this._maximumDepth=e.maximumDepth))}get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}destroy(){this._degenerateObjects.clear(),x.clearPool(),G[0]=null,q.prune(),J.prune()}add(t,e=t.length){this._objectCount+=e,this._grow(t,e);const n=x.acquire();for(let o=0;o<e;o++){const e=t[o];this._isDegenerate(e)?this._degenerateObjects.add(e):(n.init(this._root),this._add(e,n))}x.release(n)}remove(t,e=null){this._objectCount-=t.length;const n=x.acquire();for(const o of t){const t=(0,h.pC)(e)?e:(0,m.b)(this._objectToBoundingSphere(o),Z);C(t[3])?(n.init(this._root),this._remove(o,t,n)):this._degenerateObjects.delete(o)}x.release(n),this._shrink()}update(t,e){if(!C(e[3])&&this._isDegenerate(t))return;const n=function(t){return G[0]=t,G}(t);this.remove(n,e),this.add(n)}forEachAlongRay(t,e,n){const o=(0,R.re)(t,e);this._forEachNode(this._root,(t=>{if(!this._intersectsNode(o,t))return!1;const e=t.node;return e.terminals.forAll((t=>{this._intersectsObject(o,t)&&n(t)})),null!==e.residents&&e.residents.forAll((t=>{this._intersectsObject(o,t)&&n(t)})),!0}))}forEachAlongRayWithVerticalOffset(t,e,n,o){const i=(0,R.re)(t,e);this._forEachNode(this._root,(t=>{if(!this._intersectsNodeWithOffset(i,t,o))return!1;const e=t.node;return e.terminals.forAll((t=>{this._intersectsObjectWithOffset(i,t,o)&&n(t)})),null!==e.residents&&e.residents.forAll((t=>{this._intersectsObjectWithOffset(i,t,o)&&n(t)})),!0}))}forEach(t){this._forEachNode(this._root,(e=>{const n=e.node;return n.terminals.forAll(t),null!==n.residents&&n.residents.forAll(t),!0})),this._degenerateObjects.forEach(t)}forEachDegenerateObject(t){this._degenerateObjects.forEach(t)}findClosest(t,e,n,o=(()=>!0),i=1/0){let r=1/0,s=1/0,c=null;const a=B(t,e),u=a=>{if(--i,!o(a))return;const u=this._objectToBoundingSphere(a);if(!M(n,u))return;const d=w(t,e,(0,m.g)(u)),h=d-u[3],l=d+u[3];h<r&&(r=h,s=l,c=a)};return this._forEachNodeDepthOrdered(this._root,(o=>{if(i<=0||!M(n,o.bounds))return!1;if((0,f.g)(V,a,o.halfSize),(0,f.a)(V,V,o.bounds),w(t,e,V)>s)return!1;const r=o.node;return r.terminals.forAll((t=>u(t))),null!==r.residents&&r.residents.forAll((t=>u(t))),!0}),t,e),c}forEachInDepthRange(t,e,n,o,i,r,s){let c=-1/0,a=1/0;const u={setRange:t=>{n===S.DepthOrder.FRONT_TO_BACK?(c=Math.max(c,t.near),a=Math.min(a,t.far)):(c=Math.max(c,-t.far),a=Math.min(a,-t.near))}};u.setRange(o);const d=w(e,n,t),h=B(e,n),l=B(e,-n),_=t=>{if(!s(t))return;const o=this._objectToBoundingSphere(t),h=(0,m.g)(o),l=w(e,n,h)-d,_=l-o[3],f=l+o[3];_>a||f<c||!M(r,o)||i(t,u)};this._forEachNodeDepthOrdered(this._root,(t=>{if(!M(r,t.bounds))return!1;if((0,f.g)(V,h,t.halfSize),(0,f.a)(V,V,t.bounds),w(e,n,V)-d>a)return!1;if((0,f.g)(V,l,t.halfSize),(0,f.a)(V,V,t.bounds),w(e,n,V)-d<c)return!1;const o=t.node;return o.terminals.forAll((t=>_(t))),null!==o.residents&&o.residents.forAll((t=>_(t))),!0}),e,n)}forEachNode(t){this._forEachNode(this._root,(e=>t(e.node,e.bounds,e.halfSize)))}forEachNeighbor(t,e){const n=(0,m.d)(e),o=(0,m.g)(e),i=e=>{const i=this._objectToBoundingSphere(e),r=(0,m.d)(i),s=n+r;(0,f.d)((0,m.g)(i),o)-s*s<=0&&t(e)};this._forEachNode(this._root,(t=>{const e=(0,m.d)(t.bounds),r=n+e;if((0,f.d)((0,m.g)(t.bounds),o)-r*r>0)return!1;const s=t.node;return s.terminals.forAll((t=>i(t))),null!==s.residents&&s.residents.forAll((t=>i(t))),!0})),this.forEachDegenerateObject(i)}_intersectsNode(t,e){return y(e.bounds,2*-e.halfSize,k),y(e.bounds,2*e.halfSize,W),(0,I.yK)(t.origin,t.direction,k,W)}_intersectsNodeWithOffset(t,e,n){return y(e.bounds,2*-e.halfSize,k),y(e.bounds,2*e.halfSize,W),n.applyToMinMax(k,W),(0,I.yK)(t.origin,t.direction,k,W)}_intersectsObject(t,e){const n=this._objectToBoundingSphere(e);return!(n[3]>0)||(0,m.i)(n,t)}_intersectsObjectWithOffset(t,e,n){const o=this._objectToBoundingSphere(e);return!(o[3]>0)||(0,m.i)(n.applyToBoundingSphere(o),t)}_forEachNode(t,e){let n=x.acquire().init(t);const o=[n];for(;0!==o.length;){if(n=o.pop(),e(n)&&!n.isLeaf())for(let t=0;t<n.node.children.length;t++)n.node.children[t]&&o.push(x.acquire().init(n).advance(t));x.release(n)}}_forEachNodeDepthOrdered(t,e,n,o=S.DepthOrder.FRONT_TO_BACK){let i=x.acquire().init(t);const r=[i];for(function(t,e,n){if(!J.length)for(let t=0;t<8;++t)J.push({index:0,distance:0});for(let n=0;n<8;++n){const o=v[n];J.data[n].index=n,J.data[n].distance=w(t,e,o)}J.sort(((t,e)=>t.distance-e.distance));for(let t=0;t<8;++t)n[t]=J.data[t].index}(n,o,$);0!==r.length;){if(i=r.pop(),e(i)&&!i.isLeaf())for(let t=7;t>=0;--t){const e=$[t];i.node.children[e]&&r.push(x.acquire().init(i).advance(e))}x.release(i)}}_remove(t,e,n){q.clear();const o=n.advanceTo(e,((t,e)=>{q.push(t.node),q.push(e)}))?n.node.terminals:n.node.residents;if(o.removeUnordered(t),0===o.length)for(let t=q.length-2;t>=0;t-=2){const e=q.data[t],n=q.data[t+1];if(!this._purge(e,n))break}}_nodeIsEmpty(t){if(0!==t.terminals.length)return!1;if(null!==t.residents)return 0===t.residents.length;for(let e=0;e<t.children.length;e++)if(t.children[e])return!1;return!0}_purge(t,e){return e>=0&&(t.children[e]=null),!!this._nodeIsEmpty(t)&&(null===t.residents&&(t.residents=new b.Z({shrink:!0})),!0)}_add(t,e){e.advanceTo(this._objectToBoundingSphere(t))?e.node.terminals.push(t):(e.node.residents.push(t),e.node.residents.length>this._maximumObjectsPerNode&&e.depth<this._maximumDepth&&this._split(e))}_split(t){const e=t.node.residents;t.node.residents=null;for(let n=0;n<e.length;n++){const o=x.acquire().init(t);this._add(e.getItemAt(n),o),x.release(o)}}_grow(t,e){if(0!==e&&(L(t,e,(t=>this._objectToBoundingSphere(t)),U),C(U[3])&&!this._fitsInsideTree(U)))if(this._nodeIsEmpty(this._root.node))(0,m.b)(U,this._root.bounds),this._root.halfSize=1.25*U[3];else{const t=this._rootBoundsForRootAsSubNode(U);this._placingRootViolatesMaxDepth(t)?this._rebuildTree(U,t):this._growRootAsSubNode(t),x.release(t)}}_rebuildTree(t,e){(0,f.c)(K,e.bounds),K[3]=e.halfSize,L([t,K],2,(t=>t),X);const n=x.acquire().init(this._root);this._root.initFrom(null,X,1.25*X[3]),this._forEachNode(n,(t=>(this.add(t.node.terminals.data,t.node.terminals.length),null!==t.node.residents&&this.add(t.node.residents.data,t.node.residents.length),!0))),x.release(n)}_placingRootViolatesMaxDepth(t){const e=Math.log(t.halfSize/this._root.halfSize)*Math.LOG2E;let n=0;return this._forEachNode(this._root,(t=>(n=Math.max(n,t.depth),n+e<=this._maximumDepth))),n+e>this._maximumDepth}_rootBoundsForRootAsSubNode(t){const e=t[3],n=t;let o=-1/0;const i=this._root.bounds,r=this._root.halfSize;for(let t=0;t<3;t++){const s=i[t]-r-(n[t]-e),c=n[t]+e-(i[t]+r),a=Math.max(0,Math.ceil(s/(2*r))),u=Math.max(0,Math.ceil(c/(2*r)))+1,d=2**Math.ceil(Math.log(a+u)*Math.LOG2E);o=Math.max(o,d),Y[t].min=a,Y[t].max=u}for(let t=0;t<3;t++){let e=Y[t].min,n=Y[t].max;const s=(o-(e+n))/2;e+=Math.ceil(s),n+=Math.floor(s);const c=i[t]-r-e*r*2;H[t]=c+(n+e)*r}return H[3]=o*r*D,x.acquire().initFrom(null,H,o*r,0)}_growRootAsSubNode(t){const e=this._root.node;(0,f.c)(U,this._root.bounds),U[3]=this._root.halfSize,this._root.init(t),t.advanceTo(U,null,!0),t.node.children=e.children,t.node.residents=e.residents,t.node.terminals=e.terminals}_shrink(){for(;;){const t=this._findShrinkIndex();if(-1===t)break;this._root.advance(t),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let t=null;const e=this._root.node.children;let n=0,o=0;for(;o<e.length&&null==t;)n=o++,t=e[n];for(;o<e.length;)if(e[o++])return-1;return n}_isDegenerate(t){return!C(this._objectToBoundingSphere(t)[3])}_fitsInsideTree(t){const e=this._root.bounds,n=this._root.halfSize;return t[3]<=n&&t[0]>=e[0]-n&&t[0]<=e[0]+n&&t[1]>=e[1]-n&&t[1]<=e[1]+n&&t[2]>=e[2]-n&&t[2]<=e[2]+n}}class x{constructor(){this.bounds=(0,m.c)(),this.halfSize=0,this.initFrom(null,null,0,0)}init(t){return this.initFrom(t.node,t.bounds,t.halfSize,t.depth)}initFrom(t,e,n,o=this.depth){return this.node=(0,h.pC)(t)?t:x.createEmptyNode(),(0,h.pC)(e)&&(0,m.b)(e,this.bounds),this.halfSize=n,this.depth=o,this}advance(t){let e=this.node.children[t];e||(e=x.createEmptyNode(),this.node.children[t]=e),this.node=e,this.halfSize/=2,this.depth++;const n=v[t];return this.bounds[0]+=n[0]*this.halfSize,this.bounds[1]+=n[1]*this.halfSize,this.bounds[2]+=n[2]*this.halfSize,this.bounds[3]=this.halfSize*D,this}advanceTo(t,e,n=!1){for(;;){if(this.isTerminalFor(t))return e&&e(this,-1),!0;if(this.isLeaf()){if(!n)return e&&e(this,-1),!1;this.node.residents=null}const o=this._childIndex(t);e&&e(this,o),this.advance(o)}}isLeaf(){return null!=this.node.residents}isTerminalFor(t){return t[3]>this.halfSize/2}_childIndex(t){const e=this.bounds;return(e[0]<t[0]?1:0)+(e[1]<t[1]?2:0)+(e[2]<t[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new b.Z({shrink:!0}),residents:new b.Z({shrink:!0})}}static acquire(){return x._pool.acquire()}static release(t){x._pool.release(t)}static clearPool(){x._pool.prune()}}function j(t,e){t[0]=Math.min(t[0],e[0]-e[3]),t[1]=Math.min(t[1],e[1]-e[3]),t[2]=Math.min(t[2],e[2]-e[3])}function P(t,e){t[0]=Math.max(t[0],e[0]+e[3]),t[1]=Math.max(t[1],e[1]+e[3]),t[2]=Math.max(t[2],e[2]+e[3])}function y(t,e,n){n[0]=t[0]+e,n[1]=t[1]+e,n[2]=t[2]+e}function L(t,e,n,o){if(1===e){const e=n(t[0]);(0,m.b)(e,o)}else{k[0]=1/0,k[1]=1/0,k[2]=1/0,W[0]=-1/0,W[1]=-1/0,W[2]=-1/0;for(let o=0;o<e;o++){const e=n(t[o]);C(e[3])&&(j(k,e),P(W,e))}(0,f.h)(o,k,W,.5),o[3]=Math.max(W[0]-k[0],W[1]-k[1],W[2]-k[2])/2}}function B(t,e){let n=1/0,o=null;for(let i=0;i<8;++i){const r=w(t,e,z[i]);r<n&&(n=r,o=z[i])}return o}function w(t,e,n){return e*(t[0]*n[0]+t[1]*n[1]+t[2]*n[2])}function C(t){return!isNaN(t)&&t!==-1/0&&t!==1/0&&t>0}x._pool=new O.Z(x),A=S||(S={}),(F=A.DepthOrder||(A.DepthOrder={}))[F.FRONT_TO_BACK=1]="FRONT_TO_BACK",F[F.BACK_TO_FRONT=-1]="BACK_TO_FRONT";const v=[(0,T.f)(-1,-1,-1),(0,T.f)(1,-1,-1),(0,T.f)(-1,1,-1),(0,T.f)(1,1,-1),(0,T.f)(-1,-1,1),(0,T.f)(1,-1,1),(0,T.f)(-1,1,1),(0,T.f)(1,1,1)],z=[(0,T.f)(-1,-1,-1),(0,T.f)(-1,-1,1),(0,T.f)(-1,1,-1),(0,T.f)(-1,1,1),(0,T.f)(1,-1,-1),(0,T.f)(1,-1,1),(0,T.f)(1,1,-1),(0,T.f)(1,1,1)],D=Math.sqrt(3),G=[null],H=(0,m.c)(),V=(0,T.c)(),k=(0,T.c)(),W=(0,T.c)(),q=new b.Z,Z=(0,m.c)(),U=(0,m.c)(),K=(0,m.c)(),X=(0,m.c)(),Y=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],J=new b.Z,$=[0,0,0,0,0,0,0,0],Q=S;var tt=n(18936);let et=class{constructor(){this._idToComponent=new Map,this._components=new Q((t=>t.bounds)),this._edges=new Q((t=>t.bounds)),this._tmpLineSegment=(0,g.Ue)(),this._tmpP1=(0,T.c)(),this._tmpP2=(0,T.c)(),this._tmpP3=(0,T.c)(),this.remoteClient=null}async fetchCandidates(t,e){await Promise.resolve(),(0,l.k_)(e),await this._ensureEdgeLocations(t,e);const n=[];return this._edges.forEachNeighbor((e=>this._addCandidates(t,e,n)),t.bounds),{result:{candidates:n}}}async _ensureEdgeLocations(t,e){const n=[];if(this._components.forEachNeighbor((t=>{if((0,h.Wi)(t.info)){const{id:e,uid:o}=t;n.push({id:e,uid:o})}}),t.bounds),!n.length)return;const o={components:n},i=await this.remoteClient.invoke("fetchAllEdgeLocations",o,(0,h.Pt)(e,{}));for(const t of i.components)this._setFetchEdgeLocations(t)}async add(t){const e=new ot(t.id,t.bounds);return this._idToComponent.set(e.id,e),this._components.add([e]),{result:{}}}async remove(t){const e=this._idToComponent.get(t.id);if(e){const t=[];this._edges.forEachNeighbor((n=>{n.component===e&&t.push(n)}),e.bounds),this._edges.remove(t),this._components.remove([e]),this._idToComponent.delete(e.id)}return{result:{}}}_setFetchEdgeLocations(t){const e=this._idToComponent.get(t.id);if((0,h.Wi)(e)||t.uid!==e.uid)return;const n=tt.extractComponentsEdgeLocationsLayout.createView(t.locations),o=new Array(n.count),i=(0,T.c)(),r=(0,T.c)();for(let s=0;s<n.count;s++){const c=(0,m.c)(),a=(0,m.g)(c);n.position0.getVec(s,i),n.position1.getVec(s,r),(0,f.F)(a,a,i,.5),(0,f.F)(a,a,i,.5),(0,f.a)(a,a,t.origin),c[3]=(0,f.i)(a,i);const u=new it(e,s,c);o[s]=u}this._edges.add(o);const{objectIds:s,origin:c}=t;e.info={locations:n,objectIds:s,origin:c}}_addCandidates(t,e,n){const{locations:o,origin:i,objectIds:r}=e.component.info,s=o.position0.getVec(e.index,this._tmpP1),c=o.position1.getVec(e.index,this._tmpP2);(0,f.a)(s,s,i),(0,f.a)(c,c,i);const a=r[o.componentIndex.get(e.index)];this._addEdgeCandidate(t,a,s,c,n),this._addVertexCandidate(t,a,s,n),this._addVertexCandidate(t,a,c,n)}_addEdgeCandidate(t,e,n,o,i){if(!(t.types&p.r.EDGE))return;const r=(0,m.g)(t.bounds),s=(0,g.zk)(n,o,this._tmpLineSegment),c=(0,g.nF)(s,r,this._tmpP3);if(!(0,m.m)(t.bounds,c))return null;i.push({type:"edge",objectId:e,target:(0,T.a)(c),distance:(0,f.i)(r,c),start:(0,T.a)(n),end:(0,T.a)(o)})}_addVertexCandidate(t,e,n,o){if(!(t.types&p.r.VERTEX))return;const i=(0,m.g)(t.bounds);if(!(0,m.m)(t.bounds,n))return null;o.push({type:"vertex",objectId:e,target:(0,T.a)(n),distance:(0,f.i)(i,n)})}};function nt(){return new et}et=(0,d._)([(0,_.j)("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],et);class ot{constructor(t,e){this.id=t,this.bounds=e,this.info=null,this.uid=++ot.uid}}ot.uid=0;class it{constructor(t,e,n){this.component=t,this.index=e,this.bounds=n}}}}]);