"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[3847,5732,7701,5935],{84552:(e,t,i)=>{i.d(t,{Z:()=>p});var r=i(43697),n=i(2368),s=i(96674),o=i(35463),l=i(5600),a=(i(75215),i(67676),i(80442),i(36030)),u=i(52011),d=i(78981);let c=class extends((0,n.J)(s.wq)){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return(0,o.rJ)(this.value,this.unit,"milliseconds")}};(0,r._)([(0,a.J)(d.v,{nonNullable:!0})],c.prototype,"unit",void 0),(0,r._)([(0,l.Cb)({type:Number,json:{write:!0},nonNullable:!0})],c.prototype,"value",void 0),c=(0,r._)([(0,u.j)("esri.TimeInterval")],c);const p=c},5732:(e,t,i)=>{i.d(t,{c:()=>r,g:()=>n});var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},22862:(e,t,i)=>{i.d(t,{Hg:()=>m,V7:()=>y,uD:()=>p});var r=i(92036),n=i(46791),s=i(1153);const o=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function l(e){return e instanceof r.Z}function a(e){return e instanceof n.Z?Object.keys(e.items):l(e)?(0,s.vw)(e).keys():e?Object.keys(e):[]}function u(e,t){return e instanceof n.Z?e.items[t]:e[t]}function d(e){return e?e.declaredClass:null}function c(e,t){const i=e.diff;if(i&&"function"==typeof i)return i(e,t);const r=a(e),n=a(t);if(0===r.length&&0===n.length)return;if(!r.length||!n.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const s=n.filter((e=>!r.includes(e))),p=r.filter((e=>!n.includes(e))),y=r.filter((i=>n.includes(i)&&u(e,i)!==u(t,i))).concat(s,p).sort(),m=d(e);if(m&&o.has(m)&&y.length)return{type:"complete",oldValue:e,newValue:t};let h;const f=l(e)&&l(t);for(const r of y){const n=u(e,r),s=u(t,r);let o;if((f||"function"!=typeof n&&"function"!=typeof s)&&n!==s&&(null!=n||null!=s)){if(i&&i[r]&&"function"==typeof i[r])o=i[r]?.(n,s);else if(n instanceof Date&&s instanceof Date){if(n.getTime()===s.getTime())continue;o={type:"complete",oldValue:n,newValue:s}}else o="object"==typeof n&&"object"==typeof s&&d(n)===d(s)?c(n,s):{type:"complete",oldValue:n,newValue:s};null!=o&&(null!=h?h.diff[r]=o:h={type:"partial",diff:{[r]:o}})}}return h}function p(e,t){if(null==e)return!1;const i=t.split(".");let r=e;for(const e of i){if("complete"===r.type)return!0;if("partial"!==r.type)return!1;{const t=r.diff[e];if(!t)return!1;r=t}}return!0}function y(e,t){for(const i of t)if(p(e,i))return!0;return!1}function m(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&d(e)!==d(t)?{type:"complete",oldValue:e,newValue:t}:c(e,t)}},60437:(e,t,i)=>{i.d(t,{G_:()=>w,HH:()=>o,JR:()=>m,TC:()=>l,Tn:()=>c,Ue:()=>n,al:()=>s,bZ:()=>h,cS:()=>y,dp:()=>u,fS:()=>b,is:()=>f,op:()=>d,pp:()=>a,t8:()=>p});var r=i(6570);function n(e=g){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function s(e,t,i,r,s,o,l=n()){return l[0]=e,l[1]=t,l[2]=i,l[3]=r,l[4]=s,l[5]=o,l}function o(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new r.Z(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function l(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function a(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function u(e,t=[0,0,0]){return t[0]=function(e){return e[0]>=e[3]?0:e[3]-e[0]}(e),t[1]=function(e){return e[1]>=e[4]?0:e[4]-e[1]}(e),t[2]=function(e){return e[2]>=e[5]?0:e[5]-e[2]}(e),t}function d(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function c(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function p(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function y(e){return e?p(e,w):n(w)}function m(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function h(e,t,i,r,n){return e[0]=t,e[1]=i,e[2]=Number.NEGATIVE_INFINITY,e[3]=r,e[4]=n,e[5]=Number.POSITIVE_INFINITY,e}function f(e){return 6===e.length}function b(e,t,i){if(null==e||null==t)return e===t;if(!f(e)||!f(t))return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}i(24470);const w=[1/0,1/0,1/0,-1/0,-1/0,-1/0],g=[0,0,0,0,0,0];n()},88387:(e,t,i)=>{i.r(t),i.d(t,{default:()=>W});var r,n=i(43697),s=(i(66577),i(51773)),o=(i(16050),i(12501),i(28756),i(92271),i(72529),i(5499),i(84382),i(81571),i(91423)),l=i(32400),a=i(3172),u=i(2368),d=i(20102),c=i(50758),p=i(22974),y=i(92604),m=i(16453),h=i(95330),f=i(5600),b=i(75215),w=i(71715),g=i(52011),v=i(86973),_=i(87085),S=i(17287),I=i(71612),F=i(17017),C=i(69637),x=i(6404),j=i(38009),T=i(16859),R=i(34760),O=i(72965),Z=i(28294),E=i(21506),N=i(45574),M=i(1231),V=i(53518),A=i(35671),D=i(54306),P=i(30707),q=i(96674);i(67676),i(80442);let L=r=class extends q.wq{constructor(){super(...arguments),this.age=null,this.ageReceived=null,this.displayCount=null,this.maxObservations=1}clone(){return new r({age:this.age,ageReceived:this.ageReceived,displayCount:this.displayCount,maxObservations:this.maxObservations})}};(0,n._)([(0,f.Cb)({type:Number,json:{write:!0}})],L.prototype,"age",void 0),(0,n._)([(0,f.Cb)({type:Number,json:{write:!0}})],L.prototype,"ageReceived",void 0),(0,n._)([(0,f.Cb)({type:Number,json:{write:!0}})],L.prototype,"displayCount",void 0),(0,n._)([(0,f.Cb)({type:Number,json:{write:!0}})],L.prototype,"maxObservations",void 0),L=r=(0,n._)([(0,g.j)("esri.layers.support.PurgeOptions")],L);const U=L;var k=i(40555),J=i(14165),G=i(32163),B=i(86787),z=i(12259),$=i(82971),H=i(6570);const Q=(0,V.v)();function X(e,t){return new d.Z("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}let Y=class extends((0,x.M)((0,C.b)((0,I.h)((0,Z.n)((0,O.M)((0,R.Q)((0,S.Y)((0,j.q)((0,T.I)((0,m.R)((0,F.N)((0,u.J)(_.Z))))))))))))){constructor(...e){super(...e),this.copyright=null,this.definitionExpression=null,this.displayField=null,this.elevationInfo=null,this.fields=null,this.fieldsIndex=null,this.geometryDefinition=null,this.geometryType=null,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.maxReconnectionAttempts=0,this.maxReconnectionInterval=20,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.operationalLayerType="ArcGISStreamLayer",this.popupEnabled=!0,this.popupTemplate=null,this.purgeOptions=new U,this.refreshInterval=0,this.screenSizePerspectiveEnabled=!0,this.sourceJSON=null,this.spatialReference=$.Z.WGS84,this.type="stream",this.url=null,this.updateInterval=300,this.useViewTime=!0,this.webSocketUrl=null,this._debouncedSaveOperations=(0,h.Ds)((async(e,t,r)=>{const{save:n,saveAs:s}=await i.e(4330).then(i.bind(i,94330));switch(e){case z.x.SAVE:return n(this,t);case z.x.SAVE_AS:return s(this,r,t)}}))}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){if(!("WebSocket"in globalThis))return this.addResolvingPromise(Promise.reject(new d.Z("stream-layer:websocket-unsupported","WebSocket is not supported in this browser. StreamLayer will not have real-time connection with the stream service."))),Promise.resolve(this);const t=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Stream Service","Feed"]},e).catch(h.r9).then((()=>this._fetchService(t)))),Promise.resolve(this)}get defaultPopupTemplate(){return this.createPopupTemplate()}set featureReduction(e){const t=this._normalizeFeatureReduction(e);this._set("featureReduction",t)}set renderer(e){(0,A.YN)(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,i){t=t.layerDefinition||t;const r=t.drawingInfo?.renderer;if(r){const e=(0,o.a)(r,t,i)||void 0;return e||y.Z.getLogger(this).error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:i}),e}return(0,N.Ob)(t,i)}async connect(e){const[{createConnection:t}]=await Promise.all([Promise.all([i.e(4599),i.e(2330)]).then(i.bind(i,95047)),this.load()]),r=this.geometryType?v.M.toJSON(this.geometryType):null,{customParameters:n=null,definitionExpression:s=null,geometryDefinition:o=null,maxReconnectionAttempts:l=0,maxReconnectionInterval:a=20,spatialReference:u=this.spatialReference}=e||this.createConnectionParameters(),d=t(this.parsedUrl,this.spatialReference,u,r,{geometry:o,where:s},l,a,n??void 0),p=(0,c.AL)([this.on("send-message-to-socket",(e=>d.sendMessageToSocket(e))),this.on("send-message-to-client",(e=>d.sendMessageToClient(e)))]);return d.once("destroy",p.remove),d}createConnectionParameters(){return{spatialReference:this.spatialReference,customParameters:this.customParameters,definitionExpression:this.definitionExpression,geometryDefinition:this.geometryDefinition,maxReconnectionAttempts:this.maxReconnectionAttempts,maxReconnectionInterval:this.maxReconnectionInterval}}createPopupTemplate(e){return(0,G.eZ)(this,e)}createQuery(){const e=new J.Z;return e.returnGeometry=!0,e.outFields=["*"],e.where=this.definitionExpression||"1=1",e}getFieldDomain(e,t){if(!this.fields)return null;let i=null;return this.fields.some((t=>(t.name===e&&(i=t.domain),!!i))),i}getField(e){return this.fieldsIndex.get(e)}serviceSupportsSpatialReference(e){return!0}sendMessageToSocket(e){this.emit("send-message-to-socket",e)}sendMessageToClient(e){this.emit("send-message-to-client",e)}async save(e){return this._debouncedSaveOperations(z.x.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(z.x.SAVE_AS,t,e)}write(e,t){const i=t?.messages;return this.webSocketUrl?(i?.push(X(this,"using a custom websocket connection cannot be written to web scenes and web maps")),null):this.parsedUrl?super.write(e,t):(i?.push(X(this,"using a client-side only connection without a url cannot be written to web scenes and web maps")),null)}async _fetchService(e){if(!this.webSocketUrl&&this.parsedUrl){if(!this.sourceJSON){const{data:t}=await(0,a.Z)(this.parsedUrl.path,{query:{f:"json",...this.customParameters,...this.parsedUrl.query},responseType:"json",signal:e});this.sourceJSON=t}}else{if(!this.timeInfo?.trackIdField)throw new d.Z("stream-layer:missing-metadata","The stream layer trackIdField must be specified.");if(!this.objectIdField){const e=this.fields.find((e=>"oid"===e.type))?.name;if(!e)throw new d.Z("stream-layer:missing-metadata","The stream layer objectIdField must be specified.");this.objectIdField=e}if(!this.fields)throw new d.Z("stream-layer:missing-metadata","The stream layer fields must be specified.");if(this.fields.some((e=>e.name===this.objectIdField))||this.fields.push(new M.Z({name:this.objectIdField,alias:this.objectIdField,type:"oid"})),!this.geometryType)throw new d.Z("stream-layer:missing-metadata","The stream layer geometryType must be specified.");this.webSocketUrl&&(this.url=this.webSocketUrl)}return this.read(this.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl}),(0,A.YN)(this.renderer,this.fieldsIndex),(0,A.UF)(this.timeInfo,this.fieldsIndex),this.objectIdField||(this.objectIdField="__esri_stream_id__"),(0,k.y)(this,{origin:"service"})}};(0,n._)([(0,f.Cb)({type:String})],Y.prototype,"copyright",void 0),(0,n._)([(0,f.Cb)({readOnly:!0})],Y.prototype,"defaultPopupTemplate",null),(0,n._)([(0,f.Cb)({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],Y.prototype,"definitionExpression",void 0),(0,n._)([(0,f.Cb)({type:String})],Y.prototype,"displayField",void 0),(0,n._)([(0,f.Cb)({type:B.Z})],Y.prototype,"elevationInfo",void 0),(0,n._)([(0,f.Cb)({json:{origins:{"web-map":{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],Y.prototype,"featureReduction",null),(0,n._)([(0,f.Cb)(Q.fields)],Y.prototype,"fields",void 0),(0,n._)([(0,f.Cb)(Q.fieldsIndex)],Y.prototype,"fieldsIndex",void 0),(0,n._)([(0,f.Cb)({type:H.Z,json:{name:"layerDefinition.definitionGeometry",write:!0}})],Y.prototype,"geometryDefinition",void 0),(0,n._)([(0,f.Cb)({type:v.M.apiValues,json:{read:{reader:v.M.read}}})],Y.prototype,"geometryType",void 0),(0,n._)([(0,f.Cb)(E.iR)],Y.prototype,"labelsVisible",void 0),(0,n._)([(0,f.Cb)({type:[D.Z],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:P.r},write:!0}})],Y.prototype,"labelingInfo",void 0),(0,n._)([(0,f.Cb)(E.rn)],Y.prototype,"legendEnabled",void 0),(0,n._)([(0,f.Cb)({type:["show","hide"],json:{origins:{"portal-item":{read:!1,write:!1}}}})],Y.prototype,"listMode",void 0),(0,n._)([(0,f.Cb)({type:b.z8})],Y.prototype,"maxReconnectionAttempts",void 0),(0,n._)([(0,f.Cb)({type:b.z8})],Y.prototype,"maxReconnectionInterval",void 0),(0,n._)([(0,f.Cb)(E.u1)],Y.prototype,"maxScale",void 0),(0,n._)([(0,f.Cb)(E.rO)],Y.prototype,"minScale",void 0),(0,n._)([(0,f.Cb)({type:String})],Y.prototype,"objectIdField",void 0),(0,n._)([(0,f.Cb)({value:"ArcGISStreamLayer",type:["ArcGISStreamLayer"]})],Y.prototype,"operationalLayerType",void 0),(0,n._)([(0,f.Cb)(E.C_)],Y.prototype,"popupEnabled",void 0),(0,n._)([(0,f.Cb)({type:s.Z,json:{name:"popupInfo",write:!0}})],Y.prototype,"popupTemplate",void 0),(0,n._)([(0,f.Cb)({type:U})],Y.prototype,"purgeOptions",void 0),(0,n._)([(0,f.Cb)({json:{read:!1,write:!1}})],Y.prototype,"refreshInterval",void 0),(0,n._)([(0,f.Cb)({types:l.A,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{name:"layerDefinition.drawingInfo.renderer",types:l.o,write:!0}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],Y.prototype,"renderer",null),(0,n._)([(0,w.r)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),(0,w.r)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Y.prototype,"readRenderer",null),(0,n._)([(0,f.Cb)((()=>{const e=(0,p.d9)(E.YI);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],Y.prototype,"screenSizePerspectiveEnabled",void 0),(0,n._)([(0,f.Cb)()],Y.prototype,"sourceJSON",void 0),(0,n._)([(0,f.Cb)({type:$.Z,json:{origins:{service:{read:{source:"spatialReference"}}}}})],Y.prototype,"spatialReference",void 0),(0,n._)([(0,f.Cb)({json:{read:!1}})],Y.prototype,"type",void 0),(0,n._)([(0,f.Cb)(E.HQ)],Y.prototype,"url",void 0),(0,n._)([(0,f.Cb)({type:Number})],Y.prototype,"updateInterval",void 0),(0,n._)([(0,f.Cb)({json:{read:!1,write:!1}})],Y.prototype,"useViewTime",void 0),(0,n._)([(0,f.Cb)({type:String})],Y.prototype,"webSocketUrl",void 0),Y=(0,n._)([(0,g.j)("esri.layers.StreamLayer")],Y);const W=Y},17287:(e,t,i)=>{i.d(t,{Y:()=>a});var r=i(43697),n=i(92604),s=i(5600),o=(i(75215),i(67676),i(80442),i(52011)),l=i(66677);const a=e=>{let t=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=(0,l.Qc)(this.url);if(null!=e&&e.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",(0,l.Nm)(e,n.Z.getLogger(this)))}};return(0,r._)([(0,s.Cb)()],t.prototype,"title",null),(0,r._)([(0,s.Cb)({type:String})],t.prototype,"url",null),t=(0,r._)([(0,o.j)("esri.layers.mixins.ArcGISService")],t),t}},17017:(e,t,i)=>{i.d(t,{N:()=>o});var r=i(43697),n=i(5600),s=(i(75215),i(67676),i(80442),i(52011));const o=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return(0,r._)([(0,n.Cb)({type:Object,json:{write:{overridePolicy:e=>({enabled:!!(e&&Object.keys(e).length>0)})}}})],t.prototype,"customParameters",void 0),t=(0,r._)([(0,s.j)("esri.layers.mixins.CustomParametersMixin")],t),t}},69637:(e,t,i)=>{i.d(t,{b:()=>j});var r,n=i(43697),s=i(5600),o=(i(75215),i(67676),i(80442),i(52011)),l=i(20102),a=i(96674),u=i(78286),d=i(72746),c=i(66577),p=i(92835),y=i(35454),m=i(22974),h=i(14165);const f=new y.X({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),b=new y.X({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let w=r=class extends a.wq{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:r,timeExtent:n,objectIds:s,units:o,distance:l}=this;return new h.Z({geometry:(0,m.d9)(i),objectIds:(0,m.d9)(s),spatialRelationship:r,timeExtent:(0,m.d9)(n),where:t,units:o,distance:l,...e})}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:n,objectIds:s,units:o,distance:l}=this;return new r({geometry:(0,m.d9)(t),objectIds:(0,m.d9)(s),spatialRelationship:i,timeExtent:(0,m.d9)(n),where:e,units:o,distance:l})}};(0,n._)([(0,s.Cb)({type:String,json:{write:!0}})],w.prototype,"where",void 0),(0,n._)([(0,s.Cb)({types:c.qM,json:{write:!0}})],w.prototype,"geometry",void 0),(0,n._)([(0,s.Cb)({type:f.apiValues,json:{name:"spatialRel",read:{reader:f.read},write:{allowNull:!1,writer:f.write,overridePolicy(){return{enabled:null!=this.geometry}}}}})],w.prototype,"spatialRelationship",void 0),(0,n._)([(0,s.Cb)({type:Number,json:{write:{overridePolicy(e){return{enabled:null!=e&&null!=this.geometry}}}}})],w.prototype,"distance",void 0),(0,n._)([(0,s.Cb)({type:[Number],json:{write:!0}})],w.prototype,"objectIds",void 0),(0,n._)([(0,s.Cb)({type:b.apiValues,json:{read:b.read,write:{writer:b.write,overridePolicy(e){return{enabled:null!=e&&null!=this.geometry}}}}})],w.prototype,"units",void 0),(0,n._)([(0,s.Cb)({type:p.Z,json:{write:!0}})],w.prototype,"timeExtent",void 0),w=r=(0,n._)([(0,o.j)("esri.layers.support.FeatureFilter")],w);const g=w;var v;const _={read:{reader:d.ij},write:{writer:d.cW,overridePolicy(){return{allowNull:null!=this.excludedEffect,isRequired:null==this.excludedEffect}}}},S={read:{reader:d.ij},write:{writer:d.cW,overridePolicy(){return{allowNull:null!=this.includedEffect,isRequired:null==this.includedEffect}}}},I={name:"showExcludedLabels",default:!0};let F=v=class extends a.wq{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){const i=super.write(e,t);if(t?.origin){if(i.filter){const e=Object.keys(i.filter);if(e.length>1||"where"!==e[0])return t.messages?.push(new l.Z("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in i)return t.messages?.push(new l.Z("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return i}clone(){return new v({filter:null!=this.filter?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};(0,n._)([(0,s.Cb)({type:g,json:{write:{allowNull:!0,writer(e,t,i,r){const n=e?.write({},r);n&&0!==Object.keys(n).length?(0,u.RB)(i,n,t):(0,u.RB)(i,null,t)}}}})],F.prototype,"filter",void 0),(0,n._)([(0,s.Cb)({json:{write:!0,origins:{"web-map":_,"portal-item":_}}})],F.prototype,"includedEffect",void 0),(0,n._)([(0,s.Cb)({json:{write:!0,origins:{"web-map":S,"portal-item":S}}})],F.prototype,"excludedEffect",void 0),(0,n._)([(0,s.Cb)({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":I,"portal-item":I}}})],F.prototype,"excludedLabelsVisible",void 0),F=v=(0,n._)([(0,o.j)("esri.layers.support.FeatureEffect")],F);const C=F,x={write:{allowNull:!0}},j=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return(0,n._)([(0,s.Cb)({type:C,json:{origins:{"web-map":x,"portal-item":x}}})],t.prototype,"featureEffect",void 0),t=(0,n._)([(0,o.j)("esri.layers.mixins.FeatureEffectLayer")],t),t}},34760:(e,t,i)=>{i.d(t,{Q:()=>g});var r=i(43697),n=i(92604),s=i(95330),o=i(5600),l=i(90578),a=(i(67676),i(80442),i(52011)),u=i(82960),d=i(46791),c=(i(66643),i(20102),i(26258),i(87538));const p=new d.Z,y=new WeakMap;function m(e){(function(e){return null!=e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e})(e)&&p.push(new WeakRef(e))}function h(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:h(t,e%t):0}let f=0,b=0;function w(){const e=Date.now();let t=!1;for(const i of p){const r=i.deref();r?r.refreshInterval&&e-(y.get(r)??0)+5>=6e4*r.refreshInterval&&(y.set(r,e),r.refresh(e)):t=!0}if(t)for(let e=p.length-1;e>=0;e--)p.at(e).deref()||p.removeAt(e)}(0,c.EH)((()=>{const e=Date.now();let t=0;for(const i of p){const r=i.deref();r&&(t=h(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?y.get(r)||y.set(r,e):y.delete(r))}if(t!==b){if(b=t,clearInterval(f),0===b)return void(f=0);f=setInterval(w,b)}}));const g=e=>{let t=class extends e{constructor(...e){super(...e),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,s.Ds)((()=>this.hasDataChanged())),this.when().then((()=>{this.destroyed||m(this)}),(()=>{}))}destroy(){!function(e){const t=p.find((t=>t.deref()===e));t&&p.remove(t)}(this)}castRefreshInterval(e){return e>=.1?e:e<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(e=Date.now()){(0,s.R8)(this._debounceHasDataChanged()).then((t=>{t&&this._set("refreshTimestamp",e),this.emit("refresh",{dataChanged:t})}),(e=>{n.Z.getLogger(this).error(e),this.emit("refresh",{dataChanged:!1,error:e})}))}async hasDataChanged(){return!0}get test(){const e=this;return{set refreshInterval(t){e._set("refreshInterval",t)}}}};return(0,r._)([(0,o.Cb)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:u.C}}}}})],t.prototype,"refreshInterval",void 0),(0,r._)([(0,l.p)("refreshInterval")],t.prototype,"castRefreshInterval",null),(0,r._)([(0,o.Cb)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),(0,r._)([(0,o.Cb)({readOnly:!0})],t.prototype,"refreshParameters",null),t=(0,r._)([(0,a.j)("esri.layers.mixins.RefreshableLayer")],t),t}},28294:(e,t,i)=>{i.d(t,{n:()=>p});var r=i(43697),n=i(92835),s=i(84552),o=i(5600),l=(i(75215),i(67676),i(80442),i(71715)),a=i(52011),u=i(35671),d=i(76259),c=i(78981);const p=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(e,t){const i=t.timeInfo.exportOptions;if(!i)return null;const r=i.timeOffset,n=c.v.fromJSON(i.timeOffsetUnits);return r&&n?new s.Z({value:r,unit:n}):null}set timeInfo(e){(0,u.UF)(e,this.fieldsIndex),this._set("timeInfo",e)}};return(0,r._)([(0,o.Cb)({type:n.Z,json:{write:!1}})],t.prototype,"timeExtent",void 0),(0,r._)([(0,o.Cb)({type:s.Z})],t.prototype,"timeOffset",void 0),(0,r._)([(0,l.r)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),(0,r._)([(0,o.Cb)({value:null,type:d.Z,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),(0,r._)([(0,o.Cb)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=(0,r._)([(0,a.j)("esri.layers.mixins.TemporalLayer")],t),t}},1231:(e,t,i)=>{i.d(t,{Z:()=>f});var r,n=i(43697),s=i(35454),o=i(96674),l=i(5600),a=i(75215),u=(i(67676),i(80442),i(36030)),d=i(71715),c=i(52011),p=i(72729),y=i(86719);const m=new s.X({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let h=r=class extends o.wq{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch(e){}return i?.value??null}readValueType(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch(e){}return i?m.fromJSON(i.fieldValueType):null}clone(){return new r({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};(0,n._)([(0,l.Cb)({type:String,json:{write:!0}})],h.prototype,"alias",void 0),(0,n._)([(0,l.Cb)({type:[String,Number],json:{write:{allowNull:!0}}})],h.prototype,"defaultValue",void 0),(0,n._)([(0,l.Cb)()],h.prototype,"description",void 0),(0,n._)([(0,d.r)("description")],h.prototype,"readDescription",null),(0,n._)([(0,l.Cb)({types:p.V5,json:{read:{reader:p.im},write:!0}})],h.prototype,"domain",void 0),(0,n._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],h.prototype,"editable",void 0),(0,n._)([(0,l.Cb)({type:a.z8,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],h.prototype,"length",void 0),(0,n._)([(0,l.Cb)({type:String,json:{write:!0}})],h.prototype,"name",void 0),(0,n._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],h.prototype,"nullable",void 0),(0,n._)([(0,u.J)(y.v)],h.prototype,"type",void 0),(0,n._)([(0,l.Cb)()],h.prototype,"valueType",void 0),(0,n._)([(0,d.r)("valueType",["description"])],h.prototype,"readValueType",null),(0,n._)([(0,l.Cb)({type:Boolean,json:{read:!1}})],h.prototype,"visible",void 0),h=r=(0,n._)([(0,c.j)("esri.layers.support.Field")],h);const f=h},99514:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(20102),n=i(96674),s=i(92604),o=i(35671),l=i(25031);class a{static fromJSON(e){return new a(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new a(e.fields??[],p(e))}static fromLayerJSON(e){return new a(e.fields??[],p(e))}constructor(e=[],t){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=t?new Map(t):null;const i=[];for(const e of this.fields){const t=e?.name,r=d(t);if(t&&r){const n=u(t);this._fieldsMap.set(t,e),this._fieldsMap.set(n,e),this._normalizedFieldsMap.set(r,e),i.push(`${n}:${e.type}:${this._timeZoneByFieldName?.get(t)}`),(0,o.y2)(e)?(this.dateFields.push(e),this._dateFieldsSet.add(e)):(0,o.H7)(e)&&(this._numericFieldsSet.add(e),this.numericFields.push(e)),(0,o.Dl)(e)||(0,o.Se)(e)||(e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable)}}i.sort(),this.uid=i.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)(0,o.Dl)(e)||(0,o.Se)(e)||e.nullable||void 0!==(0,o.os)(e)||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return null!=this.get(e)}get(e){if(!e)return;let t=this._fieldsMap.get(e);return t||(t=this._fieldsMap.get(u(e))??this._normalizedFieldsMap.get(d(e)),t&&this._fieldsMap.set(e,t),t)}getTimeZone(e){const t=this.get(e&&"string"!=typeof e?e.name:e);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):"date"===t.type||"esriFieldTypeDate"===t.type?(s.Z.getLogger("esri.layers.support.FieldsIndex").error(new r.Z("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),l.pt):c.has(t.type)?l._4:null:null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return(0,o.sX)(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map((e=>(0,n.AK)(e)?e.toJSON():e)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function u(e){return e.trim().toLowerCase()}function d(e){return(0,o.q6)(e)?.toLowerCase()??""}const c=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function p(e){const t=new Map;if(!e.fields)return t;const i=!0===e.datesInUnknownTimezone,{timeInfo:r,editFieldsInfo:n}=e,s=(r?"startField"in r?r.startField:r.startTimeField:"")??"",o=(r?"endField"in r?r.endField:r.endTimeField:"")??"",a=function(e){return"dateFieldsTimeZone"in e}(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?(0,l.Jv)(e.dateFieldsTimeReference):null,d=n?function(e){return"timeZone"in e}(n)?n.timeZone??a:n.dateFieldsTimeReference?(0,l.Jv)(n.dateFieldsTimeReference):a??l.pt:null,p=r?function(e){return"timeZone"in e}(r)?r.timeZone??a:r.timeReference?(0,l.Jv)(r.timeReference):a:null,y=new Map([[u(n?.creationDateField??""),d],[u(n?.editDateField??""),d],[u(s),p],[u(o),p]]);for(const{name:r,type:n}of e.fields)if(c.has(n))t.set(r,l._4);else if("date"!==n&&"esriFieldTypeDate"!==n)t.set(r,null);else if(i)t.set(r,l._4);else{const e=y.get(u(r??""))??a;t.set(r,e)}return t}},76259:(e,t,i)=>{i.d(t,{Z:()=>h});var r=i(43697),n=i(92835),s=i(84552),o=i(2368),l=i(96674),a=i(5600),u=(i(75215),i(67676),i(80442),i(71715)),d=i(52011),c=i(30556),p=i(25031);function y(e,t){return s.Z.fromJSON({value:e,unit:t})}let m=class extends((0,o.J)(l.wq)){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;const i=new Date(t.timeExtent[0]),r=new Date(t.timeExtent[1]);return new n.Z({start:i,end:r})}writeFullTimeExtent(e,t){null!=e?.start&&null!=e.end?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?y(t.timeInterval,t.timeIntervalUnits):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?y(t.defaultTimeInterval,t.defaultTimeIntervalUnits):null}writeInterval(e,t){t.timeInterval=e?.toJSON().value??null,t.timeIntervalUnits=e?.toJSON().unit??null}};(0,r._)([(0,a.Cb)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],m.prototype,"cumulative",void 0),(0,r._)([(0,a.Cb)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],m.prototype,"endField",void 0),(0,r._)([(0,a.Cb)({type:n.Z,json:{write:{enabled:!0,allowNull:!0}}})],m.prototype,"fullTimeExtent",void 0),(0,r._)([(0,u.r)("fullTimeExtent",["timeExtent"])],m.prototype,"readFullTimeExtent",null),(0,r._)([(0,c.c)("fullTimeExtent")],m.prototype,"writeFullTimeExtent",null),(0,r._)([(0,a.Cb)({type:Boolean,json:{write:!0}})],m.prototype,"hasLiveData",void 0),(0,r._)([(0,a.Cb)({type:s.Z,json:{write:{enabled:!0,allowNull:!0}}})],m.prototype,"interval",void 0),(0,r._)([(0,u.r)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],m.prototype,"readInterval",null),(0,r._)([(0,c.c)("interval")],m.prototype,"writeInterval",null),(0,r._)([(0,a.Cb)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],m.prototype,"startField",void 0),(0,r._)([(0,a.Cb)((0,p.mi)("timeReference",!0))],m.prototype,"timeZone",void 0),(0,r._)([(0,a.Cb)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],m.prototype,"trackIdField",void 0),(0,r._)([(0,a.Cb)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],m.prototype,"useTime",void 0),m=(0,r._)([(0,d.j)("esri.layers.support.TimeInfo")],m);const h=m},72729:(e,t,i)=>{i.d(t,{im:()=>F,V5:()=>I}),i(80442);var r,n=i(43697),s=i(22974),o=i(5600),l=(i(75215),i(36030)),a=i(52011),u=i(96674);i(67676);let d=r=class extends u.wq{constructor(e){super(e),this.name=null,this.code=null}clone(){return new r({name:this.name,code:this.code})}};(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],d.prototype,"name",void 0),(0,n._)([(0,o.Cb)({type:[String,Number],json:{write:!0}})],d.prototype,"code",void 0),d=r=(0,n._)([(0,a.j)("esri.layers.support.CodedValue")],d);const c=new(i(35454).X)({inherited:"inherited",codedValue:"coded-value",range:"range"});let p=class extends u.wq{constructor(e){super(e),this.name=null,this.type=null}};(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],p.prototype,"name",void 0),(0,n._)([(0,l.J)(c)],p.prototype,"type",void 0),p=(0,n._)([(0,a.j)("esri.layers.support.Domain")],p);const y=p;var m;let h=m=class extends y{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some((e=>(String(e.code)===i&&(t=e.name),!!t)))}return t}clone(){return new m({codedValues:(0,s.d9)(this.codedValues),name:this.name})}};(0,n._)([(0,o.Cb)({type:[d],json:{write:!0}})],h.prototype,"codedValues",void 0),(0,n._)([(0,l.J)({codedValue:"coded-value"})],h.prototype,"type",void 0),h=m=(0,n._)([(0,a.j)("esri.layers.support.CodedValueDomain")],h);const f=h;var b;i(92604),i(20102);let w=b=class extends y{constructor(e){super(e),this.type="inherited"}clone(){return new b}};(0,n._)([(0,l.J)({inherited:"inherited"})],w.prototype,"type",void 0),w=b=(0,n._)([(0,a.j)("esri.layers.support.InheritedDomain")],w);const g=w;var v;let _=v=class extends y{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new v({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};(0,n._)([(0,o.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]}}}})],_.prototype,"maxValue",void 0),(0,n._)([(0,o.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[0]},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]}}}})],_.prototype,"minValue",void 0),(0,n._)([(0,l.J)({range:"range"})],_.prototype,"type",void 0),_=v=(0,n._)([(0,a.j)("esri.layers.support.RangeDomain")],_);const S=_,I={key:"type",base:y,typeMap:{range:_,"coded-value":f,inherited:g}};function F(e){if(!e?.type)return null;switch(e.type){case"range":return S.fromJSON(e);case"codedValue":return f.fromJSON(e);case"inherited":return g.fromJSON(e)}return null}},45574:(e,t,i)=>{i.d(t,{JD:()=>g,Jj:()=>S,sX:()=>q,Ob:()=>U,rP:()=>N,FV:()=>F,nU:()=>P,Ci:()=>C,Fr:()=>w,HW:()=>J,gG:()=>E,uA:()=>k,SU:()=>x,KE:()=>R,VG:()=>T,tD:()=>j,kp:()=>O,C9:()=>Z,rk:()=>M,kZ:()=>V,JY:()=>A,Y5:()=>_,uj:()=>I});var r=i(40330),n=i(9790),s=i(66643),o=i(20102),l=i(35454),a=i(42033),u=i(63213),d=i(14165);async function c(e,t,i){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=p(e));const r=function(e){return p(e)*function(e){return e.capabilities.query.maxRecordCount||2e3}(e)}(e),n=e.capabilities.query.supportsPagination;t.start=0,t.num=r;let s=null;for(;;){const o=await e.source.queryFeaturesJSON(t,i);if(null==s?s=o:s.features=s.features.concat(o.features),s.exceededTransferLimit=o.exceededTransferLimit,!n||!o.exceededTransferLimit)break;t.start+=r}return s}function p(e){return e.capabilities.query.supportsMaxRecordCountFactor?d.Z.MAX_MAX_RECORD_COUNT_FACTOR:1}var y=i(84230),m=i(84382),h=i(81571),f=i(56545),b=i(75935);const w=new l.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function g(e,t,i,r){const n=await D(e);if(await v(e,t,r),!n.addAttachment)throw new o.Z(r,"Layer source does not support addAttachment capability");return n.addAttachment(t,i)}function v(e,t,i){const{attributes:r}=t,{objectIdField:n}=e;return e.capabilities?.data?.supportsAttachment?t?r?n&&r[n]?Promise.resolve():Promise.reject(new o.Z(i,`feature is missing the identifying attribute ${n}`)):Promise.reject(new o.Z(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new o.Z(i,"A feature is required to add/delete/update attachments")):Promise.reject(new o.Z(i,"this layer doesn't support attachments"))}async function _(e,t,i,r,n){const s=await D(e);if(await v(e,t,n),!s.updateAttachment)throw new o.Z(n,"Layer source does not support updateAttachment capability");return s.updateAttachment(t,i,r)}async function S(e,t,r){const{applyEdits:n}=await i.e(4720).then(i.bind(i,14720)),s=await e.load(),{source:o,globalIdField:l}=s;let a=r;return("feature"===s.type?s.infoFor3D:null)&&null!=t.deleteFeatures&&null!=l&&(a={...a,globalIdToObjectId:await J(e,t.deleteFeatures,l)}),n(s,o,t,r)}async function I(e,t,r){const{uploadAssets:n}=await i.e(4720).then(i.bind(i,14720)),s=await e.load();return n(s,s.source,t,r)}async function F(e,t,i,r){const n=await D(e);if(await v(e,t,r),!n.deleteAttachments)throw new o.Z(r,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(t,i)}async function C(e,t,i){const r=(await e.load({signal:t?.signal})).source;if(!r.fetchRecomputedExtents)throw new o.Z(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(t)}async function x(e,t,i,r){t=f.Z.from(t),await e.load();const n=e.source,s=e.capabilities;if(!s?.data?.supportsAttachment)throw new o.Z(r,"this layer doesn't support attachments");const{attachmentTypes:l,objectIds:a,globalIds:u,num:d,size:c,start:p,where:y}=t;if(!s?.operations?.supportsQueryAttachments&&(l?.length>0||u?.length>0||c?.length>0||d||p||y))throw new o.Z(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(a?.length||u?.length||y))throw new o.Z(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!n.queryAttachments)throw new o.Z(r,"Layer source does not support queryAttachments capability",t);return n.queryAttachments(t)}async function j(e,t,i,r){const n=await D(e);if(!n.queryObjectIds)throw new o.Z(r,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(d.Z.from(t)??e.createQuery(),i)}async function T(e,t,i,r){const n=await D(e);if(!n.queryFeatureCount)throw new o.Z(r,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(d.Z.from(t)??e.createQuery(),i)}async function R(e,t,i,r){const n=await D(e);if(!n.queryExtent)throw new o.Z(r,"Layer source does not support queryExtent capability");return n.queryExtent(d.Z.from(t)??e.createQuery(),i)}async function O(e,t,i,r){const n=await D(e);if(!n.queryRelatedFeatures)throw new o.Z(r,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(b.default.from(t),i)}async function Z(e,t,i,r){const n=await D(e);if(!n.queryRelatedFeaturesCount)throw new o.Z(r,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(b.default.from(t),i)}async function E(e){const t=e.source;if(t?.refresh)try{const{dataChanged:i,updates:r}=await t.refresh();if(null!=r&&(e.sourceJSON={...e.sourceJSON,...r},e.read(r,{origin:"service",url:e.parsedUrl})),i)return!0}catch{}if(e.definitionExpression)try{return(await(0,a.E)(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function N(e){const t=new d.Z,i=e.capabilities?.data,r=e.capabilities?.query;t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,r&&(t.compactGeometryEnabled=r.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),i&&(i.supportsZ&&null!=e.returnZ&&(t.returnZ=e.returnZ),i.supportsM&&null!=e.returnM&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:n,timeExtent:s}=e;return t.timeExtent=null!=n&&null!=s?s.offset(-n.value,n.unit):s||null,t.multipatchOption="multipatch"===e.geometryType?"xyFootprint":null,t}function M(e){const{globalIdField:t,fields:i}=e;if(t)return t;if(i)for(const e of i)if("esriFieldTypeGlobalID"===e.type)return e.name}function V(e){const{objectIdField:t,fields:i}=e;if(t)return t;if(i)for(const e of i)if("esriFieldTypeOID"===e.type)return e.name}function A(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}async function D(e){return(await e.load()).source}async function P(e,t,i){const n=e.parsedUrl?.path;n&&e.authenticationTriggerEvent===t&&await async function(e,t){if(!r.id)return;if(r.id.findCredential(e))return;let i;try{const n=await(0,y.oP)(e,t);n&&(i=await r.id.checkSignInStatus(`${n}/sharing`))}catch(e){}if(i)try{const i=null!=t?t.signal:null;await r.id.getCredential(e,{signal:i})}catch(e){}}(n,i)}function q(e){return!e.sourceJSON?.isMultiServicesView&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const L=(0,u.d)({types:n.QT});function U(e,t){if(e.defaultSymbol)return e.types?.length?new h.Z({defaultSymbol:L(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map((e=>({id:e.id,symbol:L(e.symbol,e,t)})))}):new m.Z({symbol:L(e.defaultSymbol,e,t)})}function k(e){let t=e.sourceJSON?.cacheMaxAge;if(!t)return!1;const i=e.editingInfo?.lastEditDate?.getTime();return null==i||(t*=1e3,Date.now()-i<t)}async function J(e,t,i){if(null==t)return null;const r=[],{objectIdField:n}=e;if(t.forEach((e=>{let t=null;if("attributes"in e){const{attributes:r}=e;t={globalId:r[i],objectId:null!=r[n]&&-1!==r[n]?r[n]:null}}else t={globalId:e.globalId,objectId:null!=e.objectId&&-1!==e.objectId?e.objectId:null};null!=t.globalId&&(null!=t.objectId&&-1!==t.objectId||r.push(t.globalId))})),0===r.length)return null;const o=e.createQuery();o.where=r.map((e=>`${i}='${e}'`)).join(" OR "),o.returnGeometry=!1,o.outFields=[n,i],o.cacheHint=!1;const l=await(0,s.mt)(c(e,o));if(!l.ok)return null;const a=new Map,u=l.value.features;for(const e of u){const t=e.attributes[i],r=e.attributes[n];null!=t&&null!=r&&-1!==r&&a.set(t,r)}return a}},53518:(e,t,i)=>{i.d(t,{v:()=>a});var r=i(80442),n=i(92604),s=i(1231),o=i(99514),l=i(35671);function a(){return{fields:{type:[s.Z],value:null,set:function(e){if(e&&(0,r.Z)("big-integer-warning-enabled")){const t=e.filter((e=>"big-integer"===e.type||"oid"===e.type&&(e.length||0)>=8));if(t.length){const e=t.map((e=>`'${e.name}'`)).join(", ");n.Z.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${e}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return o.Z.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e?.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e){const i=this.fieldsIndex?.has(t);i||n.Z.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e})}return(0,l.Q0)(this.fieldsIndex,e)}}}}},86719:(e,t,i)=>{i.d(t,{v:()=>r});const r=new(i(35454).X)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"})},78981:(e,t,i)=>{i.d(t,{v:()=>r});const r=(0,i(35454).w)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},40555:(e,t,i)=>{i.d(t,{y:()=>o});var r=i(66643),n=i(95330),s=i(20941);async function o(e,t,i){const o=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(o&&"unique-value"===o.type&&o.styleOrigin){const l=await(0,r.q6)(o.populateFromStyle());if((0,n.k_)(i),!1===l.ok){const i=l.error;t?.messages&&t.messages.push(new s.Z("renderer:style-reference",`Failed to create unique value renderer from style reference: ${i.message}`,{error:i,context:t})),e.clear("renderer",t?.origin)}}}},75935:(e,t,i)=>{i.r(t),i.d(t,{default:()=>m});var r,n=i(43697),s=(i(66577),i(96674)),o=i(22974),l=i(5600),a=i(75215),u=i(52011),d=i(30556),c=i(10158),p=i(82971);let y=r=class extends s.wq{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&null==this.where&&(t.definitionExpression="1=1")}clone(){return new r((0,o.d9)({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};(0,n._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],y.prototype,"cacheHint",void 0),(0,n._)([(0,l.Cb)({type:c.n,json:{write:!0}})],y.prototype,"dynamicDataSource",void 0),(0,n._)([(0,l.Cb)({type:String,json:{write:!0}})],y.prototype,"gdbVersion",void 0),(0,n._)([(0,l.Cb)({type:Number,json:{write:!0}})],y.prototype,"geometryPrecision",void 0),(0,n._)([(0,l.Cb)({type:Date})],y.prototype,"historicMoment",void 0),(0,n._)([(0,d.c)("historicMoment")],y.prototype,"_writeHistoricMoment",null),(0,n._)([(0,l.Cb)({type:Number,json:{write:!0}})],y.prototype,"maxAllowableOffset",void 0),(0,n._)([(0,l.Cb)({type:[Number],json:{write:!0}})],y.prototype,"objectIds",void 0),(0,n._)([(0,l.Cb)({type:[String],json:{write:!0}})],y.prototype,"orderByFields",void 0),(0,n._)([(0,l.Cb)({type:[String],json:{write:!0}})],y.prototype,"outFields",void 0),(0,n._)([(0,l.Cb)({type:p.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],y.prototype,"outSpatialReference",void 0),(0,n._)([(0,l.Cb)({json:{write:!0}})],y.prototype,"relationshipId",void 0),(0,n._)([(0,l.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],y.prototype,"start",void 0),(0,n._)([(0,d.c)("start"),(0,d.c)("num")],y.prototype,"writeStart",null),(0,n._)([(0,l.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],y.prototype,"num",void 0),(0,n._)([(0,l.Cb)({json:{write:!0}})],y.prototype,"returnGeometry",void 0),(0,n._)([(0,l.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],y.prototype,"returnM",void 0),(0,n._)([(0,l.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],y.prototype,"returnZ",void 0),(0,n._)([(0,l.Cb)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],y.prototype,"where",void 0),y=r=(0,n._)([(0,u.j)("esri.rest.support.RelationshipQuery")],y),y.from=(0,a.se)(y);const m=y},58333:(e,t,i)=>{i.d(t,{ET:()=>s,I4:()=>n,eG:()=>a,lF:()=>o,lj:()=>d,qP:()=>l,wW:()=>u});const r=[252,146,31,255],n={type:"esriSMS",style:"esriSMSCircle",size:6,color:r,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},s={type:"esriSLS",style:"esriSLSSolid",width:.75,color:r},o={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},l={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},a={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},u={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},d={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},12259:(e,t,i)=>{var r;i.d(t,{x:()=>r}),function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"}(r||(r={}))}}]);