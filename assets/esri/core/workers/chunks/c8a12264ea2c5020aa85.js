"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[7272,5732],{92835:(t,e,r)=>{r.d(e,{Z:()=>y});var s,i=r(43697),o=r(96674),a=r(70586),n=r(35463),l=r(5600),u=(r(67676),r(80442),r(75215),r(71715)),h=r(52011),c=r(30556);let p=s=class extends o.wq{constructor(t){super(t),this.end=null,this.start=null}static get allTime(){return d}static get empty(){return m}readEnd(t,e){return null!=e.end?new Date(e.end):null}writeEnd(t,e){e.end=t?t.getTime():null}get isAllTime(){return this.equals(s.allTime)}get isEmpty(){return this.equals(s.empty)}readStart(t,e){return null!=e.start?new Date(e.start):null}writeStart(t,e){e.start=t?t.getTime():null}clone(){return new s({end:this.end,start:this.start})}equals(t){if(!t)return!1;const e=(0,a.pC)(this.start)?this.start.getTime():this.start,r=(0,a.pC)(this.end)?this.end.getTime():this.end,s=(0,a.pC)(t.start)?t.start.getTime():t.start,i=(0,a.pC)(t.end)?t.end.getTime():t.end;return e===s&&r===i}expandTo(t){if(this.isEmpty||this.isAllTime)return this.clone();const e=(0,a.yw)(this.start,(e=>(0,n.JE)(e,t))),r=(0,a.yw)(this.end,(e=>{const r=(0,n.JE)(e,t);return e.getTime()===r.getTime()?r:(0,n.Nm)(r,1,t)}));return new s({start:e,end:r})}intersection(t){if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return s.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const e=(0,a.R2)(this.start,-1/0,(t=>t.getTime())),r=(0,a.R2)(this.end,1/0,(t=>t.getTime())),i=(0,a.R2)(t.start,-1/0,(t=>t.getTime())),o=(0,a.R2)(t.end,1/0,(t=>t.getTime()));let n,l;if(i>=e&&i<=r?n=i:e>=i&&e<=o&&(n=e),r>=i&&r<=o?l=r:o>=e&&o<=r&&(l=o),null!=n&&null!=l&&!isNaN(n)&&!isNaN(l)){const t=new s;return t.start=n===-1/0?null:new Date(n),t.end=l===1/0?null:new Date(l),t}return s.empty}offset(t,e){if(this.isEmpty||this.isAllTime)return this.clone();const r=new s,{start:i,end:o}=this;return(0,a.pC)(i)&&(r.start=(0,n.Nm)(i,t,e)),(0,a.pC)(o)&&(r.end=(0,n.Nm)(o,t,e)),r}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return d.clone();const e=(0,a.pC)(this.start)&&(0,a.pC)(t.start)?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,r=(0,a.pC)(this.end)&&(0,a.pC)(t.end)?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new s({start:e,end:r})}};(0,i._)([(0,l.Cb)({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"end",void 0),(0,i._)([(0,u.r)("end")],p.prototype,"readEnd",null),(0,i._)([(0,c.c)("end")],p.prototype,"writeEnd",null),(0,i._)([(0,l.Cb)({readOnly:!0,json:{read:!1}})],p.prototype,"isAllTime",null),(0,i._)([(0,l.Cb)({readOnly:!0,json:{read:!1}})],p.prototype,"isEmpty",null),(0,i._)([(0,l.Cb)({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"start",void 0),(0,i._)([(0,u.r)("start")],p.prototype,"readStart",null),(0,i._)([(0,c.c)("start")],p.prototype,"writeStart",null),p=s=(0,i._)([(0,h.j)("esri.TimeExtent")],p);const d=new p,m=new p({start:void 0,end:void 0}),y=p},5732:(t,e,r)=>{r.d(e,{a:()=>o,c:()=>s,g:()=>i});var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function o(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}},52138:(t,e,r)=>{r.d(e,{a:()=>l,d:()=>m,e:()=>p,f:()=>d,g:()=>_,h:()=>v,i:()=>a,j:()=>S,k:()=>c,m:()=>u,s:()=>o,t:()=>n,v:()=>h,x:()=>b,y:()=>y});var s=r(65617),i=r(46851);function o(t,e,r,s,i,o,a,n,l,u,h,c,p,d,m,y,f){return t[0]=e,t[1]=r,t[2]=s,t[3]=i,t[4]=o,t[5]=a,t[6]=n,t[7]=l,t[8]=u,t[9]=h,t[10]=c,t[11]=p,t[12]=d,t[13]=m,t[14]=y,t[15]=f,t}function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function n(t,e){if(t===e){const r=e[1],s=e[2],i=e[3],o=e[6],a=e[7],n=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=s,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=n}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function l(t,e){const r=e[0],s=e[1],i=e[2],o=e[3],a=e[4],n=e[5],l=e[6],u=e[7],h=e[8],c=e[9],p=e[10],d=e[11],m=e[12],y=e[13],f=e[14],g=e[15],_=r*n-s*a,w=r*l-i*a,S=r*u-o*a,v=s*l-i*n,b=s*u-o*n,x=i*u-o*l,M=h*y-c*m,A=h*f-p*m,T=h*g-d*m,E=c*f-p*y,I=c*g-d*y,R=p*g-d*f;let C=_*R-w*I+S*E+v*T-b*A+x*M;return C?(C=1/C,t[0]=(n*R-l*I+u*E)*C,t[1]=(i*I-s*R-o*E)*C,t[2]=(y*x-f*b+g*v)*C,t[3]=(p*b-c*x-d*v)*C,t[4]=(l*T-a*R-u*A)*C,t[5]=(r*R-i*T+o*A)*C,t[6]=(f*S-m*x-g*w)*C,t[7]=(h*x-p*S+d*w)*C,t[8]=(a*I-n*T+u*M)*C,t[9]=(s*T-r*I-o*M)*C,t[10]=(m*b-y*S+g*_)*C,t[11]=(c*S-h*b-d*_)*C,t[12]=(n*A-a*E-l*M)*C,t[13]=(r*E-s*A+i*M)*C,t[14]=(y*w-m*v-f*_)*C,t[15]=(h*v-c*w+p*_)*C,t):null}function u(t,e,r){const s=e[0],i=e[1],o=e[2],a=e[3],n=e[4],l=e[5],u=e[6],h=e[7],c=e[8],p=e[9],d=e[10],m=e[11],y=e[12],f=e[13],g=e[14],_=e[15];let w=r[0],S=r[1],v=r[2],b=r[3];return t[0]=w*s+S*n+v*c+b*y,t[1]=w*i+S*l+v*p+b*f,t[2]=w*o+S*u+v*d+b*g,t[3]=w*a+S*h+v*m+b*_,w=r[4],S=r[5],v=r[6],b=r[7],t[4]=w*s+S*n+v*c+b*y,t[5]=w*i+S*l+v*p+b*f,t[6]=w*o+S*u+v*d+b*g,t[7]=w*a+S*h+v*m+b*_,w=r[8],S=r[9],v=r[10],b=r[11],t[8]=w*s+S*n+v*c+b*y,t[9]=w*i+S*l+v*p+b*f,t[10]=w*o+S*u+v*d+b*g,t[11]=w*a+S*h+v*m+b*_,w=r[12],S=r[13],v=r[14],b=r[15],t[12]=w*s+S*n+v*c+b*y,t[13]=w*i+S*l+v*p+b*f,t[14]=w*o+S*u+v*d+b*g,t[15]=w*a+S*h+v*m+b*_,t}function h(t,e,r){const s=r[0],i=r[1],o=r[2];if(e===t)t[12]=e[0]*s+e[4]*i+e[8]*o+e[12],t[13]=e[1]*s+e[5]*i+e[9]*o+e[13],t[14]=e[2]*s+e[6]*i+e[10]*o+e[14],t[15]=e[3]*s+e[7]*i+e[11]*o+e[15];else{const r=e[0],a=e[1],n=e[2],l=e[3],u=e[4],h=e[5],c=e[6],p=e[7],d=e[8],m=e[9],y=e[10],f=e[11];t[0]=r,t[1]=a,t[2]=n,t[3]=l,t[4]=u,t[5]=h,t[6]=c,t[7]=p,t[8]=d,t[9]=m,t[10]=y,t[11]=f,t[12]=r*s+u*i+d*o+e[12],t[13]=a*s+h*i+m*o+e[13],t[14]=n*s+c*i+y*o+e[14],t[15]=l*s+p*i+f*o+e[15]}return t}function c(t,e,r){const s=r[0],i=r[1],o=r[2];return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function p(t,e,r,s){let o,a,n,l,u,h,c,p,d,m,y,f,g,_,w,S,v,b,x,M,A,T,E,I,R=s[0],C=s[1],U=s[2],L=Math.sqrt(R*R+C*C+U*U);return L<(0,i.g)()?null:(L=1/L,R*=L,C*=L,U*=L,o=Math.sin(r),a=Math.cos(r),n=1-a,l=e[0],u=e[1],h=e[2],c=e[3],p=e[4],d=e[5],m=e[6],y=e[7],f=e[8],g=e[9],_=e[10],w=e[11],S=R*R*n+a,v=C*R*n+U*o,b=U*R*n-C*o,x=R*C*n-U*o,M=C*C*n+a,A=U*C*n+R*o,T=R*U*n+C*o,E=C*U*n-R*o,I=U*U*n+a,t[0]=l*S+p*v+f*b,t[1]=u*S+d*v+g*b,t[2]=h*S+m*v+_*b,t[3]=c*S+y*v+w*b,t[4]=l*x+p*M+f*A,t[5]=u*x+d*M+g*A,t[6]=h*x+m*M+_*A,t[7]=c*x+y*M+w*A,t[8]=l*T+p*E+f*I,t[9]=u*T+d*E+g*I,t[10]=h*T+m*E+_*I,t[11]=c*T+y*E+w*I,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function d(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function m(t,e,r){if(0===e)return a(t);let s,o,n,l=r[0],u=r[1],h=r[2],c=Math.sqrt(l*l+u*u+h*h);return c<(0,i.g)()?null:(c=1/c,l*=c,u*=c,h*=c,s=Math.sin(e),o=Math.cos(e),n=1-o,t[0]=l*l*n+o,t[1]=u*l*n+h*s,t[2]=h*l*n-u*s,t[3]=0,t[4]=l*u*n-h*s,t[5]=u*u*n+o,t[6]=h*u*n+l*s,t[7]=0,t[8]=l*h*n+u*s,t[9]=u*h*n-l*s,t[10]=h*h*n+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function y(t,e){const r=Math.sin(e),s=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function f(t,e,r){const s=e[0],i=e[1],o=e[2],a=e[3],n=s+s,l=i+i,u=o+o,h=s*n,c=s*l,p=s*u,d=i*l,m=i*u,y=o*u,f=a*n,g=a*l,_=a*u;return t[0]=1-(d+y),t[1]=c+_,t[2]=p-g,t[3]=0,t[4]=c-_,t[5]=1-(h+y),t[6]=m+f,t[7]=0,t[8]=p+g,t[9]=m-f,t[10]=1-(h+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}const g=(0,s.c)();function _(t,e,r,s){const i=e[0],o=e[1],a=e[2],n=e[3],l=i+i,u=o+o,h=a+a,c=i*l,p=i*u,d=i*h,m=o*u,y=o*h,f=a*h,g=n*l,_=n*u,w=n*h,S=s[0],v=s[1],b=s[2];return t[0]=(1-(m+f))*S,t[1]=(p+w)*S,t[2]=(d-_)*S,t[3]=0,t[4]=(p-w)*v,t[5]=(1-(c+f))*v,t[6]=(y+g)*v,t[7]=0,t[8]=(d+_)*b,t[9]=(y-g)*b,t[10]=(1-(c+m))*b,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function w(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function S(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function v(t,e){if(t===e)return!0;const r=t[0],s=t[1],o=t[2],a=t[3],n=t[4],l=t[5],u=t[6],h=t[7],c=t[8],p=t[9],d=t[10],m=t[11],y=t[12],f=t[13],g=t[14],_=t[15],w=e[0],S=e[1],v=e[2],b=e[3],x=e[4],M=e[5],A=e[6],T=e[7],E=e[8],I=e[9],R=e[10],C=e[11],U=e[12],L=e[13],D=e[14],P=e[15],z=(0,i.g)();return Math.abs(r-w)<=z*Math.max(1,Math.abs(r),Math.abs(w))&&Math.abs(s-S)<=z*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(o-v)<=z*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-b)<=z*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(n-x)<=z*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(l-M)<=z*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(u-A)<=z*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(h-T)<=z*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(c-E)<=z*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(p-I)<=z*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(d-R)<=z*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(m-C)<=z*Math.max(1,Math.abs(m),Math.abs(C))&&Math.abs(y-U)<=z*Math.max(1,Math.abs(y),Math.abs(U))&&Math.abs(f-L)<=z*Math.max(1,Math.abs(f),Math.abs(L))&&Math.abs(g-D)<=z*Math.max(1,Math.abs(g),Math.abs(D))&&Math.abs(_-P)<=z*Math.max(1,Math.abs(_),Math.abs(P))}function b(t){const e=(0,i.g)(),r=t[0],s=t[1],o=t[2],a=t[4],n=t[5],l=t[6],u=t[8],h=t[9],c=t[10];return Math.abs(1-(r*r+a*a+u*u))<=e&&Math.abs(1-(s*s+n*n+h*h))<=e&&Math.abs(1-(o*o+l*l+c*c))<=e}const x=u,M=w;Object.freeze(Object.defineProperty({__proto__:null,copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},set:o,identity:a,transpose:n,invert:l,adjoint:function(t,e){const r=e[0],s=e[1],i=e[2],o=e[3],a=e[4],n=e[5],l=e[6],u=e[7],h=e[8],c=e[9],p=e[10],d=e[11],m=e[12],y=e[13],f=e[14],g=e[15];return t[0]=n*(p*g-d*f)-c*(l*g-u*f)+y*(l*d-u*p),t[1]=-(s*(p*g-d*f)-c*(i*g-o*f)+y*(i*d-o*p)),t[2]=s*(l*g-u*f)-n*(i*g-o*f)+y*(i*u-o*l),t[3]=-(s*(l*d-u*p)-n*(i*d-o*p)+c*(i*u-o*l)),t[4]=-(a*(p*g-d*f)-h*(l*g-u*f)+m*(l*d-u*p)),t[5]=r*(p*g-d*f)-h*(i*g-o*f)+m*(i*d-o*p),t[6]=-(r*(l*g-u*f)-a*(i*g-o*f)+m*(i*u-o*l)),t[7]=r*(l*d-u*p)-a*(i*d-o*p)+h*(i*u-o*l),t[8]=a*(c*g-d*y)-h*(n*g-u*y)+m*(n*d-u*c),t[9]=-(r*(c*g-d*y)-h*(s*g-o*y)+m*(s*d-o*c)),t[10]=r*(n*g-u*y)-a*(s*g-o*y)+m*(s*u-o*n),t[11]=-(r*(n*d-u*c)-a*(s*d-o*c)+h*(s*u-o*n)),t[12]=-(a*(c*f-p*y)-h*(n*f-l*y)+m*(n*p-l*c)),t[13]=r*(c*f-p*y)-h*(s*f-i*y)+m*(s*p-i*c),t[14]=-(r*(n*f-l*y)-a*(s*f-i*y)+m*(s*l-i*n)),t[15]=r*(n*p-l*c)-a*(s*p-i*c)+h*(s*l-i*n),t},determinant:function(t){const e=t[0],r=t[1],s=t[2],i=t[3],o=t[4],a=t[5],n=t[6],l=t[7],u=t[8],h=t[9],c=t[10],p=t[11],d=t[12],m=t[13],y=t[14],f=t[15];return(e*a-r*o)*(c*f-p*y)-(e*n-s*o)*(h*f-p*m)+(e*l-i*o)*(h*y-c*m)+(r*n-s*a)*(u*f-p*d)-(r*l-i*a)*(u*y-c*d)+(s*l-i*n)*(u*m-h*d)},multiply:u,translate:h,scale:c,rotate:p,rotateX:function(t,e,r){const s=Math.sin(r),i=Math.cos(r),o=e[4],a=e[5],n=e[6],l=e[7],u=e[8],h=e[9],c=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+u*s,t[5]=a*i+h*s,t[6]=n*i+c*s,t[7]=l*i+p*s,t[8]=u*i-o*s,t[9]=h*i-a*s,t[10]=c*i-n*s,t[11]=p*i-l*s,t},rotateY:function(t,e,r){const s=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],n=e[2],l=e[3],u=e[8],h=e[9],c=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-u*s,t[1]=a*i-h*s,t[2]=n*i-c*s,t[3]=l*i-p*s,t[8]=o*s+u*i,t[9]=a*s+h*i,t[10]=n*s+c*i,t[11]=l*s+p*i,t},rotateZ:function(t,e,r){const s=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],n=e[2],l=e[3],u=e[4],h=e[5],c=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+u*s,t[1]=a*i+h*s,t[2]=n*i+c*s,t[3]=l*i+p*s,t[4]=u*i-o*s,t[5]=h*i-a*s,t[6]=c*i-n*s,t[7]=p*i-l*s,t},fromTranslation:d,fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotation:m,fromXRotation:y,fromYRotation:function(t,e){const r=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:function(t,e){const r=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotationTranslation:f,fromQuat2:function(t,e){const r=g,s=-e[0],i=-e[1],o=-e[2],a=e[3],n=e[4],l=e[5],u=e[6],h=e[7],c=s*s+i*i+o*o+a*a;return c>0?(r[0]=2*(n*a+h*s+l*o-u*i)/c,r[1]=2*(l*a+h*i+u*s-n*o)/c,r[2]=2*(u*a+h*o+n*i-l*s)/c):(r[0]=2*(n*a+h*s+l*o-u*i),r[1]=2*(l*a+h*i+u*s-n*o),r[2]=2*(u*a+h*o+n*i-l*s)),f(t,e,r),t},getTranslation:function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},getScaling:function(t,e){const r=e[0],s=e[1],i=e[2],o=e[4],a=e[5],n=e[6],l=e[8],u=e[9],h=e[10];return t[0]=Math.sqrt(r*r+s*s+i*i),t[1]=Math.sqrt(o*o+a*a+n*n),t[2]=Math.sqrt(l*l+u*u+h*h),t},getRotation:function(t,e){const r=e[0]+e[5]+e[10];let s=0;return r>0?(s=2*Math.sqrt(r+1),t[3]=.25*s,t[0]=(e[6]-e[9])/s,t[1]=(e[8]-e[2])/s,t[2]=(e[1]-e[4])/s):e[0]>e[5]&&e[0]>e[10]?(s=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/s,t[0]=.25*s,t[1]=(e[1]+e[4])/s,t[2]=(e[8]+e[2])/s):e[5]>e[10]?(s=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/s,t[0]=(e[1]+e[4])/s,t[1]=.25*s,t[2]=(e[6]+e[9])/s):(s=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/s,t[0]=(e[8]+e[2])/s,t[1]=(e[6]+e[9])/s,t[2]=.25*s),t},fromRotationTranslationScale:_,fromRotationTranslationScaleOrigin:function(t,e,r,s,i){const o=e[0],a=e[1],n=e[2],l=e[3],u=o+o,h=a+a,c=n+n,p=o*u,d=o*h,m=o*c,y=a*h,f=a*c,g=n*c,_=l*u,w=l*h,S=l*c,v=s[0],b=s[1],x=s[2],M=i[0],A=i[1],T=i[2],E=(1-(y+g))*v,I=(d+S)*v,R=(m-w)*v,C=(d-S)*b,U=(1-(p+g))*b,L=(f+_)*b,D=(m+w)*x,P=(f-_)*x,z=(1-(p+y))*x;return t[0]=E,t[1]=I,t[2]=R,t[3]=0,t[4]=C,t[5]=U,t[6]=L,t[7]=0,t[8]=D,t[9]=P,t[10]=z,t[11]=0,t[12]=r[0]+M-(E*M+C*A+D*T),t[13]=r[1]+A-(I*M+U*A+P*T),t[14]=r[2]+T-(R*M+L*A+z*T),t[15]=1,t},fromQuat:function(t,e){const r=e[0],s=e[1],i=e[2],o=e[3],a=r+r,n=s+s,l=i+i,u=r*a,h=s*a,c=s*n,p=i*a,d=i*n,m=i*l,y=o*a,f=o*n,g=o*l;return t[0]=1-c-m,t[1]=h+g,t[2]=p-f,t[3]=0,t[4]=h-g,t[5]=1-u-m,t[6]=d+y,t[7]=0,t[8]=p+f,t[9]=d-y,t[10]=1-u-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},frustum:function(t,e,r,s,i,o,a){const n=1/(r-e),l=1/(i-s),u=1/(o-a);return t[0]=2*o*n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(r+e)*n,t[9]=(i+s)*l,t[10]=(a+o)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*u,t[15]=0,t},perspective:function(t,e,r,s,i){const o=1/Math.tan(e/2);let a;return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(s-i),t[10]=(i+s)*a,t[14]=2*i*s*a):(t[10]=-1,t[14]=-2*s),t},perspectiveFromFieldOfView:function(t,e,r,s){const i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),n=Math.tan(e.rightDegrees*Math.PI/180),l=2/(a+n),u=2/(i+o);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(a-n)*l*.5,t[9]=(i-o)*u*.5,t[10]=s/(r-s),t[11]=-1,t[12]=0,t[13]=0,t[14]=s*r/(r-s),t[15]=0,t},ortho:function(t,e,r,s,i,o,a){const n=1/(e-r),l=1/(s-i),u=1/(o-a);return t[0]=-2*n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*n,t[13]=(i+s)*l,t[14]=(a+o)*u,t[15]=1,t},lookAt:function(t,e,r,s){let o,n,l,u,h,c,p,d,m,y;const f=e[0],g=e[1],_=e[2],w=s[0],S=s[1],v=s[2],b=r[0],x=r[1],M=r[2],A=(0,i.g)();return Math.abs(f-b)<A&&Math.abs(g-x)<A&&Math.abs(_-M)<A?a(t):(p=f-b,d=g-x,m=_-M,y=1/Math.sqrt(p*p+d*d+m*m),p*=y,d*=y,m*=y,o=S*m-v*d,n=v*p-w*m,l=w*d-S*p,y=Math.sqrt(o*o+n*n+l*l),y?(y=1/y,o*=y,n*=y,l*=y):(o=0,n=0,l=0),u=d*l-m*n,h=m*o-p*l,c=p*n-d*o,y=Math.sqrt(u*u+h*h+c*c),y?(y=1/y,u*=y,h*=y,c*=y):(u=0,h=0,c=0),t[0]=o,t[1]=u,t[2]=p,t[3]=0,t[4]=n,t[5]=h,t[6]=d,t[7]=0,t[8]=l,t[9]=c,t[10]=m,t[11]=0,t[12]=-(o*f+n*g+l*_),t[13]=-(u*f+h*g+c*_),t[14]=-(p*f+d*g+m*_),t[15]=1,t)},targetTo:function(t,e,r,s){const i=e[0],o=e[1],a=e[2],n=s[0],l=s[1],u=s[2];let h=i-r[0],c=o-r[1],p=a-r[2],d=h*h+c*c+p*p;d>0&&(d=1/Math.sqrt(d),h*=d,c*=d,p*=d);let m=l*p-u*c,y=u*h-n*p,f=n*c-l*h;return d=m*m+y*y+f*f,d>0&&(d=1/Math.sqrt(d),m*=d,y*=d,f*=d),t[0]=m,t[1]=y,t[2]=f,t[3]=0,t[4]=c*f-p*y,t[5]=p*m-h*f,t[6]=h*y-c*m,t[7]=0,t[8]=h,t[9]=c,t[10]=p,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t},str:function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob:function(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)},add:function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t},subtract:w,multiplyScalar:function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t},multiplyScalarAndAdd:function(t,e,r,s){return t[0]=e[0]+r[0]*s,t[1]=e[1]+r[1]*s,t[2]=e[2]+r[2]*s,t[3]=e[3]+r[3]*s,t[4]=e[4]+r[4]*s,t[5]=e[5]+r[5]*s,t[6]=e[6]+r[6]*s,t[7]=e[7]+r[7]*s,t[8]=e[8]+r[8]*s,t[9]=e[9]+r[9]*s,t[10]=e[10]+r[10]*s,t[11]=e[11]+r[11]*s,t[12]=e[12]+r[12]*s,t[13]=e[13]+r[13]*s,t[14]=e[14]+r[14]*s,t[15]=e[15]+r[15]*s,t},exactEquals:S,equals:v,isOrthoNormal:b,mul:x,sub:M},Symbol.toStringTag,{value:"Module"}))},13867:(t,e,r)=>{r.d(e,{Z:()=>i});var s=r(69801);class i{constructor(t,e){this._storage=new s.WJ,this._storage.maxSize=t,e&&this._storage.registerRemoveFunc("",e)}put(t,e,r){this._storage.put(t,e,r,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}}},69801:(t,e,r)=>{r.d(e,{WJ:()=>l,Xq:()=>n});var s,i,o=r(70586),a=r(44553);(i=s||(s={}))[i.ALL=0]="ALL",i[i.SOME=1]="SOME";class n{constructor(t,e,r){this._namespace=t,this._storage=e,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,e,r,s=0){this._storage.put(this._namespace+t,e,r,s)}get(t){const e=this._storage.get(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}pop(t){const e=this._storage.pop(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}updateSize(t,e,r){this._storage.updateSize(this._namespace+t,e,r)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class l{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new a.Z,this._users=new a.Z}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,e){this._removeFuncs.push([t,e])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace((e=>e[0]!==t))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,e,r,i){const o=this._db.get(t);if(o&&(this._size-=o.size,this._db.delete(t),o.entry!==e&&this._notifyRemove(t,o.entry,s.ALL)),r>this._maxSize)return void this._notifyRemove(t,e,s.ALL);if(void 0===e)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return void console.warn("Refusing to cache entry with invalid size "+r);const a=1+Math.max(i,-3)- -3;this._db.set(t,{entry:e,size:r,lifetime:a,lives:a}),this._size+=r,this._checkSizeLimit()}updateSize(t,e,r){const i=this._db.get(t);if(i&&i.entry===e){for(this._size-=i.size;r>this._maxSize;){const i=this._notifyRemove(t,e,s.SOME);if(!((0,o.pC)(i)&&i>0))return void this._db.delete(t);r=i}i.size=r,this._size+=r,this._checkSizeLimit()}}pop(t){const e=this._db.get(t);if(e)return this._size-=e.size,this._db.delete(t),++this._hit,e.entry;++this._miss}get(t){const e=this._db.get(t);if(void 0!==e)return this._db.delete(t),e.lives=e.lifetime,this._db.set(t,e),++this._hit,e.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},e={},r=new Array;this._db.forEach(((t,s)=>{const i=t.lifetime;r[i]=(r[i]||0)+t.size,this._users.forAll((r=>{const i=r.namespace;if(s.startsWith(i)){const r=e[i]||0;e[i]=r+t.size}}))}));const s={};this._users.forAll((t=>{const r=t.namespace;if(!isNaN(t.hitRate)&&t.hitRate>0){const i=e[r]||0;e[r]=i,s[r]=Math.round(100*t.hitRate)+"%"}else s[r]="0%"}));const i=Object.keys(e);i.sort(((t,r)=>e[r]-e[t])),i.forEach((r=>t[r]=Math.round(e[r]/2**20)+"MB / "+s[r]));for(let e=r.length-1;e>=0;--e){const s=r[e];s&&(t["Priority "+(e+-3-1)]=Math.round(s/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll((t=>t.resetHitRate()))}clear(t){this._db.forEach(((e,r)=>{r.startsWith(t)&&(this._size-=e.size,this._db.delete(r),this._notifyRemove(r,e.entry,s.ALL))}))}clearAll(){this._db.forEach(((t,e)=>this._notifyRemove(e,t.entry,s.ALL))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,e,r){let s;return this._removeFuncs.some((i=>{if(t.startsWith(i[0])){const t=i[1](e,r);return"number"==typeof t&&(s=t),!0}return!1})),s}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,e]of this._db){if(this._db.delete(t),e.lives<=1){this._size-=e.size;const r=this._notifyRemove(t,e.entry,s.SOME);(0,o.pC)(r)&&r>0&&(this._size+=r,e.lives=e.lifetime,e.size=r,this._db.set(t,e))}else--e.lives,this._db.set(t,e);if(this._size<=.9*this.maxSize)return}}}},35463:(t,e,r)=>{r.d(e,{JE:()=>a,Nm:()=>o,rJ:()=>n}),r(80442);const s={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},i={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function o(t,e,r){const s=new Date(t.getTime());if(e&&r){const t=i[r],{getter:o,setter:a,multiplier:n}=t;if("months"===r){const t=function(t,e){const r=new Date(t,e+1,1);return r.setDate(0),r.getDate()}(s.getFullYear(),s.getMonth()+e);s.getDate()>t&&s.setDate(t)}s[a](s[o]()+e*n)}return s}function a(t,e){switch(e){case"milliseconds":return new Date(t.getTime());case"seconds":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());case"minutes":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes());case"hours":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours());case"days":return new Date(t.getFullYear(),t.getMonth(),t.getDate());case"weeks":return new Date(t.getFullYear(),t.getMonth(),t.getDate()-t.getDay());case"months":return new Date(t.getFullYear(),t.getMonth(),1);case"years":return new Date(t.getFullYear(),0,1);case"decades":return new Date(t.getFullYear()-t.getFullYear()%10,0,1);case"centuries":return new Date(t.getFullYear()-t.getFullYear()%100,0,1);default:return new Date}}function n(t,e,r){return 0===t?0:t*s[e]/s[r]}},24109:(t,e,r)=>{r.r(e),r.d(e,{default:()=>pt});var s=r(43697),i=r(3172),o=r(66643),a=r(20102),n=r(22974),l=r(70586),u=r(16453),h=r(95330),c=r(17452),p=r(5600),d=(r(75215),r(71715)),m=r(52011),y=r(30556),f=r(6570),g=r(82971),_=r(87085),w=r(54295),S=r(46486),v=r(17287),b=r(71612),x=r(17017),M=r(38009),A=r(16859),T=r(72965);let E=null;var I=r(92604),R=r(1533);class C{constructor(t,e){this._spriteSource=t,this._maxTextureSize=e,this.devicePixelRatio=1,this._spriteImageFormat="png",this._isRetina=!1,this._spritesData={},this.image=null,this.width=null,this.height=null,this.loadStatus="not-loaded","url"===t.type&&t.spriteFormat&&(this._spriteImageFormat=t.spriteFormat),t.pixelRatio&&(this.devicePixelRatio=t.pixelRatio),this.baseURL=t.spriteUrl}get spriteNames(){const t=[];for(const e in this._spritesData)t.push(e);return t.sort(),t}getSpriteInfo(t){return this._spritesData?this._spritesData[t]:null}async load(t){if(this.baseURL){this.loadStatus="loading";try{await this._loadSprites(t),this.loadStatus="loaded"}catch{this.loadStatus="failed"}}else this.loadStatus="failed"}async _loadSprites(t){this._isRetina=this.devicePixelRatio>1.15;const{width:e,height:r,data:s,json:i}=await this._getSpriteData(this._spriteSource,t),o=Object.keys(i);if(!o||0===o.length||!s)return this._spritesData=this.image=null,void(this.width=this.height=0);this._spritesData=i,this.width=e,this.height=r;const n=Math.max(this._maxTextureSize,4096);if(e>n||r>n){const t=`Sprite resource for style ${this.baseURL} is bigger than the maximum allowed of ${n} pixels}`;throw I.Z.getLogger("esri.layers.support.SpriteSource").error(t),new a.Z("SpriteSource",t)}let l;for(let t=0;t<s.length;t+=4)l=s[t+3]/255,s[t]=s[t]*l,s[t+1]=s[t+1]*l,s[t+2]=s[t+2]*l;this.image=s}async _getSpriteData(t,e){if("image"===t.type){let e,r;if(this.devicePixelRatio<1.15){if(!t.spriteSource1x)throw new a.Z("SpriteSource","no image data provided for low resolution sprites!");e=t.spriteSource1x.image,r=t.spriteSource1x.json}else{if(!t.spriteSource2x)throw new a.Z("SpriteSource","no image data provided for high resolution sprites!");e=t.spriteSource2x.image,r=t.spriteSource2x.json}return"width"in e&&"height"in e&&"data"in e&&((0,R.eP)(e.data)||(0,R.KZ)(e.data))?{width:e.width,height:e.height,data:new Uint8Array(e.data),json:r}:{...U(e),json:r}}const r=(0,c.mN)(this.baseURL),s=r.query?"?"+(0,c.B7)(r.query):"",o=this._isRetina?"@2x":"",n=`${r.path}${o}.${this._spriteImageFormat}${s}`,l=`${r.path}${o}.json${s}`,[u,h]=await Promise.all([(0,i.default)(l,e),(0,i.default)(n,{responseType:"image",...e})]);return{...U(h.data),json:u.data}}}function U(t){const e=document.createElement("canvas"),r=e.getContext("2d");e.width=t.width,e.height=t.height,r.drawImage(t,0,0,t.width,t.height);const s=r.getImageData(0,0,t.width,t.height);return{width:t.width,height:t.height,data:new Uint8Array(s.data)}}var L=r(11145),D=r(68773),P=r(45322),z=r(56608),F=r(55415);class B{constructor(t){this.url=t}async fetchTileIndex(){return this._tileIndexPromise||(this._tileIndexPromise=(0,i.default)(this.url).then((t=>t.data.index))),this._tileIndexPromise}async dataKey(t,e){const r=await this.fetchTileIndex();return(0,h.k_)(e),this._getIndexedDataKey(r,t)}_getIndexedDataKey(t,e){const r=[e];if(e.level<0||e.row<0||e.col<0||e.row>>e.level>0||e.col>>e.level>0)return null;let s=e;for(;0!==s.level;)s=new F.Z(s.level-1,s.row>>1,s.col>>1,s.world),r.push(s);let i,o,a=t,n=r.pop();if(1===a)return n;for(;r.length;)if(i=r.pop(),o=(1&i.col)+((1&i.row)<<1),a){if(0===a[o]){n=null;break}if(1===a[o]){n=i;break}n=i,a=a[o]}return n}}class O{constructor(t,e){this._tilemap=t,this._tileIndexUrl=e}async fetchTileIndex(t){return this._tileIndexPromise||(this._tileIndexPromise=(0,i.default)(this._tileIndexUrl,{query:{...t?.query}}).then((t=>t.data.index))),this._tileIndexPromise}dataKey(t,e){const{level:r,row:s,col:i}=t,o=new F.Z(t);return this._tilemap.fetchAvailabilityUpsample(r,s,i,o,e).then((()=>(o.world=t.world,o))).catch((t=>{if((0,h.D_)(t))throw t;return null}))}}const j=new Map;class k{constructor(t,e,r){this.tilemap=null,this.tileInfo=null,this.capabilities=null,this.fullExtent=null,this.name=t,this.sourceUrl=e;const s=(0,c.mN)(this.sourceUrl),i=(0,n.d9)(r),o=i.tiles;if(s)for(let t=0;t<o.length;t++){const e=(0,c.mN)(o[t]);e&&((0,c.YP)(e.path)||(e.path=(0,c.v_)(s.path,e.path)),o[t]=(0,c.fl)(e.path,{...s.query,...e.query}))}this.tileServers=o;const a=r.capabilities&&r.capabilities.split(",").map((t=>t.toLowerCase().trim())),l=!0===r?.exportTilesAllowed,u=!0===a?.includes("tilemap"),h=l&&r.hasOwnProperty("maxExportTilesCount")?r.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:l,supportsTileMap:u},exportTiles:l?{maxExportTilesCount:+h}:null},this.tileInfo=(0,P.d)(i.tileInfo,i,null,{ignoreMinMaxLOD:!0});const p=r.tileMap?(0,c.fl)((0,c.v_)(s.path,r.tileMap),s.query):null;u?(this.type="vector-tile",this.tilemap=new O(new z.y({layer:{parsedUrl:s,tileInfo:this.tileInfo,type:"vector-tile",tileServers:this.tileServers}}),p)):p&&(this.tilemap=new B(p)),this.fullExtent=f.Z.fromJSON(r.fullExtent)}destroy(){}async getRefKey(t,e){return this.tilemap?.dataKey(t,e)??t}requestTile(t,e,r,s){return function(t,e,r,s,o){return function(t,e){const r=j.get(t);if(r)return r.then((t=>(0,n.d9)(t)));const s=(0,i.default)(t,{responseType:"array-buffer",...e}).then((({data:e})=>(j.delete(t),e))).catch((e=>{throw j.delete(t),e}));return j.set(t,s),s}(t.replace(/\{z\}/gi,e.toString()).replace(/\{y\}/gi,r.toString()).replace(/\{x\}/gi,s.toString()),o)}(this.tileServers[e%this.tileServers.length],t,e,r,s)}isCompatibleWith(t){const e=this.tileInfo,r=t.tileInfo;if(!e.spatialReference.equals(r.spatialReference))return!1;if(!e.origin.equals(r.origin))return!1;if(Math.round(e.dpi)!==Math.round(r.dpi))return!1;const s=e.lods,i=r.lods,o=Math.min(s.length,i.length);for(let t=0;t<o;t++){const e=s[t],r=i[t];if(e.level!==r.level||Math.round(e.scale)!==Math.round(r.scale))return!1}return!0}}const q=D.Z.defaults&&D.Z.defaults.io.corsEnabledServers;function N(t){if(!t)return;const e=(0,c.P$)(t);q&&!q.includes(e)&&q.push(e)}function W(...t){let e;for(let r=0;r<t.length;++r)if((0,c.oC)(t[r])){if(e){const s=e.split("://")[0];e=s+":"+t[r].trim()}}else e=(0,c.YP)(t[r])?t[r]:(0,c.v_)(e,t[r]);return(0,c.Qj)(e)}async function G(t,e,r,s,o){let a,n,l;if((0,h.k_)(o),"string"==typeof r){const t=(0,c.Fv)(r);N(t),l=await(0,i.default)(t,{...o,responseType:"json",query:{f:"json",...o?.query}}),l.ssl&&(a&&(a=a.replace(/^http:/i,"https:")),n&&(n=n.replace(/^http:/i,"https:"))),a=t,n=t}else l={data:r},a=r.jsonUrl||null,n=s;const u=l.data;if(Z(u))return t.styleUrl=a||null,async function(t,e,r,s){const i=r?(0,c.Yd)(r):(0,c.L)();t.styleBase=i,t.style=e,t.styleUrl&&N(t.styleUrl),e["sprite-format"]&&"webp"===e["sprite-format"].toLowerCase()&&(t.spriteFormat="webp");const o=[];if(e.sources&&e.sources.esri){const r=e.sources.esri;r.url?await G(t,"esri",W(i,r.url),void 0,s):o.push(G(t,"esri",r,i,s))}for(const r of Object.keys(e.sources))"esri"!==r&&"vector"===e.sources[r].type&&(e.sources[r].url?o.push(G(t,r,W(i,e.sources[r].url),void 0,s)):e.sources[r].tiles&&o.push(G(t,r,e.sources[r],i,s)));await Promise.all(o)}(t,u,n,o);if(function(t){return!Z(t)}(u))return t.sourceUrl?H(t,u,n,!1,e,o):(t.sourceUrl=a||null,H(t,u,n,!0,e,o));throw new Error("You must specify the URL or the JSON for a service or for a style.")}function Z(t){return!!t.sources}async function H(t,e,r,s,i,o){const a=r?(0,c.Qj)(r)+"/":(0,c.L)(),n=function(t,e){if(t.hasOwnProperty("tileInfo"))return t;const r={xmin:-20037507.067161843,ymin:-20037507.067161843,xmax:20037507.067161843,ymax:20037507.067161843,spatialReference:{wkid:102100}};let s=78271.51696400007,i=295828763.7957775;const o=[],a=t.hasOwnProperty("minzoom")?+t.minzoom:0,n=t.hasOwnProperty("maxzoom")?+t.maxzoom:22;for(let t=0;t<=n;t++)t>=a&&o.push({level:t,scale:i,resolution:s}),s/=2,i/=2;for(const r of t.tiles)N(W(e,r));return{capabilities:"TilesOnly",initialExtent:r,fullExtent:r,minScale:0,maxScale:0,tiles:t.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-20037508.342787,y:20037508.342787},lods:o,spatialReference:{wkid:102100}}}}(e,a),l=new k(i,(0,c.fl)(a,o?.query),n);if(!s&&t.primarySourceName in t.sourceNameToSource){const e=t.sourceNameToSource[t.primarySourceName];if(!e.isCompatibleWith(l))return;null!=l.fullExtent&&(null!=e.fullExtent?e.fullExtent.union(l.fullExtent):e.fullExtent=l.fullExtent.clone()),e.tileInfo.lods.length<l.tileInfo.lods.length&&(e.tileInfo=l.tileInfo)}if(s?(t.sourceBase=a,t.source=e,t.validatedSource=n,t.primarySourceName=i,t.sourceUrl&&N(t.sourceUrl)):N(a),t.sourceNameToSource[i]=l,!t.style){if(null==e.defaultStyles)throw new Error;return"string"==typeof e.defaultStyles?G(t,"",W(a,e.defaultStyles,"root.json"),void 0,o):G(t,"",e.defaultStyles,W(a,"root.json"),o)}}var $=r(33516);const Y=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,K={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function V(t){const e=t?.match(Y);if(!e)return null;const[,r,s,i]=e;if(!r)return null;let o=null,a=null,n=null;const{devext:l,qaext:u,www:h}=K;if(s)if(o=r,i)switch(i.toLowerCase()){case"devext":({customBaseUrl:a,portalHostname:n}=l);break;case"qa":({customBaseUrl:a,portalHostname:n}=u);break;default:return null}else({customBaseUrl:a,portalHostname:n}=h);else switch(r.toLowerCase()){case"devext":({customBaseUrl:a,portalHostname:n}=l);break;case"qaext":({customBaseUrl:a,portalHostname:n}=u);break;case"www":({customBaseUrl:a,portalHostname:n}=h);break;default:return null}return{customBaseUrl:a,isPortal:!1,portalHostname:n,urlKey:o}}var Q=r(25929);const J=1e-6;function X(t,e){if(t===e)return!0;if(null==t&&null!=e)return!1;if(null!=t&&null==e)return!1;if(null==t||null==e)return!1;if(!t.spatialReference.equals(e.spatialReference)||t.dpi!==e.dpi)return!1;const r=t.origin,s=e.origin;if(Math.abs(r.x-s.x)>=J||Math.abs(r.y-s.y)>=J)return!1;let i,o;t.lods[0].scale>e.lods[0].scale?(i=t,o=e):(o=t,i=e);for(let t=i.lods[0].scale;t>=o.lods[o.lods.length-1].scale-J;t/=2)if(Math.abs(t-o.lods[0].scale)<J)return!0;return!1}function tt(t,e){if(t===e)return t;if(null==t&&null!=e)return e;if(null!=t&&null==e)return t;if(null==t||null==e)return null;const r=t.size[0],s=t.format,i=t.dpi,o={x:t.origin.x,y:t.origin.y},a=t.spatialReference.toJSON(),n=t.lods[0].scale>e.lods[0].scale?t.lods[0]:e.lods[0],l=t.lods[t.lods.length-1].scale<=e.lods[e.lods.length-1].scale?t.lods[t.lods.length-1]:e.lods[e.lods.length-1],u=n.scale,h=n.resolution,c=l.scale,p=[];let d=u,m=h,y=0;for(;d>c;)p.push({level:y,resolution:m,scale:d}),y++,d/=2,m/=2;return new L.Z({size:[r,r],dpi:i,format:s||"pbf",origin:o,lods:p,spatialReference:a})}var et=r(51785),rt=r(54738);let st,it;function ot(t){const e=(0,rt.Sh)(t);for(;e.length>1;){const t=at(e.shift());if(t.available)return t}return at(e.shift())}function at(t){switch(t){case rt.zO.WEBGL1:return st||(st=function(){const t=new lt,e=ht(rt.zO.WEBGL1,t);return(0,l.Wi)(e)||(t.supportsElementIndexUint=null!==e.getExtension("OES_element_index_uint"),t.supportsStandardDerivatives=null!==e.getExtension("OES_standard_derivatives"),t.supportsInstancedArrays=null!==e.getExtension("ANGLE_instanced_arrays"),t.supportsTextureFloat=null!==e.getExtension("OES_texture_float"),t.supportsTextureHalfFloat=null!==e.getExtension("OES_texture_half_float"),t.supportsColorBufferFloat=null!==e.getExtension("WEBGL_color_buffer_float"),t.supportsColorBufferFloatBlend=null!==e.getExtension("EXT_float_blend"),t.supportsColorBufferHalfFloat=null!==e.getExtension("EXT_color_buffer_half_float")),t}()),st;case rt.zO.WEBGL2:return it||(it=function(){const t=new ut,e=ht(rt.zO.WEBGL2,t);return(0,l.Wi)(e)||(t.supportsColorBufferFloat=null!==e.getExtension("EXT_color_buffer_float"),t.supportsColorBufferFloatBlend=null!==e.getExtension("EXT_float_blend"),t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||null!==e.getExtension("EXT_color_buffer_half_float")),t}()),it}}class nt{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}class lt extends nt{constructor(){super(...arguments),this.type=rt.zO.WEBGL1}}class ut extends nt{constructor(){super(...arguments),this.type=rt.zO.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}}function ht(t,e){if(t===rt.zO.WEBGL1&&"undefined"==typeof WebGLRenderingContext||t===rt.zO.WEBGL2&&"undefined"==typeof WebGL2RenderingContext)return null;const r=document.createElement("canvas");if(!r)return null;let s=(0,rt.kr)(r,t,{failIfMajorPerformanceCaveat:!0});if((0,l.Wi)(s)&&(s=(0,rt.kr)(r,t),(0,l.pC)(s)&&(e.majorPerformanceCaveat=!0)),(0,l.Wi)(s))return s;if(t===rt.zO.WEBGL1){const t=s.getParameter(s.VERSION)?.match(/^WebGL\s+([\d.]*)/);if(t){const r=parseFloat(t[1]);e.available=r>=.94}}else e.available=!0;e.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const i=s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT);return i&&(e.supportsHighPrecisionFragment=i.precision>0),s}let ct=class extends((0,b.h)((0,T.M)((0,S.Z)((0,v.Y)((0,M.q)((0,A.I)((0,x.N)((0,w.V)((0,u.R)(_.Z)))))))))){constructor(...t){super(...t),this._spriteSourceMap=new Map,this.currentStyleInfo=null,this.style=null,this.isReference=null,this.operationalLayerType="VectorTileLayer",this.type="vector-tile",this.url=null,this.showCollisionBoxes="none",this.path=null}normalizeCtorArgs(t,e){return"string"==typeof t?{url:t,...e}:t}destroy(){if(this.sourceNameToSource)for(const t of Object.values(this.sourceNameToSource))t?.destroy();this._spriteSourceMap.clear()}async prefetchResources(t){await this.loadSpriteSource(globalThis.devicePixelRatio||1,t)}load(t){const e=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},t).catch(h.r9).then((async()=>{if(!this.portalItem||!this.portalItem.id)return;const e=`${this.portalItem.itemUrl}/resources/styles/root.json`;(await(0,i.default)(e,{...t,query:{f:"json",...this.customParameters,token:this.apiKey}})).data&&this.read({url:e},(0,$.h)(this.portalItem))})).catch(h.r9).then((()=>this._loadStyle(t)));return this.addResolvingPromise(e),Promise.resolve(this)}get attributionDataUrl(){const t=this.currentStyleInfo,e=t&&t.serviceUrl&&(0,c.mN)(t.serviceUrl);if(!e)return null;const r=this._getDefaultAttribution(e.path);return r?(0,c.fl)(r,{...this.customParameters,token:this.apiKey}):null}get capabilities(){const t=this.primarySource;return t?t.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}get fullExtent(){return this.primarySource?.fullExtent||null}get parsedUrl(){return this.serviceUrl?(0,c.mN)(this.serviceUrl):null}get serviceUrl(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null}get spatialReference(){return this.tileInfo&&this.tileInfo.spatialReference||null}get styleUrl(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null}writeStyleUrl(t,e){t&&(0,c.oC)(t)&&(t=`https:${t}`);const r=(0,l.Wg)(V(t));e.styleUrl=(0,Q.e)(t,r)}get tileInfo(){const t=[];for(const e in this.sourceNameToSource)t.push(this.sourceNameToSource[e]);let e=this.primarySource?.tileInfo||new L.Z;if(t.length>1)for(let r=0;r<t.length;r++)X(e,t[r].tileInfo)&&(e=tt(e,t[r].tileInfo));return e}readVersion(t,e){return e.version?parseFloat(e.version):parseFloat(e.currentVersion)}async loadSpriteSource(t=1,e){if(!this._spriteSourceMap.has(t)){const r=ot("2d").maxTextureSize,s=this.currentStyleInfo?.spriteUrl?(0,c.fl)(this.currentStyleInfo.spriteUrl,{...this.customParameters,token:this.apiKey}):null,i=new C({type:"url",spriteUrl:s,pixelRatio:t,spriteFormat:this.currentStyleInfo?.spriteFormat},r);await i.load(e),this._spriteSourceMap.set(t,i)}return this._spriteSourceMap.get(t)}async setSpriteSource(t,e){if(!t)return null;const r=ot("2d").maxTextureSize,s=t.spriteUrl,i=s?(0,c.fl)(s,{...this.customParameters,token:this.apiKey}):null;if(!i&&"url"===t.type)return null;const o=new C(t,r);try{await o.load(e);const r=t.pixelRatio||1;return this._spriteSourceMap.clear(),this._spriteSourceMap.set(r,o),i&&this.currentStyleInfo&&(this.currentStyleInfo.spriteUrl=i),this.emit("spriteSource-change",{spriteSource:o}),o}catch(t){(0,h.r9)(t)}return null}async loadStyle(t,e){const r=t||this.style||this.url;return this._loadingTask&&"string"==typeof r&&this.url===r||(this._loadingTask?.abort(),this._loadingTask=(0,o.vr)((t=>(this._spriteSourceMap.clear(),this._getSourceAndStyle(r,{signal:t}))),e)),this._loadingTask.promise}getStyleLayerId(t){return this.styleRepository.getStyleLayerId(t)}getStyleLayerIndex(t){return this.styleRepository.getStyleLayerIndex(t)}getPaintProperties(t){return(0,n.d9)(this.styleRepository.getPaintProperties(t))}setPaintProperties(t,e){const r=this.styleRepository.isPainterDataDriven(t);this.styleRepository.setPaintProperties(t,e);const s=this.styleRepository.isPainterDataDriven(t);this.emit("paint-change",{layer:t,paint:e,isDataDriven:r||s})}getStyleLayer(t){return(0,n.d9)(this.styleRepository.getStyleLayer(t))}setStyleLayer(t,e){this.styleRepository.setStyleLayer(t,e),this.emit("style-layer-change",{layer:t,index:e})}deleteStyleLayer(t){this.styleRepository.deleteStyleLayer(t),this.emit("delete-style-layer",{layer:t})}getLayoutProperties(t){return(0,n.d9)(this.styleRepository.getLayoutProperties(t))}setLayoutProperties(t,e){this.styleRepository.setLayoutProperties(t,e),this.emit("layout-change",{layer:t,layout:e})}setStyleLayerVisibility(t,e){this.styleRepository.setStyleLayerVisibility(t,e),this.emit("style-layer-visibility-change",{layer:t,visibility:e})}getStyleLayerVisibility(t){return this.styleRepository.getStyleLayerVisibility(t)}write(t,e){return e?.origin&&!this.styleUrl?(e.messages&&e.messages.push(new a.Z("vectortilelayer:unsupported",`VectorTileLayer (${this.title}, ${this.id}) with style defined by JSON only are not supported`,{layer:this})),null):super.write(t,e)}getTileUrl(t,e,r){return null}async _getSourceAndStyle(t,e){if(!t)throw new Error("invalid style!");const r=await async function(t,e){const r={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:"",spriteFormat:"png"},[s,i]="string"==typeof t?[t,null]:[null,t.jsonUrl];await G(r,"esri",t,i,e);const o={layerDefinition:r.validatedSource,url:s,serviceUrl:r.sourceUrl,style:r.style,styleUrl:r.styleUrl,spriteUrl:r.style.sprite&&W(r.styleBase,r.style.sprite),spriteFormat:r.spriteFormat,glyphsUrl:r.style.glyphs&&W(r.styleBase,r.style.glyphs),sourceNameToSource:r.sourceNameToSource,primarySourceName:r.primarySourceName};return N(o.spriteUrl),N(o.glyphsUrl),o}(t,{...e,query:{...this.customParameters,token:this.apiKey}});"webp"===r.spriteFormat&&(await function(t){if(E)return E;const e={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};return E=new Promise((t=>{const r=new Image;r.onload=()=>{r.onload=r.onerror=null,t(r.width>0&&r.height>0)},r.onerror=()=>{r.onload=r.onerror=null,t(!1)},r.src="data:image/webp;base64,"+e.lossy})),E}()||(r.spriteFormat="png")),this._set("currentStyleInfo",{...r}),"string"==typeof t?(this.url=t,this.style=null):(this.url=null,this.style=t),this._set("sourceNameToSource",r.sourceNameToSource),this._set("primarySource",r.sourceNameToSource[r.primarySourceName]),this._set("styleRepository",new et.Z(r.style)),this.read(r.layerDefinition,{origin:"service"}),this.emit("load-style")}_getDefaultAttribution(t){const e=t.match(/^https?:\/\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i),r=["OpenStreetMap_v2","OpenStreetMap_Daylight_v2","OpenStreetMap_Export_v2","OpenStreetMap_FTS_v2","OpenStreetMap_GCS_v2","World_Basemap","World_Basemap_v2","World_Basemap_Export_v2","World_Basemap_GCS_v2","World_Basemap_WGS84","World_Contours_v2"];if(!e)return;const s=e[2]&&e[2].toLowerCase();if(!s)return;const i=e[1]||"";for(const t of r)if(t.toLowerCase().includes(s))return(0,c.Fv)(`//static.arcgis.com/attribution/Vector${i}/${t}`)}async _loadStyle(t){return this._loadingTask?.promise??this.loadStyle(null,t)}};(0,s._)([(0,p.Cb)({readOnly:!0})],ct.prototype,"attributionDataUrl",null),(0,s._)([(0,p.Cb)({type:["show","hide"]})],ct.prototype,"listMode",void 0),(0,s._)([(0,p.Cb)({json:{read:!0,write:!0}})],ct.prototype,"blendMode",void 0),(0,s._)([(0,p.Cb)({readOnly:!0,json:{read:!1}})],ct.prototype,"capabilities",null),(0,s._)([(0,p.Cb)({readOnly:!0})],ct.prototype,"currentStyleInfo",void 0),(0,s._)([(0,p.Cb)({json:{read:!1},readOnly:!0,type:f.Z})],ct.prototype,"fullExtent",null),(0,s._)([(0,p.Cb)()],ct.prototype,"style",void 0),(0,s._)([(0,p.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],ct.prototype,"isReference",void 0),(0,s._)([(0,p.Cb)({type:["VectorTileLayer"]})],ct.prototype,"operationalLayerType",void 0),(0,s._)([(0,p.Cb)({readOnly:!0})],ct.prototype,"parsedUrl",null),(0,s._)([(0,p.Cb)({readOnly:!0})],ct.prototype,"serviceUrl",null),(0,s._)([(0,p.Cb)({type:g.Z,readOnly:!0})],ct.prototype,"spatialReference",null),(0,s._)([(0,p.Cb)({readOnly:!0})],ct.prototype,"styleRepository",void 0),(0,s._)([(0,p.Cb)({readOnly:!0})],ct.prototype,"sourceNameToSource",void 0),(0,s._)([(0,p.Cb)({readOnly:!0})],ct.prototype,"primarySource",void 0),(0,s._)([(0,p.Cb)({type:String,readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],ct.prototype,"styleUrl",null),(0,s._)([(0,y.c)(["portal-item","web-document"],"styleUrl")],ct.prototype,"writeStyleUrl",null),(0,s._)([(0,p.Cb)({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:L.Z})],ct.prototype,"tileInfo",null),(0,s._)([(0,p.Cb)({json:{read:!1},readOnly:!0,value:"vector-tile"})],ct.prototype,"type",void 0),(0,s._)([(0,p.Cb)({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],ct.prototype,"url",void 0),(0,s._)([(0,p.Cb)({readOnly:!0})],ct.prototype,"version",void 0),(0,s._)([(0,d.r)("version",["version","currentVersion"])],ct.prototype,"readVersion",null),(0,s._)([(0,p.Cb)({type:String})],ct.prototype,"showCollisionBoxes",void 0),(0,s._)([(0,p.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],ct.prototype,"path",void 0),ct=(0,s._)([(0,m.j)("esri.layers.VectorTileLayer")],ct);const pt=ct},54295:(t,e,r)=>{r.d(e,{V:()=>a});var s=r(43697),i=r(5600),o=(r(67676),r(80442),r(75215),r(52011));const a=t=>{let e=class extends t{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):"portalItem"in this?this.portalItem?.apiKey:null}set apiKey(t){null!=t?this._override("apiKey",t):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,s._)([(0,i.Cb)({type:String})],e.prototype,"apiKey",null),e=(0,s._)([(0,o.j)("esri.layers.mixins.APIKeyMixin")],e),e}},46486:(t,e,r)=>{r.d(e,{Z:()=>h});var s=r(43697),i=(r(66577),r(5600)),o=(r(67676),r(80442),r(75215),r(71715)),a=r(52011),n=r(45322),l=r(56608),u=r(82971);const h=t=>{let e=class extends t{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(t,e){return null!=e.minLOD&&null!=e.maxLOD?t:0}readMaxScale(t,e){return null!=e.minLOD&&null!=e.maxLOD?t:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(t,e){return e.capabilities&&e.capabilities.includes("Tilemap")?new l.y({layer:this}):null}};return(0,s._)([(0,i.Cb)({json:{read:{source:"copyrightText"}}})],e.prototype,"copyright",void 0),(0,s._)([(0,i.Cb)()],e.prototype,"minScale",void 0),(0,s._)([(0,o.r)("service","minScale")],e.prototype,"readMinScale",null),(0,s._)([(0,i.Cb)()],e.prototype,"maxScale",void 0),(0,s._)([(0,o.r)("service","maxScale")],e.prototype,"readMaxScale",null),(0,s._)([(0,i.Cb)({type:u.Z})],e.prototype,"spatialReference",void 0),(0,s._)([(0,i.Cb)({readOnly:!0})],e.prototype,"supportsBlankTile",null),(0,s._)([(0,i.Cb)(n.h)],e.prototype,"tileInfo",void 0),(0,s._)([(0,i.Cb)()],e.prototype,"tilemapCache",void 0),(0,s._)([(0,o.r)("service","tilemapCache",["capabilities"])],e.prototype,"readTilemapCache",null),(0,s._)([(0,i.Cb)()],e.prototype,"version",void 0),e=(0,s._)([(0,a.j)("esri.layers.mixins.ArcGISCachedService")],e),e}},17287:(t,e,r)=>{r.d(e,{Y:()=>u});var s=r(43697),i=r(92604),o=r(70586),a=r(5600),n=(r(67676),r(80442),r(75215),r(52011)),l=r(66677);const u=t=>{let e=class extends t{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const t=(0,l.Qc)(this.url);if((0,o.pC)(t)&&t.title)return t.title}return this._get("title")||""}set title(t){this._set("title",t)}set url(t){this._set("url",(0,l.Nm)(t,i.Z.getLogger(this.declaredClass)))}};return(0,s._)([(0,a.Cb)()],e.prototype,"title",null),(0,s._)([(0,a.Cb)({type:String})],e.prototype,"url",null),e=(0,s._)([(0,n.j)("esri.layers.mixins.ArcGISService")],e),e}},17017:(t,e,r)=>{r.d(e,{N:()=>a});var s=r(43697),i=r(5600),o=(r(67676),r(80442),r(75215),r(52011));const a=t=>{let e=class extends t{constructor(){super(...arguments),this.customParameters=null}};return(0,s._)([(0,i.Cb)({type:Object,json:{write:{overridePolicy:t=>({enabled:!!(t&&Object.keys(t).length>0)})}}})],e.prototype,"customParameters",void 0),e=(0,s._)([(0,o.j)("esri.layers.mixins.CustomParametersMixin")],e),e}},16859:(t,e,r)=>{r.d(e,{I:()=>w});var s=r(43697),i=r(40330),o=r(3172),a=r(66643),n=r(20102),l=r(92604),u=r(70586),h=r(95330),c=r(17452),p=r(5600),d=(r(67676),r(80442),r(75215),r(71715)),m=r(52011),y=r(30556),f=r(65587),g=r(15235),_=r(86082);const w=t=>{let e=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){this.portalItem=(0,u.SC)(this.portalItem)}set portalItem(t){t!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",t))}readPortalItem(t,e,r){if(e.itemId)return new g.default({id:e.itemId,portal:r&&r.portal})}writePortalItem(t,e){t&&t.id&&(e.itemId=t.id)}async loadFromPortal(t,e){if(this.portalItem&&this.portalItem.id)try{const s=await Promise.all([r.e(4547),r.e(9300),r.e(661)]).then(r.bind(r,18062));return(0,h.k_)(e),await s.load({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData,layerModuleTypeMap:t.layerModuleTypeMap},e)}catch(t){throw(0,h.D_)(t)||l.Z.getLogger(this.declaredClass).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${t}`),t}}async finishLoadEditablePortalLayer(t){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(t).catch((t=>((0,h.r9)(t),!0))))}async _fetchUserHasEditingPrivileges(t){const e=this.url?i.id?.findCredential(this.url):null;if(!e)return!0;const r=S.credential===e?S.user:await this._fetchEditingUser(t);return S.credential=e,S.user=r,(0,u.Wi)(r)||null==r.privileges||r.privileges.includes("features:user:edit")}async _fetchEditingUser(t){const e=this.portalItem?.portal?.user;if(e)return e;const r=i.id.findServerInfo(this.url??"");if(!r?.owningSystemUrl)return null;const s=`${r.owningSystemUrl}/sharing/rest`,n=f.Z.getDefault();if(n&&n.loaded&&(0,c.Fv)(n.restUrl)===(0,c.Fv)(s))return n.user;const l=`${s}/community/self`,h=(0,u.pC)(t)?t.signal:null,p=await(0,a.q6)((0,o.default)(l,{authMode:"no-prompt",query:{f:"json"},signal:h}));return p.ok?_.default.fromJSON(p.value.data):null}read(t,e){e&&(e.layer=this),super.read(t,e)}write(t,e){const r=e&&e.portal,s=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||f.Z.getDefault());return r&&s&&!(0,c.tm)(s.restUrl,r.restUrl)?(e.messages&&e.messages.push(new n.Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(t,{...e,layer:this})}};return(0,s._)([(0,p.Cb)({type:g.default})],e.prototype,"portalItem",null),(0,s._)([(0,d.r)("web-document","portalItem",["itemId"])],e.prototype,"readPortalItem",null),(0,s._)([(0,y.c)("web-document","portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null),(0,s._)([(0,p.Cb)({clonable:!1})],e.prototype,"resourceReferences",void 0),(0,s._)([(0,p.Cb)({readOnly:!0})],e.prototype,"userHasEditingPrivileges",void 0),e=(0,s._)([(0,m.j)("esri.layers.mixins.PortalLayer")],e),e},S={credential:null,user:null}},33516:(t,e,r)=>{r.d(e,{Y:()=>a,h:()=>o});var s=r(17452),i=r(65587);function o(t){return{origin:"portal-item",url:(0,s.mN)(t.itemUrl),portal:t.portal||i.Z.getDefault(),portalItem:t,readResourcePaths:[]}}function a(t){return{origin:"portal-item",messages:[],writtenProperties:[],url:t.itemUrl?(0,s.mN)(t.itemUrl):null,portal:t.portal||i.Z.getDefault(),portalItem:t}}},55415:(t,e,r)=>{r.d(e,{Z:()=>i});var s=r(71143);class i{constructor(t,e,r,s){this.set(t,e,r,s)}static getId(t,e,r,s){return"object"==typeof t?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${e}/${r}/${s}`}get key(){return this}get id(){return this.toString()}set id(t){this.set(t)}get hash(){const t=4095&this.row,e=4095&this.col,r=63&this.level;return(3&this.world)<<30|e<<22|t<<8|r}acquire(t,e,r,s){this.set(t,e,r,s)}contains(t){const e=t.level-this.level;return e>=0&&this.row===t.row>>e&&this.col===t.col>>e&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new i(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,e,r,s){if(null==t)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof t)this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if("string"==typeof t){const[e,r,s,i]=t.split("/");this.level=parseFloat(e),this.row=parseFloat(r),this.col=parseFloat(s),this.world=parseFloat(i)}else this.level=+t,this.row=+e,this.col=+r,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new i(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,e=this.row<<1,r=this.col<<1,s=this.world;return[new i(t,e,r,s),new i(t,e,r+1,s),new i(t,e+1,r,s),new i(t,e+1,r+1,s)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}i.pool=new s.Z(i,null,null,25,50)},54738:(t,e,r)=>{r.d(e,{Sh:()=>a,kr:()=>n,zO:()=>s});var s,i,o=r(80442);function a(t){const e=(0,o.Z)("esri-force-webgl");if(e===s.WEBGL1||e===s.WEBGL2)return[e];switch(t){case"2d":return(0,o.Z)("mac")&&(0,o.Z)("chrome")?[s.WEBGL1,s.WEBGL2]:[s.WEBGL2,s.WEBGL1];case"3d":return[s.WEBGL2,s.WEBGL1]}}function n(t,e,r={}){const i=e===s.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let o=null;for(const e of i){try{o=t.getContext(e,r)}catch(t){}if(o)break}return o}(i=s||(s={}))[i.WEBGL1=1]="WEBGL1",i[i.WEBGL2=2]="WEBGL2"}}]);