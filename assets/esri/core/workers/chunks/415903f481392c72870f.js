"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[132],{13069:(t,e,n)=>{n.d(e,{AG:()=>s,lk:()=>r,vD:()=>a,yS:()=>o});const i="randomUUID"in crypto;function r(){if(i)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=e=>t[e].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function o(){return`{${r().toUpperCase()}}`}function a(){return`{${r()}}`}function s(t){const e=t.toUpperCase();return"{"!==t[0]?`{${e}}`:e}},38954:(t,e,n)=>{n.d(e,{A:()=>m,B:()=>d,C:()=>l,D:()=>p,E:()=>f,F:()=>P,H:()=>N,a:()=>j,b:()=>y,c:()=>a,d:()=>u,e:()=>S,f:()=>w,g:()=>c,h:()=>M,i:()=>s,j:()=>g,k:()=>v,l:()=>o,m:()=>D,n:()=>_,o:()=>Z,p:()=>U,q:()=>I,s:()=>A,t:()=>E,u:()=>b,v:()=>x,w:()=>L,x:()=>h,y:()=>k,z:()=>O});var i=n(51850),r=n(34304);function o(t){const e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function s(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function u(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function l(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function f(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function h(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function d(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function m(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function p(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function M(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function y(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t}function g(t,e){const n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(n*n+i*i+r*r)}function A(t,e){const n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return n*n+i*i+r*r}function v(t){const e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i}function x(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function b(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function _(t,e){const n=e[0],i=e[1],r=e[2];let o=n*n+i*i+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function w(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function S(t,e,n){const i=e[0],r=e[1],o=e[2],a=n[0],s=n[1],c=n[2];return t[0]=r*c-o*s,t[1]=o*a-i*c,t[2]=i*s-r*a,t}function D(t,e,n,i){const r=e[0],o=e[1],a=e[2];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t[2]=a+i*(n[2]-a),t}function E(t,e,n){const i=e[0],r=e[1],o=e[2];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12],t[1]=n[1]*i+n[5]*r+n[9]*o+n[13],t[2]=n[2]*i+n[6]*r+n[10]*o+n[14],t}function I(t,e,n){const i=e[0],r=e[1],o=e[2];return t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8],t}function L(t,e,n){const i=n[0],r=n[1],o=n[2],a=n[3],s=e[0],c=e[1],u=e[2],l=r*u-o*c,f=o*s-i*u,h=i*c-r*s,d=r*h-o*f,m=o*l-i*h,p=i*f-r*l,M=2*a;return t[0]=s+l*M+2*d,t[1]=c+f*M+2*m,t[2]=u+h*M+2*p,t}const R=(0,i.vt)(),q=(0,i.vt)();function U(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Z(t,e,n){const i=n[0]-e[0],r=n[1]-e[1],o=n[2]-e[2];let a=i*i+r*r+o*o;return a>0?(a=1/Math.sqrt(a),t[0]=i*a,t[1]=r*a,t[2]=o*a,t):(t[0]=0,t[1]=0,t[2]=0,t)}const j=u,z=l,T=f,P=g,k=A,N=o,O=v;Object.freeze(Object.defineProperty({__proto__:null,abs:h,add:c,angle:function(t,e){_(R,t),_(q,e);const n=w(R,q);return n>1?0:n<-1?Math.PI:Math.acos(n)},bezier:function(t,e,n,i,r,o){const a=1-o,s=a*a,c=o*o,u=s*a,l=3*o*s,f=3*c*a,h=c*o;return t[0]=e[0]*u+n[0]*l+i[0]*f+r[0]*h,t[1]=e[1]*u+n[1]*l+i[1]*f+r[1]*h,t[2]=e[2]*u+n[2]*l+i[2]*f+r[2]*h,t},ceil:function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},clamp:function(t,e=0,n=1){return t[0]=Math.min(Math.max(t[0],e),n),t[1]=Math.min(Math.max(t[1],e),n),t[2]=Math.min(Math.max(t[2],e),n),t},copy:a,cross:S,crossAndNormalize:function(t,e,n){const i=e[0],r=e[1],o=e[2],a=n[0],s=n[1],c=n[2],u=r*c-o*s,l=o*a-i*c,f=i*s-r*a,h=Math.sqrt(u*u+l*l+f*f);return t[0]=u/h,t[1]=l/h,t[2]=f/h,t},direction:Z,dist:P,distance:g,div:T,divide:f,dot:w,equals:function(t,e){if(t===e)return!0;const n=t[0],i=t[1],o=t[2],a=e[0],s=e[1],c=e[2],u=(0,r.FD)();return Math.abs(n-a)<=u*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=u*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-c)<=u*Math.max(1,Math.abs(o),Math.abs(c))},exactEquals:U,floor:function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},hermite:function(t,e,n,i,r,o){const a=o*o,s=a*(2*o-3)+1,c=a*(o-2)+o,u=a*(o-1),l=a*(3-2*o);return t[0]=e[0]*s+n[0]*c+i[0]*u+r[0]*l,t[1]=e[1]*s+n[1]*c+i[1]*u+r[1]*l,t[2]=e[2]*s+n[2]*c+i[2]*u+r[2]*l,t},inverse:b,len:N,length:o,lerp:D,max:p,min:m,mul:z,multiply:l,negate:x,normalize:_,random:function(t,e=1){const n=r.Ov,i=2*n()*Math.PI,o=2*n()-1,a=Math.sqrt(1-o*o)*e;return t[0]=Math.cos(i)*a,t[1]=Math.sin(i)*a,t[2]=o*e,t},rotateX:function(t,e,n,i){const r=[],o=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0],o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},rotateY:function(t,e,n,i){const r=[],o=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),o[1]=r[1],o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},rotateZ:function(t,e,n,i){const r=[],o=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),o[2]=r[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},round:function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},scale:M,scaleAndAdd:y,set:s,sign:d,sqrDist:k,sqrLen:O,squaredDistance:A,squaredLength:v,str:function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},sub:j,subtract:u,transformMat3:I,transformMat4:E,transformQuat:L},Symbol.toStringTag,{value:"Module"}))},61528:(t,e,n)=>{n.r(e),n.d(e,{default:()=>Z});var i=n(90237),r=n(78888),o=n(49186),a=n(53966),s=n(34727),c=n(92071),u=n(74887),l=n(36708),f=n(10107),h=(n(44208),n(87811),n(36005)),d=n(40608),m=n(87024),p=n(38954),M=n(51850),y=n(73941),g=n(5443),A=n(16930),v=n(9762),x=n(4146),b=n(52136),_=n(18768),w=n(69208),S=n(16131),D=n(8303),E=n(25036),I=n(10873),L=n(58325),R=n(24212),q=n(97159);let U=class extends((0,_.b)((0,S.q)((0,D.A)((0,E.j)((0,c.P)((0,w.d)((0,b.p)(x.A)))))))){readModifications(t,e,n){this._modificationsSource={url:(0,q.f)(t,n),context:n}}initialize(){this.addHandles((0,l.on)((()=>this.modifications),"after-changes",(()=>this.modifications=this.modifications),l.OH))}constructor(t){super(t),this.operationalLayerType="IntegratedMesh3DTilesLayer",this.modifications=null,this._modificationsSource=null,this.spatialReference=new A.A({wkid:4326,vcsWkid:115700}),this.fullExtent=new g.A(-180,-90,180,90,this.spatialReference),this.url=null,this.type="integrated-mesh-3dtiles",this.path=null,this.minScale=0,this.maxScale=0}set elevationInfo(t){null!=t&&"absolute-height"!==t.mode||this._set("elevationInfo",t),this._validateElevationInfo(t)}_verifyArray(t,e){if(!Array.isArray(t)||t.length<e)return!1;for(const e of t)if("number"!=typeof e)return!1;return!0}_initFullExtent(t){const e=t.root?.boundingVolume;if(!e)return;if(e.box){const t=e?.box;if(t[3]>7972671&&t[7]>7972671&&t[11]>7945940)return}const n=t.root?.transform,i=(0,M.vt)();if(e.region&&this._verifyArray(e.region,6)){const t=e.region,n=(0,s.KJ)(t[0]),i=(0,s.KJ)(t[1]),r=t[4],o=(0,s.KJ)(t[2]),a=(0,s.KJ)(t[3]),c=t[5];this.fullExtent=new g.A({xmin:n,ymin:i,zmin:r,xmax:o,ymax:a,zmax:c,spatialReference:this.spatialReference})}else if(e.sphere&&this._verifyArray(e.sphere,4)){const t=e.sphere,r=(0,M.fA)(t[0],t[1],t[2]),o=t[3]/Math.sqrt(3),a=(0,M.vt)();(0,p.d)(a,r,(0,M.fA)(o,o,o));const s=(0,M.vt)();if((0,p.g)(s,r,(0,M.fA)(o,o,o)),n&&this._verifyArray(n,16)){const t=n;(0,p.t)(i,a,t),(0,p.c)(a,i),(0,p.t)(i,s,t),(0,p.c)(s,i)}(0,v.projectBuffer)(a,y.Ro,0,a,A.A.WGS84,0),(0,v.projectBuffer)(s,y.Ro,0,s,A.A.WGS84,0);const c=(0,M.vt)(),u=(0,M.vt)();(0,p.A)(c,a,s),(0,p.D)(u,a,s),this.fullExtent=new g.A({xmin:c[0],ymin:c[1],zmin:c[2],xmax:u[0],ymax:u[1],zmax:u[2],spatialReference:this.spatialReference})}else if(e.box&&this._verifyArray(e.box,12)){const t=e.box,i=(0,M.fA)(t[0],t[1],t[2]),r=(0,M.fA)(t[3],t[4],t[5]),o=(0,M.fA)(t[6],t[7],t[8]),a=(0,M.fA)(t[9],t[10],t[11]),s=[];for(let t=0;t<8;++t)s.push((0,M.vt)());if((0,p.g)(s[0],i,r),(0,p.g)(s[0],s[0],o),(0,p.g)(s[0],s[0],a),(0,p.a)(s[1],i,r),(0,p.g)(s[1],s[1],o),(0,p.g)(s[1],s[1],a),(0,p.g)(s[2],i,r),(0,p.a)(s[2],s[2],o),(0,p.g)(s[2],s[2],a),(0,p.a)(s[3],i,r),(0,p.a)(s[3],s[3],o),(0,p.g)(s[3],s[3],a),(0,p.g)(s[4],i,r),(0,p.g)(s[4],s[4],o),(0,p.a)(s[4],s[4],a),(0,p.a)(s[5],i,r),(0,p.g)(s[5],s[5],o),(0,p.a)(s[5],s[5],a),(0,p.g)(s[6],i,r),(0,p.a)(s[6],s[6],o),(0,p.a)(s[6],s[6],a),(0,p.a)(s[7],i,r),(0,p.a)(s[7],s[7],o),(0,p.a)(s[7],s[7],a),n&&this._verifyArray(n,16)){const t=n;for(let e=0;e<8;++e)(0,p.t)(s[e],s[e],t)}const c=(0,M.fA)(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),u=(0,M.fA)(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);for(let t=0;t<8;++t)(0,v.projectBuffer)(s[t],y.Ro,0,s[t],A.A.WGS84,0),(0,p.A)(u,u,s[t]),(0,p.D)(c,c,s[t]);this.fullExtent=new g.A({xmin:u[0],ymin:u[1],zmin:u[2],xmax:c[0],ymax:c[1],zmax:c[2],spatialReference:this.spatialReference})}}async load(t){return this.addResolvingPromise(this._doLoad(t)),this}async _doLoad(t){const e=null!=t?t.signal:null;try{await this.loadFromPortal({supportedTypes:["3DTiles Service"],validateItem:t=>{if(t.typeKeywords?.includes("IntegratedMesh"))return!0;throw new o.A("portal:invalid-layer-item-type","Invalid layer item, expected '${expectedType}' ",{expectedType:"3DTiles Service containing IntegratedMesh"})}},t)}catch(t){(0,u.QP)(t)}if(null!=this._modificationsSource){const e=await L.A.fromUrl(this._modificationsSource.url,this.spatialReference,t);this.setAtOrigin("modifications",e,this._modificationsSource.context.origin),this._modificationsSource=null}if(this.url){const t=(0,r.A)(this.url,{query:{...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then((t=>{this._initFullExtent(t.data)}),(t=>{(0,u.QP)(t)}));await t}}beforeSave(){if(null!=this._modificationsSource)return this.load().then((()=>{}),(()=>{}))}async fetchAttributionData(){return this.load().then((()=>({})))}_validateElevationInfo(t){const e="Integrated mesh 3d tiles layers";(0,R.XF)(a.A.getLogger(this),(0,R.B)(e,"absolute-height",t)),(0,R.XF)(a.A.getLogger(this),(0,R.tW)(e,t))}};(0,i._)([(0,f.MZ)({type:["IntegratedMesh3DTilesLayer"]})],U.prototype,"operationalLayerType",void 0),(0,i._)([(0,f.MZ)({type:L.A}),(0,m.P)({origins:["web-scene","portal-item"],type:"resource",prefix:"modifications"})],U.prototype,"modifications",void 0),(0,i._)([(0,h.w)(["web-scene","portal-item"],"modifications")],U.prototype,"readModifications",null),(0,i._)([(0,f.MZ)({type:A.A})],U.prototype,"spatialReference",void 0),(0,i._)([(0,f.MZ)({type:g.A})],U.prototype,"fullExtent",void 0),(0,i._)([(0,f.MZ)(I.Yj)],U.prototype,"elevationInfo",null),(0,i._)([(0,f.MZ)({type:["show","hide"]})],U.prototype,"listMode",void 0),(0,i._)([(0,f.MZ)(I.OZ)],U.prototype,"url",void 0),(0,i._)([(0,f.MZ)({readOnly:!0})],U.prototype,"type",void 0),(0,i._)([(0,f.MZ)({type:String,json:{origins:{"web-scene":{read:!0,write:!0},"portal-item":{read:!0,write:!0}},read:!1}})],U.prototype,"path",void 0),(0,i._)([(0,f.MZ)({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:!1,write:!1}}}})],U.prototype,"minScale",void 0),(0,i._)([(0,f.MZ)({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:!1,write:!1}}}})],U.prototype,"maxScale",void 0),U=(0,i._)([(0,d.$)("esri.layers.IntegratedMesh3DTilesLayer")],U);const Z=U},76553:(t,e,n)=>{function i(t){return t&&"getAtOrigin"in t&&"originOf"in t}n.d(e,{H:()=>i})}}]);