"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[5129,5935],{22862:(e,t,n)=>{n.d(t,{Hg:()=>y,V7:()=>h,uD:()=>c});var r=n(92036),i=n(46791),o=n(1153);const s=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function a(e){return e instanceof r.Z}function l(e){return e instanceof i.Z?Object.keys(e.items):a(e)?(0,o.vw)(e).keys():e?Object.keys(e):[]}function u(e,t){return e instanceof i.Z?e.items[t]:e[t]}function p(e){return e?e.declaredClass:null}function d(e,t){const n=e.diff;if(n&&"function"==typeof n)return n(e,t);const r=l(e),i=l(t);if(0===r.length&&0===i.length)return;if(!r.length||!i.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const o=i.filter((e=>!r.includes(e))),c=r.filter((e=>!i.includes(e))),h=r.filter((n=>i.includes(n)&&u(e,n)!==u(t,n))).concat(o,c).sort(),y=p(e);if(y&&s.has(y)&&h.length)return{type:"complete",oldValue:e,newValue:t};let f;const m=a(e)&&a(t);for(const r of h){const i=u(e,r),o=u(t,r);let s;if((m||"function"!=typeof i&&"function"!=typeof o)&&i!==o&&(null!=i||null!=o)){if(n&&n[r]&&"function"==typeof n[r])s=n[r]?.(i,o);else if(i instanceof Date&&o instanceof Date){if(i.getTime()===o.getTime())continue;s={type:"complete",oldValue:i,newValue:o}}else s="object"==typeof i&&"object"==typeof o&&p(i)===p(o)?d(i,o):{type:"complete",oldValue:i,newValue:o};null!=s&&(null!=f?f.diff[r]=s:f={type:"partial",diff:{[r]:s}})}}return f}function c(e,t){if(null==e)return!1;const n=t.split(".");let r=e;for(const e of n){if("complete"===r.type)return!0;if("partial"!==r.type)return!1;{const t=r.diff[e];if(!t)return!1;r=t}}return!0}function h(e,t){for(const n of t)if(c(e,n))return!0;return!1}function y(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&p(e)!==p(t)?{type:"complete",oldValue:e,newValue:t}:d(e,t)}},82960:(e,t,n)=>{n.d(t,{C:()=>r});const r=["operational-layers","basemap","ground"]},24133:(e,t,n)=>{n.d(t,{Q:()=>s});var r=n(67676),i=n(44553),o=n(88764);class s{constructor(e=9,t){this._compareMinX=p,this._compareMinY=d,this._toBBox=e=>e,this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this._toBBox=t:this._initFormat(t)),this.clear()}destroy(){this.clear(),b.prune(),_.prune(),x.prune(),C.prune()}all(e){this._all(this._data,e)}search(e,t){let n=this._data;const r=this._toBBox;if(g(e,n))for(b.clear();n;){for(let i=0,o=n.children.length;i<o;i++){const o=n.children[i],s=n.leaf?r(o):o;g(e,s)&&(n.leaf?t(o):m(e,s)?this._all(o,t):b.push(o))}n=b.pop()}}collides(e){let t=this._data;const n=this._toBBox;if(!g(e,t))return!1;for(b.clear();t;){for(let r=0,i=t.children.length;r<i;r++){const i=t.children[r],o=t.leaf?n(i):i;if(g(e,o)){if(t.leaf||m(e,o))return!0;b.push(i)}}t=b.pop()}return!1}load(e){if(!e.length)return this;if(e.length<this._minEntries){for(let t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}let t=this._build(e.slice(0,e.length),0,e.length-1,0);if(this._data.children.length)if(this._data.height===t.height)this._splitRoot(this._data,t);else{if(this._data.height<t.height){const e=this._data;this._data=t,t=e}this._insert(t,this._data.height-t.height-1,!0)}else this._data=t;return this}insert(e){return e&&this._insert(e,this._data.height-1),this}clear(){return this._data=new E([]),this}remove(e){if(!e)return this;let t,n=this._data,i=null,o=0,s=!1;const a=this._toBBox(e);for(x.clear(),C.clear();n||x.length>0;){if(n||(n=x.pop(),i=x.data[x.length-1],o=C.pop()??0,s=!0),n.leaf&&(t=(0,r.cq)(n.children,e,n.children.length,n.indexHint),-1!==t))return n.children.splice(t,1),x.push(n),this._condense(x),this;s||n.leaf||!m(n,a)?i?(o++,n=i.children[o],s=!1):n=null:(x.push(n),C.push(o),o=0,i=n,n=n.children[0])}return this}toJSON(){return this._data}fromJSON(e){return this._data=e,this}_all(e,t){let n=e;for(_.clear();n;){if(!0===n.leaf)for(const e of n.children)t(e);else _.pushArray(n.children);n=_.pop()??null}}_build(e,t,n,r){const i=n-t+1;let o=this._maxEntries;if(i<=o){const r=new E(e.slice(t,n+1));return a(r,this._toBBox),r}r||(r=Math.ceil(Math.log(i)/Math.log(o)),o=Math.ceil(i/o**(r-1)));const s=new T([]);s.height=r;const l=Math.ceil(i/o),u=l*Math.ceil(Math.sqrt(o));w(e,t,n,u,this._compareMinX);for(let i=t;i<=n;i+=u){const t=Math.min(i+u-1,n);w(e,i,t,l,this._compareMinY);for(let n=i;n<=t;n+=l){const i=Math.min(n+l-1,t);s.children.push(this._build(e,n,i,r-1))}}return a(s,this._toBBox),s}_chooseSubtree(e,t,n,r){for(;r.push(t),!0!==t.leaf&&r.length-1!==n;){let n,r=1/0,i=1/0;for(let o=0,s=t.children.length;o<s;o++){const s=t.children[o],a=c(s),l=y(e,s)-a;l<i?(i=l,r=a<r?a:r,n=s):l===i&&a<r&&(r=a,n=s)}t=n||t.children[0]}return t}_insert(e,t,n){const r=this._toBBox,i=n?e:r(e);x.clear();const o=this._chooseSubtree(i,this._data,t,x);for(o.children.push(e),u(o,i);t>=0&&x.data[t].children.length>this._maxEntries;)this._split(x,t),t--;this._adjustParentBBoxes(i,x,t)}_split(e,t){const n=e.data[t],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);const o=this._chooseSplitIndex(n,i,r);if(!o)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const s=n.children.splice(o,n.children.length-o),l=n.leaf?new E(s):new T(s);l.height=n.height,a(n,this._toBBox),a(l,this._toBBox),t?e.data[t-1].children.push(l):this._splitRoot(n,l)}_splitRoot(e,t){this._data=new T([e,t]),this._data.height=e.height+1,a(this._data,this._toBBox)}_chooseSplitIndex(e,t,n){let r,i,o;r=i=1/0;for(let s=t;s<=n-t;s++){const t=l(e,0,s,this._toBBox),a=l(e,s,n,this._toBBox),u=f(t,a),p=c(t)+c(a);u<r?(r=u,o=s,i=p<i?p:i):u===r&&p<i&&(i=p,o=s)}return o}_chooseSplitAxis(e,t,n){const r=e.leaf?this._compareMinX:p,i=e.leaf?this._compareMinY:d;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,i)&&e.children.sort(r)}_allDistMargin(e,t,n,r){e.children.sort(r);const i=this._toBBox,o=l(e,0,t,i),s=l(e,n-t,n,i);let a=h(o)+h(s);for(let r=t;r<n-t;r++){const t=e.children[r];u(o,e.leaf?i(t):t),a+=h(o)}for(let r=n-t-1;r>=t;r--){const t=e.children[r];u(s,e.leaf?i(t):t),a+=h(s)}return a}_adjustParentBBoxes(e,t,n){for(let r=n;r>=0;r--)u(t.data[r],e)}_condense(e){for(let t=e.length-1;t>=0;t--){const n=e.data[t];if(0===n.children.length)if(t>0){const i=e.data[t-1],o=i.children;o.splice((0,r.cq)(o,n,o.length,i.indexHint),1)}else this.clear();else a(n,this._toBBox)}}_initFormat(e){const t=["return a"," - b",";"];this._compareMinX=new Function("a","b",t.join(e[0])),this._compareMinY=new Function("a","b",t.join(e[1])),this._toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}function a(e,t){l(e,0,e.children.length,t,e)}function l(e,t,n,r,i){i||(i=new E([])),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let o,s=t;s<n;s++)o=e.children[s],u(i,e.leaf?r(o):o);return i}function u(e,t){e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY)}function p(e,t){return e.minX-t.minX}function d(e,t){return e.minY-t.minY}function c(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function h(e){return e.maxX-e.minX+(e.maxY-e.minY)}function y(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function f(e,t){const n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}function m(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function g(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function w(e,t,n,r,i){const s=[t,n];for(;s.length;){const t=s.pop(),n=s.pop();if(t-n<=r)continue;const a=n+Math.ceil((t-n)/r/2)*r;(0,o.q)(e,a,n,t,i),s.push(n,a,a,t)}}const b=new i.Z,_=new i.Z,x=new i.Z,C=new i.Z({deallocator:void 0});class v{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class I extends v{constructor(){super(...arguments),this.height=1,this.indexHint=new r.SO}}class E extends I{constructor(e){super(),this.children=e,this.leaf=!0}}class T extends I{constructor(e){super(),this.children=e,this.leaf=!1}}},42033:(e,t,n)=>{async function r(e,t){const{WhereClause:r}=await Promise.all([n.e(8968),n.e(8592)]).then(n.bind(n,8968));return r.create(e,t)}function i(e,t){return null!=e?null!=t?`(${e}) AND (${t})`:e:t}n.d(t,{E:()=>r,_:()=>i})},84864:(e,t,n)=>{n.d(t,{bU:()=>p,fC:()=>h,tp:()=>c,v7:()=>d});const r=new Float64Array(2),i=new Float64Array(2),o="0123456789bcdefghjkmnpqrstuvwxyz";function s(e){return o[e]}function a(e){return(e[0]+e[1])/2}function l(e,t,n){return e[0]=t,e[1]=n,e}function u(e,t){const n=t>a(e);return function(e,t){const n=a(e),r=t,i=!t;e[0]=i*e[0]+r*n,e[1]=i*n+r*e[1]}(e,n),n}function p(e,t){let n=-90,r=90,i=-180,o=180;for(let s=0;s<t;s++){const t=Math.ceil((s+1)/2),a=Math.floor((s+1)/2),l=1-s%2,u=30-(3*t+2*a),p=30-(2*t+3*a),d=3*l+2*(1-l),c=2*l+3*(1-l),h=3*l+7*(1-l)<<p,y=(7*l+3*(1-l)<<u&e.geohashX)>>u,f=(h&e.geohashY)>>p;for(let e=d-1;e>=0;e--){const t=(i+o)/2,n=y&1<<e?1:0;i=(1-n)*i+n*t,o=(1-n)*t+n*o}for(let e=c-1;e>=0;e--){const t=(n+r)/2,i=f&1<<e?1:0;n=(1-i)*n+i*t,r=(1-i)*t+i*r}}return[i,n,o,r]}function d(e,t,n,r){r%2&&(r+=1);let i=0,o=0,s=-90,a=90,l=-180,u=180;for(let e=0;e<r/2;e++){for(let t=0;t<5;t++){const r=(l+u)/2,o=n>r?1:0;i|=o<<29-(t+5*e),l=(1-o)*l+o*r,u=(1-o)*r+o*u}for(let n=0;n<5;n++){const r=(s+a)/2,i=t>r?1:0;o|=i<<29-(n+5*e),s=(1-i)*s+i*r,a=(1-i)*r+i*a}}e.geohashX=i,e.geohashY=o}function c(e,t,n,r,i){i%2&&(i+=1);let o=0,s=0,a=-90,l=90,u=-180,p=180;for(let e=0;e<i/2;e++){for(let t=0;t<5;t++){const n=(u+p)/2,i=r>n?1:0;o|=i<<29-(t+5*e),u=(1-i)*u+i*n,p=(1-i)*n+i*p}for(let t=0;t<5;t++){const r=(a+l)/2,i=n>r?1:0;s|=i<<29-(t+5*e),a=(1-i)*a+i*r,l=(1-i)*r+i*l}}e[2*t]=o,e[2*t+1]=s}function h(e,t,n){let o="";const a=l(r,-90,90),p=l(i,-180,180);for(let r=0;r<n;r++){let n=0;r%2?(n|=u(a,e)<<4,n|=u(p,t)<<3,n|=u(a,e)<<2,n|=u(p,t)<<1,n|=u(a,e)<<0):(n|=u(p,t)<<4,n|=u(a,e)<<3,n|=u(p,t)<<2,n|=u(a,e)<<1,n|=u(p,t)<<0),o+=s(n)}return o}},16306:(e,t,n)=>{n.d(t,{aX:()=>C});var r=n(68773),i=n(20102),o=n(92604),s=n(38913),a=n(58901),l=n(73913),u=n(8744),p=n(40488),d=(n(66577),n(3172)),c=n(33955),h=n(11282),y=n(17452);async function f(e,t,n){const r="string"==typeof e?(0,y.mN)(e):e,i=t[0].spatialReference,o=(0,c.Ji)(t[0]),s={...n,query:{...r.query,f:"json",sr:(0,u.B9)(i),geometries:JSON.stringify((l=t,{geometryType:(0,c.Ji)(l[0]),geometries:l.map((e=>e.toJSON()))}))}},{data:a}=await(0,d.Z)(r.path+"/simplify",s);var l;return function(e,t,n){const r=(0,c.q9)(t);return e.map((e=>{const t=r.fromJSON(e);return t.spatialReference=n,t}))}(a.geometries,o,i)}const m=o.Z.getLogger("esri.geometry.support.normalizeUtils");function g(e){return"polygon"===e[0].type}function w(e){return"polyline"===e[0].type}function b(e,t,n){if(t){const t=function(e,t){if(!(e instanceof a.Z||e instanceof s.Z)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw m.error(e),new i.Z(e)}const n=(0,l.x3)(e),r=[];for(const e of n){const n=[];r.push(n),n.push([e[0][0],e[0][1]]);for(let r=0;r<e.length-1;r++){const i=e[r][0],o=e[r][1],s=e[r+1][0],a=e[r+1][1],l=Math.sqrt((s-i)*(s-i)+(a-o)*(a-o)),u=(a-o)/l,p=(s-i)/l,d=l/t;if(d>1){for(let e=1;e<=d-1;e++){const r=e*t,s=p*r+i,a=u*r+o;n.push([s,a])}const e=(l+Math.floor(d-1)*t)/2,r=p*e+i,s=u*e+o;n.push([r,s])}n.push([s,a])}}return function(e){return"polygon"===e.type}(e)?new s.Z({rings:r,spatialReference:e.spatialReference}):new a.Z({paths:r,spatialReference:e.spatialReference})}(e,1e6);e=(0,p.Sx)(t,!0)}return n&&(e=(0,l.Sy)(e,n)),e}function _(e,t,n){if(Array.isArray(e)){const r=e[0];if(r>t){const n=(0,l.XZ)(r,t);e[0]=r+n*(-2*t)}else if(r<n){const t=(0,l.XZ)(r,n);e[0]=r+t*(-2*n)}}else{const r=e.x;if(r>t){const n=(0,l.XZ)(r,t);e=e.clone().offset(n*(-2*t),0)}else if(r<n){const t=(0,l.XZ)(r,n);e=e.clone().offset(t*(-2*n),0)}}return e}function x(e,t){let n=-1;for(let r=0;r<t.cutIndexes.length;r++){const i=t.cutIndexes[r],o=t.geometries[r],s=(0,l.x3)(o);for(let e=0;e<s.length;e++){const t=s[e];t.some((n=>{if(n[0]<180)return!0;{let n=0;for(let e=0;e<t.length;e++){const r=t[e][0];n=r>n?r:n}n=Number(n.toFixed(9));const r=-360*(0,l.XZ)(n,180);for(let n=0;n<t.length;n++){const t=o.getPoint(e,n);o.setPoint(e,n,t.clone().offset(r,0))}return!0}}))}if(i===n){if(g(e))for(const t of(0,l.x3)(o))e[i]=e[i].addRing(t);else if(w(e))for(const t of(0,l.x3)(o))e[i]=e[i].addPath(t)}else n=i,e[i]=o}return e}async function C(e,t,n){if(!Array.isArray(e))return C([e],t);t&&"string"!=typeof t&&m.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const i="string"==typeof t?t:t?.url??r.default.geometryServiceUrl;let o,y,g,w,v,I,E,T,S=0;const M=[],L=[];for(const t of e)if(null!=t)if(o||(o=t.spatialReference,y=(0,u.C5)(o),g=o.isWebMercator,I=g?102100:4326,w=l.UZ[I].maxX,v=l.UZ[I].minX,E=l.UZ[I].plus180Line,T=l.UZ[I].minus180Line),y)if("mesh"===t.type)L.push(t);else if("point"===t.type)L.push(_(t.clone(),w,v));else if("multipoint"===t.type){const e=t.clone();e.points=e.points.map((e=>_(e,w,v))),L.push(e)}else if("extent"===t.type){const e=t.clone()._normalize(!1,!1,y);L.push(e.rings?new s.Z(e):e)}else if(t.extent){const e=t.extent,n=(0,l.XZ)(e.xmin,v)*(2*w);let r=0===n?t.clone():(0,l.Sy)(t.clone(),n);e.offset(n,0),e.intersects(E)&&e.xmax!==w?(S=e.xmax>S?e.xmax:S,r=b(r,g),M.push(r),L.push("cut")):e.intersects(T)&&e.xmin!==v?(S=e.xmax*(2*w)>S?e.xmax*(2*w):S,r=b(r,g,360),M.push(r),L.push("cut")):L.push(r)}else L.push(t.clone());else L.push(t);else L.push(t);let k=(0,l.XZ)(S,w),N=-90;const j=k,R=new a.Z;for(;k>0;){const e=360*k-180;R.addPath([[e,N],[e,-1*N]]),N*=-1,k--}if(M.length>0&&j>0){const t=x(M,await async function(e,t,n,r){const i=(0,h.en)(e),o=t[0].spatialReference,s={...r,responseType:"json",query:{...i.query,f:"json",sr:(0,u.B9)(o),target:JSON.stringify({geometryType:(0,c.Ji)(t[0]),geometries:t}),cutter:JSON.stringify(n)}},a=await(0,d.Z)(i.path+"/cut",s),{cutIndexes:l,geometries:p=[]}=a.data;return{cutIndexes:l,geometries:p.map((e=>{const t=(0,c.im)(e);return t.spatialReference=o,t}))}}(i,M,R,n)),r=[],o=[];for(let n=0;n<L.length;n++){const i=L[n];if("cut"!==i)o.push(i);else{const i=t.shift(),s=e[n];null!=s&&"polygon"===s.type&&s.rings&&s.rings.length>1&&i.rings.length>=s.rings.length?(r.push(i),o.push("simplify")):o.push(g?(0,p.$)(i):i)}}if(!r.length)return o;const s=await f(i,r,n),a=[];for(let e=0;e<o.length;e++){const t=o[e];"simplify"!==t?a.push(t):a.push(g?(0,p.$)(s.shift()):s.shift())}return a}const D=[];for(let e=0;e<L.length;e++){const t=L[e];if("cut"!==t)D.push(t);else{const e=M.shift();D.push(!0===g?(0,p.$)(e):e)}}return D}},73913:(e,t,n)=>{n.d(t,{Sy:()=>l,UZ:()=>s,XZ:()=>a,x3:()=>u});var r=n(58901),i=n(82971),o=n(33955);const s={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new r.Z({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:i.Z.WebMercator}),minus180Line:new r.Z({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:i.Z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new r.Z({paths:[[[180,-180],[180,180]]],spatialReference:i.Z.WGS84}),minus180Line:new r.Z({paths:[[[-180,-180],[-180,180]]],spatialReference:i.Z.WGS84})}};function a(e,t){return Math.ceil((e-t)/(2*t))}function l(e,t){const n=u(e);for(const e of n)for(const n of e)n[0]+=t;return e}function u(e){return(0,o.oU)(e)?e.rings:e.paths}},19087:(e,t,n)=>{n.r(t),n.d(t,{default:()=>on});var r=n(43697),i=(n(66577),n(46791)),o=n(20102),s=n(92604),a=n(95330),l=n(5600),u=(n(75215),n(67676),n(80442)),p=n(52011),d=n(84864),c=n(87085),h=n(98732),y=n(5428),f=n(92036),m=n(30175),g=n(42033),w=n(38913),b=n(73615),_=n(8744),x=n(70272),C=n(33955);class v{constructor(){this._featureLookup=new Map}static getInstance(){return v.instance||(v.instance=new v),v.instance}static resetInstance(){v.instance&&(v.instance=null)}deleteFromStore(e){e.forEach((e=>{this._featureLookup.delete(e)}))}readFromStoreByList(e){const t=[];return e.forEach((e=>{const n=this.readFromStoreById(e);n&&t.push(n)})),t}readFromStoreById(e){return this._featureLookup.get(e)??null}writeToStore(e,t,n){const r=[];return e.forEach((e=>{if(!e?.id)return;e.properties||(e.properties=[]);let i,o=null;if(n&&e.properties[n]&&(o=(0,h.GH)(e.properties[n])),"originId"in e&&"destinationId"in e&&(e.properties.ESRI__ORIGIN_ID=e.originId,e.properties.ESRI__DESTINATION_ID=e.destinationId),e.properties[t]=e.id,e.id&&this._featureLookup.has(e.id)&&this._featureLookup.get(e.id).attributes){const r=this._featureLookup.get(e.id),s=JSON.parse(JSON.stringify(Object.assign(r.attributes,e.properties)));n&&e.properties[n]&&(s[n]=(0,C.im)(e.properties[n])),i=new x.u_(o?JSON.parse(JSON.stringify(o)):r?.geometry?JSON.parse(JSON.stringify(r.geometry)):null,s,null,e.properties[t])}else i=new x.u_(o?JSON.parse(JSON.stringify(o)):null,e.properties,null,e.properties[t]);this._featureLookup.set(e.id,i),r.push(i)})),r}}var I=n(40330),E=n(3172);let T=class extends f.Z{constructor(e){super(e),this.resultRows=[]}};(0,r._)([(0,l.Cb)()],T.prototype,"resultRows",void 0),T=(0,r._)([(0,p.j)("esri.rest.knowledgeGraph.GraphQueryResult")],T);const S=T;let M=class extends f.Z{constructor(e){super(e),this.resultRowsStream=new ReadableStream}};(0,r._)([(0,l.Cb)()],M.prototype,"resultRowsStream",void 0),M=(0,r._)([(0,p.j)("esri.rest.knowledgeGraph.GraphQueryResult")],M);const L=M;var k=n(96674),N=n(82971);let j=class extends k.wq{constructor(e){super(e),this.name=null,this.unique=null,this.ascending=null,this.description=null,this.fieldNames=null}};(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],j.prototype,"name",void 0),(0,r._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],j.prototype,"unique",void 0),(0,r._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],j.prototype,"ascending",void 0),(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],j.prototype,"description",void 0),(0,r._)([(0,l.Cb)({type:[String],json:{write:!0}})],j.prototype,"fieldNames",void 0),j=(0,r._)([(0,p.j)("esri.rest.knowledgeGraph.FieldIndex")],j);const R=j;let D=class extends k.wq{constructor(e){super(e),this.name=null,this.alias=null,this.fieldType=null,this.geometryType=null,this.hasM=null,this.hasZ=null,this.nullable=null,this.editable=null,this.required=null,this.defaultVisibility=null,this.systemMaintained=null,this.role=null,this.defaultValue=null}};(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],D.prototype,"name",void 0),(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],D.prototype,"alias",void 0),(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],D.prototype,"fieldType",void 0),(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],D.prototype,"geometryType",void 0),(0,r._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],D.prototype,"hasM",void 0),(0,r._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],D.prototype,"hasZ",void 0),(0,r._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],D.prototype,"nullable",void 0),(0,r._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],D.prototype,"editable",void 0),(0,r._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],D.prototype,"required",void 0),(0,r._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],D.prototype,"defaultVisibility",void 0),(0,r._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],D.prototype,"systemMaintained",void 0),(0,r._)([(0,l.Cb)()],D.prototype,"role",void 0),(0,r._)([(0,l.Cb)({type:Object,json:{type:String,write:{writer:(e,t)=>{t.defaultValue=null!=e?e.toString():null}}}})],D.prototype,"defaultValue",void 0),D=(0,r._)([(0,p.j)("esri.rest.knowledgeGraph.GraphProperty")],D);const G=D;let F=class extends k.wq{constructor(e){super(e),this.name=null,this.alias=null,this.role=null,this.strict=null,this.properties=null,this.fieldIndexes=null}};(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],F.prototype,"name",void 0),(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],F.prototype,"alias",void 0),(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],F.prototype,"role",void 0),(0,r._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],F.prototype,"strict",void 0),(0,r._)([(0,l.Cb)({type:[G],json:{write:!0}})],F.prototype,"properties",void 0),(0,r._)([(0,l.Cb)({type:[R],json:{write:!0}})],F.prototype,"fieldIndexes",void 0),F=(0,r._)([(0,p.j)("esri.rest.knowledgeGraph.GraphObjectType")],F);const P=F;let O=class extends P{constructor(e){super(e)}};O=(0,r._)([(0,p.j)("esri.rest.knowledgeGraph.EntityType")],O);const Z=O;let A=class extends P{constructor(e){super(e),this.endPoints=[]}};(0,r._)([(0,l.Cb)()],A.prototype,"endPoints",void 0),A=(0,r._)([(0,p.j)("esri.rest.knowledgeGraph.RelationshipType")],A);const B=A;let q=class extends k.wq{constructor(e){super(e),this.timestamp=null,this.spatialReference=null,this.strict=null,this.objectIdField=null,this.globalIdField=null,this.arcgisManaged=null,this.identifierInfo=null,this.searchIndexes=null,this.entityTypes=null,this.relationshipTypes=null}};(0,r._)([(0,l.Cb)({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.timestamp=e?.getTime()}}}})],q.prototype,"timestamp",void 0),(0,r._)([(0,l.Cb)({type:N.Z,json:{write:!0}})],q.prototype,"spatialReference",void 0),(0,r._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],q.prototype,"strict",void 0),(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],q.prototype,"objectIdField",void 0),(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],q.prototype,"globalIdField",void 0),(0,r._)([(0,l.Cb)()],q.prototype,"arcgisManaged",void 0),(0,r._)([(0,l.Cb)()],q.prototype,"identifierInfo",void 0),(0,r._)([(0,l.Cb)()],q.prototype,"searchIndexes",void 0),(0,r._)([(0,l.Cb)({type:[Z],json:{write:!0}})],q.prototype,"entityTypes",void 0),(0,r._)([(0,l.Cb)({type:[B],json:{write:!0}})],q.prototype,"relationshipTypes",void 0),q=(0,r._)([(0,p.j)("esri.rest.knowledgeGraph.DataModel")],q);const z=q;let Y=class extends k.wq{constructor(e){super(e),this.capabilities=[],this.supportsSearch=!1,this.supportedQueryFormats=[],this.allowGeometryUpdates=!1,this.searchMaxRecordCount=null,this.serviceCapabilities=null,this.maxRecordCount=null,this.description="",this.copyrightText="",this.units="",this.spatialReference=null,this.currentVersion=null,this.dateFieldsTimeReference=null,this.serviceItemId="",this.supportsDocuments=!1,this.dataEditingNotSupported=!1,this.schemaEditingNotSupported=!1}};(0,r._)([(0,l.Cb)({type:[String],json:{write:!0}})],Y.prototype,"capabilities",void 0),(0,r._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],Y.prototype,"supportsSearch",void 0),(0,r._)([(0,l.Cb)({type:[String],json:{write:!0}})],Y.prototype,"supportedQueryFormats",void 0),(0,r._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],Y.prototype,"allowGeometryUpdates",void 0),(0,r._)([(0,l.Cb)({type:Number,json:{write:!0}})],Y.prototype,"searchMaxRecordCount",void 0),(0,r._)([(0,l.Cb)({type:Object,json:{write:!0}})],Y.prototype,"serviceCapabilities",void 0),(0,r._)([(0,l.Cb)({type:Number,json:{write:!0}})],Y.prototype,"maxRecordCount",void 0),(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],Y.prototype,"description",void 0),(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],Y.prototype,"copyrightText",void 0),(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],Y.prototype,"units",void 0),(0,r._)([(0,l.Cb)({type:Object,json:{write:!0}})],Y.prototype,"spatialReference",void 0),(0,r._)([(0,l.Cb)({type:Number,json:{write:!0}})],Y.prototype,"currentVersion",void 0),(0,r._)([(0,l.Cb)({type:Object,json:{write:!0}})],Y.prototype,"dateFieldsTimeReference",void 0),(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],Y.prototype,"serviceItemId",void 0),(0,r._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],Y.prototype,"supportsDocuments",void 0),(0,r._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],Y.prototype,"dataEditingNotSupported",void 0),(0,r._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],Y.prototype,"schemaEditingNotSupported",void 0),Y=(0,r._)([(0,p.j)("esri.rest.knowledgeGraph.ServiceDefinition")],Y);const U=Y;let V=class extends k.wq{constructor(e){super(e),this.dataModel=null,this.serviceDefinition=null}};(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],V.prototype,"url",void 0),(0,r._)([(0,l.Cb)({type:z,json:{write:!0}})],V.prototype,"dataModel",void 0),(0,r._)([(0,l.Cb)({type:U,json:{write:!0}})],V.prototype,"serviceDefinition",void 0),V=(0,r._)([(0,p.j)("esri.rest.knowledgeGraph.KnowledgeGraph")],V);const Q=V;var $=n(99880);const J="esri/rest/knowledgeGraph/wasmInterface/";let H,X=null;async function W(){const e=X??H;if(e)return e;const t=(0,u.Z)("wasm-simd");return H=async function(e){if(e){const{default:e}=await n.e(5389).then(n.bind(n,35389)).then((e=>e.a));return e({locateFile:e=>(0,$.V)(J+e)})}const{default:t}=await n.e(9931).then(n.bind(n,39931)).then((e=>e.a));return t({locateFile:e=>(0,$.V)(J+e)})}(t),H}var K=n(65091),ee=n(94139),te=n(58901),ne=n(9361);function re(e,t){const n=new t.ArrayValue;return n.deleteLater(),e.forEach((e=>{n.add_value(se(e,t))})),n}function ie(e,t){const n=new t.ObjectValue;n.deleteLater();for(const[r,i]of Object.entries(e))n.set_key_value(r,se(i,t));return n}function oe(e,t){if(e instanceof K.Z)return function(e,t){const n=new t.GeometryValue;n.deleteLater(),n.geometry_type=n.geometry_type=t.esriGeometryType.esriGeometryMultipoint,n.has_z=e.hasZ,n.has_m=e.hasM;const r=[],i=[];i[0]=e.points.length;let o=0;return e.points.forEach((e=>{e.forEach((e=>{r[o]=e,o++}))})),n.coords=new Float64Array(r),n.lengths=new Uint32Array(i),n}(e,t);if(e instanceof ee.Z)return function(e,t){const n=new t.GeometryValue;n.deleteLater(),n.geometry_type=t.esriGeometryType.esriGeometryPoint,n.has_z=e.hasZ,n.has_m=e.hasM;const r=[],i=[];i[0]=1,r[0]=e.x,r[1]=e.y;let o=2;return e.hasZ&&(r[o]=e.z,o++),e.hasM&&(r[o]=e.m,o++),n.coords=new Float64Array(r),n.lengths=new Uint32Array(i),n}(e,t);if(e instanceof te.Z||e instanceof w.Z)return function(e,t){const n=new t.GeometryValue;n.deleteLater(),n.has_z=e.hasZ,n.has_m=e.hasM;const r=[],i=[];let o=[];e instanceof te.Z?(n.geometry_type=t.esriGeometryType.esriGeometryPolyline,o=e.paths):e instanceof w.Z&&(n.geometry_type=t.esriGeometryType.esriGeometryPolygon,o=e.rings);let s=0,a=0;return o.forEach((e=>{let t=0;e.forEach((e=>{t++,e.forEach((e=>{r[a]=e,a++}))})),i[s]=t,s++})),n.coords=new Float64Array(r),n.lengths=new Uint32Array(i),n}(e,t);throw new o.Z("knowledge-graph:unsupported-geometry","Only Point, Multipoint, Polyline, and Polygon geometry are supported by ArcGIS Knowledge",{geometry:e})}function se(e,t){if(null==e)return"";if("object"!=typeof e)return e;if(e instanceof Date)return e;if(e instanceof ne.Z)return oe(e,t);if(Array.isArray(e)){const n=new t.ArrayValue;return n.deleteLater(),e.forEach((e=>{n.add_value(se(e,t))})),n}return ie(e,t)}let ae=class extends k.wq{constructor(e){super(e),this.properties=null}};(0,r._)([(0,l.Cb)({json:{write:!0}})],ae.prototype,"properties",void 0),ae=(0,r._)([(0,p.j)("esri.rest.knowledgeGraph.GraphObject")],ae);const le=ae;let ue=class extends le{constructor(e){super(e),this.typeName=null,this.id=null}};(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],ue.prototype,"typeName",void 0),(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],ue.prototype,"id",void 0),ue=(0,r._)([(0,p.j)("esri.rest.knowledgeGraph.GraphNamedObject")],ue);const pe=ue;let de=class extends pe{constructor(e){super(e),this.layoutGeometry=null}};(0,r._)([(0,l.Cb)({type:ee.Z,json:{write:!0}})],de.prototype,"layoutGeometry",void 0),de=(0,r._)([(0,p.j)("esri.rest.knowledgeGraph.Entity")],de);const ce=de;let he=class extends pe{constructor(e){super(e),this.originId=null,this.destinationId=null,this.layoutGeometry=null}};(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],he.prototype,"originId",void 0),(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],he.prototype,"destinationId",void 0),(0,r._)([(0,l.Cb)({type:te.Z,json:{write:!0}})],he.prototype,"layoutGeometry",void 0),he=(0,r._)([(0,p.j)("esri.rest.Relationship.Relationship")],he);const ye=he;function fe(e,t){if(!e.typeName)throw new o.Z("knowledge-graph:no-type-name","You must indicate the entity/relationship named object type to apply edits");if(e instanceof ce){const n=new t.EntityValue;n.deleteLater(),n.type_name=e.typeName;for(const[r,i]of Object.entries(e.properties))n.set_key_value(r,me(i,t));return e.id&&n.set_id(e.id),n}if(e instanceof ye){const n=new t.RelationshipValue;n.deleteLater(),n.type_name=e.typeName;for(const[r,i]of Object.entries(e.properties))n.set_key_value(r,me(i,t));return e.id&&n.set_id(e.id),e.originId&&e.destinationId&&n.set_related_entity_ids(e.originId,e.destinationId),n}throw new o.Z("knowledge-graph:applyEdits-encoding-failure","Could not determine the type of a named graph object passed to the encoder")}function me(e,t){return null==e?"":"object"!=typeof e||e instanceof Date?e:e instanceof ne.Z?oe(e,t):""}let ge=class extends f.Z{constructor(e){super(e),this.name=null,this.supportedCategory=null,this.analyzers=[],this.searchProperties=new Map}};(0,r._)([(0,l.Cb)()],ge.prototype,"name",void 0),(0,r._)([(0,l.Cb)()],ge.prototype,"supportedCategory",void 0),(0,r._)([(0,l.Cb)()],ge.prototype,"analyzers",void 0),(0,r._)([(0,l.Cb)()],ge.prototype,"searchProperties",void 0),ge=(0,r._)([(0,p.j)("esri.rest.knowledgeGraph.SearchIndex")],ge);const we=ge;var be,_e,xe,Ce,ve,Ie,Ee;function Te(e){return e.deleteLater(),new Z(Me(e))}function Se(e){return e.deleteLater(),new R({name:e.name,unique:e.unique,ascending:e.ascending,description:e.description,fieldNames:je(e.fields)})}function Me(e){return{name:e.name,alias:e.alias,role:be[e.role.value]?be[e.role.value]:null,strict:e.strict,properties:Re(e.properties),fieldIndexes:De(e.field_indexes)}}function Le(e){return e.deleteLater(),new G({alias:e.alias,name:e.name,fieldType:_e[e.field_type.value]?_e[e.field_type.value]:null,geometryType:xe[e.geometry_type.value]?xe[e.geometry_type.value]:null,hasM:e.has_m,hasZ:e.has_z,nullable:e.nullable,editable:e.editable,required:e.required,defaultVisibility:e.default_visibility,systemMaintained:e.system_maintained,role:Ie[e.role.value],defaultValue:e.default_value})}function ke(e){e.deleteLater();const t=Me(e),n=[];for(let t=0;t<e.end_points.size();t++){const r=e.end_points.get(t);n.push({originEntityType:r.origin_entity_type,destinationEntityType:r.dest_entity_type})}return new B(Object.assign({endPoints:n},t))}function Ne(e){const t=[];for(let n=0;n<e.size();n++)t.push(Te(e.get(n)));return t}function je(e){const t=[];for(let n=0;n<e.size();n++)t.push(e.get(n));return t}function Re(e){const t=[];for(let n=0;n<e.size();n++)t.push(Le(e.get(n)));return t}function De(e){const t=[];for(let n=0;n<e.size();n++)t.push(Se(e.get(n)));return t}function Ge(e){const t=[];for(let n=0;n<e.size();n++)t.push(ke(e.get(n)));return t}function Fe(e){const t=[];for(let n=0;n<e.size();n++){const n=new we,r=e.get(0);n.name=r.name,n.supportedCategory=ve[r.supported_category.value];const i=r.analyzers.size();for(let e=0;e<i;e++)n.analyzers.push({name:r.analyzers.get(e).name});for(let e=0;e<r.search_properties.keys().size();e++){const t=r.search_properties.keys().get(e),i=r.search_properties.get(t),o=[];for(let e=0;e<i.property_names.size();e++)o.push(i.property_names.get(e));n.searchProperties.set(t,{propertyNames:o})}t.push(n)}return t}!function(e){e[e.Regular=0]="Regular",e[e.Provenance=1]="Provenance",e[e.Document=2]="Document"}(be||(be={})),function(e){e[e.esriFieldTypeSmallInteger=0]="esriFieldTypeSmallInteger",e[e.esriFieldTypeInteger=1]="esriFieldTypeInteger",e[e.esriFieldTypeSingle=2]="esriFieldTypeSingle",e[e.esriFieldTypeDouble=3]="esriFieldTypeDouble",e[e.esriFieldTypeString=4]="esriFieldTypeString",e[e.esriFieldTypeDate=5]="esriFieldTypeDate",e[e.esriFieldTypeOID=6]="esriFieldTypeOID",e[e.esriFieldTypeGeometry=7]="esriFieldTypeGeometry",e[e.esriFieldTypeBlob=8]="esriFieldTypeBlob",e[e.esriFieldTypeRaster=9]="esriFieldTypeRaster",e[e.esriFieldTypeGUID=10]="esriFieldTypeGUID",e[e.esriFieldTypeGlobalID=11]="esriFieldTypeGlobalID",e[e.esriFieldTypeXML=12]="esriFieldTypeXML",e[e.esriFieldTypeBigInteger=13]="esriFieldTypeBigInteger",e[e.esriFieldTypeDateOnly=14]="esriFieldTypeDateOnly",e[e.esriFieldTypeTimeOnly=15]="esriFieldTypeTimeOnly",e[e.esriFieldTypeTimestampOffset=16]="esriFieldTypeTimestampOffset"}(_e||(_e={})),function(e){e[e.esriGeometryNull=0]="esriGeometryNull",e[e.esriGeometryPoint=1]="esriGeometryPoint",e[e.esriGeometryMultipoint=2]="esriGeometryMultipoint",e[e.esriGeometryPolyline=3]="esriGeometryPolyline",e[e.esriGeometryPolygon=4]="esriGeometryPolygon",e[e.esriGeometryEnvelope=5]="esriGeometryEnvelope",e[e.esriGeometryAny=6]="esriGeometryAny",e[e.esriGeometryMultiPatch=7]="esriGeometryMultiPatch"}(xe||(xe={})),function(e){e[e.esriMethodHintUNSPECIFIED=0]="esriMethodHintUNSPECIFIED",e[e.esriUUIDESRI=1]="esriUUIDESRI",e[e.esriUUIDRFC4122=2]="esriUUIDRFC4122"}(Ce||(Ce={})),function(e){e[e.esriTypeUNSPECIFIED=0]="esriTypeUNSPECIFIED",e[e.esriTypeEntity=1]="esriTypeEntity",e[e.esriTypeRelationship=2]="esriTypeRelationship",e[e.esriTypeBoth=4]="esriTypeBoth"}(ve||(ve={})),function(e){e[e.esriGraphPropertyUNSPECIFIED=0]="esriGraphPropertyUNSPECIFIED",e[e.esriGraphPropertyRegular=1]="esriGraphPropertyRegular",e[e.esriGraphPropertyDocumentName=2]="esriGraphPropertyDocumentName",e[e.esriGraphPropertyDocumentTitle=3]="esriGraphPropertyDocumentTitle",e[e.esriGraphPropertyDocumentUrl=4]="esriGraphPropertyDocumentUrl",e[e.esriGraphPropertyDocumentText=5]="esriGraphPropertyDocumentText",e[e.esriGraphPropertyDocumentKeywords=6]="esriGraphPropertyDocumentKeywords",e[e.esriGraphPropertyDocumentContentType=7]="esriGraphPropertyDocumentContentType",e[e.esriGraphPropertyDocumentMetadata=8]="esriGraphPropertyDocumentMetadata",e[e.esriGraphPropertyDocumentFileExtension=9]="esriGraphPropertyDocumentFileExtension"}(Ie||(Ie={})),function(e){e[e.esriIdentifierInfoTypeUNSPECIFIED=0]="esriIdentifierInfoTypeUNSPECIFIED",e[e.esriIdentifierInfoTypeDatabaseNative=1]="esriIdentifierInfoTypeDatabaseNative",e[e.esriIdentifierInfoTypeUniformProperty=2]="esriIdentifierInfoTypeUniformProperty"}(Ee||(Ee={}));let Pe=class extends le{constructor(e){super(e)}};Pe=(0,r._)([(0,p.j)("esri.rest.knowledgeGraph.ObjectValue")],Pe);const Oe=Pe;let Ze=class extends k.wq{constructor(e){super(e),this.path=null}};(0,r._)([(0,l.Cb)({type:[le],json:{write:!0}})],Ze.prototype,"path",void 0),Ze=(0,r._)([(0,p.j)("esri.rest.knowledgeGraph.Path")],Ze);const Ae=Ze;var Be,qe,ze;function Ye(e){const t={},n=Ue(e,t),r=e.lengths,i=e.coords;let s="";if(e.geometry_type.value===Be.ESRI_GEOMETRY_POLYGON)s="rings";else{if(e.geometry_type.value!==Be.ESRI_GEOMETRY_POLYLINE)throw new o.Z("KnowledgeGraph:illegal-geometry-type","Illegal Geometry type for multipath conversion");s="paths"}t[s]=[];let a=0;return r.forEach((e=>{const r=[];for(let t=0;t<e;t++){const e=[];for(let t=0;t<n;t++)e[t]=i[a],a++;r.push(e)}t[s].push(r)})),t}function Ue(e,t){let n=2;return e.has_z?(t.hasZ=e.has_z,n++):t.hasZ=!1,e.has_m?(t.hasM=e.has_m,n++):t.hasM=!1,n}!function(e){e[e.ESRI_GEOMETRY_NULL=0]="ESRI_GEOMETRY_NULL",e[e.ESRI_GEOMETRY_POINT=1]="ESRI_GEOMETRY_POINT",e[e.ESRI_GEOMETRY_MULTIPOINT=2]="ESRI_GEOMETRY_MULTIPOINT",e[e.ESRI_GEOMETRY_POLYLINE=3]="ESRI_GEOMETRY_POLYLINE",e[e.ESRI_GEOMETRY_POLYGON=4]="ESRI_GEOMETRY_POLYGON",e[e.ESRI_GEOMETRY_ENVELOPE=5]="ESRI_GEOMETRY_ENVELOPE",e[e.ESRI_GEOMETRY_ANY=6]="ESRI_GEOMETRY_ANY",e[e.ESRI_GEOMETRY_MULTI_PATCH=7]="ESRI_GEOMETRY_MULTI_PATCH"}(Be||(Be={})),function(e){e[e.OBJECT=0]="OBJECT",e[e.ENTITY=1]="ENTITY",e[e.RELATIONSHIP=2]="RELATIONSHIP",e[e.PATH=3]="PATH",e[e.ARRAY=4]="ARRAY"}(qe||(qe={})),function(e){e[e.view=0]="view",e[e.edit=1]="edit"}(ze||(ze={}));const Ve=s.Z.getLogger("esri.rest.knowledgeGraph.WasmToQueryResponseObjConstructors"),Qe={decodedWasmObjToQueryResponseObj:(e,t)=>{if(null==e)return null;if("object"!=typeof e)return e;if("getDate"in e)return e;if("geometry_type"in e)switch(e.geometry_type.value){case null:return null;case Be.ESRI_GEOMETRY_POINT:return function(e){const t={};let n=2;Ue(e,t);const r=e.coords;return t.x=r[0],t.y=r[1],e.has_z&&(t.z=r[n],n++),e.has_m&&(t.m=r[n]),new ee.Z(t)}(e);case Be.ESRI_GEOMETRY_MULTIPOINT:return function(e){const t={},n=Ue(e,t),r=e.lengths,i=e.coords,o=r[0];t.points=[];let s=0;for(let e=0;e<o;e++){const e=[];for(let t=0;t<n;t++)e[t]=i[s],s++;t.points.push(e)}return new K.Z(t)}(e);case Be.ESRI_GEOMETRY_POLYLINE:return n=e,new te.Z(Ye(n));case Be.ESRI_GEOMETRY_POLYGON:return function(e){return new w.Z(Ye(e))}(e);case Be.ESRI_GEOMETRY_ENVELOPE:case Be.ESRI_GEOMETRY_MULTI_PATCH:return Ve.warnOnce("Envelope and Multipatch are not supported on knowledge entities, but one of those geometry types was detected. Result interpreted as null"),null;case Be.ESRI_GEOMETRY_NULL:case Be.ESRI_GEOMETRY_ANY:default:return Ve.warnOnce("Unknown or blank geometry type returned - Result interpreted as null"),null}else{if(!("object_value_type"in e))return Ve.warnOnce("A decoded value came back of a type that is not supported. Result interpreted as null"),null;switch(e.object_value_type.value){case qe.OBJECT:return function(e,t){return new Oe(He(e,t))}(e,t);case qe.ENTITY:return Je(e,t);case qe.RELATIONSHIP:return Xe(e,t);case qe.PATH:return function(e,t){const n=e.entity_count(),r=e.relationship_count(),i=[];for(let o=0;o<n;o++)i.push(Je(e.get_entity_at(o),t)),o<r&&i.push(Xe(e.get_relationship_at(o),t));return new Ae({path:i})}(e,t);case qe.ARRAY:return function(e,t){const n=[],r=e.count();for(let i=0;i<r;i++){const r=e.get_value_at(i);n.push($e(r,t))}return n}(e,t);default:return Ve.warnOnce("Unknown graph object type detected!  Result interpreted as null"),null}}var n}};function $e(e,t){return Qe.decodedWasmObjToQueryResponseObj(e,t)}function Je(e,t){const n=e.type_name,r=He(e,t),i=e.get_id();return new ce(Object.assign({typeName:n,id:i},r))}function He(e,t){const n={},r=e.key_count();for(let i=0;i<r;i++)n[e.get_key_at(i)]=$e(e.get_value_at(i),t);return{properties:n}}function Xe(e,t){const n=e.type_name,r=He(e,t);return new ye(Object.assign({typeName:n,id:e.get_id(),originId:e.get_origin_entity_id(),destinationId:e.get_destination_entity_id()},r))}let We=class extends f.Z{constructor(e){super(e),this.hasError=null,this.error=null,this.editResults=[]}};(0,r._)([(0,l.Cb)()],We.prototype,"hasError",void 0),(0,r._)([(0,l.Cb)()],We.prototype,"error",void 0),(0,r._)([(0,l.Cb)()],We.prototype,"editResults",void 0),We=(0,r._)([(0,p.j)("esri.rest.knowledgeGraph.GraphApplyEdits")],We);const Ke=We,et={fetchKnowledgeGraph:async e=>{const t=new Q({url:e}),n=[];return n.push(nt(t)),n.push(async function(e){return et.refreshServiceDefinition(e)}(t)),await Promise.all(n),t},refreshDataModel:async e=>{e.dataModel=await pt(e)},refreshServiceDefinition:async e=>{const t=(await(0,E.Z)(e.url,{query:{f:"json"}})).data;return t.capabilities=t?.capabilities?.split(","),t.supportedQueryFormats=t?.supportedQueryFormats?.split(","),e.serviceDefinition=new U(t),e.serviceDefinition},executeQueryStreaming:async(e,t,n)=>{const r=`${e.url}/graph/query`;await it(e);const i=await at(r,n);i.data.body=await async function(e,t){const n=await W(),r=new n.GraphQueryRequestEncoder;if(r.deleteLater(),r.output_spatial_reference=n.SpatialReferenceUtil.WGS84(),r.open_cypher_query=e.openCypherQuery,e.bindParameters)for(const[t,i]of Object.entries(e.bindParameters))st(t,i,r,n);if(e.bindGeometryQuantizationParameters)!function(e,t){t.input_quantization_parameters={xy_resolution:e.xyResolution,x_false_origin:e.xFalseOrigin,y_false_origin:e.yFalseOrigin,z_resolution:e.zResolution,z_false_origin:e.zFalseOrigin,m_resolution:e.mResolution,m_false_origin:e.mFalseOrigin}}(e.bindGeometryQuantizationParameters,r);else{if(t.dataModel||await nt(t),4326!==t.dataModel?.spatialReference?.wkid)throw new o.Z("knowledge-graph:SR-quantization-mismatch","If the DataModel indicates a coordinate system other than WGS84, inputQuantizationParameters must be provided to the query encoder");r.input_quantization_parameters=n.InputQuantizationUtil.WGS84_lossless()}e.outputQuantizationParameters&&function(e,t,n){if(!e.extent)throw new o.Z("knowledge-graph:illegal-output-quantization","The Output quantization provided to the encoder had an illegal value as part of its extent",e.extent);if(!e.quantizeMode)throw new o.Z("knowledge-graph:illegal-output-quantization","The Output quantization contained an illegal mode setting",e.quantizeMode);if(!e.tolerance)throw new o.Z("knowledge-graph:illegal-output-quantization","The Output quantization contained an illegal tolerance setting",e.quantizeMode);t.output_quantization_parameters={extent:{xmax:e.extent.xmax,ymax:e.extent.ymax,xmin:e.extent.xmin,ymin:e.extent.ymin},quantize_mode:n.esriQuantizeMode[e.quantizeMode],tolerance:e.tolerance}}(e.outputQuantizationParameters,r,n);try{r.encode()}catch(e){throw new o.Z("knowledge-graph:query-encoding-failed","Attempting to encode the query failed",{error:e})}const i=r.get_encoding_result();if(0!==i.error.error_code)throw new o.Z("knowledge-graph:query-encoding-failed","Attempting to encode the query failed",{errorCode:i.error.error_code,errorMessage:i.error.error_message});return i.get_byte_buffer()}(t,e);const s=await rt(i.data.url,i.data);if(e.dataModel)return new L({resultRowsStream:await ut(s,e.dataModel)});throw new o.Z("knowledge-graph:undefined-data-model","The KnowledgeGraph supplied did not have a data model")},executeApplyEdits:async(e,t,n)=>{if(e.serviceDefinition?.dataEditingNotSupported)throw new o.Z("knowledge-graph:data-editing-not-supported","The Knowledge Graph Service definition indicated that data editing is not supported");const r=`${e.url}/graph/applyEdits`;await it(e);const i=await at(r,n);return i.data.body=await async function(e,t){if(t.dataModel||await nt(t),!t.dataModel)throw new o.Z("knowledge-graph:data-model-undefined","Encoding could not proceed because a data model was not provided and it could not be determined from the service");const n=await W(),r=!!e.options?.cascadeDelete,i=new n.GraphApplyEditsEncoder(n.SpatialReferenceUtil.WGS84(),e.options?.inputQuantizationParameters?function(e){return{xy_resolution:e.xyResolution,x_false_origin:e.xFalseOrigin,y_false_origin:e.yFalseOrigin,z_resolution:e.zResolution,z_false_origin:e.zFalseOrigin,m_resolution:e.mResolution,m_false_origin:e.mFalseOrigin}}(e.options?.inputQuantizationParameters):n.InputQuantizationUtil.WGS84_lossless());i.deleteLater(),i.cascade_delete=r;try{let t;e.entityAdds?.forEach((e=>{t=i.add_entity(fe(e,n)),ot(t,"knowledge-graph:applyEdits-encoding-failed","Attempting to encode the applyEdits - an entity failed to be added to the encoder")})),e.relationshipAdds?.forEach((e=>{if(!e.originId||!e.destinationId)throw new o.Z("knowledge-graph:relationship-origin-destination-missing","When adding a new relationship, you must provide both an origin and destination id on the appropriate class property");t=i.add_relationship(fe(e,n)),ot(t,"knowledge-graph:applyEdits-encoding-failed","Attempting to encode the applyEdits - a relationship failed to be added to the encoder")})),e.entityUpdates?.forEach((e=>{if(!e.id)throw new o.Z("knowledge-graph:entity-id-missing","When updating an entity or relationship, you must specify the id on the class level property");t=i.update_entity(fe(e,n)),ot(t,"knowledge-graph:applyEdits-encoding-failed","Attempting to encode the applyEdits - an entity failed to be added to the encoder")})),e.relationshipUpdates?.forEach((e=>{if(!e.id)throw new o.Z("knowledge-graph:relationship-id-missing","When updating an entity or relationship, you must specify the id on the class level property");t=i.update_relationship(fe(e,n)),ot(t,"knowledge-graph:applyEdits-encoding-failed","Attempting to encode the applyEdits - a relationship failed to be added to the encoder")})),e.entityDeletes?.forEach((e=>{if(!e.typeName)throw new o.Z("knowledge-graph:no-type-name","You must indicate the entity/relationship named object type to apply edits - delete");const t=i.make_delete_helper(e.typeName,!0);t.deleteLater(),e.ids?.forEach((e=>{t.delete_by_id(e)}))})),e.relationshipDeletes?.forEach((e=>{if(!e.typeName)throw new o.Z("knowledge-graph:no-type-name","You must indicate the entity/relationship named object type to apply edits - delete");const t=i.make_delete_helper(e.typeName,!1);e.ids?.forEach((e=>{t.delete_by_id(e)}))})),i.encode()}catch(e){throw new o.Z("knowledge-graph:applyEdits-encoding-failed","Attempting to encode the applyEdits failed",{error:e})}const s=i.get_encoding_result();return ot(s.error,"knowledge-graph:applyEdits-encoding-failed","Attempting to encode the applyEdits failed"),s.get_byte_buffer()}(t,e),async function(e){const t=e.headers.get("content-type");if(t?.includes("application/x-protobuf")){const t=await e.arrayBuffer(),n=new((await W()).GraphApplyEditsDecoder);return n.deleteLater(),n.decode(new Uint8Array(t)),function(e){const t=new Ke;t.hasError=e.has_error(),t.hasError&&(t.error={errorCode:e.error.error_code,errorMessage:e.error.error_message});const n=e.get_edit_results_count();for(let r=0;r<n;r++){const n=e.get_edit_results_at(r),i=e.get_edit_results_type_name_at(r),o=[],s=[],a=[],l=n.get_add_results_count(),u=n.get_update_results_count(),p=n.get_delete_results_count();for(let e=0;e<l;e++){const t=n.get_add_result_at(e);o.push({id:t.id,error:{errorCode:t.error.error_code,errorMessage:t.error.error_message}})}for(let e=0;e<u;e++){const t=n.get_update_result_at(e);s.push({id:t.id,error:{errorCode:t.error.error_code,errorMessage:t.error.error_message}})}for(let e=0;e<p;e++){const t=n.get_delete_result_at(e);a.push({id:t.id,error:{errorCode:t.error.error_code,errorMessage:t.error.error_message}})}t.editResults.push({typeName:i,adds:o,updates:s,deletes:a})}return t}(n)}throw new o.Z("knowledge-graph:unexpected-server-response","server returned an unexpected response",{responseType:t,data:e.text()})}(await rt(i.data.url,i.data))},executeQuery:async(e,t,n)=>{const r=`${e.url}/graph/query`,i=await(0,E.Z)(r,{responseType:"array-buffer",query:{f:"pbf",openCypherQuery:t.openCypherQuery,...n?.query},signal:n?.signal,timeout:n?.timeout}),s=i.getHeader?.("content-type"),a=i.data;if(s?.includes("application/x-protobuf")){const t=new((await W()).GraphQueryDecoder);if(t.deleteLater(),e.dataModel)return new S({resultRows:lt(t,a,e.dataModel)});throw new o.Z("knowledge-graph:undefined-data-model","The KnowledgeGraph supplied did not have a data model")}throw new o.Z("knowledge-graph:unexpected-server-response","server returned an unexpected response",{responseType:s,data:i.data})},executeSearch:async(e,t,n)=>{const r=t.typeCategoryFilter,i=`${e.url}/graph/search`,s=await(0,E.Z)(i,{responseType:"array-buffer",query:{f:"pbf",searchQuery:`"${t.searchQuery}"`,typeCategoryFilter:r,...n?.query},signal:n?.signal,timeout:n?.timeout}),a=s.getHeader?.("content-type"),l=s.data;if(a?.includes("application/x-protobuf")){const t=new((await W()).GraphQueryDecoder);if(t.deleteLater(),e.dataModel)return new S({resultRows:lt(t,l,e.dataModel)});throw new o.Z("knowledge-graph:undefined-data-model","The KnowledgeGraph supplied did not have a data model")}throw new o.Z("knowledge-graph:unexpected-server-response","server returned an unexpected response",{responseType:a,data:s.data})},executeSearchStreaming:async(e,t,n)=>{const r=`${e.url}/graph/search`;await it(e);const i=await at(r,n);i.data.body=await async function(e){const t=await W(),n=new t.GraphSearchRequestEncoder;if(n.deleteLater(),n.search_query=e.searchQuery,n.type_category_filter=t.esriNamedTypeCategory[e.typeCategoryFilter],!0===e.returnSearchContext&&(n.return_search_context=e.returnSearchContext),null!=e.start&&e.start>0&&(n.start_index=e.start),null!=e.num&&(n.max_num_results=e.num),null!=e.idsFilter&&Array.isArray(e.idsFilter)&&e.idsFilter.length>0)try{n.set_ids_filter(re(e.idsFilter,t))}catch(e){throw new o.Z("knowledge-graph:ids-format-error","Attempting to set ids filter failed.  This is usually caused by an incorrectly formatted UUID string",{error:e})}e.namedTypesFilter?.forEach((e=>{n.add_named_type_filter(e)}));try{n.encode()}catch(e){throw new o.Z("knowledge-graph:search-encoding-failed","Attempting to encode the search failed",{error:e})}const r=n.get_encoding_result();if(0!==r.error.error_code)throw new o.Z("knowledge-graph:search-encoding-failed","Attempting to get encoding result from the query failed",{errorCode:r.error.error_code,errorMessage:r.error.error_message});return r.get_byte_buffer()}(t);const s=await rt(i.data.url,i.data);if(e.dataModel)return new L({resultRowsStream:await ut(s,e.dataModel)});throw new o.Z("knowledge-graph:undefined-data-model","The KnowledgeGraph supplied did not have a data model")},_fetchWrapper:async(e,t)=>fetch(e,t)};async function tt(e,t,n){return et.executeQueryStreaming(e,t,n)}async function nt(e){return et.refreshDataModel(e)}async function rt(e,t){return et._fetchWrapper(e,t)}async function it(e){const t=I.id?.findCredential(e.url);t||(e.dataModel?await pt(e):await nt(e))}function ot(e,t,n){if(0!==e.error_code)throw new o.Z(t,n,{errorCode:e.error_code,errorMessage:e.error_message})}function st(e,t,n,r){null==t?n.set_param_key_value(e,""):"object"!=typeof t||t instanceof Date?n.set_param_key_value(e,t):t instanceof ne.Z?n.set_param_key_value(e,oe(t,r)):t instanceof Array?n.set_param_key_value(e,re(t,r)):n.set_param_key_value(e,ie(t,r))}async function at(e,t){return(0,E.Z)(e,{responseType:"native-request-init",method:"post",query:{f:"pbf",...t?.query},body:"x",headers:{"Content-Type":"application/octet-stream"},signal:t?.signal,timeout:t?.timeout})}function lt(e,t,n){e.push_buffer(new Uint8Array(t));const r=[];let i=0;for(;e.next_row();){i||(i=e.get_header_keys().size());const t=new Array(i);for(let r=0;r<i;r++){const i=e.get_value(r);t[r]=$e(i,n)}r.push(t)}if(e.has_error())throw new o.Z("knowledge-graph:stream-decoding-error","One or more result rows were not successfully decoded",{errorCode:e.error.error_code,errorMessage:e.error.error_message});return r}async function ut(e,t){const n=e.headers.get("content-type");if(e.headers.get("content-length")&&s.Z.getLogger("esri.rest.knowledgeGraph.knowledgeGraphService").warnOnce("Found `Content-Length` header when expecting a streaming HTTP response! Please investigate whether all intermediate HTTP proxies and/or load balancers are configured such that they don't forcefully buffer the entire response before returning it to the client. A valid HTTP streaming response should use Chunked Transfer Encoding and not have a Content Length defined."),n?.includes("application/x-protobuf")){const n=e.body?.getReader(),r=new((await W()).GraphQueryDecoder);return r.deleteLater(),new ReadableStream({async start(e){try{return function i(){return n?.read().then((({done:s,value:a})=>{if(s){let t;if(r.has_error()&&(t=new o.Z("knowledge-graph:stream-decoding-error","One or more result rows were not successfully decoded",{errorCode:r.error.error_code,errorMessage:r.error.error_message})),n.releaseLock(),t)throw e.error(t),t;return void e.close()}const l=lt(r,a,t);return l.length>0&&e.enqueue(l),i()}))}()}catch(t){n?.releaseLock(),e.error(new o.Z("knowledge-graph:stream-decoding-error","The server returned a valid response, but there was an error decoding the response stream",{error:t})),e.close()}}})}throw new o.Z("knowledge-graph:unexpected-server-response","server returned an unexpected response",{responseType:n,data:e.text()})}async function pt(e){const t=`${e.url}/dataModel/queryDataModel`,n=await(0,E.Z)(t,{responseType:"array-buffer",query:{f:"pbf"}}),r=n.getHeader?.("content-type"),i=n.data;if(r?.includes("application/x-protobuf")){const e=(await W()).decode_data_model_from_protocol_buffer(new Uint8Array(i));if(!e)throw new o.Z("knowledge-graph:data-model-decode-failure","The server responded to the data model query, but the response failed to be decoded.  This typically occurs when the Knowledge JS API (4.26 or later) is used with an unsupported backend (11.0 or earlier)");return function(e){return e.deleteLater(),new z({timestamp:e.timestamp,spatialReference:new N.Z(e.spatial_reference),strict:e.strict,objectIdField:e.objectid_property,globalIdField:e.globalid_property,arcgisManaged:e.arcgis_managed,identifierInfo:{identifierMappingInfo:{identifierInfoType:Ee[e.identifier_info?.identifier_mapping_info?.identifier_info_type?.value],databaseNativeIdentifier:e.identifier_info?.identifier_mapping_info?.database_native_identifier,uniformPropertyIdentifier:{identifierPropertyName:e.identifier_info?.identifier_mapping_info?.uniform_property_identifier?.identifier_property_name}},identifierGenerationInfo:{uuidMethodHint:Ce[e.identifier_info?.identifier_generation_info?.uuid_method_hint?.value]}},searchIndexes:Fe(e.search_indexes),entityTypes:Ne(e.entity_types),relationshipTypes:Ge(e.relationship_types)})}(e)}throw new o.Z("knowledge-graph:unexpected-server-response","server returned an unexpected response",{responseType:r,data:n.data})}let dt=class extends f.Z{constructor(e){super(e),this.openCypherQuery=""}};(0,r._)([(0,l.Cb)()],dt.prototype,"openCypherQuery",void 0),dt=(0,r._)([(0,p.j)("esri.rest.knowledgeGraph.GraphQuery")],dt);const ct=dt;let ht=class extends ct{constructor(e){super(e),this.bindParameters=null,this.bindGeometryQuantizationParameters=null,this.outputQuantizationParameters=null}};(0,r._)([(0,l.Cb)()],ht.prototype,"bindParameters",void 0),(0,r._)([(0,l.Cb)()],ht.prototype,"bindGeometryQuantizationParameters",void 0),(0,r._)([(0,l.Cb)()],ht.prototype,"outputQuantizationParameters",void 0),ht=(0,r._)([(0,p.j)("esri.rest.knowledgeGraph.GraphQueryStreaming")],ht);const yt=ht;function ft(e){if(!e.spatialReference.isWGS84)throw new o.Z("knowledge-graph:layer-support-utils","The extentToInBoundsRings function only supports WGS84 spatial references.");let t;return t=e.xmax>180&&e.xmin<180?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[180,e.ymax],[180,e.ymin],[e.xmin,e.ymin]],[[-180,e.ymin],[-180,e.ymax],[e.xmax-360,e.ymax],[e.xmax-360,e.ymin],[-180,e.ymin]]]:e.xmax>180&&e.xmin>180?[[[e.xmin-360,e.ymin],[e.xmin-360,e.ymax],[e.xmax-360,e.ymax],[e.xmax-360,e.ymin],[e.xmin-360,e.ymin]]]:e.xmax>-180&&e.xmin<-180?[[[e.xmin+360,e.ymin],[e.xmin+360,e.ymax],[180,e.ymax],[180,e.ymin],[e.xmin+360,e.ymin]],[[-180,e.ymin],[-180,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[-180,e.ymin]]]:e.xmax<-180&&e.xmin<-180?[[[e.xmin+360,e.ymin],[e.xmin+360,e.ymax],[e.xmax+360,e.ymax],[e.xmax+360,e.ymin],[e.xmin+360,e.ymin]]]:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]],t}var mt=n(14165),gt=n(6570);const wt="ESRI__ID",bt="ESRI__ORIGIN_ID",_t="ESRI__DESTINATION_ID",xt="ESRI__LAYOUT_GEOMETRY",Ct=12,vt=s.Z.getLogger("esri.rest.knowledgeGraph.knowledgeGraphLayer.KnowledgeGraphLayerDataManager");let It=class extends f.Z{constructor(e){super(e),this.inclusionModeDefinition={generateAllSublayers:!0,namedTypeDefinitions:new Map},this.entityTypeNames=new Set,this.relationshipTypeNames=new Set,this.geographicLookup=new Map,this.sublayerCaches=new Map,this.nodeConnectionsLookup=new Map,this.memberIdTypeLookup=new Map,this._processingCacheUpdatesLookup=new Map;const t=new Map;e.knowledgeGraph.dataModel.entityTypes?.forEach((n=>{n.name&&(t.set(n.name,"entity"),this._processingCacheUpdatesLookup.set(n.name,[]),e.inclusionModeDefinition&&!e.inclusionModeDefinition?.generateAllSublayers||this.entityTypeNames.add(n.name),n.properties?.forEach((e=>{e.geometryType&&"esriGeometryNull"!==e.geometryType&&this.geographicLookup.set(n.name,{name:e.name??"",geometryType:e.geometryType})})))})),e.knowledgeGraph.dataModel.relationshipTypes?.forEach((n=>{n.name&&(t.set(n.name,"relationship"),this._processingCacheUpdatesLookup.set(n.name,[]),e.inclusionModeDefinition&&!e.inclusionModeDefinition?.generateAllSublayers||this.relationshipTypeNames.add(n.name),n.properties?.forEach((e=>{e.geometryType&&"esriGeometryNull"!==e.geometryType&&this.geographicLookup.set(n.name,{name:e.name??"",geometryType:e.geometryType})})))})),e.inclusionModeDefinition?.namedTypeDefinitions.forEach(((n,r)=>{if("entity"===t.get(r))this.entityTypeNames.add(r);else{if("relationship"!==t.get(r))return vt.warn(`A named type, ${r}, was in the inclusion list that wasn't in the data model and will be removed`),void e.inclusionModeDefinition?.namedTypeDefinitions.delete(r);this.relationshipTypeNames.add(r)}const i=new Map;n.members?.forEach((e=>{this.memberIdTypeLookup.set(e.id,r);const t=this.getById(e.id);t&&i.set(e.id,t)})),this.sublayerCaches.set(r,i)}))}addToLayer(e){e.forEach((({typeName:e,id:t})=>{if(!this.inclusionModeDefinition)throw new o.Z("knowledge-graph:layer-data-manager","You cannot add to a layer's exclusion list if it was not created with an exclusion list originally");if(this.inclusionModeDefinition.namedTypeDefinitions.has(e)){if(this.inclusionModeDefinition.namedTypeDefinitions.has(e)){const n=this.inclusionModeDefinition.namedTypeDefinitions.get(e);n.members||(n.members=new Map),n.members.set(t,{id:t}),this.memberIdTypeLookup.set(t,e)}}else{const n=new Map;n.set(t,{id:t}),this.inclusionModeDefinition.namedTypeDefinitions.set(e,{useAllData:!1,members:n}),this.memberIdTypeLookup.set(t,e)}}))}getById(e){return v.getInstance().readFromStoreById(e)}async getData(e,t,n){if(t.objectType.name&&this.inclusionModeDefinition?.namedTypeDefinitions&&this.inclusionModeDefinition.namedTypeDefinitions.size>0&&!this.inclusionModeDefinition.namedTypeDefinitions.has(t.objectType.name))return[];let r;if(r=e||new mt.Z({where:"1=1",outFields:["*"]}),"link-chart"===t.parentCompositeLayer.type){const e=t.parentCompositeLayer,n=this._processingCacheUpdatesLookup.get(t.objectType.name??""),i=r.outFields,o=r.geometry;let s="",a="";o&&o.extent&&(s=(0,d.fC)(o.extent.ymin,o.extent.xmin,Ct),a=(0,d.fC)(o.extent.ymax,o.extent.xmax,Ct)),i&&1===i.length&&i[0]===wt&&"1=1"===r.where||await Promise.all(n??[]);const l=this.sublayerCaches.has(t.objectType.name??"")?Array.from(this.sublayerCaches.get(t.objectType.name)?.values()):[],u=[];return l.forEach((n=>{if(n.geometry=e.linkChartDiagramLookup.get(n.attributes[t.objectIdField]),n.attributes[xt]=n.geometry,s&&a){const r=e.linkChartGeohashLookup.get(n.attributes[t.objectIdField]);r?r>=s&&r<=a&&u.push(n):u.push(n)}else u.push(n)})),u}return this.retrieveDataFromService(r,t,n)}async getConnectedRecordIds(e){const t=[],n=[],r=new Map;return e.forEach((e=>{if(this.memberIdTypeLookup.has(e)){const t=this.memberIdTypeLookup.get(e);if(!this.entityTypeNames.has(t))return;r.has(t)?r.get(t)?.push(e):r.set(t,[e])}})),r.forEach(((e,r)=>{const i=`MATCH (n:${r})-[r]-(m) WHERE id(n) IN $ids RETURN id(r), type(r), id(m), labels(m)[0]`,o=new Promise((n=>{(async()=>{const n=(await tt(this.knowledgeGraph,new yt({openCypherQuery:i,bindParameters:{ids:e}}))).resultRowsStream.getReader();try{for(;;){const{done:e,value:r}=await n.read();if(e)break;for(let e=0;e<r.length;e++){const n=r[e];t.push({id:n[0],typeName:n[1]}),t.push({id:n[2],typeName:n[3]})}}}catch(e){if("AbortError"!==e.name)throw e;vt.info("Request aborted as expected")}})().then((()=>{n()}))}));n.push(o)})),await Promise.all(n),t}async refreshCacheContent(e,t,n,r=!0){const i=v.getInstance(),s=[],a=new Map,l=new Map;this.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&l.set(e.name,e)})),this.knowledgeGraph.dataModel.relationshipTypes?.forEach((e=>{e.name&&l.set(e.name,e)})),e||this.inclusionModeDefinition?e?e.forEach((e=>{if(this.memberIdTypeLookup.has(e)){const t=this.memberIdTypeLookup.get(e);a.has(t)?a.get(t)?.push(e):a.set(t,[e])}})):this.inclusionModeDefinition?.namedTypeDefinitions?.forEach(((e,t)=>{e.useAllData?a.set(t,null):e.members&&e.members.forEach((e=>{a.has(t)&&null!==a.get(t)?a.get(t)?.push(e.id):a.set(t,[e.id])}))})):(this.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&a.set(e.name,null)})),this.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&a.set(e.name,null)})));for(const[e,u]of a){const a=new Promise((s=>{(async()=>{const s=new Set,a=[];let p,d="",c=!1;if(t||l.get(e)?.properties?.forEach((e=>{e.name&&s.add(e.name)})),n&&this.geographicLookup.has(e)){const t=this.geographicLookup.get(e)?.name;t&&s.add(t)}if(this.entityTypeNames.has(e))d=`MATCH (n:${e}) ${u?"WHERE id(n) IN $ids ":""}return ID(n)`,s.forEach((e=>{d+=`, n.${e}`,a.push(e)}));else{if(!this.relationshipTypeNames.has(e))throw new o.Z("knowledge-graph:layer-data-manager",`The graph type of ${e} could not be determined. Was this type set in the KG data model and inclusion definition?`);c=!0,d=`MATCH ()-[n:${e}]->() ${u?"WHERE id(n) IN $ids ":""}return ID(n), id(startNode(n)), id(endNode(n))`,s.forEach((e=>{d+=`, n.${e}`,a.push(e)}))}p=new yt(u?{openCypherQuery:d,bindParameters:{ids:u}}:{openCypherQuery:d});const h=(await tt(this.knowledgeGraph,p)).resultRowsStream.getReader();for(;;){const{done:t,value:n}=await h.read();if(t)break;const o=[];for(let e=0;e<n.length;e++){const t=n[e];let r=0,i=0;const s={properties:{}};for(s.id=t[r],r++,i++,c&&(s.originId=t[r],r++,i++,s.destinationId=t[r],r++,i++,(0,m.s1)(this.nodeConnectionsLookup,s.originId,(()=>new Set)).add(s.id),(0,m.s1)(this.nodeConnectionsLookup,s.destinationId,(()=>new Set)).add(s.id));r<t.length;r++)s.properties[a[r-i]]=t[r];o.push(s)}const s=i.writeToStore(o,wt,this.geographicLookup.get(e)?.name);this.sublayerCaches.has(e)||this.sublayerCaches.set(e,new Map),r&&!this.inclusionModeDefinition?.namedTypeDefinitions.has(e)&&this.inclusionModeDefinition?.namedTypeDefinitions.set(e,{useAllData:!1,members:new Map}),r&&!this.inclusionModeDefinition?.namedTypeDefinitions.get(e).members&&(this.inclusionModeDefinition.namedTypeDefinitions.get(e).members=new Map);const l=this.sublayerCaches.get(e);s.forEach((t=>{l?.set(t.attributes[wt],t),r&&!this.inclusionModeDefinition?.namedTypeDefinitions.get(e).members.has(t.attributes[wt])&&(this.inclusionModeDefinition?.namedTypeDefinitions.get(e).members.set(t.attributes[wt],{id:t.attributes[wt]}),this.memberIdTypeLookup.set(t.attributes[wt],e))}))}})().then((()=>{s(null)}))}));s.push(a),this._processingCacheUpdatesLookup.get(e)?.push(a)}await Promise.all(s)}removeFromLayer(e){const t=new Set,n=new Set(e.map((e=>e.id)));for(const n of e)t.add(n.typeName),this.memberIdTypeLookup.delete(n.id),this.inclusionModeDefinition?.namedTypeDefinitions.forEach((e=>{e.members?.has(n.id)&&e.members.delete(n.id)}));t.forEach((e=>{this.sublayerCaches.get(e)?.forEach(((t,r)=>{n.has(r)&&this.sublayerCaches.get(e)?.delete(r)}))}))}async retrieveDataFromService(e,t,n){const r=v.getInstance(),i=new Set,s=[];let a,l="",u=[];const p="relationship"===t.graphType,d=this.inclusionModeDefinition?.namedTypeDefinitions?.get(t.objectType.name)?.useAllData,c=t.parentCompositeLayer.sublayerIdsCache.get(t.objectType.name);let h=!d&&c?Array.from(c).sort():null;if(this.inclusionModeDefinition?.namedTypeDefinitions?.get(t.objectType.name)?.useAllData)this.inclusionModeDefinition?.namedTypeDefinitions?.get(t.objectType.name)?.useAllData&&null!=e.objectIds&&(h=e.objectIds);else if(null!=e.objectIds&&h&&h.length>0){const t=e.objectIds;e.objectIds=h.filter((e=>t.includes(e)))}else if(null!=e.objectIds)h=e.objectIds;else{if(this.inclusionModeDefinition?.namedTypeDefinitions.has(t.objectType.name)&&(!this.inclusionModeDefinition.namedTypeDefinitions.get(t.objectType.name)?.members||this.inclusionModeDefinition.namedTypeDefinitions.get(t.objectType.name)?.members?.size<1))return e.objectIds=[],[];e.objectIds=h}if(null!=e.outFields){const n=e.outFields;n.includes("*")?t.fields.forEach((e=>{i.add(e.name)})):n.forEach((e=>{e!==wt&&e!==t.geometryFieldName&&i.add(e)}))}if(null!=e.geometry){const n=e.geometry;let r;const u=t.parentCompositeLayer.dataManager.knowledgeGraph.serviceDefinition,d=u?.spatialReference,c=u?.serviceCapabilities?.geometryCapabilities;let h=c?.geometryMaxBoundingRectangleSizeX,y=c?.geometryMaxBoundingRectangleSizeY;if(n?.extent?.spatialReference&&!n.spatialReference?.isWGS84?(await(0,b.initializeProjection)(n.extent.spatialReference,_.Zn),r=(0,b.project)(n.extent,_.Zn)):r=n.extent,h&&y&&d){if(4326!==d.wkid){const e=new gt.Z({spatialReference:d,xmax:h,ymax:y}),t=(0,b.project)(e,_.Zn);h=t.xmax,y=t.ymax}if(r.xmax-r.xmin>h)throw new o.Z("knowledge-graph:layer-data-manager",`Extent x bounds should be within ${h} latitude, limit exceeded`);if(r.ymax-r.ymin>y)throw new o.Z("knowledge-graph:layer-data-manager",`Extent y bounds should be within ${y} longitude, limit exceeded`)}if(null!=e.where&&"1=1"!==e.where){const n=await(0,g.E)(e.where.toUpperCase(),t.fieldsIndex);t.fields.forEach((e=>{n.fieldNames.includes(e.name)&&i.add(e.name)}))}l=p?`Match ()-[n:${t.objectType.name}]->() WHERE esri.graph.ST_Intersects($param_filter_geom, n.${t.geometryFieldName}) return ID(n), id(startNode(r)), id(endNode(r))`:`Match (n:${t.objectType.name}) WHERE esri.graph.ST_Intersects($param_filter_geom, n.${t.geometryFieldName}) return ID(n)`,t.geometryFieldName&&i.add(t.geometryFieldName),i.forEach((e=>{l+=`, n.${e}`,s.push(e)})),a=new yt({openCypherQuery:l,bindParameters:{param_filter_geom:new w.Z({rings:ft(r)})}})}else{let n="";if(null!=e.where&&"1=1"!==e.where){const r=await(0,g.E)(e.where,t.fieldsIndex);t.fields.forEach((e=>{r.fieldNames.includes(e.name)&&i.add(e.name)}));const o=new Set(["column-reference","string","number","binary-expression"]),s=new Set(["=","<","<=","<>",">",">=","AND","OR","LIKE"]);let a=!1;const l=e=>{if("column-reference"===e.type)return`n.${e.column}`;if("string"===e.type)return`'${e.value}'`;if("number"===e.type)return`${e.value}`;if("binary-expression"===e.type&&o.has(e.left.type)&&o.has(e.right.type)&&s.has(e.operator))return`${l(e.left)} ${e.operator} ${l(e.right)}`;if("binary-expression"===e.type&&"LIKE"===e.operator){let t="";if("function"===e.left.type&&"column-reference"===e.left.args.value[0].type)t+=`lower(n.${e.left.args.value[0].column})`;else{if("column-reference"!==e.left.type)return a=!0,"";t+=`lower(n.${e.left.column})`}if(t+=" CONTAINS (","string"!==e.right.type)return a=!0,"";{let n=e.right.value;"%"===n.charAt(0)&&(n=n.slice(1)),"%"===n.charAt(n.length-1)&&(n=n.slice(0,-1)),t+=`'${n.toLowerCase()}')`}return t}return a=!0,""};n=l(r.parseTree),a&&(n="")}let r="";r=p?`Match ()-[n:${t.objectType.name}]->()`:`Match (n:${t.objectType.name})`;let o=!1;h&&(o=!0,r+=" WHERE ID(n) IN $ids"),n&&(r+=o?" AND":" WHERE",r+=` ${n}`),r+=" return ID(n)",p&&(r+=", id(startNode(n)), id(endNode(n))"),e.returnGeometry&&t.geometryFieldName&&i.add(t.geometryFieldName),i.forEach((e=>{r+=`, n.${e}`,s.push(e)})),a=new yt(h?{openCypherQuery:r,bindParameters:{ids:h}}:{openCypherQuery:r})}const y=(await tt(t.parentCompositeLayer.dataManager.knowledgeGraph,a,n)).resultRowsStream.getReader();for(;;){const{done:e,value:n}=await y.read();if(e)break;const i=[];for(let e=0;e<n.length;e++){const t=n[e];let r=0,o=0;const a={properties:{}};for(a.id=t[r],r++,o++,p&&(a.originId=t[r],r++,o++,a.destinationId=t[r],r++,o++);r<t.length;r++)a.properties[s[r-o]]=t[r];i.push(a)}u=u.concat(r.writeToStore(i,wt,t.parentCompositeLayer.dataManager.geographicLookup.get(t.objectType.name)?.name))}return u}};(0,r._)([(0,l.Cb)()],It.prototype,"knowledgeGraph",void 0),(0,r._)([(0,l.Cb)()],It.prototype,"inclusionModeDefinition",void 0),(0,r._)([(0,l.Cb)()],It.prototype,"entityTypeNames",void 0),(0,r._)([(0,l.Cb)()],It.prototype,"relationshipTypeNames",void 0),(0,r._)([(0,l.Cb)()],It.prototype,"geographicLookup",void 0),(0,r._)([(0,l.Cb)()],It.prototype,"sublayerCaches",void 0),(0,r._)([(0,l.Cb)()],It.prototype,"nodeConnectionsLookup",void 0),(0,r._)([(0,l.Cb)()],It.prototype,"memberIdTypeLookup",void 0),It=(0,r._)([(0,p.j)("esri.rest.knowledgeGraph.knowledgeGraphLayer.KnowledgeGraphLayerDataManager")],It);var Et=n(51773),Tt=(n(16050),n(12501),n(28756),n(92271),n(72529),n(5499),n(84382),n(81571),n(91423)),St=n(32400),Mt=(n(56569),n(28972)),Lt=n(3489),kt=n(25278);const Nt=(0,n(53518).v)(),jt=e=>{let t=class extends e{constructor(){super(...arguments),this.fields=[],this.fieldsIndex=null}};return(0,r._)([(0,l.Cb)(Nt.fields)],t.prototype,"fields",void 0),(0,r._)([(0,l.Cb)(Nt.fieldsIndex)],t.prototype,"fieldsIndex",void 0),t=(0,r._)([(0,p.j)("esri.layers.knowledgeGraphLayer.KnowledgeGraphSublayerBase")],t),t};var Rt=n(71612),Dt=n(6404),Gt=n(34760),Ft=n(72965),Pt=n(1231),Ot=n(35671),Zt=n(74889),At=n(32163),Bt=n(728),qt=n(86973);let zt=class extends((0,Dt.M)(jt((0,Rt.h)((0,Ft.M)((0,Gt.Q)(c.Z)))))){constructor(e){if(super(e),this.capabilities=(0,kt.MS)(!1,!1),this.definitionExpression="",this.displayField="",this.elevationInfo=null,this.geometryType=null,this.geometryFieldName=null,this.graphType=null,this.hasM=!1,this.hasZ=!1,this.labelsVisible=null,this.labelingInfo=null,this.objectIdField=wt,this.objectType=null,this.parentCompositeLayer=null,this.popupTemplate=null,this.source={openPorts:()=>this.load().then((()=>{const e=new MessageChannel;return new Bt.default(e.port1,{channel:e,client:{queryFeatures:(e,t={})=>{const n=mt.Z.fromJSON(e);return this.queryFeaturesJSON(n,t)}}}),[e.port2]}))},this.type="knowledge-graph-sublayer","link-chart"===e.parentCompositeLayer.type)"relationship"===e.graphType?this.geometryType="polyline":this.geometryType="point",this.geometryFieldName=xt;else if(e.parentCompositeLayer.dataManager.geographicLookup.get(e.objectType.name)?.geometryType&&"esriGeometryNull"!==e.parentCompositeLayer.dataManager.geographicLookup.get(e.objectType.name)?.geometryType){const t=e.parentCompositeLayer.dataManager.geographicLookup.get(e.objectType.name);this.geometryFieldName=t?.name??null,this.geometryType=t?.geometryType?qt.M.fromJSON(t.geometryType):null;const n=t?.name,r=n?e.objectType.properties?.[n]:null;r?(this.hasM=r.hasM??!1,this.hasZ=r.hasZ??!1):(this.hasM=!1,this.hasZ=!1)}else this.geometryType=null;e.objectType.properties?.forEach((e=>{let t=e.fieldType;"esriFieldTypeOID"===t&&(t="esriFieldTypeInteger"),this.fields.push(Pt.Z.fromJSON({name:e.name,type:t,alias:e.alias,defaultValue:null,editable:e.editable,nullable:e.nullable}))})),this.fields.push(Pt.Z.fromJSON({name:this.objectIdField,type:"esriFieldTypeString",alias:this.objectIdField,editable:!1})),this._set("fields",[...this.fields]),e.parentCompositeLayer.dataManager.knowledgeGraph.dataModel?.spatialReference&&(this.spatialReference=e.parentCompositeLayer.dataManager.knowledgeGraph.dataModel.spatialReference),"link-chart"===e.parentCompositeLayer.type?"relationship"===e.graphType?this.renderer=(0,Tt.i)((0,kt.bU)(qt.M.toJSON("polyline")).renderer):this.renderer=(0,Tt.i)((0,kt.bU)(qt.M.toJSON("point")).renderer):this.renderer=(0,Tt.i)((0,kt.bU)(qt.M.toJSON(this.geometryType)).renderer)}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){(0,Ot.YN)(e,this.fieldsIndex),this._set("renderer",e)}createPopupTemplate(e){return(0,At.eZ)(this,e)}createQuery(){return new mt.Z({where:"1=1",outFields:["*"]})}getField(e){for(let t=0;t<this.fields.length;t++)if(this.fields[t].name===e)return this.fields[t];throw new Error("Field not found")}getFieldDomain(e,t){return null}async queryFeatures(e,t){const{resolvedQuery:n,queryEngine:r}=await this._setupQueryObjects(e),i=Zt.Z.fromJSON(await r.executeQuery(n.toJSON(),t?.signal));return i.features.forEach((e=>{e.sourceLayer=this})),i}async queryFeaturesJSON(e,t){const{resolvedQuery:n,queryEngine:r}=await this._setupQueryObjects(e);return await r.executeQuery(n.toJSON(),t?.signal)}async queryFeatureCount(e,t){const{resolvedQuery:n,queryEngine:r}=await this._setupQueryObjects(e);return r.executeQueryForCount(n.toJSON(),t?.signal)}async queryExtent(e={},t){const n={...e,returnGeometry:!0},{resolvedQuery:r,queryEngine:i}=await this._setupQueryObjects(n),o=await i.executeQueryForExtent(r.toJSON(),t?.signal);let s;return s=null!=o.extent?.xmin&&null!=o.extent?.xmax&&null!=o.extent?.ymin&&null!=o.extent?.ymax?new gt.Z(o.extent):new gt.Z,{count:o.count,extent:s}}async queryObjectIds(e,t){const n=mt.Z.from(e);let r;if("link-chart"===this.parentCompositeLayer.type&&this._cachedQueryEngine)r=this._cachedQueryEngine;else{const e=await this.parentCompositeLayer.dataManager.getData(n,this,t);r=this.loadQueryEngine(e)}return r.executeQueryForIds(n.toJSON(),t?.signal)}loadQueryEngine(e){const t=new Mt.Z({geometryType:qt.M.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ}),n=new Lt.q({fieldsIndex:this.fieldsIndex.toJSON(),geometryType:qt.M.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:this.spatialReference.toJSON(),timeInfo:null,featureStore:t});return n.featureStore.addMany(e),n}async refreshCachedQueryEngine(){const e=await this.parentCompositeLayer.dataManager.getData(new mt.Z({where:"1=1",outFields:[wt]}),this);this._cachedQueryEngine=this.loadQueryEngine(e)}async _setupQueryObjects(e,t){const n=mt.Z.from(e),r=n.geometry;let i;if(r&&!r.spatialReference?.isWGS84&&(await(0,b.initializeProjection)(r.spatialReference,_.Zn),n.geometry=(0,b.project)(r instanceof w.Z||r instanceof te.Z?r:r.extent,_.Zn)),"link-chart"===this.parentCompositeLayer.type&&this._cachedQueryEngine)i=this._cachedQueryEngine;else{const e=await this.parentCompositeLayer.dataManager.getData(n,this,t);i=this.loadQueryEngine(e)}return{resolvedQuery:n,queryEngine:i}}};(0,r._)([(0,l.Cb)()],zt.prototype,"capabilities",void 0),(0,r._)([(0,l.Cb)({readOnly:!0})],zt.prototype,"defaultPopupTemplate",null),(0,r._)([(0,l.Cb)()],zt.prototype,"definitionExpression",void 0),(0,r._)([(0,l.Cb)()],zt.prototype,"displayField",void 0),(0,r._)([(0,l.Cb)()],zt.prototype,"elevationInfo",void 0),(0,r._)([(0,l.Cb)()],zt.prototype,"geometryType",void 0),(0,r._)([(0,l.Cb)()],zt.prototype,"geometryFieldName",void 0),(0,r._)([(0,l.Cb)()],zt.prototype,"graphType",void 0),(0,r._)([(0,l.Cb)()],zt.prototype,"hasM",void 0),(0,r._)([(0,l.Cb)()],zt.prototype,"hasZ",void 0),(0,r._)([(0,l.Cb)()],zt.prototype,"labelsVisible",void 0),(0,r._)([(0,l.Cb)()],zt.prototype,"labelingInfo",void 0),(0,r._)([(0,l.Cb)()],zt.prototype,"objectIdField",void 0),(0,r._)([(0,l.Cb)()],zt.prototype,"objectType",void 0),(0,r._)([(0,l.Cb)()],zt.prototype,"parentCompositeLayer",void 0),(0,r._)([(0,l.Cb)({type:Et.Z,json:{name:"popupInfo",write:!0}})],zt.prototype,"popupTemplate",void 0),(0,r._)([(0,l.Cb)({types:St.A,json:{write:{target:"layerDefinition.drawingInfo.renderer"}}})],zt.prototype,"renderer",null),(0,r._)([(0,l.Cb)()],zt.prototype,"source",void 0),(0,r._)([(0,l.Cb)({json:{read:!1}})],zt.prototype,"type",void 0),zt=(0,r._)([(0,p.j)("esri.layers.knowledgeGraph.KnowledgeGraphSublayer")],zt);const Yt=zt;let Ut,Vt=null;var Qt,$t,Jt,Ht,Xt,Wt,Kt,en,tn;function nn(e,t,n,r,i,o){const s=n.length,a=i.length,l=Float64Array.BYTES_PER_ELEMENT,u=Uint32Array.BYTES_PER_ELEMENT,p=Uint8Array.BYTES_PER_ELEMENT,d=15+s*(p+2*l)+a*(2*u),c=Vt._malloc(d);try{const p=c+16-c%16,d=p+s*l,h=d+s*l,y=h+a*u,f=y+a*u,m=()=>[Vt.HEAPF64.subarray(p>>3,(p>>3)+s),Vt.HEAPF64.subarray(d>>3,(d>>3)+s),Vt.HEAPU32.subarray(h>>2,(h>>2)+a),Vt.HEAPU32.subarray(y>>2,(y>>2)+a),Vt.HEAPU8.subarray(f,f+s)],[g,w,b,_,x]=m();g.set(n),w.set(r),b.set(i),_.set(o),x.set(t);const C=e(s,f,p,d,a,h,y),[v,I,E,T,S]=m();return n.set(v),r.set(I),i.set(E),o.set(T),t.set(S),C}finally{Vt._free(c)}}!function(e){e[e.None=0]="None",e[e.IsMovable=1]="IsMovable",e[e.IsGeographic=2]="IsGeographic",e[e.IsRoot=4]="IsRoot"}(Qt||(Qt={})),function(e){e.getMinIdealEdgeLength=function(){return Vt.getMinIdealEdgeLength()},e.apply=function(e,t,n,r,i,o=2,s=1,a=-1){return nn(((e,t,n,r,i,l,u)=>Vt.applyForceDirectedLayout(e,t,n,r,i,l,u,o,s,a)),e,t,n,r,i)}}($t||($t={})),function(e){e.apply=function(e,t,n,r,i,o=2,s=1,a=-1){return nn(((e,t,n,r,i,l,u)=>Vt.applyCommunityLayout(e,t,n,r,i,l,u,o,s,a)),e,t,n,r,i)}}(Jt||(Jt={})),function(e){e.apply=function(e,t,n,r,i){return nn(Vt.applySimpleLayout,e,t,n,r,i)}}(Ht||(Ht={})),function(e){e.apply=function(e,t,n,r,i){return nn(Vt.applyHierarchicalLayout,e,t,n,r,i)}}(Xt||(Xt={})),function(e){e.apply=function(e,t,n,r,i){return nn(Vt.applyRadialTreeLayout,e,t,n,r,i)}}(Wt||(Wt={})),function(e){e.apply=function(e,t,n,r,i){return nn(Vt.applySmartTreeLayout,e,t,n,r,i)}}(Kt||(Kt={})),function(e){e[e.Undirected=0]="Undirected",e[e.Directed=1]="Directed",e[e.Reversed=2]="Reversed"}(en||(en={})),function(e){e[e.ByCC_Raw=0]="ByCC_Raw",e[e.ByCC_NormalizeGlobally=1]="ByCC_NormalizeGlobally",e[e.ByCC_NormalizeByCC=2]="ByCC_NormalizeByCC"}(tn||(tn={}));let rn=class extends((0,Rt.h)((0,Ft.M)(c.Z))){constructor(e){if(super(e),this.dataPreloadedInLocalCache=!1,this.defaultLinkChartConfig=null,this._currentLinkChartConfig={layoutMode:"RADIAL_TREE",xScaleFactor:1,yScaleFactor:1},this._graphTypeLookup=new Map,this.knowledgeGraph=null,this.layers=new i.Z,this.linkChartDiagramLookup=new Map,this.linkChartExtent=new gt.Z({xmin:-1e-7,ymin:-1e-7,xmax:1e-7,ymax:1e-7}),this.linkChartGeohashLookup=new Map,this.memberEntityTypes=null,this.memberRelationshipTypes=null,this.sublayerIdsCache=new Map,this.tables=new i.Z,this.type="link-chart",this._originalInclusionList=e.inclusionModeDefinition,e.dataPreloadedInLocalCache&&!e.inclusionModeDefinition)throw new o.Z("knowledge-graph:linkchart-layer-constructor","If creating a link chart composite layer and configured that data is already loaded in the cache, you must specify an inclusion list so the Composite Layer knows what records belong to it")}normalizeCtorArgs(e){return{url:e.url,title:e.title,dataPreloadedInLocalCache:e.dataPreloadedInLocalCache,defaultLinkChartConfig:e.defaultLinkChartConfig}}_initializeLayerProperties(e){if(!this.title&&this.url){const e=this.url.split("/");this.title=e[e.length-2]}const t=new Set;let n=[],r=[];if(e.inclusionModeDefinition&&(!e.inclusionModeDefinition.namedTypeDefinitions||e.inclusionModeDefinition.namedTypeDefinitions.size<1))throw new o.Z("knowledge-graph:composite-layer-constructor","If an explicit inclusion definition is defined, at least one namedTypeDefinition must also be defined");e.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&this._graphTypeLookup.set(e.name,e)})),e.knowledgeGraph.dataModel.relationshipTypes?.forEach((e=>{e.name&&this._graphTypeLookup.set(e.name,e)})),e.inclusionModeDefinition?.generateAllSublayers?(n=e.knowledgeGraph.dataModel.entityTypes??[],r=e.knowledgeGraph.dataModel.relationshipTypes??[]):e.inclusionModeDefinition?.namedTypeDefinitions&&e.inclusionModeDefinition?.namedTypeDefinitions.size>0?e.inclusionModeDefinition?.namedTypeDefinitions.forEach(((i,o)=>{if(!this._graphTypeLookup.get(o))return s.Z.getLogger(this).warn(`A named type, ${o}, was in the inclusion list that wasn't in the data model and will be removed`),void e.inclusionModeDefinition?.namedTypeDefinitions.delete(o);this._graphTypeLookup.get(o)instanceof B||"strictOrigin"in this._graphTypeLookup.get(o)?t.has(o)||(t.add(o),r.push(this._graphTypeLookup.get(o))):this._graphTypeLookup.get(o)instanceof Z||"properties"in this._graphTypeLookup.get(o)?t.has(o)||(t.add(o),n.push(this._graphTypeLookup.get(o))):(s.Z.getLogger(this).warn(`A named type, ${o}, was in the inclusion list that wasn't properly modeled and will be removed`),e.inclusionModeDefinition?.namedTypeDefinitions.delete(o))})):(n=e.knowledgeGraph.dataModel.entityTypes??[],r=e.knowledgeGraph.dataModel.relationshipTypes??[]);const i=new It({knowledgeGraph:e.knowledgeGraph,inclusionModeDefinition:e.inclusionModeDefinition});this.knowledgeGraph=e.knowledgeGraph,this.memberEntityTypes=n,this.memberRelationshipTypes=r,this.dataManager=i}load(e){return this.addResolvingPromise(new Promise((t=>{(async function(e){return et.fetchKnowledgeGraph(e)})(this.url).then((n=>{if(this._initializeLayerProperties({knowledgeGraph:n,inclusionModeDefinition:this._originalInclusionList}),this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.size||(this.dataManager.inclusionModeDefinition={generateAllSublayers:!1,namedTypeDefinitions:new Map},this.dataManager.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&this.dataManager.inclusionModeDefinition?.namedTypeDefinitions.set(e.name,{useAllData:!0})})),this.dataManager.knowledgeGraph.dataModel.relationshipTypes?.forEach((e=>{e.name&&this.dataManager.inclusionModeDefinition?.namedTypeDefinitions.set(e.name,{useAllData:!0})}))),this.dataPreloadedInLocalCache)this.loadLayerAssumingLocalCache(),this.dataManager.inclusionModeDefinition&&(this.dataManager.inclusionModeDefinition.generateAllSublayers=!1),this.dataManager.inclusionModeDefinition?.namedTypeDefinitions.forEach((e=>{e.useAllData=!1,e.members?.forEach((e=>{let t;t=e.linkChartLocation instanceof y.Z?e.linkChartLocation:e.linkChartLocation?(0,h.GH)(e.linkChartLocation):null,this.linkChartDiagramLookup.set(e.id,t),t&&2===t.coords.length&&0===t.lengths.length?this.linkChartGeohashLookup.set(e.id,(0,d.fC)(t.coords[1],t.coords[0],Ct)):this.linkChartGeohashLookup.set(e.id,"")})),this.addResolvingPromise(this._initializeDiagram().then((async()=>{this.layers.forEach((async e=>{await e.refreshCachedQueryEngine()})),this.tables.forEach((async e=>{await e.refreshCachedQueryEngine()}))})))}));else{const t="GEOGRAPHIC"===this.defaultLinkChartConfig?.layoutMode;this.addResolvingPromise(this.dataManager.refreshCacheContent(void 0,!1,t,!0).then((async()=>{(0,a.k_)(e);const t=[],n=[];this.loadLayerAssumingLocalCache(),this.dataManager.inclusionModeDefinition&&(this.dataManager.inclusionModeDefinition.generateAllSublayers=!1,this.dataManager.inclusionModeDefinition.namedTypeDefinitions.forEach((e=>{e.useAllData=!1}))),await this._initializeDiagram(),this.layers.forEach((e=>{n.push(e.refreshCachedQueryEngine()),t.push(new Promise((t=>{e.on("layerview-create",(()=>{t(null)}))})))})),this.tables.forEach((e=>{n.push(e.refreshCachedQueryEngine())})),await Promise.all(n)})))}t(null)}))}))),Promise.resolve(this)}async addRecords(e,t){let n=[];t?.cascadeAddRelationshipEndNodes&&this.dataManager.knowledgeGraph.dataModel&&(n=await async function(e,t){const n=[],r=new Map,i=[];if(t.dataModel?.relationshipTypes)for(const e of t.dataModel.relationshipTypes)e.name&&r.set(e.name,[]);for(const t of e)r.has(t.typeName)&&r.get(t.typeName)?.push(t.id);for(const[e,o]of r){if(o.length<1)continue;const r=new yt({openCypherQuery:`MATCH (n)-[r:${e}]->(m) WHERE id(r) in $ids RETURN id(n), labels(n)[0], id(m), labels(m)[0]`,bindParameters:{ids:o}});i.push(tt(t,r).then((async e=>{const t=e.resultRowsStream.getReader();for(;;){const{done:e,value:r}=await t.read();if(e)break;for(const e of r)n.push({id:e[0],typeName:e[1]}),n.push({id:e[2],typeName:e[3]})}})))}return await Promise.all(i),n}(e,this.dataManager.knowledgeGraph));const r=e.concat(n).filter((e=>!this.sublayerIdsCache.get(e.typeName)?.has(e.id)));await this._handleNewRecords(r)}async removeRecords(e,{cascadeRemoveRelationships:t=!0,recalculateLayout:n=!1}={cascadeRemoveRelationships:!0,recalculateLayout:!1}){let r=[];for(const t of e)!1===this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.get(t.typeName)?.useAllData&&this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.get(t.typeName)?.members?.has(t.id)&&r.push(t);if(t){const e=new Set,t=[];for(const t of r)if(this.dataManager.nodeConnectionsLookup.has(t.id))for(const n of this.dataManager.nodeConnectionsLookup.get(t.id))e.add(n);for(const n of e)this.dataManager.memberIdTypeLookup.has(n)&&t.push({id:n,typeName:this.dataManager.memberIdTypeLookup.get(n)});r=r.concat(t)}this.dataManager.removeFromLayer(r);for(const e of r)this.sublayerIdsCache.get(e.typeName)?.delete(e.id),this.linkChartDiagramLookup.delete(e.id);n&&await this.calculateLinkChartLayout(this._currentLinkChartConfig.layoutMode,{xScaleFactor:this._currentLinkChartConfig.xScaleFactor,yScaleFactor:this._currentLinkChartConfig.xScaleFactor});const i=[];return this.layers.forEach((e=>{i.push(e.refreshCachedQueryEngine())})),await Promise.all(i),this._refreshNamedTypes(),r}async expand(e){const t=await this.dataManager.getConnectedRecordIds(e),n=t.filter((e=>!this.sublayerIdsCache.get(e.typeName)?.has(e.id)));return await this._handleNewRecords(t),{records:n}}loadLayerAssumingLocalCache(){this.memberRelationshipTypes.forEach((e=>{const t=new Yt({objectType:e,parentCompositeLayer:this,graphType:"relationship",title:e.name});t.geometryType?this.layers.push(t):this.tables.push(t),this.dataManager.sublayerCaches.has(e.name)||this.dataManager.sublayerCaches.set(e.name,new Map)})),this.memberEntityTypes.forEach((e=>{const t=new Yt({objectType:e,parentCompositeLayer:this,graphType:"entity",title:e.name});t.geometryType?this.layers.push(t):this.tables.push(t),this.dataManager.sublayerCaches.has(e.name)||this.dataManager.sublayerCaches.set(e.name,new Map)})),this.dataManager.inclusionModeDefinition?.namedTypeDefinitions&&this.dataManager.inclusionModeDefinition?.namedTypeDefinitions.forEach(((e,t)=>{const n=((e,t,n)=>(e.has(t)||e.set(t,new Set),e.get(t)))(this.sublayerIdsCache,t);e.members?.forEach((e=>{if(n.add(e.id),e.linkChartLocation)if(e.linkChartLocation instanceof y.Z)this.linkChartDiagramLookup.set(e.id,e.linkChartLocation),2===e.linkChartLocation.coords.length&&0===e.linkChartLocation.lengths.length?this.linkChartGeohashLookup.set(e.id,(0,d.fC)(e.linkChartLocation.coords[1],e.linkChartLocation.coords[0],Ct)):this.linkChartGeohashLookup.set(e.id,"");else{const t=(0,h.GH)(e.linkChartLocation);this.linkChartDiagramLookup.set(e.id,e.linkChartLocation?t:null),"x"in e.linkChartLocation&&"y"in e.linkChartLocation?this.linkChartGeohashLookup.set(e.id,(0,d.fC)(e.linkChartLocation.x,e.linkChartLocation.y,Ct)):this.linkChartGeohashLookup.set(e.id,"")}}))}))}async calculateLinkChartLayout(e="RADIAL_TREE",t){const r=[],i=[];this.dataManager.sublayerCaches.forEach(((e,t)=>{this.dataManager.entityTypeNames.has(t)?e.forEach((e=>{r.push({typeName:t,feature:e})})):this.dataManager.relationshipTypeNames.has(t)&&e.forEach((e=>{i.push({typeName:t,feature:e})}))})),this.linkChartDiagramLookup=new Map;const a=new Map,l=new Map,u=new Map,p=new Map,c=new Uint8Array(r.length),y=new Float64Array(r.length),f=new Float64Array(r.length),m=new Uint32Array(i.length),g=new Uint32Array(i.length),w=[],b=t?.xScaleFactor??1,_=t?.yScaleFactor??1,x=new gt.Z({xmin:-1e-7,ymin:-1e-7,xmax:1e-7,ymax:1e-7});let C,v="FORCE_DIRECTED",I=0,E=0;switch(v="GEOGRAPHIC"===e?"FORCE_DIRECTED":e,v){case"FORCE_DIRECTED":C=$t.apply;break;case"COMMUNITY":C=Jt.apply;break;case"HIERARCHICAL":C=Xt.apply;break;case"RADIAL_TREE":C=Wt.apply;break;case"SMART_TREE":C=Kt.apply;break;default:C=Ht.apply}r.forEach((({typeName:n,feature:r})=>{if(t?.lockedNodeLocations?.has(r.attributes[wt])){"GEOGRAPHIC"===e&&this.dataManager.geographicLookup.has(n)?c[I]=Qt.IsGeographic:c[I]=Qt.None;const i=t.lockedNodeLocations.get(r.attributes[wt]);y[I]=i.x,f[I]=i.y}else if("GEOGRAPHIC"===e&&this.dataManager.geographicLookup.has(n)){c[I]=Qt.IsGeographic;let e=null;const t=r.attributes[this.dataManager.geographicLookup.get(n).name],i=this.dataManager.geographicLookup.get(n)?.geometryType;switch(i){case"esriGeometryPoint":y[I]=t?.x,f[I]=t?.y;break;case"esriGeometryPolygon":e=t?.centroid,null!=e?.x&&null!=e?.y?(y[I]=e.x,f[I]=e.y):c[I]=Qt.IsMovable;break;case"esriGeometryPolyline":case"esriGeometryMultipoint":e=t?.extent?.center,null!=e?.x&&null!=e?.y?(y[I]=e.x,f[I]=e.y):c[I]=Qt.IsMovable;break;default:c[I]=Qt.IsMovable}(null==y[I]||null==f[I]||Number.isNaN(y[I])||Number.isNaN(f[I]))&&(c[I]=Qt.IsMovable,y[I]=0,f[I]=0)}else c[I]=Qt.IsMovable,y[I]=0,f[I]=0;p.set(r.attributes[wt],I),w[I]={feature:r,typeName:n},I++}));let T=!1;if(i.forEach((e=>{const t=p.get(e.feature.attributes[bt]),n=p.get(e.feature.attributes[_t]);void 0!==t&&void 0!==n?(m[E]=t,g[E]=n,E++):(T=!0,this.linkChartDiagramLookup.set(e.feature.attributes[bt],null),this.linkChartGeohashLookup.set(e.feature.attributes[bt],null))})),T&&s.Z.getLogger(this).warn("A relationship is a member of this layer that has either origin or destination entity nodes that are not members. The diagram geometry will be set to null"),await(Ut||(Ut=n.e(6124).then(n.bind(n,36124)).then((e=>e.l)).then((({default:e})=>e({locateFile:e=>(0,$.V)(`esri/libs/linkchartlayout/${e}`)}))).then((e=>{!function(e){Vt=e}(e)})),Ut)),!C(c,y,f,m,g))throw new o.Z("knowledge-graph:layout-failed","Attempting to arrange the records in the specified layout failed");for(let e=0;e<w.length;e++){if(c[e]===Qt.IsMovable&&(y[e]=y[e]*b,f[e]=f[e]*_),f[e]>84.9999&&(f[e]=84.9999),f[e]<-84.9999&&(f[e]=-84.9999),y[e]>179.9999&&(y[e]=179.9999),y[e]<-179.9999&&(y[e]=-179.9999),w[e].feature.attributes[xt]=new ee.Z(y[e],f[e]),a.has(w[e].typeName)){const t=a.get(w[e].typeName);t?.set(w[e].feature.attributes[wt],w[e].feature)}else{const t=new Map;t.set(w[e].feature.attributes[wt],w[e].feature),a.set(w[e].typeName,t)}u.set(w[e].feature.attributes[wt],w[e].feature);const t=(0,h.GH)(w[e].feature.attributes[xt]);this.linkChartDiagramLookup.set(w[e].feature.attributes[wt],w[e].feature.attributes[xt]?t:null),this.linkChartGeohashLookup.set(w[e].feature.attributes[wt],(0,d.fC)(w[e].feature.attributes[xt].y,w[e].feature.attributes[xt].x,Ct)),w[e].feature.attributes[xt].x<x.xmin&&(x.xmin=w[e].feature.attributes[xt].x),w[e].feature.attributes[xt].x>x.xmax&&(x.xmax=w[e].feature.attributes[xt].x),w[e].feature.attributes[xt].y<x.ymin&&(x.ymin=w[e].feature.attributes[xt].y),w[e].feature.attributes[xt].y>x.ymax&&(x.ymax=w[e].feature.attributes[xt].y)}return this.linkChartExtent.xmin=x.xmin,this.linkChartExtent.xmax=x.xmax,this.linkChartExtent.ymin=x.ymin,this.linkChartExtent.ymax=x.ymax,i.forEach((e=>{const t=w[p.get(e.feature.attributes[bt])]?.feature.attributes[xt],n=w[p.get(e.feature.attributes[_t])]?.feature.attributes[xt];if(!t||!n)return;const r=new te.Z({paths:[[t.x,t.y],[n.x,n.y]]});if(e.feature.attributes[xt]=r,l.has(e.typeName)){const t=l.get(e.typeName);t?.set(e.feature.attributes[wt],e.feature)}else{const t=new Map;t.set(e.feature.attributes[wt],e.feature),l.set(e.typeName,t)}u.set(e.feature.attributes[wt],e.feature);const i=(0,h.GH)(e.feature.attributes[xt]);this.linkChartDiagramLookup.set(e.feature.attributes[wt],e.feature.attributes[xt]?i:null),this.linkChartGeohashLookup.set(e.feature.attributes[wt],"")})),this._currentLinkChartConfig={layoutMode:e,xScaleFactor:b,yScaleFactor:_},{nodes:a,links:l,idMap:u}}async applyNewLinkChartLayout(e="RADIAL_TREE",t){const n=[];await this.calculateLinkChartLayout(e,t),this.layers.forEach((e=>{n.push(e.refreshCachedQueryEngine())})),await Promise.all(n),this._refreshNamedTypes()}getCurrentNodeLocations(){const e=new Map;return this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.forEach((t=>{t?.members?.forEach((t=>{const n=t.linkChartLocation;let r;const i=t.id;n&&(r="x"in n?{x:n.x,y:n.y}:{x:n.coords[0],y:n.coords[1]},e.set(i,new ee.Z({x:r.x,y:r.y})))}))})),e}async synchronizeInclusionListWithCache(){return new Promise((e=>{this.dataManager.inclusionModeDefinition?.namedTypeDefinitions.forEach(((e,t)=>{if(e.useAllData=!1,e.members&&e.members.size>0){if(!this.dataManager.sublayerCaches.get(t))return;const n=new Set(Array.from(this.dataManager.sublayerCaches.get(t).keys()));Array.from(e.members.keys()).filter((e=>!n.has(e))).forEach((t=>{e.members?.delete(t)}))}})),e()}))}async refreshLinkChartCache(e){await this.dataManager.refreshCacheContent(e);const t=[];this.layers.forEach((e=>{t.push(e.refreshCachedQueryEngine())})),await Promise.all(t),this._refreshNamedTypes()}async _handleNewRecords(e){const t=[];this.dataManager.addToLayer(e);for(const n of e)this.sublayerIdsCache.has(n.typeName)||(this.sublayerIdsCache.set(n.typeName,new Set),t.push(n.typeName)),this.sublayerIdsCache.get(n.typeName).add(n.id);for(const e of t)if(this._graphTypeLookup.has(e)){const t=this._graphTypeLookup.get(e),n="endPoints"in t?"relationship":"entity",r=new Yt({objectType:t,parentCompositeLayer:this,graphType:n,title:e});"entity"===n?this.dataManager.entityTypeNames.add(e):this.dataManager.relationshipTypeNames.add(e),r.geometryType?this.layers.push(r):this.tables.push(r),this.dataManager.sublayerCaches.set(e,new Map)}await this.dataManager.refreshCacheContent(e.map((e=>e.id))),await this.applyNewLinkChartLayout(this._currentLinkChartConfig.layoutMode,{xScaleFactor:this._currentLinkChartConfig.xScaleFactor,yScaleFactor:this._currentLinkChartConfig.xScaleFactor})}async _initializeDiagram(){this.defaultLinkChartConfig?this.defaultLinkChartConfig.doNotRecalculateLayout?(this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.forEach((e=>{e?.members?.forEach((e=>{const t=e.linkChartLocation;let n;const r=e.id;if(!t)return;n="x"in t?{x:t.x,y:t.y}:{x:t.coords[0],y:t.coords[1]};const i=(0,h.GH)(n);this.linkChartDiagramLookup.set(r,i),this.linkChartGeohashLookup.set(r,(0,d.fC)(n.x,n.y,Ct)),this.linkChartExtent.xmin>n.x&&(this.linkChartExtent.xmin=n.x),this.linkChartExtent.xmax<n.x&&(this.linkChartExtent.xmax=n.x),this.linkChartExtent.ymin>n.y&&(this.linkChartExtent.ymin=n.y),this.linkChartExtent.ymax<n.y&&(this.linkChartExtent.ymax=n.y)}))})),this.memberRelationshipTypes.forEach((e=>{e.name&&this.dataManager.sublayerCaches.get(e.name)?.forEach((e=>{const t=this.linkChartDiagramLookup.get(e.attributes[bt]),n=this.linkChartDiagramLookup.get(e.attributes[_t]);if(t&&n){const r=(0,h.GH)(new te.Z({paths:[[t.coords[0],t.coords[1]],[n.coords[0],n.coords[1]]]}));this.linkChartDiagramLookup.set(e.attributes[wt],r)}else this.linkChartDiagramLookup.set(e.attributes[wt],null);this.linkChartGeohashLookup.set(e.attributes[wt],"")}))}))):await this.calculateLinkChartLayout(this.defaultLinkChartConfig.layoutMode,{xScaleFactor:this.defaultLinkChartConfig.xScaleFactor,yScaleFactor:this.defaultLinkChartConfig.yScaleFactor,lockedNodeLocations:this.getCurrentNodeLocations()}):await this.calculateLinkChartLayout("RADIAL_TREE",{lockedNodeLocations:this.getCurrentNodeLocations()})}_refreshNamedTypes(){for(const e of this.layers)e.emit("refresh",{dataChanged:!0});for(const e of this.tables)e.emit("refresh",{dataChanged:!0})}};(0,r._)([(0,l.Cb)()],rn.prototype,"dataPreloadedInLocalCache",void 0),(0,r._)([(0,l.Cb)()],rn.prototype,"defaultLinkChartConfig",void 0),(0,r._)([(0,l.Cb)()],rn.prototype,"dataManager",void 0),(0,r._)([(0,l.Cb)()],rn.prototype,"knowledgeGraph",void 0),(0,r._)([(0,l.Cb)()],rn.prototype,"layers",void 0),(0,r._)([(0,l.Cb)()],rn.prototype,"linkChartDiagramLookup",void 0),(0,r._)([(0,l.Cb)()],rn.prototype,"linkChartExtent",void 0),(0,r._)([(0,l.Cb)()],rn.prototype,"linkChartGeohashLookup",void 0),(0,r._)([(0,l.Cb)()],rn.prototype,"memberEntityTypes",void 0),(0,r._)([(0,l.Cb)()],rn.prototype,"memberRelationshipTypes",void 0),(0,r._)([(0,l.Cb)()],rn.prototype,"sublayerIdsCache",void 0),(0,r._)([(0,l.Cb)()],rn.prototype,"tables",void 0),(0,r._)([(0,l.Cb)({json:{read:!1}})],rn.prototype,"type",void 0),rn=(0,r._)([(0,p.j)("esri.layers.LinkChartLayer")],rn);const on=rn},37549:(e,t,n)=>{n.d(t,{H:()=>a});var r=n(80442),i=n(24133),o=n(24470);const s={minX:0,minY:0,maxX:0,maxY:0};class a{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new i.Q(9,(0,r.Z)("esri-csp-restrictions")?e=>({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const e=new Array(this._idByBounds.size);let t=0;this._idByBounds.forEach(((n,r)=>{e[t++]=r})),this._indexInvalid=!1,this._index.clear(),this._index.load(e)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter((e=>this._idByBounds.has(e)))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const e=(0,o.cS)();for(const t of this._boundsById.values())t&&(e[0]=Math.min(t[0],e[0]),e[1]=Math.min(t[1],e[1]),e[2]=Math.max(t[2],e[2]),e[3]=Math.max(t[3],e[3]));return e}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(e){const t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))}forEachInBounds(e,t){this._loadIndex(),function(e,t,n){(function(e){s.minX=e[0],s.minY=e[1],s.maxX=e[2],s.maxY=e[3]})(t),e.search(s,n)}(this._index,e,(e=>t(this._idByBounds.get(e))))}get(e){return this._boundsById.get(e)}has(e){return this._boundsById.has(e)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(e,t){if(!this._indexInvalid){const t=this._boundsById.get(e);t&&(this._index.remove(t),this._idByBounds.delete(t))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},28972:(e,t,n)=>{n.d(t,{Z:()=>I});var r=n(67676),i=n(20102),o=n(32448),s=n(92604),a=n(60437),l=n(24470),u=n(98732),p=n(37549),d=n(42712);function c(e,t){return e?t?4:3:t?3:2}function h(e,t,n,r,i){if(!t?.lengths.length)return null;const o="upperLeft"===i?.originPosition?-1:1;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);const s=e.coords,a=[],l=n?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:u,coords:p}=t,d=c(n,r);let h=0;for(const e of u){const t=y(l,p,h,e,n,r,o);t&&a.push(t),h+=e*d}if(a.sort(((e,t)=>{let r=o*e[2]-o*t[2];return 0===r&&n&&(r=e[4]-t[4]),r})),a.length){let e=6*a[0][2];s[0]=a[0][0]/e,s[1]=a[0][1]/e,n&&(e=6*a[0][4],s[2]=0!==e?a[0][3]/e:0),(s[0]<l[0]||s[0]>l[1]||s[1]<l[2]||s[1]>l[3]||n&&(s[2]<l[4]||s[2]>l[5]))&&(s.length=0)}if(!s.length){const e=t.lengths[0]?f(p,0,u[0],n,r):null;if(!e)return null;s[0]=e[0],s[1]=e[1],n&&e.length>2&&(s[2]=e[2])}return e}function y(e,t,n,r,i,o,s=1){const a=c(i,o);let l=n,u=n+a,p=0,d=0,h=0,y=0,f=0;for(let n=0,o=r-1;n<o;n++,l+=a,u+=a){const n=t[l],r=t[l+1],o=t[l+2],s=t[u],a=t[u+1],c=t[u+2];let m=n*a-s*r;y+=m,p+=(n+s)*m,d+=(r+a)*m,i&&(m=n*c-s*o,h+=(o+c)*m,f+=m),n<e[0]&&(e[0]=n),n>e[1]&&(e[1]=n),r<e[2]&&(e[2]=r),r>e[3]&&(e[3]=r),i&&(o<e[4]&&(e[4]=o),o>e[5]&&(e[5]=o))}if(y*s>0&&(y*=-1),f*s>0&&(f*=-1),!y)return null;const m=[p,d,.5*y];return i&&(m[3]=h,m[4]=.5*f),m}function f(e,t,n,r,i){const o=c(r,i);let s=t,a=t+o,l=0,u=0,p=0,d=0;for(let t=0,i=n-1;t<i;t++,s+=o,a+=o){const t=e[s],n=e[s+1],i=e[s+2],o=e[a],c=e[a+1],h=e[a+2],y=r?g(t,n,i,o,c,h):m(t,n,o,c);if(y)if(l+=y,r){const e=b(t,n,i,o,c,h);u+=y*e[0],p+=y*e[1],d+=y*e[2]}else{const e=w(t,n,o,c);u+=y*e[0],p+=y*e[1]}}return l>0?r?[u/l,p/l,d/l]:[u/l,p/l]:n>0?r?[e[t],e[t+1],e[t+2]]:[e[t],e[t+1]]:null}function m(e,t,n,r){const i=n-e,o=r-t;return Math.sqrt(i*i+o*o)}function g(e,t,n,r,i,o){const s=r-e,a=i-t,l=o-n;return Math.sqrt(s*s+a*a+l*l)}function w(e,t,n,r){return[e+.5*(n-e),t+.5*(r-t)]}function b(e,t,n,r,i,o){return[e+.5*(r-e),t+.5*(i-t),n+.5*(o-n)]}var _=n(70272),x=n(5428);const C={getObjectId:e=>e.objectId,getAttributes:e=>e.attributes,getAttribute:(e,t)=>e.attributes[t],cloneWithGeometry:(e,t)=>new _.u_(t,e.attributes,null,e.objectId),getGeometry:e=>e.geometry,getCentroid:(e,t)=>(null==e.centroid&&(e.centroid=h(new x.Z,e.geometry,t.hasZ,t.hasM)),e.centroid)},v=(0,a.Ue)();class I{constructor(e){this.geometryInfo=e,this._boundsStore=new p.H,this._featuresById=new Map,this._markedIds=new Set,this.events=new o.Z,this.featureAdapter=C}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{null!=t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(e){if(null==this.fullBounds)return null;const[t,n,r,i]=this.fullBounds;return{xmin:t,ymin:n,xmax:r,ymax:i,spatialReference:(0,d.S2)(e)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}upsertMany(e){const t=e.map((e=>this._upsert(e)));return this._emitChanged(),t.filter(r.pC)}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t){for(const n of e){const e=this._boundsStore.get(n.objectId);e&&t((0,a.JR)(v,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,n)=>{this._markedIds.has(n)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(e){if(!e)return;const t=e.objectId;if(null==t)return void s.Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new i.Z("featurestore:invalid-feature","feature id is missing",{feature:e}));const n=this._featuresById.get(t);let r;if(this._markedIds.add(t),n?(e.displayId=n.displayId,r=this._boundsStore.get(t),this._boundsStore.delete(t)):null!=this.onFeatureAdd&&this.onFeatureAdd(e),!e.geometry?.coords?.length)return this._boundsStore.set(t,null),void this._featuresById.set(t,e);r=(0,u.$)(null!=r?r:(0,l.Ue)(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=r&&this._boundsStore.set(t,r),this._featuresById.set(t,e)}_upsert(e){const t=e?.objectId;if(null==t)return s.Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new i.Z("featurestore:invalid-feature","feature id is missing",{feature:e})),null;const n=this._featuresById.get(t);if(!n)return this._add(e),e;this._markedIds.add(t);const{geometry:r,attributes:o}=e;for(const e in o)n.attributes[e]=o[e];return r&&(n.geometry=r,this._boundsStore.set(t,(0,u.$)((0,l.Ue)(),r,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null)),n}_remove(e){null!=this.onFeatureRemove&&this.onFeatureRemove(e);const t=e.objectId;return this._markedIds.delete(t),this._boundsStore.delete(t),this._featuresById.delete(t),e}}},25278:(e,t,n)=>{n.d(t,{Dm:()=>p,Hq:()=>d,MS:()=>c,bU:()=>a});var r=n(80442),i=n(22974),o=n(61159),s=n(58333);function a(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?s.I4:"esriGeometryPolyline"===e?s.ET:s.lF}}}const l=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let u=1;function p(e,t){if((0,r.Z)("esri-csp-restrictions"))return()=>({[t]:null,...e});try{let n=`this.${t} = null;`;for(const t in e)n+=`this${l.test(t)?`.${t}`:`["${t}"]`} = ${JSON.stringify(e[t])};`;const r=new Function(`\n      return class AttributesClass$${u++} {\n        constructor() {\n          ${n};\n        }\n      }\n    `)();return()=>new r}catch(n){return()=>({[t]:null,...e})}}function d(e={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,i.d9)(e)}}]}function c(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:o.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},34760:(e,t,n)=>{n.d(t,{Q:()=>b});var r=n(43697),i=n(92604),o=n(95330),s=n(5600),a=n(90578),l=(n(67676),n(80442),n(52011)),u=n(82960),p=n(46791),d=(n(66643),n(20102),n(26258),n(87538));const c=new p.Z,h=new WeakMap;function y(e){(function(e){return null!=e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e})(e)&&c.push(new WeakRef(e))}function f(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:f(t,e%t):0}let m=0,g=0;function w(){const e=Date.now();let t=!1;for(const n of c){const r=n.deref();r?r.refreshInterval&&e-(h.get(r)??0)+5>=6e4*r.refreshInterval&&(h.set(r,e),r.refresh(e)):t=!0}if(t)for(let e=c.length-1;e>=0;e--)c.at(e).deref()||c.removeAt(e)}(0,d.EH)((()=>{const e=Date.now();let t=0;for(const n of c){const r=n.deref();r&&(t=f(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?h.get(r)||h.set(r,e):h.delete(r))}if(t!==g){if(g=t,clearInterval(m),0===g)return void(m=0);m=setInterval(w,g)}}));const b=e=>{let t=class extends e{constructor(...e){super(...e),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,o.Ds)((()=>this.hasDataChanged())),this.when().then((()=>{this.destroyed||y(this)}),(()=>{}))}destroy(){!function(e){const t=c.find((t=>t.deref()===e));t&&c.remove(t)}(this)}castRefreshInterval(e){return e>=.1?e:e<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(e=Date.now()){(0,o.R8)(this._debounceHasDataChanged()).then((t=>{t&&this._set("refreshTimestamp",e),this.emit("refresh",{dataChanged:t})}),(e=>{i.Z.getLogger(this).error(e),this.emit("refresh",{dataChanged:!1,error:e})}))}async hasDataChanged(){return!0}get test(){const e=this;return{set refreshInterval(t){e._set("refreshInterval",t)}}}};return(0,r._)([(0,s.Cb)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:u.C}}}}})],t.prototype,"refreshInterval",void 0),(0,r._)([(0,a.p)("refreshInterval")],t.prototype,"castRefreshInterval",null),(0,r._)([(0,s.Cb)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),(0,r._)([(0,s.Cb)({readOnly:!0})],t.prototype,"refreshParameters",null),t=(0,r._)([(0,l.j)("esri.layers.mixins.RefreshableLayer")],t),t}},1231:(e,t,n)=>{n.d(t,{Z:()=>m});var r,i=n(43697),o=n(35454),s=n(96674),a=n(5600),l=n(75215),u=(n(67676),n(80442),n(36030)),p=n(71715),d=n(52011),c=n(72729),h=n(86719);const y=new o.X({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let f=r=class extends s.wq{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let n=null;try{n=t?JSON.parse(t):null}catch(e){}return n?.value??null}readValueType(e,{description:t}){let n=null;try{n=t?JSON.parse(t):null}catch(e){}return n?y.fromJSON(n.fieldValueType):null}clone(){return new r({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};(0,i._)([(0,a.Cb)({type:String,json:{write:!0}})],f.prototype,"alias",void 0),(0,i._)([(0,a.Cb)({type:[String,Number],json:{write:{allowNull:!0}}})],f.prototype,"defaultValue",void 0),(0,i._)([(0,a.Cb)()],f.prototype,"description",void 0),(0,i._)([(0,p.r)("description")],f.prototype,"readDescription",null),(0,i._)([(0,a.Cb)({types:c.V5,json:{read:{reader:c.im},write:!0}})],f.prototype,"domain",void 0),(0,i._)([(0,a.Cb)({type:Boolean,json:{write:!0}})],f.prototype,"editable",void 0),(0,i._)([(0,a.Cb)({type:l.z8,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],f.prototype,"length",void 0),(0,i._)([(0,a.Cb)({type:String,json:{write:!0}})],f.prototype,"name",void 0),(0,i._)([(0,a.Cb)({type:Boolean,json:{write:!0}})],f.prototype,"nullable",void 0),(0,i._)([(0,u.J)(h.v)],f.prototype,"type",void 0),(0,i._)([(0,a.Cb)()],f.prototype,"valueType",void 0),(0,i._)([(0,p.r)("valueType",["description"])],f.prototype,"readValueType",null),(0,i._)([(0,a.Cb)({type:Boolean,json:{read:!1}})],f.prototype,"visible",void 0),f=r=(0,i._)([(0,d.j)("esri.layers.support.Field")],f);const m=f},54306:(e,t,n)=>{n.d(t,{Z:()=>T});var r,i=n(43697),o=n(9790),s=n(35454),a=n(96674),l=n(22974),u=n(62357),p=n(5600),d=(n(75215),n(71715)),c=n(52011),h=n(30556),y=(n(67676),n(80442),n(8813));let f=r=class extends a.wq{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?(0,y.dI)(t.value):e}writeExpression(e,t,n){null!=this.value&&(e=(0,y.dI)(this.value)),null!=e&&(t[n]=e)}clone(){return new r({expression:this.expression,title:this.title,value:this.value})}};(0,i._)([(0,p.Cb)({type:String,json:{write:{writerEnsuresNonNull:!0}}})],f.prototype,"expression",void 0),(0,i._)([(0,d.r)("expression",["expression","value"])],f.prototype,"readExpression",null),(0,i._)([(0,h.c)("expression")],f.prototype,"writeExpression",null),(0,i._)([(0,p.Cb)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],f.prototype,"title",void 0),(0,i._)([(0,p.Cb)({json:{read:!1,write:!1}})],f.prototype,"value",void 0),f=r=(0,i._)([(0,c.j)("esri.layers.support.LabelExpressionInfo")],f);const m=f;var g,w=n(84230),b=n(28412),_=n(21878);const x=new s.X({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function C(e,t,n){return{enabled:!(0,w.A2)(n?.layer)}}function v(e){return!e||"service"!==e.origin&&!("map-image"===e.layer?.type)}function I(e){return!!function(e){return"map-image"===e?.type}(e)&&!!e.capabilities?.exportMap?.supportsArcadeExpressionForLabeling}let E=g=class extends a.wq{static evaluateWhere(e,t){const n=(e,t,n)=>{switch(t){case"=":return e==n;case"<>":return e!=n;case">":return e>n;case">=":return e>=n;case"<":return e<n;case"<=":return e<=n}return!1};try{if(null==e)return!0;const r=e.split(" ");if(3===r.length)return n(t[r[0]],r[1],r[2]);if(7===r.length){const e=n(t[r[0]],r[1],r[2]),i=r[3],o=n(t[r[4]],r[5],r[6]);switch(i){case"AND":return e&&o;case"OR":return e||o}}return!1}catch(t){console.log("Error.: can't parse = "+e)}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=b.Rz,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,t){const n=t.labelExpressionInfo;if(!n||!n.value&&!n.expression)return e}writeLabelExpression(e,t,n){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)e=(0,y.z7)(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){const t=(0,y.el)(this.labelExpressionInfo.expression);t&&(e="["+t+"]")}null!=e&&(t[n]=e)}writeLabelExpressionInfo(e,t,n,r){if(null==e&&null!=this.labelExpression&&v(r))e=new m({expression:this.getLabelExpressionArcade()});else if(!e)return;const i=e.toJSON(r);i.expression&&(t[n]=i)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return(0,y.hV)(this)}getLabelExpressionArcade(){return(0,y.YI)(this)}getLabelExpressionSingleField(){return(0,y.UO)(this)}hash(){return JSON.stringify(this)}clone(){return new g({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:(0,l.d9)(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:(0,l.d9)(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};(0,i._)([(0,p.Cb)({type:String,json:{write:!0}})],E.prototype,"name",void 0),(0,i._)([(0,p.Cb)({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:C}}}}})],E.prototype,"allowOverrun",void 0),(0,i._)([(0,p.Cb)({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:C}}}}})],E.prototype,"deconflictionStrategy",void 0),(0,i._)([(0,p.Cb)({type:String,json:{write:{overridePolicy(e,t,n){return this.labelExpressionInfo&&"service"===n?.origin&&I(n.layer)?{enabled:!1}:{allowNull:!0}}}}})],E.prototype,"labelExpression",void 0),(0,i._)([(0,d.r)("labelExpression")],E.prototype,"readLabelExpression",null),(0,i._)([(0,h.c)("labelExpression")],E.prototype,"writeLabelExpression",null),(0,i._)([(0,p.Cb)({type:m,json:{write:{overridePolicy:(e,t,n)=>function(e){return v(e)||I(e?.layer)}(n)?{allowNull:!0}:{enabled:!1}}}})],E.prototype,"labelExpressionInfo",void 0),(0,i._)([(0,h.c)("labelExpressionInfo")],E.prototype,"writeLabelExpressionInfo",null),(0,i._)([(0,p.Cb)({type:x.apiValues,json:{type:x.jsonValues,read:x.read,write:x.write}})],E.prototype,"labelPlacement",void 0),(0,i._)([(0,p.Cb)({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],E.prototype,"labelPosition",void 0),(0,i._)([(0,p.Cb)({type:Number})],E.prototype,"maxScale",void 0),(0,i._)([(0,h.c)("maxScale")],E.prototype,"writeMaxScale",null),(0,i._)([(0,p.Cb)({type:Number})],E.prototype,"minScale",void 0),(0,i._)([(0,h.c)("minScale")],E.prototype,"writeMinScale",null),(0,i._)([(0,p.Cb)({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:C}}}}})],E.prototype,"repeatLabel",void 0),(0,i._)([(0,p.Cb)({type:Number,cast:u.t_,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:C}}}}})],E.prototype,"repeatLabelDistance",void 0),(0,i._)([(0,p.Cb)({types:o.yK,json:{origins:{"web-scene":{types:o.S6,write:_.vX,default:null}},write:_.vX,default:null}})],E.prototype,"symbol",void 0),(0,i._)([(0,p.Cb)({type:Boolean,json:{write:!0}})],E.prototype,"useCodedValues",void 0),(0,i._)([(0,p.Cb)({type:String,json:{write:!0}})],E.prototype,"where",void 0),E=g=(0,i._)([(0,c.j)("esri.layers.support.LabelClass")],E);const T=E},21506:(e,t,n)=>{n.d(t,{qG:()=>x,PV:()=>m,id:()=>v,iR:()=>h,rn:()=>f,rT:()=>T,u1:()=>E,rO:()=>I,Oh:()=>b,bT:()=>_,C_:()=>c,Lx:()=>g,vg:()=>C,YI:()=>d,HQ:()=>y});var r=n(92835),i=n(82960),o=n(6570),s=n(82971),a=n(25929),l=(n(67676),n(35463)),u=n(86787),p=n(65242);const d={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:i.C}}},c={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,n){t[n]=!e}}}},h={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:i.C}}},y={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:a.w}}},f={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:i.C}}},m={value:null,type:u.Z,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:i.C}}};function g(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const w={write:{enabled:!0,layerContainerTypes:i.C},read:!0},b={type:Number,json:{origins:{"web-document":w,"portal-item":{write:!0}}}},_={...b,json:{...b.json,origins:{"web-document":{...w,write:{enabled:!0,layerContainerTypes:i.C,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,n)=>n&&"service"!==n.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition?.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?(0,p.b)(t.layerDefinition.drawingInfo.transparency):void 0:(0,p.b)(t.drawingInfo.transparency)}}},x={type:r.Z,readOnly:!0,get(){if(!this.layer?.timeInfo)return null;const{datesInUnknownTimezone:e,timeOffset:t,useViewTime:n}=this.layer,i=this.view?.timeExtent;let o=this.layer.timeExtent;e&&(o=function(e){if(!e)return e;const{start:t,end:n}=e;return new r.Z({start:null!=t?(0,l.Nm)(t,t.getTimezoneOffset(),"minutes"):t,end:null!=n?(0,l.Nm)(n,n.getTimezoneOffset(),"minutes"):n})}(o));let s=n?i&&o?i.intersection(o):i||o:o;if(!s||s.isEmpty||s.isAllTime)return s;t&&(s=s.offset(-t.value,t.unit)),e&&(s=function(e){if(!e)return e;const{start:t,end:n}=e;return new r.Z({start:null!=t?(0,l.Nm)(t,-t.getTimezoneOffset(),"minutes"):t,end:null!=n?(0,l.Nm)(n,-n.getTimezoneOffset(),"minutes"):n})}(s));const a=this._get("timeExtent");return s.equals(a)?a:s}},C={type:o.Z,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const n=o.Z.fromJSON(e);return null!=t.spatialReference&&"object"==typeof t.spatialReference&&(n.spatialReference=s.Z.fromJSON(t.spatialReference)),n}}}},read:!1}},v={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},I={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:i.C}}},name:"layerDefinition.minScale",write:!0}},E={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:i.C}}},name:"layerDefinition.maxScale",write:!0}},T={json:{write:{ignoreOrigin:!0,layerContainerTypes:i.C},origins:{"web-map":{read:!1,write:!1}}}}},72729:(e,t,n)=>{n.d(t,{im:()=>I,V5:()=>v}),n(80442);var r,i=n(43697),o=n(22974),s=n(5600),a=(n(75215),n(36030)),l=n(52011),u=n(96674);n(67676);let p=r=class extends u.wq{constructor(e){super(e),this.name=null,this.code=null}clone(){return new r({name:this.name,code:this.code})}};(0,i._)([(0,s.Cb)({type:String,json:{write:!0}})],p.prototype,"name",void 0),(0,i._)([(0,s.Cb)({type:[String,Number],json:{write:!0}})],p.prototype,"code",void 0),p=r=(0,i._)([(0,l.j)("esri.layers.support.CodedValue")],p);const d=new(n(35454).X)({inherited:"inherited",codedValue:"coded-value",range:"range"});let c=class extends u.wq{constructor(e){super(e),this.name=null,this.type=null}};(0,i._)([(0,s.Cb)({type:String,json:{write:!0}})],c.prototype,"name",void 0),(0,i._)([(0,a.J)(d)],c.prototype,"type",void 0),c=(0,i._)([(0,l.j)("esri.layers.support.Domain")],c);const h=c;var y;let f=y=class extends h{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const n=String(e);this.codedValues.some((e=>(String(e.code)===n&&(t=e.name),!!t)))}return t}clone(){return new y({codedValues:(0,o.d9)(this.codedValues),name:this.name})}};(0,i._)([(0,s.Cb)({type:[p],json:{write:!0}})],f.prototype,"codedValues",void 0),(0,i._)([(0,a.J)({codedValue:"coded-value"})],f.prototype,"type",void 0),f=y=(0,i._)([(0,l.j)("esri.layers.support.CodedValueDomain")],f);const m=f;var g;n(92604),n(20102);let w=g=class extends h{constructor(e){super(e),this.type="inherited"}clone(){return new g}};(0,i._)([(0,a.J)({inherited:"inherited"})],w.prototype,"type",void 0),w=g=(0,i._)([(0,l.j)("esri.layers.support.InheritedDomain")],w);const b=w;var _;let x=_=class extends h{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new _({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};(0,i._)([(0,s.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,n){t[n]=[this.minValue||0,e]}}}})],x.prototype,"maxValue",void 0),(0,i._)([(0,s.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[0]},write:{target:"range",writer(e,t,n){t[n]=[e,this.maxValue||0]}}}})],x.prototype,"minValue",void 0),(0,i._)([(0,a.J)({range:"range"})],x.prototype,"type",void 0),x=_=(0,i._)([(0,l.j)("esri.layers.support.RangeDomain")],x);const C=x,v={key:"type",base:h,typeMap:{range:x,"coded-value":m,inherited:b}};function I(e){if(!e?.type)return null;switch(e.type){case"range":return C.fromJSON(e);case"codedValue":return m.fromJSON(e);case"inherited":return b.fromJSON(e)}return null}},45574:(e,t,n)=>{n.d(t,{JD:()=>b,Jj:()=>C,sX:()=>Z,Ob:()=>B,rP:()=>R,FV:()=>I,nU:()=>O,Ci:()=>E,Fr:()=>w,HW:()=>z,gG:()=>j,uA:()=>q,SU:()=>T,KE:()=>L,VG:()=>M,tD:()=>S,kp:()=>k,C9:()=>N,rk:()=>D,kZ:()=>G,JY:()=>F,Y5:()=>x,uj:()=>v});var r=n(40330),i=n(9790),o=n(66643),s=n(20102),a=n(35454),l=n(42033),u=n(63213),p=n(14165);async function d(e,t,n){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=c(e));const r=function(e){return c(e)*function(e){return e.capabilities.query.maxRecordCount||2e3}(e)}(e),i=e.capabilities.query.supportsPagination;t.start=0,t.num=r;let o=null;for(;;){const s=await e.source.queryFeaturesJSON(t,n);if(null==o?o=s:o.features=o.features.concat(s.features),o.exceededTransferLimit=s.exceededTransferLimit,!i||!s.exceededTransferLimit)break;t.start+=r}return o}function c(e){return e.capabilities.query.supportsMaxRecordCountFactor?p.Z.MAX_MAX_RECORD_COUNT_FACTOR:1}var h=n(84230),y=n(84382),f=n(81571),m=n(56545),g=n(75935);const w=new a.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function b(e,t,n,r){const i=await P(e);if(await _(e,t,r),!i.addAttachment)throw new s.Z(r,"Layer source does not support addAttachment capability");return i.addAttachment(t,n)}function _(e,t,n){const{attributes:r}=t,{objectIdField:i}=e;return e.capabilities?.data?.supportsAttachment?t?r?i&&r[i]?Promise.resolve():Promise.reject(new s.Z(n,`feature is missing the identifying attribute ${i}`)):Promise.reject(new s.Z(n,"'attributes' are required on a feature to query attachments")):Promise.reject(new s.Z(n,"A feature is required to add/delete/update attachments")):Promise.reject(new s.Z(n,"this layer doesn't support attachments"))}async function x(e,t,n,r,i){const o=await P(e);if(await _(e,t,i),!o.updateAttachment)throw new s.Z(i,"Layer source does not support updateAttachment capability");return o.updateAttachment(t,n,r)}async function C(e,t,r){const{applyEdits:i}=await n.e(4720).then(n.bind(n,14720)),o=await e.load(),{source:s,globalIdField:a}=o;let l=r;return("feature"===o.type?o.infoFor3D:null)&&null!=t.deleteFeatures&&null!=a&&(l={...l,globalIdToObjectId:await z(e,t.deleteFeatures,a)}),i(o,s,t,r)}async function v(e,t,r){const{uploadAssets:i}=await n.e(4720).then(n.bind(n,14720)),o=await e.load();return i(o,o.source,t,r)}async function I(e,t,n,r){const i=await P(e);if(await _(e,t,r),!i.deleteAttachments)throw new s.Z(r,"Layer source does not support deleteAttachments capability");return i.deleteAttachments(t,n)}async function E(e,t,n){const r=(await e.load({signal:t?.signal})).source;if(!r.fetchRecomputedExtents)throw new s.Z(n,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(t)}async function T(e,t,n,r){t=m.Z.from(t),await e.load();const i=e.source,o=e.capabilities;if(!o?.data?.supportsAttachment)throw new s.Z(r,"this layer doesn't support attachments");const{attachmentTypes:a,objectIds:l,globalIds:u,num:p,size:d,start:c,where:h}=t;if(!o?.operations?.supportsQueryAttachments&&(a?.length>0||u?.length>0||d?.length>0||p||c||h))throw new s.Z(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(l?.length||u?.length||h))throw new s.Z(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!i.queryAttachments)throw new s.Z(r,"Layer source does not support queryAttachments capability",t);return i.queryAttachments(t)}async function S(e,t,n,r){const i=await P(e);if(!i.queryObjectIds)throw new s.Z(r,"Layer source does not support queryObjectIds capability");return i.queryObjectIds(p.Z.from(t)??e.createQuery(),n)}async function M(e,t,n,r){const i=await P(e);if(!i.queryFeatureCount)throw new s.Z(r,"Layer source does not support queryFeatureCount capability");return i.queryFeatureCount(p.Z.from(t)??e.createQuery(),n)}async function L(e,t,n,r){const i=await P(e);if(!i.queryExtent)throw new s.Z(r,"Layer source does not support queryExtent capability");return i.queryExtent(p.Z.from(t)??e.createQuery(),n)}async function k(e,t,n,r){const i=await P(e);if(!i.queryRelatedFeatures)throw new s.Z(r,"Layer source does not support queryRelatedFeatures capability");return i.queryRelatedFeatures(g.default.from(t),n)}async function N(e,t,n,r){const i=await P(e);if(!i.queryRelatedFeaturesCount)throw new s.Z(r,"Layer source does not support queryRelatedFeaturesCount capability");return i.queryRelatedFeaturesCount(g.default.from(t),n)}async function j(e){const t=e.source;if(t?.refresh)try{const{dataChanged:n,updates:r}=await t.refresh();if(null!=r&&(e.sourceJSON={...e.sourceJSON,...r},e.read(r,{origin:"service",url:e.parsedUrl})),n)return!0}catch{}if(e.definitionExpression)try{return(await(0,l.E)(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function R(e){const t=new p.Z,n=e.capabilities?.data,r=e.capabilities?.query;t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,r&&(t.compactGeometryEnabled=r.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),n&&(n.supportsZ&&null!=e.returnZ&&(t.returnZ=e.returnZ),n.supportsM&&null!=e.returnM&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:i,timeExtent:o}=e;return t.timeExtent=null!=i&&null!=o?o.offset(-i.value,i.unit):o||null,t.multipatchOption="multipatch"===e.geometryType?"xyFootprint":null,t}function D(e){const{globalIdField:t,fields:n}=e;if(t)return t;if(n)for(const e of n)if("esriFieldTypeGlobalID"===e.type)return e.name}function G(e){const{objectIdField:t,fields:n}=e;if(t)return t;if(n)for(const e of n)if("esriFieldTypeOID"===e.type)return e.name}function F(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}async function P(e){return(await e.load()).source}async function O(e,t,n){const i=e.parsedUrl?.path;i&&e.authenticationTriggerEvent===t&&await async function(e,t){if(!r.id)return;if(r.id.findCredential(e))return;let n;try{const i=await(0,h.oP)(e,t);i&&(n=await r.id.checkSignInStatus(`${i}/sharing`))}catch(e){}if(n)try{const n=null!=t?t.signal:null;await r.id.getCredential(e,{signal:n})}catch(e){}}(i,n)}function Z(e){return!e.sourceJSON?.isMultiServicesView&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const A=(0,u.d)({types:i.QT});function B(e,t){if(e.defaultSymbol)return e.types?.length?new f.Z({defaultSymbol:A(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map((e=>({id:e.id,symbol:A(e.symbol,e,t)})))}):new y.Z({symbol:A(e.defaultSymbol,e,t)})}function q(e){let t=e.sourceJSON?.cacheMaxAge;if(!t)return!1;const n=e.editingInfo?.lastEditDate?.getTime();return null==n||(t*=1e3,Date.now()-n<t)}async function z(e,t,n){if(null==t)return null;const r=[],{objectIdField:i}=e;if(t.forEach((e=>{let t=null;if("attributes"in e){const{attributes:r}=e;t={globalId:r[n],objectId:null!=r[i]&&-1!==r[i]?r[i]:null}}else t={globalId:e.globalId,objectId:null!=e.objectId&&-1!==e.objectId?e.objectId:null};null!=t.globalId&&(null!=t.objectId&&-1!==t.objectId||r.push(t.globalId))})),0===r.length)return null;const s=e.createQuery();s.where=r.map((e=>`${n}='${e}'`)).join(" OR "),s.returnGeometry=!1,s.outFields=[i,n],s.cacheHint=!1;const a=await(0,o.mt)(d(e,s));if(!a.ok)return null;const l=new Map,u=a.value.features;for(const e of u){const t=e.attributes[n],r=e.attributes[i];null!=t&&null!=r&&-1!==r&&l.set(t,r)}return l}},53518:(e,t,n)=>{n.d(t,{v:()=>l});var r=n(80442),i=n(92604),o=n(1231),s=n(99514),a=n(35671);function l(){return{fields:{type:[o.Z],value:null,set:function(e){if(e&&(0,r.Z)("big-integer-warning-enabled")){const t=e.filter((e=>"big-integer"===e.type||"oid"===e.type&&(e.length||0)>=8));if(t.length){const e=t.map((e=>`'${e.name}'`)).join(", ");i.Z.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${e}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return s.Z.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e?.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e){const n=this.fieldsIndex?.has(t);n||i.Z.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e})}return(0,a.Q0)(this.fieldsIndex,e)}}}}},8813:(e,t,n)=>{n.d(t,{UO:()=>m,YI:()=>f,dI:()=>g,el:()=>C,hV:()=>y,z7:()=>h});var r=n(19153);const i="__begin__",o="__end__",s=new RegExp(i,"ig"),a=new RegExp(o,"ig"),l=new RegExp("^"+i,"i"),u=new RegExp(o+"$","i"),p='"',d=p+" + ",c=" + "+p;function h(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function y(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=function(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}(e.labelExpression),t.type="conventional"),t}function f(e){const t=y(e);if(!t)return null;switch(t.type){case"conventional":return g(t.expression);case"arcade":return t.expression}return null}function m(e){const t=y(e);if(!t)return null;switch(t.type){case"conventional":return function(e){const t=e?.match(w);return t?.[1].trim()||null}(t.expression);case"arcade":return C(t.expression)}return null}function g(e){let t;return e?(t=(0,r.gx)(e,(e=>i+'$feature["'+e+'"]'+o)),t=l.test(t)?t.replace(l,""):p+t,t=u.test(t)?t.replace(u,""):t+p,t=t.replaceAll(s,d).replaceAll(a,c)):t='""',t}const w=/^\s*\{([^}]+)\}\s*$/i,b=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,_=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,x=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function C(e){if(!e)return null;let t=b.exec(e)||_.exec(e);return t?t[1]||t[3]:(t=x.exec(e),t?t[2]:null)}},99282:(e,t,n)=>{n.d(t,{a:()=>o});var r=n(67900),i=n(68441);const o={unknown:1,inches:(0,r.En)(1,"meters","inches"),feet:(0,r.En)(1,"meters","feet"),"us-feet":(0,r.En)(1,"meters","us-feet"),yards:(0,r.En)(1,"meters","yards"),miles:(0,r.En)(1,"meters","miles"),"nautical-miles":(0,r.En)(1,"meters","nautical-miles"),millimeters:(0,r.En)(1,"meters","millimeters"),centimeters:(0,r.En)(1,"meters","centimeters"),decimeters:(0,r.En)(1,"meters","decimeters"),meters:(0,r.En)(1,"meters","meters"),kilometers:(0,r.En)(1,"meters","kilometers"),"decimal-degrees":1/(0,r.ty)(1,"meters",i.sv.radius)}},56545:(e,t,n)=>{n.d(t,{Z:()=>c});var r,i=n(43697),o=n(96674),s=n(22974),a=n(5600),l=n(75215),u=n(52011),p=n(30556);let d=r=class extends o.wq{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new r((0,s.d9)({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};(0,i._)([(0,a.Cb)({type:[String],json:{write:!0}})],d.prototype,"attachmentTypes",void 0),(0,i._)([(0,a.Cb)({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],d.prototype,"attachmentsWhere",void 0),(0,i._)([(0,a.Cb)({type:Boolean,json:{write:!0}})],d.prototype,"cacheHint",void 0),(0,i._)([(0,a.Cb)({type:[String],json:{write:!0}})],d.prototype,"keywords",void 0),(0,i._)([(0,a.Cb)({type:[Number],json:{write:!0}})],d.prototype,"globalIds",void 0),(0,i._)([(0,a.Cb)({json:{write:!0}})],d.prototype,"name",void 0),(0,i._)([(0,a.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],d.prototype,"num",void 0),(0,i._)([(0,a.Cb)({type:[Number],json:{write:!0}})],d.prototype,"objectIds",void 0),(0,i._)([(0,a.Cb)({type:Boolean,json:{default:!1,write:!0}})],d.prototype,"returnMetadata",void 0),(0,i._)([(0,a.Cb)({type:[Number],json:{write:!0}})],d.prototype,"size",void 0),(0,i._)([(0,a.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],d.prototype,"start",void 0),(0,i._)([(0,p.c)("start"),(0,p.c)("num")],d.prototype,"writeStart",null),(0,i._)([(0,a.Cb)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],d.prototype,"where",void 0),d=r=(0,i._)([(0,u.j)("esri.rest.support.AttachmentQuery")],d),d.from=(0,l.se)(d);const c=d},74889:(e,t,n)=>{n.d(t,{Z:()=>b});var r,i=n(43697),o=n(66577),s=n(38171),a=n(35454),l=n(96674),u=n(22974),p=n(5600),d=(n(75215),n(71715)),c=n(52011),h=n(30556),y=n(82971),f=n(33955),m=n(1231);const g=new a.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let w=r=class extends l.wq{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const n=y.Z.fromJSON(t.spatialReference),r=[];for(let t=0;t<e.length;t++){const i=e[t],o=s.Z.fromJSON(i),a=i.geometry?.spatialReference;null==o.geometry||a||(o.geometry.spatialReference=n);const l=i.aggregateGeometries,u=o.aggregateGeometries;if(l&&null!=u)for(const e in u){const t=u[e],r=l[e],i=r?.spatialReference;null==t||i||(t.spatialReference=n)}r.push(o)}return r}writeGeometryType(e,t,n,r){if(e)return void g.write(e,t,n,r);const{features:i}=this;if(i)for(const e of i)if(null!=e?.geometry)return void g.write(e.geometry.type,t,n,r)}readQueryGeometry(e,t){if(!e)return null;const n=!!e.spatialReference,r=(0,f.im)(e);return r&&!n&&t.spatialReference&&(r.spatialReference=y.Z.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:n}=this;if(n)for(const e of n)if(e&&null!=e.geometry&&e.geometry.spatialReference)return void(t.spatialReference=e.geometry.spatialReference.toJSON())}clone(){return new r(this.cloneProperties())}cloneProperties(){return(0,u.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let n=0;n<t.features.length;n++){const r=t.features[n];if(r.geometry){const t=e?.[n];r.geometry=t?.toJSON()||r.geometry}}return t}quantize(e){const{scale:[t,n],translate:[r,i]}=e,o=this.features,s=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-r)/t)),(e=>Math.round((i-e)/n)));for(let e=0,t=o.length;e<t;e++)s?.(o[e].geometry)||(o.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:n}=this;if(!n)return this;const{translate:[r,i],scale:[o,s]}=n;let a=null,l=null;if(this.hasZ&&null!=n?.scale?.[2]){const{translate:[,,e],scale:[,,t]}=n;a=n=>n*t+e}if(this.hasM&&null!=n?.scale?.[3]){const{translate:[,,,e],scale:[,,,t]}=n;l=n=>null==n?n:n*t+e}const u=this._getHydrationFunction(e,(e=>e*o+r),(e=>i-e*s),a,l);for(const{geometry:e}of t)null!=e&&u&&u(e);return this.transform=null,this}_quantizePoints(e,t,n){let r,i;const o=[];for(let s=0,a=e.length;s<a;s++){const a=e[s];if(s>0){const e=t(a[0]),s=n(a[1]);e===r&&s===i||(o.push([e-r,s-i]),r=e,i=s)}else r=t(a[0]),i=n(a[1]),o.push([r,i])}return o.length>0?o:null}_getQuantizationFunction(e,t,n){return"point"===e?e=>(e.x=t(e.x),e.y=n(e.y),e):"polyline"===e||"polygon"===e?e=>{const r=(0,f.oU)(e)?e.rings:e.paths,i=[];for(let e=0,o=r.length;e<o;e++){const o=r[e],s=this._quantizePoints(o,t,n);s&&i.push(s)}return i.length>0?((0,f.oU)(e)?e.rings=i:e.paths=i,e):null}:"multipoint"===e?e=>{const r=this._quantizePoints(e.points,t,n);return r&&r.length>0?(e.points=r,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,n,r,i){return"point"===e?e=>{e.x=t(e.x),e.y=n(e.y),r&&(e.z=r(e.z))}:"polyline"===e||"polygon"===e?e=>{const o=(0,f.oU)(e)?e.rings:e.paths;let s,a;for(let e=0,r=o.length;e<r;e++){const r=o[e];for(let e=0,i=r.length;e<i;e++){const i=r[e];e>0?(s+=i[0],a+=i[1]):(s=i[0],a=i[1]),i[0]=t(s),i[1]=n(a)}}if(r&&i)for(let e=0,t=o.length;e<t;e++){const t=o[e];for(let e=0,n=t.length;e<n;e++){const n=t[e];n[2]=r(n[2]),n[3]=i(n[3])}}else if(r)for(let e=0,t=o.length;e<t;e++){const t=o[e];for(let e=0,n=t.length;e<n;e++){const n=t[e];n[2]=r(n[2])}}else if(i)for(let e=0,t=o.length;e<t;e++){const t=o[e];for(let e=0,n=t.length;e<n;e++){const n=t[e];n[2]=i(n[2])}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=n(e.ymin),e.xmax=t(e.xmax),e.ymax=n(e.ymax),r&&null!=e.zmax&&null!=e.zmin&&(e.zmax=r(e.zmax),e.zmin=r(e.zmin)),i&&null!=e.mmax&&null!=e.mmin&&(e.mmax=i(e.mmax),e.mmin=i(e.mmin))}:"multipoint"===e?e=>{const o=e.points;let s,a;for(let e=0,r=o.length;e<r;e++){const r=o[e];e>0?(s+=r[0],a+=r[1]):(s=r[0],a=r[1]),r[0]=t(s),r[1]=n(a)}if(r&&i)for(let e=0,t=o.length;e<t;e++){const t=o[e];t[2]=r(t[2]),t[3]=i(t[3])}else if(r)for(let e=0,t=o.length;e<t;e++){const t=o[e];t[2]=r(t[2])}else if(i)for(let e=0,t=o.length;e<t;e++){const t=o[e];t[2]=i(t[2])}}:null}};(0,i._)([(0,p.Cb)({type:String,json:{write:!0}})],w.prototype,"displayFieldName",void 0),(0,i._)([(0,p.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],w.prototype,"exceededTransferLimit",void 0),(0,i._)([(0,p.Cb)({type:[s.Z],json:{write:!0}})],w.prototype,"features",void 0),(0,i._)([(0,d.r)("features")],w.prototype,"readFeatures",null),(0,i._)([(0,p.Cb)({type:[m.Z],json:{write:!0}})],w.prototype,"fields",void 0),(0,i._)([(0,p.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:g.read}}})],w.prototype,"geometryType",void 0),(0,i._)([(0,h.c)("geometryType")],w.prototype,"writeGeometryType",null),(0,i._)([(0,p.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],w.prototype,"hasM",void 0),(0,i._)([(0,p.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],w.prototype,"hasZ",void 0),(0,i._)([(0,p.Cb)({types:o.qM,json:{write:!0}})],w.prototype,"queryGeometry",void 0),(0,i._)([(0,d.r)("queryGeometry")],w.prototype,"readQueryGeometry",null),(0,i._)([(0,p.Cb)({type:y.Z,json:{write:!0}})],w.prototype,"spatialReference",void 0),(0,i._)([(0,h.c)("spatialReference")],w.prototype,"writeSpatialReference",null),(0,i._)([(0,p.Cb)({json:{write:!0}})],w.prototype,"transform",void 0),w=r=(0,i._)([(0,c.j)("esri.rest.support.FeatureSet")],w),w.prototype.toJSON.isDefaultToJSON=!0;const b=w},75935:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var r,i=n(43697),o=(n(66577),n(96674)),s=n(22974),a=n(5600),l=n(75215),u=n(52011),p=n(30556),d=n(10158),c=n(82971);let h=r=class extends o.wq{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&null==this.where&&(t.definitionExpression="1=1")}clone(){return new r((0,s.d9)({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};(0,i._)([(0,a.Cb)({type:Boolean,json:{write:!0}})],h.prototype,"cacheHint",void 0),(0,i._)([(0,a.Cb)({type:d.n,json:{write:!0}})],h.prototype,"dynamicDataSource",void 0),(0,i._)([(0,a.Cb)({type:String,json:{write:!0}})],h.prototype,"gdbVersion",void 0),(0,i._)([(0,a.Cb)({type:Number,json:{write:!0}})],h.prototype,"geometryPrecision",void 0),(0,i._)([(0,a.Cb)({type:Date})],h.prototype,"historicMoment",void 0),(0,i._)([(0,p.c)("historicMoment")],h.prototype,"_writeHistoricMoment",null),(0,i._)([(0,a.Cb)({type:Number,json:{write:!0}})],h.prototype,"maxAllowableOffset",void 0),(0,i._)([(0,a.Cb)({type:[Number],json:{write:!0}})],h.prototype,"objectIds",void 0),(0,i._)([(0,a.Cb)({type:[String],json:{write:!0}})],h.prototype,"orderByFields",void 0),(0,i._)([(0,a.Cb)({type:[String],json:{write:!0}})],h.prototype,"outFields",void 0),(0,i._)([(0,a.Cb)({type:c.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],h.prototype,"outSpatialReference",void 0),(0,i._)([(0,a.Cb)({json:{write:!0}})],h.prototype,"relationshipId",void 0),(0,i._)([(0,a.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],h.prototype,"start",void 0),(0,i._)([(0,p.c)("start"),(0,p.c)("num")],h.prototype,"writeStart",null),(0,i._)([(0,a.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],h.prototype,"num",void 0),(0,i._)([(0,a.Cb)({json:{write:!0}})],h.prototype,"returnGeometry",void 0),(0,i._)([(0,a.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],h.prototype,"returnM",void 0),(0,i._)([(0,a.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],h.prototype,"returnZ",void 0),(0,i._)([(0,a.Cb)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],h.prototype,"where",void 0),h=r=(0,i._)([(0,u.j)("esri.rest.support.RelationshipQuery")],h),h.from=(0,l.se)(h);const y=h},11282:(e,t,n)=>{n.d(t,{cv:()=>a,en:()=>s,lA:()=>o}),n(68773),n(40330);var r=n(22974),i=n(17452);function o(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function s(e){return"string"==typeof e?(0,i.mN)(e):(0,r.d9)(e)}function a(e,t,n){const r={};for(const i in e){if("declaredClass"===i)continue;const o=e[i];if(null!=o&&"function"!=typeof o)if(Array.isArray(o)){r[i]=[];for(let e=0;e<o.length;e++)r[i][e]=a(o[e])}else if("object"==typeof o)if(o.toJSON){const e=o.toJSON(n?.[i]);r[i]=t?e:JSON.stringify(e)}else r[i]=t?o:JSON.stringify(o);else r[i]=o}return r}n(71058)},32163:(e,t,n)=>{n.d(t,{eZ:()=>u});var r=n(51773),i=n(35671),o=n(84649),s=(n(63801),n(48074),n(38745),n(9190)),a=(n(10214),n(71423),n(44951),n(422)),l=n(29986);function u({displayField:e,editFieldsInfo:t,fields:n,objectIdField:l,title:u},h){if(!n)return null;const f=function(e,t){const n=t?.visibleFieldNames;return function(e,t){const n=e;return t&&(e=e.filter((e=>!t.includes(e.type)))),e===n&&(e=e.slice()),e.sort(d),e}(e.fields??[],t?.ignoreFieldTypes||y).map((t=>new a.Z({fieldName:t.name,isEditable:(0,i.Hp)(t,e),label:t.alias,format:c(t),visible:p(t,{...e,visibleFieldNames:n})})))}({editFieldsInfo:t,fields:n,objectIdField:l},h);if(!f.length)return null;const m=function(e){const t=(0,i.O5)(e),{titleBase:n}=e;return t?`${n}: {${t.trim()}}`:n??""}({titleBase:u,fields:n,displayField:e}),g=[new s.Z,new o.Z];return new r.Z({title:m,content:g,fieldInfos:f})}const p=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):(0,i.Fv)(e,t);function d(e,t){return"oid"===e.type?-1:"oid"===t.type?1:h(e)?-1:h(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function c(e){switch(e.type){case"small-integer":case"integer":case"single":return new l.Z({digitSeparator:!0,places:0});case"double":return new l.Z({digitSeparator:!0,places:2});case"string":return(0,i.Ec)(e.name)?new l.Z({digitSeparator:!0,places:0}):null;default:return null}}function h(e){return"name"===(e.name&&e.name.toLowerCase())||"name"===(e.alias&&e.alias.toLowerCase())}const y=["geometry","blob","raster","guid","xml"]},86787:(e,t,n)=>{n.d(t,{Z:()=>_});var r,i=n(43697),o=n(35454),s=n(96674),a=n(70586),l=n(5600),u=(n(75215),n(67676),n(80442),n(71715)),p=n(52011),d=n(30556),c=n(35671);let h=r=class extends s.wq{constructor(e){super(e)}async collectRequiredFields(e,t){return(0,c.io)(e,t,this.expression)}clone(){return new r({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],h.prototype,"expression",void 0),(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],h.prototype,"title",void 0),h=r=(0,i._)([(0,p.j)("esri.layers.support.FeatureExpressionInfo")],h);const y=h;var f,m=n(12541);const g=(0,o.w)()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),w=new o.X({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let b=f=class extends s.wq{constructor(e){super(e),this.offset=null}readFeatureExpressionInfo(e,t){return null!=e?e:t.featureExpression&&0===t.featureExpression.value?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,t,n,r){t[n]=e.write({},r),"0"===e.expression&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):null!=e||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new f({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&(0,a._W)(this.featureExpressionInfo,e.featureExpressionInfo)}};(0,i._)([(0,l.Cb)({type:y,json:{write:!0}})],b.prototype,"featureExpressionInfo",void 0),(0,i._)([(0,u.r)("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],b.prototype,"readFeatureExpressionInfo",null),(0,i._)([(0,d.c)("featureExpressionInfo",{featureExpressionInfo:{type:y},"featureExpression.value":{type:[0]}})],b.prototype,"writeFeatureExpressionInfo",null),(0,i._)([(0,l.Cb)({type:g.apiValues,nonNullable:!0,json:{type:g.jsonValues,read:g.read,write:{writer:g.write,isRequired:!0}}})],b.prototype,"mode",null),(0,i._)([(0,l.Cb)({type:Number,json:{write:!0}})],b.prototype,"offset",void 0),(0,i._)([(0,l.Cb)({type:m.f9,json:{type:String,read:w.read,write:w.write}})],b.prototype,"unit",null),b=f=(0,i._)([(0,p.j)("esri.layers.support.ElevationInfo")],b);const _=b},28412:(e,t,n)=>{n.d(t,{CJ:()=>u,Rz:()=>d,xA:()=>l,z3:()=>p}),n(80442);var r=n(20256),i=n(4095),o=n(77987),s=n(78724),a=n(58333);const l=o.Z.fromJSON(a.I4),u=i.Z.fromJSON(a.ET),p=r.Z.fromJSON(a.lF),d=s.Z.fromJSON(a.qP);o.Z.fromJSON(a.eG),i.Z.fromJSON(a.wW),r.Z.fromJSON(a.lj)},58333:(e,t,n)=>{n.d(t,{ET:()=>o,I4:()=>i,eG:()=>l,lF:()=>s,lj:()=>p,qP:()=>a,wW:()=>u});const r=[252,146,31,255],i={type:"esriSMS",style:"esriSMSCircle",size:6,color:r,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},o={type:"esriSLS",style:"esriSLSSolid",width:.75,color:r},s={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},a={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},l={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},u={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},p={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},12541:(e,t,n)=>{n.d(t,{Z7:()=>i,f9:()=>o});var r=n(99282);function i(e){return 1/(r.a[e]||1)}const o=function(){const e=Object.keys(r.a);return e.sort(),e}()},65242:(e,t,n)=>{n.d(t,{a:()=>i,b:()=>o});var r=n(75215);function i(e){const t=(0,r.vU)(100*(1-e));return Math.max(0,Math.min(t,100))}function o(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}}}]);