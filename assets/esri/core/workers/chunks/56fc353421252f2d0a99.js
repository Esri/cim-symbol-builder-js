"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[7159,8342],{92288:(e,t,r)=>{r.r(t),r.d(t,{registerFunctions:()=>J});var n=r(92602),o=(r(59456),r(47609)),i=r(66395),s=r(85935),a=r(78878),l=r(80672),c=r(91075),u=r(57251),p=r(28735),f=r(20655),d=r(80812),h=r(78888),m=r(56507),y=r(65864),g=r(2272),v=r(92300),w=r(90237),S=r(25482),A=r(10107),R=(r(44208),r(53966),r(87811),r(40608)),x=r(21325);let _=class extends S.A{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map((e=>e.toJSON())),t=this.geometries[0],r={};return r.outSR=(0,x.YX)(this.outSpatialReference),r.inSR=(0,x.YX)(t.spatialReference),r.geometries=JSON.stringify({geometryType:(0,y.$B)(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(r.transformForward=this.transformForward),r}};(0,w._)([(0,A.MZ)()],_.prototype,"geometries",void 0),(0,w._)([(0,A.MZ)({json:{read:{source:"outSR"}}})],_.prototype,"outSpatialReference",void 0),(0,w._)([(0,A.MZ)()],_.prototype,"transformation",void 0),(0,w._)([(0,A.MZ)()],_.prototype,"transformForward",void 0),_=(0,w._)([(0,R.$)("esri.rest.support.ProjectParameters")],_);const P=_,G=(0,m.dp)(P);var b=r(25927),$=r(42538),M=r(40662),N=r(42095),j=r(23150),I=r(16930),O=r(54218);let k=null;async function T(e){const t=n.A.geometryServiceUrl??"";if(!t){(0,u.isLoaded)()||await(0,u.load)();for(const t of e)t.container[t.indexer]=(0,u.project)(t.container[t.indexer],I.A.WGS84);return}const r=e.map((e=>e.container[e.indexer])),o=new P({geometries:r,outSpatialReference:I.A.WGS84}),i=await async function(e,t){t=G(t);const r=(0,g.Dl)(e),n={...r.query,f:"json",...t.toJSON()},o=t.outSpatialReference,i=(0,y.$B)(t.geometries[0]),s=(0,g.jV)(n,void 0);return(0,h.A)(r.path+"/project",s).then((({data:{geometries:e}})=>(0,v.V)(e,i,o)))}(t,o);for(let t=0;t<i.length;t++){const r=e[t];r.container[r.indexer]=i[t]}}async function D(e,t){const n=new d.default({portal:e,id:t});return await n.load(),null===k&&(k=await r.e(1402).then(r.bind(r,71402))),await k.fetchKnowledgeGraph(n.url)}function Z(e,t,r,n,o){if(null===e)return null;if((0,O.Kg)(e)||(0,O.Et)(e))return e;if((0,a.g)(e))return e.toJSDate();if((0,a.g)(e))return e.toJSDate();if((0,a.j)(e))return e.toStorageFormat();if((0,a.k)(e))return e.toStorageString();if((0,a.q)(e)){const i={};for(const s of e.keys())i[s]=Z(e.field(s),t,r,n,o),i[s]instanceof c.A&&o.push({container:i,indexer:s});return i}if((0,O.cy)(e)){const i=e.map((e=>Z(e,t,r,n,o)));for(let e=0;e<i.length;e++)i[e]instanceof c.A&&o.push({container:i,indexer:e});return i}return(0,a.l)(e)?e.spatialReference.isWGS84?e:e.spatialReference.isWebMercator&&t?(0,p.ci)(e):e:void 0}function q(e,t){if(!e)return null;const r={};for(const n in e)r[n]=F(e[n],t);return r}function F(e,t){return null===e?null:(0,O.cy)(e)?e.map((e=>F(e,t))):e instanceof b.A?{graphTypeName:e.typeName,id:e.id,graphType:"entity",properties:q(e.properties,t)}:e instanceof M.A?{graphType:"object",properties:q(e.properties,t)}:e instanceof j.A?{graphTypeName:e.typeName,id:e.id,graphType:"relationship",originId:e.originId??null,destinationId:e.destinationId??null,properties:q(e.properties,t)}:e instanceof N.A?{graphType:"path",path:e.path?e.path.map((e=>F(e,t))):null}:(0,a.l)(e)?function(e,t){if(!e)return e;if(e.spatialReference.isWGS84&&t.spatialReference.isWebMercator)return(0,p.Gh)(e);if(e.spatialReference.equals(t.spatialReference))return e;throw new s.D$(t,s.TX.WrongSpatialReference,null)}(e,t):(0,O.Kg)(e)||(0,O.Et)(e)||(0,O.$P)(e)?e:null}function J(e){"async"===e.mode&&(e.functions.knowledgegraphbyportalitem=function(t,r){return e.standardFunctionAsync(t,r,((e,n,i)=>{if((0,a.B)(i,2,2,t,r),null===i[0])throw new s.D$(t,s.TX.PortalRequired,r);if(i[0]instanceof o.A){const e=(0,a.f)(i[1]);let r;return r=t.services?.portal?t.services.portal:f.A.getDefault(),D((0,l.R)(i[0],r),e)}if(!1===(0,O.Kg)(i[0]))throw new s.D$(t,s.TX.InvalidParameter,r);const c=(0,a.f)(i[0]);return D(t.services?.portal??f.A.getDefault(),c)}))},e.signatures.push({name:"knowledgegraphbyportalitem",min:2,max:2}),e.functions.querygraph=function(t,n){return e.standardFunctionAsync(t,n,(async(e,o,l)=>{(0,a.B)(l,2,4,t,n);const c=l[0];if(!(0,a.r)(c))throw new s.D$(t,s.TX.InvalidParameter,n);const u=l[1];if(!(0,O.Kg)(u))throw new s.D$(t,s.TX.InvalidParameter,n);null===k&&(k=await r.e(1402).then(r.bind(r,71402)));let p=null;const f=(0,a.E)(l[2],null);if(!(f instanceof i.A||null===f))throw new s.D$(t,s.TX.InvalidParameter,n);if(f){let e=[];p=Z(f,!0,!1,t,e),e=e.filter((e=>!e.container[e.indexer].spatialReference.isWGS84)),e.length>0&&await T(e)}const d=new $.A({openCypherQuery:u,bindParameters:p});(c?.serviceDefinition?.currentVersion??11.3)>11.2&&(d.outputSpatialReference=t.spatialReference);const h=(await k.executeQueryStreaming(c,d)).resultRowsStream.getReader(),m=[];try{for(;;){const{done:e,value:r}=await h.read();if(e)break;if((0,O.cy)(r))for(const e of r)m.push(F(e,t));else{const e=[];for(const n of r)e.push(F(r[n],t));m.push(e)}}}catch(e){throw e}return i.A.convertJsonToArcade(m,(0,a.H)(t),!1,!0)}))},e.signatures.push({name:"querygraph",min:2,max:4}))}},80672:(e,t,r)=>{r.d(t,{R:()=>o});var n=r(20655);function o(e,t){return null===e?t:new n.A({url:e.field("url")})}},97159:(e,t,r)=>{r.d(t,{M:()=>v,a:()=>y,b:()=>S,e:()=>h,f:()=>s,i:()=>f,p:()=>d,r:()=>l,t:()=>a,w:()=>c});var n=r(70333),o=r(84952),i=r(39131);function s(e,t){const r=t?.url?.path;if(e&&r&&(e=(0,o.s2)(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const r=(0,o.V1)(e,t.portalItem.itemUrl);null!=r&&p.test(r)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(r).path)}return(e=m(e,t?.portal))&&u.test(e)?y(e):e}function a(e,t,r=v.YES){if(null==(e=e&&u.test(e)?g(e):e))return e;!(0,o.oP)(e)&&t?.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let n=(0,o.s2)(e);if(t){const r=t.verifyItemRelativeUrls?.rootPath||t.url?.path;if(r){const i=m(r,t.portal),s=m(n,t.portal);n=(0,o.V1)(s,i,i),null!=n&&n!==s&&n!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(n)}}return n=h(n,t?.portal),(0,o.oP)(n)&&(n=(0,o.S8)(n)),t?.resources&&t?.portalItem&&!(0,o.oP)(n)&&!(0,o.DB)(n)&&r===v.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(n),compress:!1}),n}function l(e,t,r){return s(e,r)}function c(e,t,r,n){const o=a(e,n);void 0!==o&&(t[r]=o)}const u=/\/items\/([^/]+)\/resources\/(.*)/,p=/^\.\/resources\//;function f(e){const t=e?.match(u)??null;return t?.[1]??null}function d(e){const t=e?.match(u)??null;if(null==t)return null;const r=t[2],n=r.lastIndexOf("/");if(-1===n){const{path:e,extension:t}=(0,o.xw)(r);return{prefix:null,filename:e,extension:t}}const{path:i,extension:s}=(0,o.xw)(r.slice(n+1));return{prefix:r.slice(0,n),filename:i,extension:s}}function h(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?(0,o.T1)(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function m(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`,n=(0,o.Xq)();return(0,o.FX)(n,`${n.scheme}://${r}`)?(0,o.T1)(e,t.portalHostname,r):(0,o.T1)(e,r,t.portalHostname)}function y(e){if(!e)return e||null;let t=e;return t&&n.id&&!n.id.findCredential(t)&&(t=(0,i.qG)(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function g(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&n.id&&!n.id.findCredential(t)&&(t=(0,i.qG)(t)),t}var v,w;(w=v||(v={}))[w.YES=0]="YES",w[w.NO=1]="NO";const S=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return v},ensureMainOnlineDomain:h,fromCDNUrl:g,fromJSON:s,itemIdFromResourceUrl:f,prefixAndFilenameFromResourceUrl:d,read:l,toCDNUrl:y,toJSON:a,write:c},Symbol.toStringTag,{value:"Module"}))},92300:(e,t,r)=>{r.d(t,{V:()=>i,X:()=>o});var n=r(65864);function o(e){return{geometryType:(0,n.$B)(e[0]),geometries:e.map((e=>e.toJSON()))}}function i(e,t,r){const o=(0,n.xD)(t);return e.map((e=>{const t=o.fromJSON(e);return t.spatialReference=r,t}))}},25927:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(90237),o=(r(59456),r(10107)),i=(r(44208),r(53966),r(87811),r(40608)),s=r(54238),a=r(86738);let l=class extends s.A{constructor(e){super(e),this.layoutGeometry=null}};(0,n._)([(0,o.MZ)({type:a.A,json:{write:!0}})],l.prototype,"layoutGeometry",void 0),l=(0,n._)([(0,i.$)("esri.rest.knowledgeGraph.Entity")],l);const c=l},54238:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(90237),o=r(10107),i=(r(44208),r(53966),r(87811),r(40608)),s=r(77901);let a=class extends s.A{constructor(e){super(e),this.typeName=null,this.id=null}};(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],a.prototype,"typeName",void 0),(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],a.prototype,"id",void 0),a=(0,n._)([(0,i.$)("esri.rest.knowledgeGraph.GraphNamedObject")],a);const l=a},77901:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(90237),o=r(25482),i=r(10107),s=(r(44208),r(53966),r(87811),r(40608));let a=class extends o.A{constructor(e){super(e),this.properties=null}};(0,n._)([(0,i.MZ)({json:{write:!0}})],a.prototype,"properties",void 0),a=(0,n._)([(0,s.$)("esri.rest.knowledgeGraph.GraphObject")],a);const l=a},42538:(e,t,r)=>{r.d(t,{A:()=>u});var n=r(90237),o=r(10107),i=(r(44208),r(53966),r(87811),r(40608)),s=r(69622);let a=class extends s.A{constructor(e){super(e),this.openCypherQuery=""}};(0,n._)([(0,o.MZ)()],a.prototype,"openCypherQuery",void 0),a=(0,n._)([(0,i.$)("esri.rest.knowledgeGraph.GraphQuery")],a);const l=a;let c=class extends l{constructor(e){super(e),this.bindParameters=null,this.bindGeometryQuantizationParameters=null,this.outputQuantizationParameters=null,this.outputSpatialReference=null,this.provenanceBehavior=null}};(0,n._)([(0,o.MZ)()],c.prototype,"bindParameters",void 0),(0,n._)([(0,o.MZ)()],c.prototype,"bindGeometryQuantizationParameters",void 0),(0,n._)([(0,o.MZ)()],c.prototype,"outputQuantizationParameters",void 0),(0,n._)([(0,o.MZ)()],c.prototype,"outputSpatialReference",void 0),(0,n._)([(0,o.MZ)()],c.prototype,"provenanceBehavior",void 0),c=(0,n._)([(0,i.$)("esri.rest.knowledgeGraph.GraphQueryStreaming")],c);const u=c},40662:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(90237),o=(r(53966),r(44208),r(87811),r(49186),r(40608)),i=r(77901);let s=class extends i.A{constructor(e){super(e)}};s=(0,n._)([(0,o.$)("esri.rest.knowledgeGraph.ObjectValue")],s);const a=s},42095:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(90237),o=r(25482),i=r(10107),s=(r(44208),r(53966),r(87811),r(40608)),a=r(77901);let l=class extends o.A{constructor(e){super(e),this.path=null}};(0,n._)([(0,i.MZ)({type:[a.A],json:{write:!0}})],l.prototype,"path",void 0),l=(0,n._)([(0,s.$)("esri.rest.knowledgeGraph.Path")],l);const c=l},23150:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(90237),o=(r(59456),r(10107)),i=(r(44208),r(53966),r(87811),r(40608)),s=r(54238),a=r(82799);let l=class extends s.A{constructor(e){super(e),this.originId=null,this.destinationId=null,this.layoutGeometry=null}};(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],l.prototype,"originId",void 0),(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],l.prototype,"destinationId",void 0),(0,n._)([(0,o.MZ)({type:a.A,json:{write:!0}})],l.prototype,"layoutGeometry",void 0),l=(0,n._)([(0,i.$)("esri.rest.knowledgeGraph.Relationship")],l);const c=l},2272:(e,t,r)=>{r.d(t,{Dl:()=>s,jV:()=>i,lF:()=>a}),r(92602),r(70333);var n=r(4718),o=r(84952);function i(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function s(e){return"string"==typeof e?(0,o.An)(e):(0,n.o8)(e)}function a(e,t,r){const n={};for(const o in e){if("declaredClass"===o)continue;const i=e[o];if(null!=i&&"function"!=typeof i)if(Array.isArray(i))n[o]=i.map((e=>a(e)));else if("object"==typeof i)if(i.toJSON){const e=i.toJSON(r?.[o]);n[o]=t?e:JSON.stringify(e)}else n[o]=t?i:JSON.stringify(i);else n[o]=i}return n}r(926)}}]);