"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[24,9507,8008],{25929:(e,r,a)=>{a.d(r,{M:()=>L,a:()=>m,e:()=>d,f:()=>n,i:()=>u,p:()=>y,r:()=>s,t:()=>i,w:()=>l});var t=a(17452);function n(e,r){const a=r?.url?.path;if(e&&a&&(e=(0,t.hF)(e,a,{preserveProtocolRelative:!0}),r.portalItem&&r.readResourcePaths)){const a=(0,t.PF)(e,r.portalItem.itemUrl);null!=a&&o.test(a)&&r.readResourcePaths.push(r.portalItem.resourceFromPath(a).path)}return f(e,r?.portal)}function i(e,r,a=L.YES){if(null==e)return e;!(0,t.YP)(e)&&r?.blockedRelativeUrls&&r.blockedRelativeUrls.push(e);let n=(0,t.hF)(e);if(r){const a=r.verifyItemRelativeUrls?.rootPath||r.url?.path;if(a){const i=f(a,r.portal),s=f(n,r.portal);n=(0,t.PF)(s,i,i),null!=n&&n!==s&&n!==e&&r.verifyItemRelativeUrls&&r.verifyItemRelativeUrls.writtenUrls.push(n)}}return n=d(n,r?.portal),(0,t.YP)(n)&&(n=(0,t.Fv)(n)),r?.resources&&r?.portalItem&&!(0,t.YP)(n)&&!(0,t.HK)(n)&&a===L.YES&&r.resources.toKeep.push({resource:r.portalItem.resourceFromPath(n),compress:!1}),n}function s(e,r,a){return n(e,a)}function l(e,r,a,t){const n=i(e,t);void 0!==n&&(r[a]=n)}const c=/\/items\/([^\/]+)\/resources\/(.*)/,o=/^\.\/resources\//;function u(e){const r=e?.match(c)??null;return r?.[1]??null}function y(e){const r=e?.match(c)??null;if(null==r)return null;const a=r[2],n=a.lastIndexOf("/");if(-1===n){const{path:e,extension:r}=(0,t.fZ)(a);return{prefix:null,filename:e,extension:r}}const{path:i,extension:s}=(0,t.fZ)(a.slice(n+1));return{prefix:a.slice(0,n),filename:i,extension:s}}function d(e,r){return r&&!r.isPortal&&r.urlKey&&r.customBaseUrl?(0,t.Ie)(e,`${r.urlKey}.${r.customBaseUrl}`,r.portalHostname):e}function f(e,r){if(!r||r.isPortal||!r.urlKey||!r.customBaseUrl)return e;const a=`${r.urlKey}.${r.customBaseUrl}`,n=(0,t.TI)();return(0,t.D6)(n,`${n.scheme}://${a}`)?(0,t.Ie)(e,r.portalHostname,a):(0,t.Ie)(e,a,r.portalHostname)}var L,p;(p=L||(L={}))[p.YES=0]="YES",p[p.NO=1]="NO";const m=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return L},ensureMainOnlineDomain:d,fromJSON:n,itemIdFromResourceUrl:u,prefixAndFilenameFromResourceUrl:y,read:s,toJSON:i,write:l},Symbol.toStringTag,{value:"Module"}))},7335:(e,r,a)=>{a.d(r,{L:()=>n});var t=a(96187);class n{constructor(){this._serviceMetadatas=new Map}async fetchServiceMetadata(e,r){const a=this._serviceMetadatas.get(e);if(a)return a;const n=await(0,t.T)(e,r);return this._serviceMetadatas.set(e,n),n}}},66677:(e,r,a)=>{a.d(r,{B5:()=>u,DR:()=>d,G:()=>h,M8:()=>p,Nm:()=>m,Qc:()=>y,XG:()=>S,a7:()=>L,ld:()=>f,wH:()=>w});var t=a(17452),n=a(25929);const i={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer"},s=Object.values(i),l=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${s.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),c=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${s.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),o=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function u(e){return!!l.test(e)}function y(e){if(null==e)return null;const r=(0,t.mN)(e),a=r?.path.match(l)||r?.path.match(c);if(!a)return null;const[,n,s,o,u]=a,y=s.indexOf("/");return{title:f(-1!==y?s.slice(y+1):s),serverType:i[o.toLowerCase()],sublayer:null!=u&&""!==u?parseInt(u,10):null,url:{path:n}}}function d(e){const r=(0,t.mN)(e).path.match(o);return r?{serviceUrl:r[1],sublayerId:Number(r[2])}:null}function f(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function L(e,r){const a=[];if(e){const r=y(e);null!=r&&r.title&&a.push(r.title)}if(r){const e=f(r);a.push(e)}if(2===a.length){if(a[0].toLowerCase().includes(a[1].toLowerCase()))return a[0];if(a[1].toLowerCase().includes(a[0].toLowerCase()))return a[1]}return a.join(" - ")}function p(e){if(!e)return!1;const r=(e=e.toLowerCase()).includes(".arcgis.com/"),a=e.includes("//services")||e.includes("//tiles")||e.includes("//features");return r&&a}function m(e,r){return e?(0,t.Qj)((0,t.Hu)(e,r)):e}function S(e){let{url:r}=e;if(!r)return{url:r};r=(0,t.Hu)(r,e.logger);const a=(0,t.mN)(r),n=y(a.path);let i;if(null!=n)null!=n.sublayer&&null==e.layer.layerId&&(i=n.sublayer),r=n.url.path;else if(e.nonStandardUrlAllowed){const e=d(a.path);null!=e&&(r=e.serviceUrl,i=e.sublayerId)}return{url:(0,t.Qj)(r),layerId:i}}function w(e,r,a,i,s){(0,n.w)(r,i,"url",s),i.url&&null!=e.layerId&&(i.url=(0,t.v_)(i.url,a,e.layerId.toString()))}function h(e){if(!e)return!1;const r=e.toLowerCase(),a=r.includes("/services/"),t=r.includes("/mapserver/wmsserver"),n=r.includes("/imageserver/wmsserver"),i=r.includes("/wmsserver");return a&&(t||n||i)}},71592:(e,r,a)=>{a.d(r,{w:()=>u});var t=a(40330),n=a(3172),i=a(20102),s=a(95330),l=a(66677),c=a(48522),o=a(15235);async function u(e,r){const a=(0,l.Qc)(e);if(!a)throw new i.Z("invalid-url","Invalid scene service url");const u={...r,sceneServerUrl:a.url.path,layerId:a.sublayer??void 0};if(u.sceneLayerItem??=await async function(e){const r=(await y(e)).serviceItemId;if(!r)return null;const a=new o.default({id:r,apiKey:e.apiKey}),i=await async function(e){const r=t.id?.findServerInfo(e.sceneServerUrl);if(r?.owningSystemUrl)return r.owningSystemUrl;const a=e.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const r=(await(0,n.Z)(a,{query:{f:"json"},responseType:"json",signal:e.signal})).data.owningSystemUrl;if(r)return r}catch(e){(0,s.r9)(e)}return null}(e);null!=i&&(a.portal=new c.Z({url:i}));try{return a.load({signal:e.signal})}catch(e){return(0,s.r9)(e),null}}(u),null==u.sceneLayerItem)return d(u.sceneServerUrl.replace("/SceneServer","/FeatureServer"),u);const f=await async function({sceneLayerItem:e,signal:r}){if(!e)return null;try{const a=(await e.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:r})).find((e=>"Feature Service"===e.type))||null;if(!a)return null;const t=new o.default({portal:a.portal,id:a.id});return await t.load(),t}catch(e){return(0,s.r9)(e),null}}(u);if(!f?.url)throw new i.Z("related-service-not-found","Could not find feature service through portal item relationship");const L=await d(f.url,u);return L.portalItem=f,L}async function y(e){if(e.rootDocument)return e.rootDocument;const r={query:{f:"json",token:e.apiKey},responseType:"json",signal:e.signal};try{const a=await(0,n.Z)(e.sceneServerUrl,r);e.rootDocument=a.data}catch{e.rootDocument={}}return e.rootDocument}async function d(e,r){const a=(0,l.Qc)(e);if(!a)throw new i.Z("invalid-feature-service-url","Invalid feature service url");const t=a.url.path,s=r.layerId;if(null==s)return{serverUrl:t};const c=y(r),o=e=>{const a={query:{f:"json"},responseType:"json",authMode:e,signal:r.signal};return(0,n.Z)(t,a)},u=o("anonymous").catch((()=>o("no-prompt"))),[d,f]=await Promise.all([u,c]),L=f?.layers,p=d.data&&d.data.layers;if(!Array.isArray(p))throw new Error("expected layers array");if(Array.isArray(L)){for(let e=0;e<Math.min(L.length,p.length);e++)if(L[e].id===s)return{serverUrl:t,layerId:p[e].id}}else if(null!=s&&s<p.length)return{serverUrl:t,layerId:p[s].id};throw new Error("could not find matching associated sublayer")}},70024:(e,r,a)=>{a.d(r,{k:()=>M,populateOperationalLayers:()=>u});var t=a(46791),n=(a(80442),a(7335)),i=a(87344),s=a(15235);function l(e,r){return!(!e.layerType||"ArcGISFeatureLayer"!==e.layerType)&&e.featureCollectionType===r}var c=a(28008),o=a(40555);async function u(e,r,a){if(!r)return;const t=[];for(const e of r)t.push(v(e,a));const n=await Promise.allSettled(t);for(const r of n)"rejected"===r.status||r.value&&e.add(r.value)}const y={ArcGISDimensionLayer:"DimensionLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",OGCFeatureLayer:"OGCFeatureLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",GeoJSON:"GeoJSONLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",IntegratedMesh3DTilesLayer:"IntegratedMesh3DTilesLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer",Voxel:"VoxelLayer",LineOfSightLayer:"LineOfSightLayer"},d={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},f={ArcGISFeatureLayer:"FeatureLayer"},L={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",ArcGISSceneServiceLayer:"SceneLayer",DefaultTileLayer:"TileLayer"},p={ArcGISAnnotationLayer:"UnsupportedLayer",ArcGISDimensionLayer:"UnsupportedLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoRSS:"GeoRSSLayer",GeoJSON:"GeoJSONLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",SubtypeGroupLayer:"SubtypeGroupLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},m={ArcGISFeatureLayer:"FeatureLayer"},S={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"},w={...p,LinkChartLayer:"LinkChartLayer"},h={...m},I={...S};async function v(e,r){return async function(e,r,a){const t=new e;return t.read(r,a.context),"group"===t.type&&("GroupLayer"===r.layerType?await M(t,r,a):b(r)?function(e,r,a){r.itemId&&(e.portalItem=new s.default({id:r.itemId,portal:a?.portal}),e.when((()=>{const t=t=>{const n=t.layerId;G(t,e,r,n,a);const i=r.featureCollection?.layers?.[n];i&&t.read(i,a)};e.layers?.forEach(t),e.tables?.forEach(t)})))}(t,r,a.context):g(r)&&await async function(e,r,a){const t=i.T.FeatureLayer,n=await t(),s=r.featureCollection,l=s?.showLegend,c=s?.layers?.map(((t,i)=>{const s=new n;s.read(t,a);const c={...a,ignoreDefaults:!0};return G(s,e,r,i,c),null!=l&&s.read({showLegend:l},c),s}));e.layers.addMany(c??[])}(t,r,a.context)),await(0,o.y)(t,a.context),t}(await async function(e,r){const a=r.context,t=T(a);let o=e.layerType||e.type;!o&&r?.defaultLayerType&&(o=r.defaultLayerType);const u=t[o];let y=u?i.T[u]:i.T.UnknownLayer;if(b(e)){const r=a?.portal;if(e.itemId){const a=new s.default({id:e.itemId,portal:r});await a.load();const t=(await(0,c.v)(a,new n.L)).className||"UnknownLayer";y=i.T[t]}}else"ArcGISFeatureLayer"===o?function(e){return l(e,"notes")}(e)||function(e){return l(e,"markup")}(e)?y=i.T.MapNotesLayer:function(e){return l(e,"route")}(e)?y=i.T.RouteLayer:g(e)&&(y=i.T.GroupLayer):e.wmtsInfo?.url&&e.wmtsInfo.layerIdentifier?y=i.T.WMTSLayer:"WFS"===o&&"2.0.0"!==e.wfsInfo?.version&&(y=i.T.UnsupportedLayer);return y()}(e,r),e,r)}function g(e){return"ArcGISFeatureLayer"===e.layerType&&!b(e)&&(e.featureCollection?.layers?.length??0)>1}function b(e){return"Feature Collection"===e.type}function T(e){let r;switch(e.origin){case"web-scene":switch(e.layerContainerType){case"basemap":r=L;break;case"ground":r=d;break;case"tables":r=f;break;default:r=y}break;case"link-chart":switch(e.layerContainerType){case"basemap":r=I;break;case"tables":r=h;break;default:r=w}break;default:switch(e.layerContainerType){case"basemap":r=S;break;case"tables":r=m;break;default:r=p}}return r}async function M(e,r,a){const n=new t.Z,i=u(n,Array.isArray(r.layers)?r.layers:[],a);try{try{if(await i,"group"===e.type)return e.layers.addMany(n),e}catch(r){e.destroy();for(const e of n)e.destroy();throw r}}catch(e){throw e}}function G(e,r,a,t,n){e.read({id:`${r.id}-sublayer-${t}`,visibility:a.visibleLayers?.includes(t)??!0},n)}},87344:(e,r,a)=>{a.d(r,{T:()=>t});const t={BingMapsLayer:async()=>(await Promise.all([a.e(163),a.e(1566),a.e(8153)]).then(a.bind(a,2723))).default,BuildingSceneLayer:async()=>(await Promise.all([a.e(163),a.e(1566),a.e(1773),a.e(9790),a.e(9102),a.e(6621),a.e(3366),a.e(8812),a.e(1423),a.e(4165),a.e(2911),a.e(1469),a.e(4723),a.e(9238),a.e(6170),a.e(1767),a.e(5476),a.e(3014),a.e(3758)]).then(a.bind(a,30223))).default,CSVLayer:async()=>(await Promise.all([a.e(163),a.e(1566),a.e(1773),a.e(9790),a.e(9102),a.e(6621),a.e(3366),a.e(8812),a.e(1423),a.e(4165),a.e(2911),a.e(1469),a.e(4723),a.e(9238),a.e(2371)]).then(a.bind(a,45425))).default,DimensionLayer:async()=>(await Promise.all([a.e(163),a.e(9717)]).then(a.bind(a,40081))).default,ElevationLayer:async()=>(await Promise.all([a.e(163),a.e(9016),a.e(2763)]).then(a.bind(a,65665))).default,FeatureLayer:async()=>(await Promise.all([a.e(163),a.e(1566),a.e(1773),a.e(9790),a.e(9102),a.e(6621),a.e(3366),a.e(8812),a.e(1423),a.e(4165),a.e(2911),a.e(1469),a.e(4723),a.e(9238),a.e(826)]).then(a.bind(a,19238))).default,GeoJSONLayer:async()=>(await Promise.all([a.e(163),a.e(1566),a.e(1773),a.e(9790),a.e(9102),a.e(6621),a.e(3366),a.e(8812),a.e(1423),a.e(4165),a.e(2911),a.e(1469),a.e(2859)]).then(a.bind(a,23477))).default,GeoRSSLayer:async()=>(await Promise.all([a.e(163),a.e(1566),a.e(9790),a.e(9102),a.e(3212)]).then(a.bind(a,3723))).default,GroupLayer:async()=>(await Promise.all([a.e(163),a.e(118)]).then(a.bind(a,40504))).default,ImageryLayer:async()=>(await Promise.all([a.e(163),a.e(1566),a.e(1773),a.e(9790),a.e(9102),a.e(6621),a.e(4165),a.e(4599),a.e(6610),a.e(9970),a.e(8469)]).then(a.bind(a,94917))).default,ImageryTileLayer:async()=>(await Promise.all([a.e(163),a.e(1566),a.e(1773),a.e(9790),a.e(9102),a.e(6621),a.e(6610),a.e(9970),a.e(4216),a.e(9236)]).then(a.bind(a,78719))).default,IntegratedMeshLayer:async()=>(await Promise.all([a.e(163),a.e(1767),a.e(1537)]).then(a.bind(a,9310))).default,KMLLayer:async()=>(await Promise.all([a.e(163),a.e(1566),a.e(1773),a.e(9790),a.e(9102),a.e(6621),a.e(3366),a.e(8812),a.e(1423),a.e(8652)]).then(a.bind(a,42756))).default,LineOfSightLayer:async()=>(await Promise.all([a.e(163),a.e(4998)]).then(a.bind(a,21786))).default,LinkChartLayer:async()=>(await Promise.all([a.e(1566),a.e(1773),a.e(9790),a.e(9102),a.e(6621),a.e(3366),a.e(8812),a.e(1423),a.e(4165),a.e(1469),a.e(8968),a.e(2936),a.e(9885)]).then(a.bind(a,30606))).default,MapImageLayer:async()=>(await Promise.all([a.e(163),a.e(1566),a.e(1773),a.e(9790),a.e(9102),a.e(6621),a.e(3366),a.e(8812),a.e(1423),a.e(4165),a.e(2911),a.e(4599),a.e(9735),a.e(3160),a.e(7374)]).then(a.bind(a,27374))).default,MapNotesLayer:async()=>(await Promise.all([a.e(163),a.e(1566),a.e(1773),a.e(9790),a.e(9102),a.e(6621),a.e(3366),a.e(8812),a.e(1423),a.e(4165),a.e(2911),a.e(1469),a.e(4723),a.e(9238),a.e(9922)]).then(a.bind(a,62128))).default,MediaLayer:async()=>(await Promise.all([a.e(163),a.e(4828)]).then(a.bind(a,57765))).default,OGCFeatureLayer:async()=>(await Promise.all([a.e(163),a.e(1566),a.e(1773),a.e(9790),a.e(9102),a.e(6621),a.e(3366),a.e(8812),a.e(1423),a.e(4165),a.e(2911),a.e(1469),a.e(2882),a.e(2118)]).then(a.bind(a,88068))).default,OpenStreetMapLayer:async()=>(await Promise.all([a.e(163),a.e(1566),a.e(9971),a.e(6237)]).then(a.bind(a,66237))).default,OrientedImageryLayer:async()=>(await Promise.all([a.e(163),a.e(1566),a.e(1773),a.e(9790),a.e(9102),a.e(6621),a.e(3366),a.e(8812),a.e(1423),a.e(4165),a.e(2911),a.e(1469),a.e(4723),a.e(9238),a.e(1797)]).then(a.bind(a,44958))).default,PointCloudLayer:async()=>(await Promise.all([a.e(163),a.e(1773),a.e(1767),a.e(7863)]).then(a.bind(a,10608))).default,RouteLayer:async()=>(await Promise.all([a.e(163),a.e(1773),a.e(9790),a.e(9102),a.e(6621),a.e(3366),a.e(8812),a.e(1423),a.e(9625)]).then(a.bind(a,40153))).default,SceneLayer:async()=>(await Promise.all([a.e(163),a.e(1773),a.e(9790),a.e(9102),a.e(6621),a.e(3366),a.e(8812),a.e(1423),a.e(4165),a.e(2911),a.e(6170),a.e(1767),a.e(5476),a.e(3014),a.e(299)]).then(a.bind(a,57476))).default,StreamLayer:async()=>(await Promise.all([a.e(163),a.e(1566),a.e(1773),a.e(9790),a.e(9102),a.e(6621),a.e(3366),a.e(8812),a.e(1423),a.e(4165),a.e(2911),a.e(1469),a.e(9319)]).then(a.bind(a,88387))).default,SubtypeGroupLayer:async()=>(await Promise.all([a.e(163),a.e(1566),a.e(1773),a.e(9790),a.e(9102),a.e(6621),a.e(3366),a.e(8812),a.e(1423),a.e(4165),a.e(2911),a.e(4723),a.e(6540),a.e(5460)]).then(a.bind(a,20697))).default,TileLayer:async()=>(await Promise.all([a.e(163),a.e(1566),a.e(1773),a.e(9790),a.e(9102),a.e(6621),a.e(3366),a.e(8812),a.e(1423),a.e(4165),a.e(2911),a.e(4599),a.e(9735),a.e(9016),a.e(3160),a.e(8636)]).then(a.bind(a,98636))).default,IntegratedMesh3DTilesLayer:async()=>(await Promise.all([a.e(163),a.e(8393)]).then(a.bind(a,33717))).default,UnknownLayer:async()=>(await a.e(4166).then(a.bind(a,44166))).default,UnsupportedLayer:async()=>(await a.e(9296).then(a.bind(a,39296))).default,VectorTileLayer:async()=>(await Promise.all([a.e(163),a.e(3366),a.e(9016),a.e(9805),a.e(5481)]).then(a.bind(a,94756))).default,VoxelLayer:async()=>(await Promise.all([a.e(163),a.e(1773),a.e(1767),a.e(7528)]).then(a.bind(a,28865))).default,WFSLayer:async()=>(await Promise.all([a.e(163),a.e(1566),a.e(1773),a.e(9790),a.e(9102),a.e(6621),a.e(3366),a.e(8812),a.e(1423),a.e(4165),a.e(2911),a.e(1469),a.e(8089),a.e(6134)]).then(a.bind(a,12653))).default,WMSLayer:async()=>(await Promise.all([a.e(163),a.e(1566),a.e(1773),a.e(9790),a.e(9102),a.e(2363)]).then(a.bind(a,25906))).default,WMTSLayer:async()=>(await Promise.all([a.e(163),a.e(1566),a.e(9971),a.e(2594)]).then(a.bind(a,72594))).default,WebTileLayer:async()=>(await Promise.all([a.e(163),a.e(1566),a.e(9971)]).then(a.bind(a,16199))).default}},3072:(e,r,a)=>{a.d(r,{$O:()=>i,CD:()=>u,Ok:()=>s,Q4:()=>l,XX:()=>c,_Y:()=>o,bS:()=>n});var t=a(71592);function n(e){const r={id:e.id,name:e.name};return"Oriented Imagery Layer"===e.type&&(r.layerType="OrientedImageryLayer"),r}async function i(e,r,a){if(null==e?.layers||null==e?.tables){const t=await a.fetchServiceMetadata(r);(e=e||{}).layers=e.layers||t?.layers?.map(n),e.tables=e.tables||t?.tables?.map(n)}return e}function s(e){const r=e.layers;if(r?.length)return r[0].id;const a=e.tables;return a?.length?a[0].id:null}function l(e){return(e?.layers?.length??0)+(e?.tables?.length??0)}function c(e){const r=[];return e?.layers?.forEach((e=>{"SubtypeGroupLayer"===e.layerType&&r.push(e.id)})),r}function o(e){return e?.layers?.filter((({layerType:e})=>"OrientedImageryLayer"===e)).map((({id:e})=>e))}async function u(e,r,a){if(!e?.url)return r??{};if(r??={},!r.layers){const t=await a.fetchServiceMetadata(e.url);r.layers=t.layers?.map(n)}const{serverUrl:i,portalItem:s}=await(0,t.w)(e.url,{sceneLayerItem:e}).catch((()=>({serverUrl:null,portalItem:null})));if(null==i)return r.tables=[],r;if(!r.tables&&s){const e=await s.fetchData();if(e?.tables)r.tables=e.tables.map(n);else{const e=await a.fetchServiceMetadata(i);r.tables=e?.tables?.map(n)}}if(r.tables)for(const e of r.tables)e.url=`${i}/${e.id}`;return r}},14661:(e,r,a)=>{a.d(r,{$o:()=>u,Fj:()=>c,Kz:()=>y,Ss:()=>d,_$:()=>l,ck:()=>o,qj:()=>s});var t=a(73615),n=a(82971),i=a(40488);function s(e,r){if(!l(e,r)){const a=e.typeKeywords;a?a.push(r):e.typeKeywords=[r]}}function l(e,r){return!!e.typeKeywords?.includes(r)}function c(e){return l(e,y.HOSTED_SERVICE)}function o(e,r){const a=e.typeKeywords;if(a){const e=a.indexOf(r);e>-1&&a.splice(e,1)}}async function u(e){const r=e.clone().normalize();let a;if(r.length>1)for(const e of r)a?e.width>a.width&&(a=e):a=e;else a=r[0];return async function(e){const r=e.spatialReference;if(r.isWGS84)return e.clone();if(r.isWebMercator)return(0,i.Sx)(e);const a=n.Z.WGS84;return await(0,t.initializeProjection)(r,a),(0,t.project)(e,a)}(a)}const y={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map"};function d(e){const{portal:r,isOrgItem:a,itemControl:t}=e,n=r.user?.privileges;let i=!n||n.includes("features:user:edit"),s=!!a&&!!n?.includes("features:user:fullEdit");const l="update"===t||"admin"===t;return l?s=i=!0:s&&(i=!0),{features:{edit:i,fullEdit:s},content:{updateItem:l}}}},28008:(e,r,a)=>{a.d(r,{fromItem:()=>y,v:()=>d});var t=a(20102),n=a(71592),i=a(7335),s=a(84230),l=a(87344),c=a(15235),o=a(3072),u=a(14661);async function y(e){!e.portalItem||e.portalItem instanceof c.default||(e={...e,portalItem:new c.default(e.portalItem)});const r=await async function(e){await e.load();const r=new i.L;return async function(e){const r=e.className,a=l.T[r];return{constructor:await a(),properties:e.properties}}(await d(e,r))}(e.portalItem);return new(0,r.constructor)({portalItem:e.portalItem,...r.properties})}async function d(e,r){switch(e.type){case"Map Service":return async function(e,r){return await async function(e,r){return(await r.fetchServiceMetadata(e.url)).tileInfo}(e,r)?{className:"TileLayer"}:{className:"MapImageLayer"}}(e,r);case"Feature Service":return async function(e,r){const a=await f(e,r);if("object"==typeof a){const e={};return null!=a.id&&(e.layerId=a.id),{className:a.className||"FeatureLayer",properties:e}}return{className:"GroupLayer"}}(e,r);case"Feature Collection":return async function(e){await e.load();const r=(0,u._$)(e,"Map Notes"),a=(0,u._$)(e,"Markup");if(r||a)return{className:"MapNotesLayer"};if((0,u._$)(e,"Route Layer"))return{className:"RouteLayer"};const t=await e.fetchData();return 1===(0,o.Q4)(t)?{className:"FeatureLayer"}:{className:"GroupLayer"}}(e);case"Scene Service":return async function(e,r){const a=await f(e,r,(async()=>{try{if(!e.url)return[];const{serverUrl:a}=await(0,n.w)(e.url,{sceneLayerItem:e}),t=await r.fetchServiceMetadata(a);return t?.tables??[]}catch{return[]}}));if("object"==typeof a){const t={};let n;if(null!=a.id?(t.layerId=a.id,n=`${e.url}/layers/${a.id}`):n=e.url,e.typeKeywords?.length)for(const r of Object.keys(s.fb))if(e.typeKeywords.includes(r))return{className:s.fb[r]};const i=await r.fetchServiceMetadata(n);return{className:s.fb[i?.layerType]||"SceneLayer",properties:t}}if(!1===a){const a=await r.fetchServiceMetadata(e.url);if("Voxel"===a?.layerType)return{className:"VoxelLayer"}}return{className:"GroupLayer"}}(e,r);case"3DTiles Service":return{className:"IntegratedMesh3DTilesLayer"};case"Image Service":return async function(e,r){await e.load();const a=e.typeKeywords?.map((e=>e.toLowerCase()))??[];if(a.includes("elevation 3d layer"))return{className:"ElevationLayer"};if(a.includes("tiled imagery"))return{className:"ImageryTileLayer"};const t=await e.fetchData(),n=t?.layerType;if("ArcGISTiledImageServiceLayer"===n)return{className:"ImageryTileLayer"};if("ArcGISImageServiceLayer"===n)return{className:"ImageryLayer"};const i=await r.fetchServiceMetadata(e.url),s=i.cacheType?.toLowerCase(),l=i.capabilities?.toLowerCase().includes("tilesonly");return"map"===s||l?{className:"ImageryTileLayer"}:{className:"ImageryLayer"}}(e,r);case"Stream Service":case"Feed":return{className:"StreamLayer"};case"Vector Tile Service":return{className:"VectorTileLayer"};case"GeoJson":return{className:"GeoJSONLayer"};case"CSV":return{className:"CSVLayer"};case"KML":return{className:"KMLLayer"};case"WFS":return{className:"WFSLayer"};case"WMTS":return{className:"WMTSLayer"};case"WMS":return{className:"WMSLayer"};case"Group Layer":return{className:"GroupLayer"};default:throw new t.Z("portal:unknown-item-type","Unknown item type '${type}'",{type:e.type})}}async function f(e,r,a){const t=e.url;if(!t||/\/\d+$/.test(t))return{};await e.load();let n=await e.fetchData();if("Feature Service"===e.type){const e=await(0,o.$O)(n,t,r),a=L(e);if("object"==typeof a){const r=(0,o.XX)(e),t=(0,o._Y)(e);a.className=null!=a.id&&r.includes(a.id)?"SubtypeGroupLayer":null!=a.id&&t?.includes(a.id)?"OrientedImageryLayer":"FeatureLayer"}return a}if("Scene Service"===e.type&&(n=await(0,o.CD)(e,n,r)),(0,o.Q4)(n)>0)return L(n);const i=await r.fetchServiceMetadata(t);return a&&(i.tables=await a()),L(i)}function L(e){return 1===(0,o.Q4)(e)&&{id:(0,o.Ok)(e)}}},40555:(e,r,a)=>{a.d(r,{y:()=>s});var t=a(66643),n=a(95330),i=a(20941);async function s(e,r,a){const s=e&&e.getAtOrigin&&e.getAtOrigin("renderer",r.origin);if(s&&"unique-value"===s.type&&s.styleOrigin){const l=await(0,t.q6)(s.populateFromStyle());if((0,n.k_)(a),!1===l.ok){const a=l.error;r?.messages&&r.messages.push(new i.Z("renderer:style-reference",`Failed to create unique value renderer from style reference: ${a.message}`,{error:a,context:r})),e.clear("renderer",r?.origin)}}}},96187:(e,r,a)=>{a.d(r,{T:()=>n});var t=a(3172);async function n(e,r){const{data:a}=await(0,t.Z)(e,{responseType:"json",query:{f:"json",...r?.customParameters,token:r?.apiKey}});return a}}}]);