"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[5957],{68197:(e,t,r)=>{r.d(t,{A:()=>h});var n,i,s=r(40876),o=r(34727),a=r(56507);function l(e){return(0,o.qE)((0,a.Vr)(e),0,255)}function c(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}function f(e,t){const r=e.toString(16).padStart(2,"0");return t?r.slice(0,1):r}class h{static blendColors(e,t,r,n=new h){return n.r=Math.round(e.r+(t.r-e.r)*r),n.g=Math.round(e.g+(t.g-e.g)*r),n.b=Math.round(e.b+(t.b-e.b)*r),n.a=e.a+(t.a-e.a)*r,n._sanitize()}static fromRgb(e,t){const r=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(r){const e=r[2].split(/\s*,\s*/),n=r[1];if("rgb"===n&&3===e.length||"rgba"===n&&4===e.length){const r=e[0];if("%"===r.charAt(r.length-1)){const r=e.map((e=>2.56*parseFloat(e)));return 4===e.length&&(r[3]=parseFloat(e[3])),h.fromArray(r,t)}return h.fromArray(e.map((e=>parseFloat(e))),t)}if("hsl"===n&&3===e.length||"hsla"===n&&4===e.length)return h.fromArray((0,s.z$)(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100,parseFloat(e[3])),t)}return null}static fromHex(e,t=new h){if("#"!==e[0]||isNaN(Number(`0x${e.slice(1)}`)))return null;switch(e.length){case 4:case 5:{const r=parseInt(e.slice(1,2),16),n=parseInt(e.slice(2,3),16),i=parseInt(e.slice(3,4),16),s=5===e.length?15:parseInt(e.slice(4),16);return h.fromArray([r+16*r,n+16*n,i+16*i,(s+16*s)/255],t)}case 7:case 9:{const r=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16),s=7===e.length?255:parseInt(e.slice(7),16);return h.fromArray([r,n,i,s/255],t)}default:return null}}static fromArray(e,t=new h){return t._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(t.a)&&(t.a=1),t._sanitize()}static fromString(e,t){const r=(0,s.V6)(e)?(0,s.TS)(e):null;return r&&h.fromArray(r,t)||h.fromRgb(e,t)||h.fromHex(e,t)}static fromJSON(e){return null!=e?new h([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return null!=e?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return null!=e?[e.r/255,e.g/255,e.b/255,null!=e.a?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return.299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return"string"==typeof e?h.fromString(e,this):Array.isArray(e)?h.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof h||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const t=e?.capitalize??!1,r=e?.digits??6,n=3===r||4===r,i=4===r||8===r,s=`#${f(this.r,n)}${f(this.g,n)}${f(this.b,n)}${i?f(Math.round(255*this.a),n):""}`;return t?s.toUpperCase():s}toCss(e=!1){const t=this.r+", "+this.g+", "+this.b;return e?`rgba(${t}, ${this.a})`:`rgb(${t})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=h.AlphaMode.ALWAYS){const t=l(this.r),r=l(this.g),n=l(this.b);return e===h.AlphaMode.ALWAYS||1!==this.a?[t,r,n,l(255*this.a)]:[t,r,n]}clone(){return new h(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return null!=e&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Math.round(c(this.r,0,255)),this.g=Math.round(c(this.g,0,255)),this.b=Math.round(c(this.b,0,255)),this.a=c(this.a,0,1),this}_set(e,t,r,n){this.r=e,this.g=t,this.b=r,this.a=n}}h.prototype.declaredClass="esri.Color",(i=(n=h).AlphaMode||(n.AlphaMode={}))[i.ALWAYS=0]="ALWAYS",i[i.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"},73354:(e,t,r)=>{r.d(t,{a:()=>h,b:()=>a,c:()=>o,d:()=>i,e:()=>u,f:()=>f,l:()=>c,n:()=>d,t:()=>s});var n=r(40876);function i(e,t,r){s(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function s(e,t,r,n=3,i=n){if(e.length/n!==Math.ceil(t.length/i))return e;const s=e.length/n,o=r[0],a=r[1],l=r[2],c=r[4],f=r[5],h=r[6],u=r[8],d=r[9],p=r[10],m=r[12],g=r[13],y=r[14];let b=0,_=0;for(let r=0;r<s;r++){const r=t[b],s=t[b+1],A=t[b+2];e[_]=o*r+c*s+u*A+m,e[_+1]=a*r+f*s+d*A+g,e[_+2]=l*r+h*s+p*A+y,b+=i,_+=n}return e}function o(e,t,r){a(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function a(e,t,r,n=3,i=n){if(e.length/n!==Math.ceil(t.length/i))return;const s=e.length/n,o=r[0],a=r[1],l=r[2],c=r[3],f=r[4],h=r[5],u=r[6],d=r[7],p=r[8];let m=0,g=0;for(let r=0;r<s;r++){const r=t[m],s=t[m+1],y=t[m+2];e[g]=o*r+c*s+u*y,e[g+1]=a*r+f*s+d*y,e[g+2]=l*r+h*s+p*y,m+=i,g+=n}}function l(e,t,r,n=3,i=n){const s=Math.min(e.length/n,t.length/i);let o=0,a=0;for(let l=0;l<s;l++)e[a]=r*t[o],e[a+1]=r*t[o+1],e[a+2]=r*t[o+2],o+=i,a+=n;return e}function c(e,t,r,n){f(e.typedBuffer,t.typedBuffer,r,n,e.typedBufferStride,t.typedBufferStride)}function f(e,t,r,i,s=3,o=s){const a=Math.min(e.length/s,t.length/o);let l=0,c=0;const f=1/n.Tf;for(let n=0;n<a;n++)e[c]=i*(r*t[l])**f,e[c+1]=i*(r*t[l+1])**f,e[c+2]=i*(r*t[l+2])**f,l+=o,c+=s}function h(e,t,r,n=3,i=n){const s=e.length/n;if(s!==Math.ceil(t.length/i))return e;let o=0,a=0;for(let l=0;l<s;l++)e[a]=t[o]+r[0],e[a+1]=t[o+1]+r[1],e[a+2]=t[o+2]+r[2],o+=i,a+=n;return e}function u(e,t){d(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function d(e,t,r=3,n=r){const i=Math.min(e.length/r,t.length/n);let s=0,o=0;for(let a=0;a<i;a++){const i=t[s],a=t[s+1],l=t[s+2],c=i*i+a*a+l*l;if(c>0){const t=1/Math.sqrt(c);e[o]=t*i,e[o+1]=t*a,e[o+2]=t*l}s+=n,o+=r}}r(44208),r(53966),Object.freeze(Object.defineProperty({__proto__:null,linearToSRGB:f,linearToSRGBView:c,normalize:d,normalizeView:u,scale:l,scaleView:function(e,t,r){l(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)},shiftRight:function(e,t,r){const n=Math.min(e.count,t.count),i=e.typedBuffer,s=e.typedBufferStride,o=t.typedBuffer,a=t.typedBufferStride;let l=0,c=0;for(let e=0;e<n;e++)i[c]=o[l]>>r,i[c+1]=o[l+1]>>r,i[c+2]=o[l+2]>>r,l+=a,c+=s},transformMat3:a,transformMat3View:o,transformMat4:s,transformMat4View:i,translate:h},Symbol.toStringTag,{value:"Module"}))},35982:(e,t,r)=>{r.d(t,{B:()=>l});var n=r(4576),i=r(36563),s=r(53966),o=r(74887),a=r(29953);class l{constructor(e,t,r,n,i={}){this._mainMethod=t,this._transferLists=r,this._listeners=[],this._promise=(0,a.ho)(e,{...i,schedule:n}).then((e=>{if(void 0===this._thread){this._thread=e,this._promise=null,i.hasInitialize&&this.broadcast({},"initialize");for(const e of this._listeners)this._connectListener(e)}else e.close()})),this._promise.catch((t=>s.A.getLogger("esri.core.workers.WorkerHandle").error(`Failed to initialize ${e} worker: ${t}`)))}on(e,t){const r={removed:!1,eventName:e,callback:t,threadHandle:null};return this._listeners.push(r),this._connectListener(r),(0,i.hA)((()=>{r.removed=!0,(0,n.TF)(this._listeners,r),this._thread&&null!=r.threadHandle&&r.threadHandle.remove()}))}destroy(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null,this._listeners.length=0,this._transferLists={}}invoke(e,t){return this.invokeMethod(this._mainMethod,e,t)}invokeMethod(e,t,r){if(this._thread){const n=this._transferLists[e],i=n?n(t):[];return this._thread.invoke(e,t,{transferList:i,signal:r})}return this._promise?this._promise.then((()=>((0,o.Te)(r),this.invokeMethod(e,t,r)))):Promise.reject(null)}broadcast(e,t){return this._thread?Promise.all(this._thread.broadcast(t,e)).then((()=>{})):this._promise?this._promise.then((()=>this.broadcast(e,t))):Promise.reject()}get promise(){return this._promise}_connectListener(e){this._thread&&this._thread.on(e.eventName,e.callback).then((t=>{e.removed||(e.threadHandle=t)}))}}},95696:(e,t,r)=>{r.d(t,{A:()=>h});var n,i=r(90237),s=r(69540),o=r(25482),a=r(10107),l=(r(44208),r(53966),r(87811),r(93223)),c=r(40608);let f=n=class extends(s.A.ClonableMixin(o.A)){constructor(e){super(e),this.type="georeferenced",this.origin=null}};f.absolute=new n,(0,i._)([(0,l.e)({georeferenced:"georeferenced"},{readOnly:!0})],f.prototype,"type",void 0),(0,i._)([(0,a.MZ)({type:[Number],nonNullable:!1,json:{write:!0}})],f.prototype,"origin",void 0),f=n=(0,i._)([(0,c.$)("esri.geometry.support.MeshGeoreferencedVertexSpace")],f);const h=f},18251:(e,t,r)=>{r.d(t,{A:()=>h});var n=r(90237),i=r(69540),s=r(25482),o=r(10107),a=(r(44208),r(53966),r(87811),r(93223)),l=r(40608),c=r(51850);let f=class extends(i.A.ClonableMixin(s.A)){constructor(e){super(e),this.type="local",this.origin=(0,c.vt)()}};(0,n._)([(0,a.e)({local:"local"},{readOnly:!0})],f.prototype,"type",void 0),(0,n._)([(0,o.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],f.prototype,"origin",void 0),f=(0,n._)([(0,l.$)("esri.geometry.support.MeshLocalVertexSpace")],f);const h=f},36233:(e,t,r)=>{r.r(t),r.d(t,{destroyContext:()=>F,dracoDecompressPointCloudData:()=>v,filterObbsForModifications:()=>B,filterObbsForModificationsSync:()=>T,initialize:()=>D,interpretObbModificationResults:()=>O,process:()=>N,project:()=>C,setLegacySchema:()=>E,setModifications:()=>L,setModificationsSync:()=>x,test:()=>z,transformNormals:()=>R});var n,i,s=r(34727),o=r(16930),a=r(95696),l=r(18251),c=r(73354);!function(e){e[e.None=0]="None",e[e.Int16=1]="Int16",e[e.Int32=2]="Int32"}(n||(n={})),function(e){e[e.Replace=0]="Replace",e[e.Outside=1]="Outside",e[e.Inside=2]="Inside",e[e.Finished=3]="Finished"}(i||(i={}));var f=r(2741);function h(e){return(0,f.s)(`esri/libs/i3s/${e}`)}let u;r(53966);var d,p,m,g,y,b,_=r(3694),A=r(51850),w=r(35982);r(57251),r(27993);class S{constructor(e,t,r,n,i,s){this.layout=e,this.interleavedVertexData=t,this.indices=r,this.hasColors=n,this.hasModifications=i,this.positionData=s}}class M{constructor(e,t,r,n,i,s,o){this.componentOffsets=e,this.featureIds=t,this.anchorIds=r,this.anchors=n,this.transformedGeometry=i,this.globalTrafo=s,this.obb=o}}async function N(e){I=await $();const t=[e.geometryBuffer];return{result:P(I,e,t),transferList:t}}async function v(e){I=await $();const t=[e.geometryBuffer],{geometryBuffer:r}=e,n=r.byteLength,i=I._malloc(n),s=new Uint8Array(I.HEAPU8.buffer,i,n);s.set(new Uint8Array(r));const o=I.dracoDecompressPointCloudData(i,s.byteLength);if(I._free(i),o.error.length>0)throw new Error(`i3s.wasm: ${o.error}`);const a=o.featureIds?.length>0?o.featureIds.slice():null,l=o.positions.slice();return a&&t.push(a.buffer),t.push(l.buffer),{result:{positions:l,featureIds:a},transferList:t}}async function B(e){await $(),T(e);const t={buffer:e.buffer};return{result:t,transferList:[t.buffer]}}async function L(e){await $(),x(e)}async function E(e){I=await $(),I.setLegacySchema(e.context,e.jsonSchema)}async function C(e){const{localMatrix:t,origin:n,positions:i,vertexSpace:s}=e,c=o.A.fromJSON(e.inSpatialReference),f=o.A.fromJSON(e.outSpatialReference);let h;const[{projectBuffer:u},{initializeProjection:d}]=await Promise.all([Promise.resolve().then(r.bind(r,9762)),Promise.resolve().then(r.bind(r,57251))]);await d(c,f);const p=[0,0,0];if(!u(n,c,0,p,f,0))throw new Error("Failed to project");if("georeferenced"===s.type&&null==s.origin){if(h=new Float64Array(i.length),!u(i,c,0,h,f,0,h.length/3))throw new Error("Failed to project")}else{const e="georeferenced"===s.type?a.A.fromJSON(s):l.A.fromJSON(s),{projectMeshVertexPositions:n}=await Promise.all([r.e(3030),r.e(4594)]).then(r.bind(r,74594)),o=n({vertexAttributes:{position:i},transform:t?{localMatrix:t}:void 0,vertexSpace:e,spatialReference:c},f);if(!o)throw new Error("Failed to project");h=o}const m=h.length,[g,y,b]=p;for(let e=0;e<m;e+=3)h[e]-=g,h[e+1]-=y,h[e+2]-=b;return{result:{projected:h,original:i,projectedOrigin:p},transferList:[h.buffer,i.buffer]}}async function R({normalMatrix:e,normals:t}){const r=new Float32Array(t.length);return(0,c.b)(r,t,e),(0,s.or)(e)&&(0,c.n)(r,r),{result:{transformed:r,original:t},transferList:[r.buffer,t.buffer]}}function F(e){k(e)}let U,I;function x(e){if(!I)return;const t=e.modifications,r=I._malloc(8*t.length),n=new Float64Array(I.HEAPU8.buffer,r,t.length);for(let e=0;e<t.length;++e)n[e]=t[e];I.setModifications(e.context,r,t.length,e.isGeodetic),I._free(r)}function P(e,t,r){const{context:i,globalTrafo:s,mbs:o,obbData:a,elevationOffset:l,geometryBuffer:c,geometryDescriptor:f,indexToVertexProjector:h,vertexToRenderProjector:u}=t,d=e._malloc(c.byteLength),p=e._malloc(33*Float64Array.BYTES_PER_ELEMENT),m=new Uint8Array(e.HEAPU8.buffer,d,c.byteLength);m.set(new Uint8Array(c));const g=new Float64Array(e.HEAPU8.buffer,p,33);j(g,[NaN,NaN,NaN]);let y=g.byteOffset+3*g.BYTES_PER_ELEMENT,b=new Float64Array(g.buffer,y);j(b,s),y+=16*g.BYTES_PER_ELEMENT,b=new Float64Array(g.buffer,y),j(b,o),y+=4*g.BYTES_PER_ELEMENT,a&&(b=new Float64Array(g.buffer,y),j(b,a));const _=f,A={isDraco:!1,isLegacy:!1,color:t.layouts.some((e=>e.some((e=>"color"===e.name)))),normal:t.needNormals&&t.layouts.some((e=>e.some((e=>"normalCompressed"===e.name)))),uv0:t.layouts.some((e=>e.some((e=>"uv0"===e.name)))),uvRegion:t.layouts.some((e=>e.some((e=>"uvRegion"===e.name)))),featureIndex:_.featureIndex},w=e.process(i,!!t.obbData,d,m.byteLength,_,A,p,l,h,u,t.normalReferenceFrame);if(e._free(p),e._free(d),w.error.length>0)throw new Error(`i3s.wasm: ${w.error}`);if(w.discarded)return null;const N=w.componentOffsets.length>0?w.componentOffsets.slice():null,v=w.featureIds.length>0?w.featureIds.slice():null,B=w.anchorIds.length>0?Array.from(w.anchorIds):null,L=w.anchors.length>0?Array.from(w.anchors):null,E=w.interleavedVertedData.slice().buffer,C=w.indicesType===n.Int16?new Uint16Array(w.indices.buffer,w.indices.byteOffset,w.indices.byteLength/2).slice():new Uint32Array(w.indices.buffer,w.indices.byteOffset,w.indices.byteLength/4).slice(),R=w.positions.slice(),{buffer:F,byteOffset:U,byteLength:I}=w.positionIndices,x=w.positionIndicesType===n.Int16?new Uint16Array(F,U,I/2).slice():new Uint32Array(F,U,I/4).slice(),P=new S(t.layouts[0],E,C,w.hasColors,w.hasModifications,{data:R,indices:x});return v&&r.push(v.buffer),N&&r.push(N.buffer),r.push(E),r.push(C.buffer),r.push(R.buffer),r.push(x.buffer),new M(N,v,B,L,P,s,w.obb)}function O(e){return 0===e?p.Unmodified:1===e?p.PotentiallyModified:2===e?p.Culled:p.Unknown}function T(e){if(!I)return;const{context:t,buffer:r}=e,n=I._malloc(r.byteLength),i=r.byteLength/Float64Array.BYTES_PER_ELEMENT,s=new Float64Array(I.HEAPU8.buffer,n,i),o=new Float64Array(r);s.set(o),I.filterOBBs(t,n,i),o.set(s),I._free(n)}function k(e){I&&0===I.destroy(e)&&(I=null)}function j(e,t){for(let r=0;r<t.length;++r)e[r]=t[r]}async function D(){I||await $()}async function $(){return I||(I=await(U??=(u||(u=new Promise((e=>r.e(2980).then(r.bind(r,82980)).then((e=>e.i)).then((({default:t})=>{const r=t({locateFile:h,onRuntimeInitialized:()=>e(r)});delete r.then})))).catch((e=>{throw e}))),u))),I}w.B,new _.A({deallocator:null}),(0,A.vt)(),r(91829),r(97937),r(4654),(b=d||(d={}))[b.Unmodified=0]="Unmodified",b[b.Culled=1]="Culled",b[b.NotChecked=2]="NotChecked",function(e){e[e.Unmodified=0]="Unmodified",e[e.PotentiallyModified=1]="PotentiallyModified",e[e.Culled=2]="Culled",e[e.Unknown=3]="Unknown",e[e.NotChecked=4]="NotChecked"}(p||(p={})),function(e){e[e.Unknown=0]="Unknown",e[e.Uncached=1]="Uncached",e[e.Cached=2]="Cached"}(m||(m={})),function(e){e[e.None=0]="None",e[e.MaxScreenThreshold=1]="MaxScreenThreshold",e[e.ScreenSpaceRelative=2]="ScreenSpaceRelative",e[e.RemovedFeatureDiameter=3]="RemovedFeatureDiameter",e[e.DistanceRangeFromDefaultCamera=4]="DistanceRangeFromDefaultCamera"}(g||(g={})),function(e){e[e.Hole=0]="Hole",e[e.Leaf=1]="Leaf"}(y||(y={}));const z={transform:(e,t)=>I&&P(I,e,t),destroy:k}}}]);