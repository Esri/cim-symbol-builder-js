"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[2548],{74669:(e,t,i)=>{i.d(t,{Z:()=>n});var s=i(69801);class n{constructor(e,t){this._storage=new s.WJ,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}put(e,t){this._storage.put(e,t,1,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}},69801:(e,t,i)=>{i.d(t,{WJ:()=>l,Xq:()=>o});var s,n,r=i(70586),a=i(44553);(n=s||(s={}))[n.ALL=0]="ALL",n[n.SOME=1]="SOME";class o{constructor(e,t,i){this._namespace=e,this._storage=t,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",i&&(this._storage.registerRemoveFunc(this._namespace,i),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(e,t,i,s=0){this._storage.put(this._namespace+e,t,i,s)}get(e){const t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}pop(e){const t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}updateSize(e,t,i){this._storage.updateSize(this._namespace+e,t,i)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class l{constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new a.Z,this._users=new a.Z}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace((t=>t[0]!==e))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}put(e,t,i,n){const r=this._db.get(e);if(r&&(this._size-=r.size,this._db.delete(e),r.entry!==t&&this._notifyRemove(e,r.entry,s.ALL)),i>this._maxSize)return void this._notifyRemove(e,t,s.ALL);if(void 0===t)return void console.warn("Refusing to cache undefined entry ");if(!i||i<0)return void console.warn("Refusing to cache entry with invalid size "+i);const a=1+Math.max(n,-3)- -3;this._db.set(e,{entry:t,size:i,lifetime:a,lives:a}),this._size+=i,this._checkSizeLimit()}updateSize(e,t,i){const n=this._db.get(e);if(n&&n.entry===t){for(this._size-=n.size;i>this._maxSize;){const n=this._notifyRemove(e,t,s.SOME);if(!((0,r.pC)(n)&&n>0))return void this._db.delete(e);i=n}n.size=i,this._size+=i,this._checkSizeLimit()}}pop(e){const t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}get(e){const t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}getStats(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},i=new Array;this._db.forEach(((e,s)=>{const n=e.lifetime;i[n]=(i[n]||0)+e.size,this._users.forAll((i=>{const n=i.namespace;if(s.startsWith(n)){const i=t[n]||0;t[n]=i+e.size}}))}));const s={};this._users.forAll((e=>{const i=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){const n=t[i]||0;t[i]=n,s[i]=Math.round(100*e.hitRate)+"%"}else s[i]="0%"}));const n=Object.keys(t);n.sort(((e,i)=>t[i]-t[e])),n.forEach((i=>e[i]=Math.round(t[i]/2**20)+"MB / "+s[i]));for(let t=i.length-1;t>=0;--t){const s=i[t];s&&(e["Priority "+(t+-3-1)]=Math.round(s/this.size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll((e=>e.resetHitRate()))}clear(e){this._db.forEach(((t,i)=>{i.startsWith(e)&&(this._size-=t.size,this._db.delete(i),this._notifyRemove(i,t.entry,s.ALL))}))}clearAll(){this._db.forEach(((e,t)=>this._notifyRemove(t,e.entry,s.ALL))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,t,i){let s;return this._removeFuncs.some((n=>{if(e.startsWith(n[0])){const e=n[1](t,i);return"number"==typeof e&&(s=e),!0}return!1})),s}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[e,t]of this._db){if(this._db.delete(e),t.lives<=1){this._size-=t.size;const i=this._notifyRemove(e,t.entry,s.SOME);(0,r.pC)(i)&&i>0&&(this._size+=i,t.lives=t.lifetime,t.size=i,this._db.set(e,t))}else--t.lives,this._db.set(e,t);if(this._size<=.9*this.maxSize)return}}}},37455:(e,t,i)=>{i.d(t,{N:()=>s});const s={convertToGEGeometry:function(e,t){return null==t?null:e.convertJSONToGeometry(t)},exportPoint:function(e,t,i){const s=new n(e.getPointX(t),e.getPointY(t),i),r=e.hasZ(t),a=e.hasM(t);return r&&(s.z=e.getPointZ(t)),a&&(s.m=e.getPointM(t)),s},exportPolygon:function(e,t,i){return new r(e.exportPaths(t),i,e.hasZ(t),e.hasM(t))},exportPolyline:function(e,t,i){return new a(e.exportPaths(t),i,e.hasZ(t),e.hasM(t))},exportMultipoint:function(e,t,i){return new o(e.exportPoints(t),i,e.hasZ(t),e.hasM(t))},exportExtent:function(e,t,i){const s=e.hasZ(t),n=e.hasM(t),r=new l(e.getXMin(t),e.getYMin(t),e.getXMax(t),e.getYMax(t),i);if(s){const i=e.getZExtent(t);r.zmin=i.vmin,r.zmax=i.vmax}if(n){const i=e.getMExtent(t);r.mmin=i.vmin,r.mmax=i.vmax}return r}};class n{constructor(e,t,i){this.x=e,this.y=t,this.spatialReference=i,this.z=void 0,this.m=void 0}}class r{constructor(e,t,i,s){this.rings=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),s&&(this.hasM=s)}}class a{constructor(e,t,i,s){this.paths=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),s&&(this.hasM=s)}}class o{constructor(e,t,i,s){this.points=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),s&&(this.hasM=s)}}class l{constructor(e,t,i,s,n){this.xmin=e,this.ymin=t,this.xmax=i,this.ymax=s,this.spatialReference=n,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}},24470:(e,t,i)=>{i.d(t,{Gv:()=>m,HH:()=>l,SO:()=>u,Ue:()=>r,al:()=>a,jE:()=>c,kK:()=>h,oJ:()=>o,r3:()=>f}),i(80442),i(22021);var s=i(70586),n=i(6570);function r(e=d){return[e[0],e[1],e[2],e[3]]}function a(e,t,i,s,n=r()){return n[0]=e,n[1]=t,n[2]=i,n[3]=s,n}function o(e,t=r()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function l(e,t){return new n.Z({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function u(e){return function(e){return(0,s.Wi)(e)||e[0]>=e[2]?0:e[2]-e[0]}(e)*function(e){return e[1]>=e[3]?0:e[3]-e[1]}(e)}function c(e,t,i){return t>=e[0]&&i>=e[1]&&t<=e[2]&&i<=e[3]}function h(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function f(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}const m=[1/0,1/0,-1/0,-1/0],d=[0,0,0,0]},82526:(e,t,i)=>{i.d(t,{aX:()=>b});var s=i(68773),n=i(20102),r=i(92604),a=i(70586),o=i(38913),l=i(58901),u=i(82971),c=i(33955),h=i(8744);const f={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new l.Z({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:u.Z.WebMercator}),minus180Line:new l.Z({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:u.Z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new l.Z({paths:[[[180,-180],[180,180]]],spatialReference:u.Z.WGS84}),minus180Line:new l.Z({paths:[[[-180,-180],[-180,180]]],spatialReference:u.Z.WGS84})}};function m(e,t){return Math.ceil((e-t)/(2*t))}function d(e,t){const i=p(e);for(const e of i)for(const i of e)i[0]+=t;return e}function p(e){return(0,c.oU)(e)?e.rings:e.paths}var g=i(40488),y=(i(66577),i(3172)),_=i(17452);const x=r.Z.getLogger("esri.geometry.support.normalizeUtils");function v(e){return"polygon"===e[0].type}function S(e){return"polyline"===e[0].type}function z(e,t,i){if(t){const t=function(e,t){if(!(e instanceof l.Z||e instanceof o.Z)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw x.error(e),new n.Z(e)}const i=p(e),s=[];for(const e of i){const i=[];s.push(i),i.push([e[0][0],e[0][1]]);for(let s=0;s<e.length-1;s++){const n=e[s][0],r=e[s][1],a=e[s+1][0],o=e[s+1][1],l=Math.sqrt((a-n)*(a-n)+(o-r)*(o-r)),u=(o-r)/l,c=(a-n)/l,h=l/t;if(h>1){for(let e=1;e<=h-1;e++){const s=e*t,a=c*s+n,o=u*s+r;i.push([a,o])}const e=(l+Math.floor(h-1)*t)/2,s=c*e+n,a=u*e+r;i.push([s,a])}i.push([a,o])}}return function(e){return"polygon"===e.type}(e)?new o.Z({rings:s,spatialReference:e.spatialReference}):new l.Z({paths:s,spatialReference:e.spatialReference})}(e,1e6);e=(0,g.Sx)(t,!0)}return i&&(e=d(e,i)),e}function F(e,t,i){if(Array.isArray(e)){const s=e[0];if(s>t){const i=m(s,t);e[0]=s+i*(-2*t)}else if(s<i){const t=m(s,i);e[0]=s+t*(-2*i)}}else{const s=e.x;if(s>t){const i=m(s,t);e=e.clone().offset(i*(-2*t),0)}else if(s<i){const t=m(s,i);e=e.clone().offset(t*(-2*i),0)}}return e}function w(e,t){let i=-1;for(let s=0;s<t.cutIndexes.length;s++){const n=t.cutIndexes[s],r=t.geometries[s],a=p(r);for(let e=0;e<a.length;e++){const t=a[e];t.some((i=>{if(i[0]<180)return!0;{let i=0;for(let e=0;e<t.length;e++){const s=t[e][0];i=s>i?s:i}i=Number(i.toFixed(9));const s=-360*m(i,180);for(let i=0;i<t.length;i++){const t=r.getPoint(e,i);r.setPoint(e,i,t.clone().offset(s,0))}return!0}}))}if(n===i){if(v(e))for(const t of p(r))e[n]=e[n].addRing(t);else if(S(e))for(const t of p(r))e[n]=e[n].addPath(t)}else i=n,e[n]=r}return e}async function b(e,t,i){if(!Array.isArray(e))return b([e],t);t&&"string"!=typeof t&&x.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const n="string"==typeof t?t:t?.url??s.Z.geometryServiceUrl;let r,u,p,v,S,I,R,A,M=0;const T=[],V=[];for(const t of e)if((0,a.Wi)(t))V.push(t);else if(r||(r=t.spatialReference,u=(0,h.C5)(r),p=r.isWebMercator,I=p?102100:4326,v=f[I].maxX,S=f[I].minX,R=f[I].plus180Line,A=f[I].minus180Line),u)if("mesh"===t.type)V.push(t);else if("point"===t.type)V.push(F(t.clone(),v,S));else if("multipoint"===t.type){const e=t.clone();e.points=e.points.map((e=>F(e,v,S))),V.push(e)}else if("extent"===t.type){const e=t.clone()._normalize(!1,!1,u);V.push(e.rings?new o.Z(e):e)}else if(t.extent){const e=t.extent,i=m(e.xmin,S)*(2*v);let s=0===i?t.clone():d(t.clone(),i);e.offset(i,0),e.intersects(R)&&e.xmax!==v?(M=e.xmax>M?e.xmax:M,s=z(s,p),T.push(s),V.push("cut")):e.intersects(A)&&e.xmin!==S?(M=e.xmax*(2*v)>M?e.xmax*(2*v):M,s=z(s,p,360),T.push(s),V.push("cut")):V.push(s)}else V.push(t.clone());else V.push(t);let N=m(M,v),E=-90;const Z=N,G=new l.Z;for(;N>0;){const e=360*N-180;G.addPath([[e,E],[e,-1*E]]),E*=-1,N--}if(T.length>0&&Z>0){const t=w(T,await async function(e,t,i,s){const n="string"==typeof e?(0,_.mN)(e):e,r=t[0].spatialReference,a={...s,query:{...n.query,f:"json",sr:JSON.stringify(r),target:JSON.stringify({geometryType:(0,c.Ji)(t[0]),geometries:t}),cutter:JSON.stringify(i)}},o=await(0,y.default)(n.path+"/cut",a),{cutIndexes:l,geometries:u=[]}=o.data;return{cutIndexes:l,geometries:u.map((e=>{const t=(0,c.im)(e);return t.spatialReference=r,t}))}}(n,T,G,i)),s=[],r=[];for(let i=0;i<V.length;i++){const n=V[i];if("cut"!==n)r.push(n);else{const n=t.shift(),o=e[i];(0,a.pC)(o)&&"polygon"===o.type&&o.rings&&o.rings.length>1&&n.rings.length>=o.rings.length?(s.push(n),r.push("simplify")):r.push(p?(0,g.$)(n):n)}}if(!s.length)return r;const o=await async function(e,t,i){const s="string"==typeof e?(0,_.mN)(e):e,n=t[0].spatialReference,r=(0,c.Ji)(t[0]),a={...i,query:{...s.query,f:"json",sr:n.wkid?n.wkid:JSON.stringify(n),geometries:JSON.stringify((o=t,{geometryType:(0,c.Ji)(o[0]),geometries:o.map((e=>e.toJSON()))}))}};var o;return function(e,t,i){const s=(0,c.q9)(t);return e.map((e=>{const t=s.fromJSON(e);return t.spatialReference=i,t}))}((await(0,y.default)(s.path+"/simplify",a)).data,r,n)}(n,s,i),l=[];for(let e=0;e<r.length;e++){const t=r[e];"simplify"!==t?l.push(t):l.push(p?(0,g.$)(o.shift()):o.shift())}return l}const P=[];for(let e=0;e<V.length;e++){const t=V[e];if("cut"!==t)P.push(t);else{const e=T.shift();P.push(!0===p?(0,g.$)(e):e)}}return P}},82397:(e,t,i)=>{i.d(t,{G6:()=>p,Ie:()=>d,J9:()=>f,U1:()=>m,vY:()=>o});var s=i(70586);i(33955);const n=(e,t,i)=>[t,i],r=(e,t,i)=>[t,i,e[2]],a=(e,t,i)=>[t,i,e[2],e[3]];function o(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:(0,s.pC)(e.extent)?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function l({scale:e,translate:t},i){return i*e[0]+t[0]}function u({scale:e,translate:t},i){return t[1]-i*e[1]}function c(e,t,i){const s=new Array(i.length);if(!i.length)return s;const[n,r]=e.scale;let a=l(e,i[0][0]),o=u(e,i[0][1]);s[0]=t(i[0],a,o);for(let e=1;e<i.length;e++){const l=i[e];a+=l[0]*n,o-=l[1]*r,s[e]=t(l,a,o)}return s}function h(e,t,i){const s=new Array(i.length);for(let n=0;n<i.length;n++)s[n]=c(e,t,i[n]);return s}function f(e,t,i,o,l){return(0,s.pC)(i)&&(t.points=function(e,t,i,s){return c(e,i?s?a:r:s?r:n,t)}(e,i.points,o,l)),t}function m(e,t,i,n,r){return(0,s.Wi)(i)||(t.x=l(e,i.x),t.y=u(e,i.y),t!==i&&(n&&(t.z=i.z),r&&(t.m=i.m))),t}function d(e,t,i,o,l){return(0,s.pC)(i)&&(t.rings=function(e,t,i,s){return h(e,i?s?a:r:s?r:n,t)}(e,i.rings,o,l)),t}function p(e,t,i,o,l){return(0,s.pC)(i)&&(t.paths=function(e,t,i,s){return h(e,i?s?a:r:s?r:n,t)}(e,i.paths,o,l)),t}},69285:(e,t,i)=>{i.d(t,{k:()=>a});var s=i(70586),n=i(67900),r=i(8744);function a(e,t,i){if((0,s.Wi)(t)||(0,s.Wi)(i)||i.vcsWkid||(0,r.fS)(t,i))return null;const a=(0,n._R)(t)/(0,n._R)(i);if(1===a)return null;switch(e){case"point":case"esriGeometryPoint":return e=>function(e,t){e&&null!=e.z&&(e.z*=t)}(e,a);case"polyline":case"esriGeometryPolyline":return e=>function(e,t){if(e)for(const i of e.paths)for(const e of i)e.length>2&&(e[2]*=t)}(e,a);case"polygon":case"esriGeometryPolygon":return e=>function(e,t){if(e)for(const i of e.rings)for(const e of i)e.length>2&&(e[2]*=t)}(e,a);case"multipoint":case"esriGeometryMultipoint":return e=>function(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}(e,a);case"extent":case"esriGeometryExtent":return e=>function(e,t){e&&null!=e.zmin&&null!=e.zmax&&(e.zmin*=t,e.zmax*=t)}(e,a);default:return null}}},98370:(e,t,i)=>{i.d(t,{y:()=>x,r:()=>f});var s=i(70586),n=i(35308),r=i(49600),a=i(82397),o=i(8744),l=i(98732),u=i(62432),c=i(8418);class h{constructor(e,t,i){this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=e.returnDistinctValues,this.fieldsIndex=i,this.featureAdapter=t;const s=e.outFields;if(s&&!s.includes("*")){this.outFields=s;let e=0;for(const t of s){const s=(0,u.hr)(t),n=this.fieldsIndex.get(s),r=n?null:(0,u.Jc)(s,i),a=n?n.name:(0,u.nu)(t)||"FIELD_EXP_"+e++;this._fieldDataCache.set(t,{alias:a,clause:r})}}}countDistinctValues(e){return this.returnDistinctValues?(e.forEach((e=>this.getAttributes(e))),this._returnDistinctMap.size):e.length}getAttributes(e){const t=this._processAttributesForOutFields(e);return this._processAttributesForDistinctValues(t)}getFieldValue(e,t,i){const s=i?i.name:t;let n=null;return this._fieldDataCache.has(s)?n=this._fieldDataCache.get(s).clause:i||(n=(0,u.Jc)(t,this.fieldsIndex),this._fieldDataCache.set(s,{alias:s,clause:n})),i?this.featureAdapter.getAttribute(e,s):n.calculateValue(e,this.featureAdapter)}getNormalizedValue(e,t){const i=t.normalizationType,s=t.normalizationTotal;let n=this.getFieldValue(e,t.field,t.fieldInfo);if(i&&Number.isFinite(n)){const r=this.getFieldValue(e,t.normalizationField,t.normalizationFieldInfo);n=(0,c.fk)(n,i,r,s)}return n}getExpressionValue(e,t,i){const s={attributes:this.featureAdapter.getAttributes(e)},n=i.createExecContext(s,t.viewInfo);return i.executeFunction(t.compiledFunc,n)}validateItem(e,t){return this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:(0,u.Jc)(t,this.fieldsIndex)}),this._fieldDataCache.get(t).clause.testFeature(e,this.featureAdapter)}validateItems(e,t){return this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:(0,u.Jc)(t,this.fieldsIndex)}),this._fieldDataCache.get(t).clause.testSet(e,this.featureAdapter)}_processAttributesForOutFields(e){const t=this.outFields;if(!t||!t.length)return this.featureAdapter.getAttributes(e);const i={};for(const s of t){const{alias:t,clause:n}=this._fieldDataCache.get(s);i[t]=n?n.calculateValue(e,this.featureAdapter):this.featureAdapter.getAttribute(e,t)}return i}_processAttributesForDistinctValues(e){if((0,s.Wi)(e)||!this.returnDistinctValues)return e;const t=this.outFields,i=[];if(t)for(const s of t){const{alias:t}=this._fieldDataCache.get(s);i.push(e[t])}else for(const t in e)i.push(e[t]);const n=`${(t||["*"]).join(",")}=${i.join(",")}`;let r=this._returnDistinctMap.get(n)||0;return this._returnDistinctMap.set(n,++r),r>1?null:e}}var f,m,d=i(37427),p=i(17590),g=i(11490),y=i(35671),_=i(59266);class x{constructor(e,t,i){this.items=e,this.queryGeometry=t,this.definitionExpression=i.definitionExpression,this.geometryType=i.geometryType,this.hasM=i.hasM,this.hasZ=i.hasZ,this.objectIdField=i.objectIdField,this.spatialReference=i.spatialReference,this.fieldsIndex=i.fieldsIndex,this.timeInfo=i.timeInfo,this.featureAdapter=i.featureAdapter,this.aggregateAdapter=i.aggregateAdapter}get size(){return this.items.length}createQueryResponseForCount(e){const t=new h(e,this.featureAdapter,this.fieldsIndex);if(!e.outStatistics)return t.countDistinctValues(this.items);const{groupByFieldsForStatistics:i,having:s}=e,n=i?.length;if(!n)return 1;const r=new Map,a=new Map,o=new Set,l=e.outStatistics;for(const e of l){const{statisticType:n}=e,l="exceedslimit"!==n?e.onStatisticField:void 0;if(!a.has(l)){const e=[];for(const s of i){const i=this._getAttributeValues(t,s,r);e.push(i)}a.set(l,this._calculateUniqueValues(e,t.returnDistinctValues))}const u=a.get(l);for(const e in u){const{data:i,items:n}=u[e],r=i.join(",");s&&!t.validateItems(n,s)||o.add(r)}}return o.size}async createQueryResponse(e){let t;return t=e.outStatistics?e.outStatistics.some((e=>"exceedslimit"===e.statisticType))?this._createExceedsLimitQueryResponse(e):await this._createStatisticsQueryResponse(e):this._createFeatureQueryResponse(e),e.returnQueryGeometry&&((0,o.JY)(e.outSR)&&!(0,o.fS)(this.queryGeometry.spatialReference,e.outSR)?t.queryGeometry=(0,g.S2)({spatialReference:e.outSR,...(0,d.iV)(this.queryGeometry,this.queryGeometry.spatialReference,e.outSR)}):t.queryGeometry=(0,g.S2)({spatialReference:e.outSR,...this.queryGeometry})),t}createSnappingResponse(e,t){const i=this.featureAdapter,n=function(e,t){return e?t?4:3:t?3:2}(this.hasZ,this.hasM),{x:r,y:a}=e.point,o="number"==typeof e.distance?e.distance:e.distance.x,l="number"==typeof e.distance?e.distance:e.distance.y,u={candidates:[]},c="esriGeometryPolygon"===this.geometryType,h=this._getPointCreator(e.point,this.spatialReference,t);for(const t of this.items){const m=i.getGeometry(t);if((0,s.Wi)(m))continue;const{coords:d,lengths:p}=m;if(e.types&f.EDGE){let e=0;for(let s=0;s<p.length;s++){const c=p[s];for(let s=0;s<c;s++,e+=n){const f=d[e],m=d[e+1];if(s!==c-1){const s=d[e+n],c=d[e+n+1],{x:p,y:g}=v(r,a,f,m,s,c),y=(r-p)/o,_=(a-g)/l,x=y*y+_*_;x<=1&&u.candidates.push({type:"edge",objectId:i.getObjectId(t),distance:Math.sqrt(x),target:h(p,g),start:h(f,m),end:h(s,c)})}}}}if(e.types&f.VERTEX){const e=c?d.length-n:d.length;for(let s=0;s<e;s+=n){const e=d[s],n=d[s+1],c=(r-e)/o,f=(a-n)/l,m=c*c+f*f;m<=1&&u.candidates.push({type:"vertex",objectId:i.getObjectId(t),distance:Math.sqrt(m),target:h(e,n)})}}}return u.candidates.sort(((e,t)=>e.distance-t.distance)),u}_getPointCreator(e,t,i){const n=(0,s.pC)(i)&&!(0,o.fS)(t,i)?e=>(0,d.iV)(e,t,i):e=>e;return null!=e.z&&null!=e.m?(t,i)=>n({x:t,y:i,z:e.z,m:e.m}):null!=e.z?(t,i)=>n({x:t,y:i,z:e.z}):null!=e.m?(t,i)=>n({x:t,y:i,m:e.m}):(e,t)=>n({x:e,y:t})}executeAttributesQuery(e){const t=(0,u.Jc)(e.where,this.fieldsIndex);if(!t)return Promise.resolve(this);if(t.isStandardized){let i=0;const s=[];for(const e of this.items)t.testFeature(e,this.featureAdapter)&&(s[i++]=e);const n=new x(s,this.queryGeometry,this);return n.definitionExpression=e.where,Promise.resolve(n)}return Promise.reject(new TypeError("Where clause is not standardized"))}executeAggregateIdsQuery(e){if(!e.aggregateIds||!e.aggregateIds.length||(0,s.Wi)(this.aggregateAdapter))return Promise.resolve(this);const t=new Set;for(const i of e.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(i).forEach((e=>t.add(e)));const i=this.featureAdapter.getObjectId;return Promise.resolve(new x(this.items.filter((e=>t.has(i(e)))),this.queryGeometry,this))}executeObjectIdsQuery(e){if(!e.objectIds||!e.objectIds.length)return Promise.resolve(this);const t=new Set(e.objectIds),i=this.featureAdapter.getObjectId;return Promise.resolve(new x(this.items.filter((e=>t.has(i(e)))),this.queryGeometry,this))}executeTimeQuery(e){const t=(0,p.y)(this.timeInfo,e.timeExtent,this.featureAdapter);if((0,s.Wi)(t))return Promise.resolve(this);const i=this.items.filter(t);return Promise.resolve(new x(i,this.queryGeometry,this))}filterLatest(){const{trackIdField:e,startTimeField:t,endTimeField:i}=this.timeInfo,s=i||t,n=new Map,r=this.featureAdapter.getAttribute;for(const t of this.items){const i=r(t,e),a=r(t,s),o=n.get(i);(!o||a>r(o,s))&&n.set(i,t)}const a=Array.from(n.values());return Promise.resolve(new x(a,this.queryGeometry,this))}async project(e){if(!e||(0,o.fS)(this.spatialReference,e))return this;const t=this.featureAdapter,i=(await(0,d.oj)(this.items.map((e=>(0,g.Op)(this.geometryType,this.hasZ,this.hasM,t.getGeometry(e)))),this.spatialReference,e)).map(((e,i)=>t.cloneWithGeometry(this.items[i],(0,l.GH)(e,this.hasZ,this.hasM))));return new x(i,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:e,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})}async createSummaryStatisticsResponse(e,t){const{field:i,valueExpression:s,normalizationField:n,normalizationType:r,normalizationTotal:a,minValue:o,maxValue:l,scale:u}=t,h=this.fieldsIndex.isDateField(i),f=await this._getDataValues(e,{field:i,valueExpression:s,normalizationField:n,normalizationType:r,normalizationTotal:a,scale:u}),m=(0,c.S5)({normalizationType:r,normalizationField:n,minValue:o,maxValue:l}),d=this.fieldsIndex.get(i),p={value:.5,fieldType:d?.type},g=(0,y.qN)(d)?(0,c.H0)({values:f,supportsNullCount:m,percentileParams:p}):(0,c.i5)({values:f,minValue:o,maxValue:l,useSampleStdDev:!r,supportsNullCount:m,percentileParams:p});return(0,c.F_)(g,h)}async createUniqueValuesResponse(e,t){const{field:i,valueExpression:s,domain:n,returnAllCodedValues:r,scale:a}=t,o=await this._getDataValues(e,{field:i,valueExpression:s,scale:a}),l=(0,c.eT)(o);return(0,c.Qm)(l,n,r)}async createClassBreaksResponse(e,t){const{field:i,valueExpression:s,normalizationField:n,normalizationType:r,normalizationTotal:a,classificationMethod:o,standardDeviationInterval:l,minValue:u,maxValue:h,numClasses:f,scale:m}=t,d=await this._getDataValues(e,{field:i,valueExpression:s,normalizationField:n,normalizationType:r,normalizationTotal:a,scale:m}),p=(0,c.G2)(d,{field:i,normalizationField:n,normalizationType:r,normalizationTotal:a,classificationMethod:o,standardDeviationInterval:l,minValue:u,maxValue:h,numClasses:f});return(0,c.DL)(p,o)}async createHistogramResponse(e,t){const{field:i,valueExpression:s,normalizationField:n,normalizationType:r,normalizationTotal:a,classificationMethod:o,standardDeviationInterval:l,minValue:u,maxValue:h,numBins:f,scale:m}=t,d=await this._getDataValues(e,{field:i,valueExpression:s,normalizationField:n,normalizationType:r,normalizationTotal:a,scale:m});return(0,c.oF)(d,{field:i,normalizationField:n,normalizationType:r,normalizationTotal:a,classificationMethod:o,standardDeviationInterval:l,minValue:u,maxValue:h,numBins:f})}_sortFeatures(e,t,i){if(e.length>1&&t&&t.length)for(const s of t.reverse()){const t=s.split(" "),n=t[0],r=this.fieldsIndex.get(n),a=t[1]&&"desc"===t[1].toLowerCase(),o=(0,c.Lq)(r?.type,a);e.sort(((e,t)=>{const s=i(e,n,r),a=i(t,n,r);return o(s,a)}))}}_createFeatureQueryResponse(e){const t=this.items,{geometryType:i,hasM:s,hasZ:n,objectIdField:r,spatialReference:o}=this,{outFields:l,outSR:u,quantizationParameters:c,resultRecordCount:h,resultOffset:f,returnZ:m,returnM:d}=e,p=null!=h&&t.length>(f||0)+h,y=l&&(l.includes("*")?[...this.fieldsIndex.fields]:l.map((e=>this.fieldsIndex.get(e))));return{exceededTransferLimit:p,features:this._createFeatures(e,t),fields:y,geometryType:i,hasM:s&&d,hasZ:n&&m,objectIdFieldName:r,spatialReference:(0,g.S2)(u||o),transform:c&&(0,a.vY)(c)||null}}_createFeatures(e,t){const i=new h(e,this.featureAdapter,this.fieldsIndex),{hasM:s,hasZ:n}=this,{orderByFields:r,quantizationParameters:o,returnGeometry:l,returnCentroid:u,maxAllowableOffset:c,resultOffset:f,resultRecordCount:m,returnZ:d=!1,returnM:p=!1}=e,y=n&&d,_=s&&p;let x=[],v=0;const S=[...t];if(this._sortFeatures(S,r,((e,t,s)=>i.getFieldValue(e,t,s))),l||u){const e=(0,a.vY)(o);if(l&&!u)for(const t of S)x[v++]={attributes:i.getAttributes(t),geometry:(0,g.Op)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(t),c,e,y,_)};else if(!l&&u)for(const t of S)x[v++]={attributes:i.getAttributes(t),centroid:(0,g.EG)(this,this.featureAdapter.getCentroid(t,this),e)};else for(const t of S)x[v++]={attributes:i.getAttributes(t),centroid:(0,g.EG)(this,this.featureAdapter.getCentroid(t,this),e),geometry:(0,g.Op)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(t),c,e,y,_)}}else for(const e of S){const t=i.getAttributes(e);t&&(x[v++]={attributes:t})}const z=f||0;if(null!=m){const e=z+m;x=x.slice(z,Math.min(x.length,e))}return x}_createExceedsLimitQueryResponse(e){let t=!1,i=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY;for(const t of e.outStatistics)if("exceedslimit"===t.statisticType){i=null!=t.maxPointCount?t.maxPointCount:Number.POSITIVE_INFINITY,n=null!=t.maxRecordCount?t.maxRecordCount:Number.POSITIVE_INFINITY,r=null!=t.maxVertexCount?t.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)t=this.items.length>i;else if(this.items.length>n)t=!0;else{const e=this.hasZ?this.hasM?4:3:this.hasM?3:2,i=this.featureAdapter;t=this.items.reduce(((e,t)=>{const n=i.getGeometry(t);return e+((0,s.pC)(n)&&n.coords.length||0)}),0)/e>r}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(t)}}]}}async _createStatisticsQueryResponse(e){const t={attributes:{}},i=[],s=new Map,n=new Map,r=new Map,a=new Map,o=new h(e,this.featureAdapter,this.fieldsIndex),l=e.outStatistics,{groupByFieldsForStatistics:u,having:c,orderByFields:f}=e,m=u&&u.length,d=!!m,p=d&&u[0],g=d&&!this.fieldsIndex.get(p);for(const e of l){const{outStatisticFieldName:l,statisticType:h}=e,f=e,y="exceedslimit"!==h?e.onStatisticField:void 0,_="percentile_disc"===h||"percentile_cont"===h,x="EnvelopeAggregate"===h||"CentroidAggregate"===h||"ConvexHullAggregate"===h,v=d&&1===m&&(y===p||g)&&"count"===h;if(d){if(!r.has(y)){const e=[];for(const t of u){const i=this._getAttributeValues(o,t,s);e.push(i)}r.set(y,this._calculateUniqueValues(e,o.returnDistinctValues))}const e=r.get(y);for(const t in e){const{count:i,data:n,items:r,itemPositions:h}=e[t],m=n.join(",");if(!c||o.validateItems(r,c)){const e=a.get(m)||{attributes:{}};if(x){e.aggregateGeometries||(e.aggregateGeometries={});const{aggregateGeometries:t,outStatisticFieldName:i}=await this._getAggregateGeometry(f,r);e.aggregateGeometries[i]=t}else{let t=null;if(v)t=i;else{const e=this._getAttributeValues(o,y,s),i=h.map((t=>e[t]));t=_&&"statisticParameters"in f?this._getPercentileValue(f,i):this._getStatisticValue(f,i,null,o.returnDistinctValues)}e.attributes[l]=t}u.forEach(((t,i)=>e.attributes[this.fieldsIndex.get(t)?t:`EXPR_${i+1}`]=n[i])),a.set(m,e)}}}else if(x){t.aggregateGeometries||(t.aggregateGeometries={});const{aggregateGeometries:e,outStatisticFieldName:i}=await this._getAggregateGeometry(f,this.items);t.aggregateGeometries[i]=e}else{const e=this._getAttributeValues(o,y,s);t.attributes[l]=_&&"statisticParameters"in f?this._getPercentileValue(f,e):this._getStatisticValue(f,e,n,o.returnDistinctValues)}i.push({name:l,alias:l,type:"esriFieldTypeDouble"})}const y=d?Array.from(a.values()):[t];return this._sortFeatures(y,f,((e,t)=>e.attributes[t])),{fields:i,features:y}}async _getAggregateGeometry(e,t){const s=await Promise.all([i.e(5837),i.e(247)]).then(i.bind(i,30247)),{statisticType:a,outStatisticFieldName:o}=e,{featureAdapter:l,spatialReference:u,geometryType:c,hasZ:h,hasM:f}=this,m=t.map((e=>(0,g.Op)(c,h,f,l.getGeometry(e)))),d=s.convexHull(u,m,!0)[0],p={aggregateGeometries:null,outStatisticFieldName:null};if("EnvelopeAggregate"===a){const e=d?(0,r._w)(d):(0,r.aO)(s.union(u,m));p.aggregateGeometries={...e,spatialReference:u},p.outStatisticFieldName=o||"extent"}else if("CentroidAggregate"===a){const e=d?(0,n.tO)(d):(0,n.$G)((0,r.aO)(s.union(u,m)));p.aggregateGeometries={x:e[0],y:e[1],spatialReference:u},p.outStatisticFieldName=o||"centroid"}else"ConvexHullAggregate"===a&&(p.aggregateGeometries=d,p.outStatisticFieldName=o||"convexHull");return p}_getStatisticValue(e,t,i,s){const{onStatisticField:n,statisticType:r}=e;let a=null;return a=i?.has(n)?i.get(n):(0,y.qN)(this.fieldsIndex.get(n))?(0,c.H0)({values:t,returnDistinct:s}):(0,c.i5)({values:t,minValue:null,maxValue:null,useSampleStdDev:!0}),i&&i.set(n,a),a["var"===r?"variance":r]}_getPercentileValue(e,t){const{onStatisticField:i,statisticParameters:s,statisticType:n}=e,{value:r,orderBy:a}=s,o=this.fieldsIndex.get(i);return(0,c.XL)(t,{value:r,orderBy:a,fieldType:o?.type,isDiscrete:"percentile_disc"===n})}_getAttributeValues(e,t,i){if(i.has(t))return i.get(t);const s=this.fieldsIndex.get(t),n=this.items.map((i=>e.getFieldValue(i,t,s)));return i.set(t,n),n}_getAttributeNormalizedValues(e,t){return this.items.map((i=>e.getNormalizedValue(i,{field:t.field,fieldInfo:this.fieldsIndex.get(t.field),normalizationField:t.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(t.normalizationField),normalizationType:t.normalizationType,normalizationTotal:t.normalizationTotal})))}async _getAttributeExpressionValues(e,t,i){const{arcadeUtils:s}=await(0,_.LC)(),n=s.createFunction(t),r=i&&s.getViewInfo(i);return this.items.map((t=>e.getExpressionValue(t,{compiledFunc:n,viewInfo:r},s)))}_calculateUniqueValues(e,t){const i={},s=this.items,n=s.length;for(let r=0;r<n;r++){const n=s[r],a=[];for(const t of e)a.push(t[r]);const o=a.join(",");t?null==i[o]&&(i[o]={count:1,data:a,items:[n],itemPositions:[r]}):null==i[o]?i[o]={count:1,data:a,items:[n],itemPositions:[r]}:(i[o].count++,i[o].items.push(n),i[o].itemPositions.push(r))}return i}async _getDataValues(e,t){const i=new h(e,this.featureAdapter,this.fieldsIndex),{valueExpression:s,field:n,normalizationField:r,normalizationType:a,normalizationTotal:o,scale:l}=t,u=s?{viewingMode:"map",scale:l,spatialReference:e.outSR||this.spatialReference}:null;return s?this._getAttributeExpressionValues(i,s,u):this._getAttributeNormalizedValues(i,{field:n,normalizationField:r,normalizationType:a,normalizationTotal:o})}}function v(e,t,i,s,n,r){const a=n-i,o=r-s,l=a*a+o*o,u=(e-i)*a+(t-s)*o,c=Math.min(1,Math.max(0,u/l));return{x:i+a*c,y:s+o*c}}(m=f||(f={}))[m.NONE=0]="NONE",m[m.EDGE=1]="EDGE",m[m.VERTEX=2]="VERTEX"},62432:(e,t,i)=>{i.d(t,{nu:()=>p,hr:()=>d,Jc:()=>f,G3:()=>g,Of:()=>m,z4:()=>h,hO:()=>c});var s=i(20102),n=i(74669),r=i(41534);const a=new class{constructor(e,t){this._cache=new n.Z(e),this._invalidCache=new n.Z(t)}get(e,t){const i=`${t.uid}:${e}`,s=this._cache.get(i);if(s)return s;if(void 0!==this._invalidCache.get(i))return null;try{const s=r.WhereClause.create(e,t);return this._cache.put(i,s),s}catch{return this._invalidCache.put(i,null),null}}}(50,500),o="feature-store:unsupported-query",l=" as ",u=new Set(["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeDate"]);function c(e,t){if(!t)return!0;const i=a.get(t,e);if(!i)throw new s.Z(o,"invalid SQL expression",{where:t});if(!i.isStandardized)throw new s.Z(o,"where clause is not standard",{where:t});return m(e,i.fieldNames,"where clause contains missing fields"),!0}function h(e,t,i){if(!t)return!0;const n=a.get(t,e);if(!n)throw new s.Z(o,"invalid SQL expression",{having:t});if(!n.isAggregate)throw new s.Z(o,"having does not contain a valid aggregate function",{having:t});const r=n.fieldNames;if(m(e,r,"having contains missing fields"),!n.getExpressions().every((t=>{const{aggregateType:s,field:n}=t,r=e.has(n)&&e.get(n).name;return i.some((t=>{const{onStatisticField:i,statisticType:n}=t;return(e.has(i)&&e.get(i).name)===r&&n.toLowerCase().trim()===s}))})))throw new s.Z(o,"expressions in having should also exist in outStatistics",{having:t});return!0}function f(e,t){return e?a.get(e,t):null}function m(e,t,i,n=!0){const r=[];for(const i of t)if("*"!==i&&!e.has(i))if(n){const t=d(i);try{const i=f(t,e);if(!i)throw new s.Z(o,"invalid SQL expression",{where:t});if(!i.isStandardized)throw new s.Z(o,"expression is not standard",{clause:i});m(e,i.fieldNames,"expression contains missing fields")}catch(e){const t=e&&e.details;if(t&&(t.clause||t.where))throw e;t&&t.missingFields?r.push(...t.missingFields):r.push(i)}}else r.push(i);if(r.length)throw new s.Z(o,i,{missingFields:r})}function d(e){return e.split(l)[0]}function p(e){return e.split(l)[1]}function g(e,t){const i=t.get(e);return!!i&&!u.has(i.type)}},37427:(e,t,i)=>{i.d(t,{_W:()=>f,iV:()=>p,oj:()=>y});var s=i(70586),n=i(44547),r=i(37455),a=i(8744),o=i(40488);const l=[0,0];function u(e,t){if(!t)return null;if("x"in t){const i={x:0,y:0};return[i.x,i.y]=e(t.x,t.y,l),null!=t.z&&(i.z=t.z),null!=t.m&&(i.m=t.m),i}if("xmin"in t){const i={xmin:0,ymin:0,xmax:0,ymax:0};return[i.xmin,i.ymin]=e(t.xmin,t.ymin,l),[i.xmax,i.ymax]=e(t.xmax,t.ymax,l),t.hasZ&&(i.zmin=t.zmin,i.zmax=t.zmax,i.hasZ=!0),t.hasM&&(i.mmin=t.mmin,i.mmax=t.mmax,i.hasM=!0),i}return"rings"in t?{rings:c(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:c(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:h(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:void 0}function c(e,t){const i=[];for(const s of e)i.push(h(s,t));return i}function h(e,t){const i=[];for(const s of e){const e=t(s[0],s[1],[0,0]);i.push(e),s.length>2&&e.push(s[2]),s.length>3&&e.push(s[3])}return i}async function f(e,t){if(!t)return;const i=Array.isArray(e)?e.map((e=>(0,s.pC)(e.geometry)&&e.geometry.spatialReference)):[e];await(0,n.iQ)(i.map((e=>({source:e,dest:t}))))}const m=u.bind(null,o.hG),d=u.bind(null,o.R6);function p(e,t,i){if(!e)return e;if(i||(i=t,t=e.spatialReference),!(0,a.JY)(t)||!(0,a.JY)(i)||(0,a.fS)(t,i))return e;if((0,o.Q8)(t,i)){const t=(0,a.sS)(i)?m(e):d(e);return t.spatialReference=i,t}return(0,n.oj)(r.N,[e],t,i,null)[0]}const g=new class{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(e,t,i){if(!e||!e.length||!t||!i||(0,a.fS)(t,i))return e;const s={geometries:e,inSpatialReference:t,outSpatialReference:i,resolve:null};return this._jobs.push(s),new Promise((e=>{s.resolve=e,null===this._timer&&(this._timer=setTimeout(this._process,10))}))}_process(){this._timer=null;const e=this._jobs.shift();if(!e)return;const{geometries:t,inSpatialReference:i,outSpatialReference:s,resolve:l}=e;(0,o.Q8)(i,s)?(0,a.sS)(s)?l(t.map(m)):l(t.map(d)):l((0,n.oj)(r.N,t,i,s,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}};function y(e,t,i){return g.push(e,t,i)}},17590:(e,t,i)=>{function s(e,t){if(!e)return null;const i=t.featureAdapter,{startTimeField:s,endTimeField:n}=e;let r=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;if(s&&n)t.forEach((e=>{const t=i.getAttribute(e,s),o=i.getAttribute(e,n);null==t||isNaN(t)||(r=Math.min(r,t)),null==o||isNaN(o)||(a=Math.max(a,o))}));else{const e=s||n;t.forEach((t=>{const s=i.getAttribute(t,e);null==s||isNaN(s)||(r=Math.min(r,s),a=Math.max(a,s))}))}return{start:r,end:a}}function n(e,t,i){if(!t||!e)return null;const{startTimeField:s,endTimeField:n}=e;if(!s&&!n)return null;const{start:r,end:a}=t;return null===r&&null===a?null:void 0===r&&void 0===a?()=>!1:s&&n?function(e,t,i,s,n){return null!=s&&null!=n?r=>{const a=e.getAttribute(r,t),o=e.getAttribute(r,i);return(null==a||a<=n)&&(null==o||o>=s)}:null!=s?t=>{const n=e.getAttribute(t,i);return null==n||n>=s}:null!=n?i=>{const s=e.getAttribute(i,t);return null==s||s<=n}:void 0}(i,s,n,r,a):function(e,t,i,s){return null!=i&&null!=s&&i===s?s=>e.getAttribute(s,t)===i:null!=i&&null!=s?n=>{const r=e.getAttribute(n,t);return r>=i&&r<=s}:null!=i?s=>e.getAttribute(s,t)>=i:null!=s?i=>e.getAttribute(i,t)<=s:void 0}(i,s||n,r,a)}i.d(t,{R:()=>s,y:()=>n})},11490:(e,t,i)=>{i.d(t,{EG:()=>x,Op:()=>v,S2:()=>F,Up:()=>S,j6:()=>z,vF:()=>d});var s=i(35454),n=i(70586),r=i(67900),a=i(49600),o=i(33955),l=i(82526),u=i(8744),c=i(98732),h=i(5428),f=i(37427);const m=new s.X({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),d=Object.freeze({}),p=new h.Z,g=new h.Z,y=new h.Z,_={esriGeometryPoint:c.fQ,esriGeometryPolyline:c.J6,esriGeometryPolygon:c.eG,esriGeometryMultipoint:c.Iv};function x(e,t,i,s=e.hasZ,r=e.hasM){if((0,n.Wi)(t))return null;const a=e.hasZ&&s,o=e.hasM&&r;if(i){const n=(0,c.Nh)(y,t,e.hasZ,e.hasM,"esriGeometryPoint",i,s,r);return(0,c.fQ)(n,a,o)}return(0,c.fQ)(t,a,o)}function v(e,t,i,s,r,a,o=t,l=i){const u=t&&o,h=i&&l,f=(0,n.pC)(s)?"coords"in s?s:s.geometry:null;if((0,n.Wi)(f))return null;if(r){let s=(0,c.zj)(g,f,t,i,e,r,o,l);return a&&(s=(0,c.Nh)(y,s,u,h,e,a)),_[e](s,u,h)}if(a){const s=(0,c.Nh)(y,f,t,i,e,a,o,l);return _[e](s,u,h)}return(0,c.hY)(p,f,t,i,o,l),_[e](p,u,h)}async function S(e,t,i){const{outFields:s,orderByFields:n,groupByFieldsForStatistics:r,outStatistics:a}=e;if(s)for(let e=0;e<s.length;e++)s[e]=s[e].trim();if(n)for(let e=0;e<n.length;e++)n[e]=n[e].trim();if(r)for(let e=0;e<r.length;e++)r[e]=r[e].trim();if(a)for(let e=0;e<a.length;e++)a[e].onStatisticField&&(a[e].onStatisticField=a[e].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),z(e,t,i)}async function z(e,t,s){if(!e)return null;let{where:c}=e;if(e.where=c=c&&c.trim(),(!c||/^1 *= *1$/.test(c)||t&&t===c)&&(e.where=null),!e.geometry)return e;let h=await async function(e){const{geometry:t,distance:s,units:n}=e;if(null==s||"vertexAttributes"in t)return t;const a=t.spatialReference,o=n?m.fromJSON(n):(0,r.qE)(a),l=a&&((0,u.sT)(a)||(0,u.sS)(a))?t:await(0,f._W)(a,u.Zn).then((()=>(0,f.iV)(t,u.Zn)));return(await async function(){return(await Promise.all([i.e(5837),i.e(247)]).then(i.bind(i,30247))).geodesicBuffer}())(l.spatialReference,l,s,o)}(e);if(e.distance=0,e.units=null,"esriSpatialRelEnvelopeIntersects"===e.spatialRel){const{spatialReference:t}=e.geometry;h=(0,a.aO)(h),h.spatialReference=t}e.geometry=h,await(0,f._W)(h.spatialReference,s);const p=(await(0,l.aX)((0,o.im)(h)))[0];if((0,n.Wi)(p))throw d;const g=p.toJSON(),y=await(0,f.iV)(g,g.spatialReference,s);if(!y)throw d;return y.spatialReference=s,e.geometry=y,e}function F(e){return e&&w in e?JSON.parse(JSON.stringify(e,b)):e}const w="_geVersion",b=(e,t)=>e!==w?t:void 0}}]);