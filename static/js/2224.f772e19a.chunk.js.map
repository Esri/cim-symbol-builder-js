{"version":3,"file":"static/js/2224.f772e19a.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/core/accessorSupport/originUtils.js","../node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js","../node_modules/@arcgis/core/layers/save/featureLayerUtils.js","../node_modules/@arcgis/core/layers/support/fetchService.js","../node_modules/@arcgis/core/portal/support/jsonContext.js","../node_modules/@arcgis/core/support/requestPresets.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{isMultiOriginJSONMixin as r}from\"../multiOriginJSONSupportUtils.js\";function i(i){i&&i.writtenProperties&&i.writtenProperties.forEach((({target:i,propName:t,newOrigin:e})=>{r(i)&&e&&i.originOf(t)!==e&&i.updateOrigin(t,e)}))}export{i as updateOrigins};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nfunction i(i){return i&&\"getAtOrigin\"in i&&\"originOf\"in i}export{i as isMultiOriginJSONMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{difference as e}from\"../../core/arrayUtils.js\";import t from\"../../core/Error.js\";import r from\"../../core/Logger.js\";import{debounce as a,eachAlways as o}from\"../../core/promiseUtils.js\";import{updateOrigins as l}from\"../../core/accessorSupport/originUtils.js\";import s from\"../FeatureLayer.js\";import{parse as n}from\"../support/arcgisLayerUrl.js\";import{fetchFeatureService as i}from\"../support/fetchService.js\";import{isFeatureCollectionLayer as u,isFeatureServiceLayer as p}from\"../support/layerUtils.js\";import c from\"../../portal/Portal.js\";import d from\"../../portal/PortalItem.js\";import{createForItemWrite as y}from\"../../portal/support/jsonContext.js\";import{addTypeKeyword as m,TypeKeyword as f,getWGS84ExtentForItem as w,removeTypeKeyword as h}from\"../../portal/support/portalItemUtils.js\";const v=r.getLogger(\"esri.layers.FeatureLayer\"),b=\"Feature Service\";function I(e,t){return`Layer (title: ${e.title}, id: ${e.id}) of type '${e.declaredClass}' ${t}`}function S(e,r){if(r.type!==b)throw new t(\"feature-layer:portal-item-wrong-type\",I(e,`should have portal item of type \"${b}\"`))}async function g(e){if(await e.load(),u(e))throw new t(\"feature-layer:save\",I(e,\"using an in-memory source cannot be saved to a portal item\"))}function j(e,r){let a=(e.messages??[]).filter((({type:e})=>\"error\"===e)).map((({name:e,message:r,details:a})=>new t(e,r,a)));if(r?.ignoreUnsupported&&(a=a.filter((({name:e})=>\"layer:unsupported\"!==e&&\"symbol:unsupported\"!==e&&\"symbol-layer:unsupported\"!==e&&\"property:unsupported\"!==e&&\"url:unsupported\"!==e))),a.length>0)throw new t(\"feature-layer:save\",\"Failed to save feature layer due to unsupported or invalid content. See 'details.errors' for more detailed information\",{errors:a})}async function L(e,t,r){\"beforeSave\"in e&&\"function\"==typeof e.beforeSave&&await e.beforeSave();const a=e.write({},t);return j(t,r),a}function P(e){const{layer:t,layerJSON:r}=e;return t.isTable?{layers:[],tables:[r]}:{layers:[r],tables:[]}}function J(e){m(e,f.JSAPI),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)))}function N(e){const r=e.portalItem;if(!r)throw v.error(\"save: requires the portalItem property to be set\"),new t(\"feature-layer:portal-item-not-set\",I(e,\"requires the portalItem property to be set\"));if(!r.loaded)throw new t(\"feature-layer:portal-item-not-loaded\",I(e,\"cannot be saved to a portal item that does not exist or is inaccessible\"));S(e,r)}async function O(e,t){return/\\/\\d+\\/?$/.test(e.url??\"\")?P(t[0]):E(e,t)}async function E(e,t){const{layer:{url:r,customParameters:a,apiKey:o}}=t[0];let l=await e.fetchData(\"json\");l&&null!=l.layers&&null!=l.tables||(l=await T(l,{url:r??\"\",customParameters:a,apiKey:o},t.map((e=>e.layer.layerId))));for(const s of t)A(s.layer,s.layerJSON,l);return l}async function T(e,t,r){e||={},e.layers||=[],e.tables||=[];const{url:a,customParameters:o,apiKey:l}=t,{serviceJSON:s,layersJSON:n}=await i(a,{customParameters:o,apiKey:l}),u=$(e.layers,s.layers,r),p=$(e.tables,s.tables,r);e.layers=u.itemResources,e.tables=p.itemResources;const c=[...u.added,...p.added],d=n?[...n.layers,...n.tables]:[];return await x(e,c,a,d),e}function $(t,r,a){const o=e(t,r,((e,t)=>e.id===t.id));t=t.filter((e=>!o.removed.some((t=>t.id===e.id))));const l=o.added.map((({id:e})=>({id:e})));return l.forEach((({id:e})=>{t.push({id:e})})),{itemResources:t,added:l.filter((({id:e})=>!a.includes(e)))}}async function x(e,t,r,a){const l=t.map((({id:e})=>new s({url:r,layerId:e,sourceJSON:a.find((({id:t})=>t===e))})));await o(l.map((e=>e.load()))),l.forEach((t=>{const{layerId:r,loaded:a,defaultPopupTemplate:o}=t;if(!a||null==o)return;A(t,{id:r,popupInfo:o.toJSON()},e)}))}function A(e,t,r){e.isTable?U(r.tables,t):U(r.layers,t)}function U(e,t){if(!e)return;const r=e.findIndex((({id:e})=>e===t.id));-1===r?e.push(t):e[r]=t}function K(e){const{portalItem:t}=e;return p(e)&&!e.dynamicDataSource&&!!t?.loaded&&t.type===b}async function F(e){if(!e?.length)throw new t(\"feature-layer-utils-saveall:missing-parameters\",\"'layers' array should contain at least one feature layer\");await Promise.all(e.map((e=>e.load())));for(const o of e)if(!K(o))throw new t(\"feature-layer-utils-saveall:invalid-parameters\",`'layers' array should only contain layers or tables in a feature service loaded from 'Feature Service' item. ${I(o,\"does not conform\")}`,{layer:o});const r=e.map((e=>e.portalItem.id));if(new Set(r).size>1)throw new t(\"feature-layer-utils-saveall:invalid-parameters\",\"All layers in the 'layers' array should be loaded from the same portal item\");const a=e.map((e=>e.layerId));if(new Set(a).size!==a.length)throw new t(\"feature-layer-utils-saveall:invalid-parameters\",\"'layers' array should contain only one instance each of layer or table in a feature service\")}function R(e,t){let r=d.from(t);return r.id&&(r=r.clone(),r.id=null),r.type??=b,r.portal??=c.getDefault(),S(e,r),r}async function D(e,t){const{url:r,layerId:a,title:o,fullExtent:l,isTable:s}=e,i=n(r),u=null!=i&&\"FeatureServer\"===i.serverType;t.url=u?r:`${r}/${a}`,t.title||=o,t.extent=null,s||null==l||(t.extent=await w(l)),h(t,f.METADATA),h(t,f.MULTI_LAYER),m(t,f.SINGLE_LAYER),s&&m(t,f.TABLE),J(t)}async function q(e,t,r){const a=e.portal;await(a?.signIn()),await(a?.user?.addItem({item:e,data:t,folder:r?.folder}))}const z=a(C);async function C(e,t){await g(e),N(e);const r=e.portalItem,a=y(r),o=await L(e,a,t),s=await O(r,[{layer:e,layerJSON:o}]);return J(r),await r.update({data:s}),l(a),r}const M=a((async(e,t)=>{await F(e);const r=e[0].portalItem,a=y(r),o=await Promise.all(e.map((e=>L(e,a,t)))),s=await O(r,e.map(((e,t)=>({layer:e,layerJSON:o[t]}))));return J(r),await r.update({data:s}),await Promise.all(e.slice(1).map((e=>e.portalItem.reload()))),l(a),r.clone()})),Y=a(_);async function _(e,t,r){await g(e);const a=R(e,t),o=y(a),s=P({layer:e,layerJSON:await L(e,o,r)});return await D(e,a),await q(a,s,r),e.portalItem=a,l(o),a}export{z as save,M as saveAll,Y as saveAs};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{fetchArcGISServiceJSON as e}from\"../../support/requestPresets.js\";async function r(r,s){const a=await e(r,s);a.layers=a.layers.filter(t);const n={serviceJSON:a};if((a.currentVersion??0)<10.5)return n;const i=await e(r+\"/layers\",s);return n.layersJSON={layers:i.layers.filter(t),tables:i.tables},n}function t(e){return!e.type||\"Feature Layer\"===e.type}export{r as fetchFeatureService};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{urlToObject as r}from\"../../core/urlUtils.js\";import t from\"../Portal.js\";function e(e){return{origin:\"portal-item\",url:r(e.itemUrl),portal:e.portal||t.getDefault(),portalItem:e,readResourcePaths:[]}}function o(e){return{origin:\"portal-item\",messages:[],writtenProperties:[],url:e.itemUrl?r(e.itemUrl):null,portal:e.portal||t.getDefault(),portalItem:e}}export{e as createForItemRead,o as createForItemWrite};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../request.js\";async function t(t,o){const{data:r}=await e(t,{responseType:\"json\",query:{f:\"json\",...o?.customParameters,token:o?.apiKey}});return r}export{t as fetchArcGISServiceJSON};\n"],"names":["i","writtenProperties","forEach","target","propName","t","newOrigin","e","r","originOf","updateOrigin","v","b","I","title","id","declaredClass","S","type","async","g","load","u","L","beforeSave","a","write","messages","filter","map","name","message","details","ignoreUnsupported","length","errors","j","P","layer","layerJSON","isTable","layers","tables","J","m","f","typeKeywords","indexOf","O","test","url","customParameters","apiKey","o","l","fetchData","serviceJSON","s","layersJSON","n","$","p","itemResources","c","added","d","layerId","sourceJSON","find","loaded","defaultPopupTemplate","A","popupInfo","toJSON","x","T","E","removed","some","push","includes","U","findIndex","K","portalItem","dynamicDataSource","z","error","N","y","update","data","M","Promise","all","Set","size","F","slice","reload","clone","Y","portal","R","fullExtent","serverType","extent","w","h","D","signIn","user","addItem","item","folder","q","currentVersion","origin","itemUrl","readResourcePaths","responseType","query","token"],"sourceRoot":""}