{"version":3,"file":"static/js/2224.c77ce07a.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/core/accessorSupport/originUtils.js","../node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js","../node_modules/@arcgis/core/layers/save/featureLayerUtils.js","../node_modules/@arcgis/core/layers/support/fetchService.js","../node_modules/@arcgis/core/portal/support/jsonContext.js","../node_modules/@arcgis/core/support/requestPresets.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{isMultiOriginJSONMixin as r}from\"../multiOriginJSONSupportUtils.js\";function i(i){i&&i.writtenProperties&&i.writtenProperties.forEach((({target:i,propName:t,newOrigin:e})=>{r(i)&&e&&i.originOf(t)!==e&&i.updateOrigin(t,e)}))}export{i as updateOrigins};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nfunction i(i){return i&&\"getAtOrigin\"in i&&\"originOf\"in i}export{i as isMultiOriginJSONMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{difference as e}from\"../../core/arrayUtils.js\";import t from\"../../core/Error.js\";import r from\"../../core/Logger.js\";import{isNone as a,isSome as o}from\"../../core/maybe.js\";import{debounce as s,eachAlways as l}from\"../../core/promiseUtils.js\";import{updateOrigins as i}from\"../../core/accessorSupport/originUtils.js\";import n from\"../FeatureLayer.js\";import{parse as u}from\"../support/arcgisLayerUrl.js\";import{fetchFeatureService as p}from\"../support/fetchService.js\";import{isFeatureCollectionLayer as c,isFeatureServiceLayer as y}from\"../support/layerUtils.js\";import d from\"../../portal/Portal.js\";import m from\"../../portal/PortalItem.js\";import{createForItemWrite as f}from\"../../portal/support/jsonContext.js\";import{addTypeKeyword as w,TypeKeyword as h,getWGS84ExtentForItem as v,removeTypeKeyword as b}from\"../../portal/support/portalItemUtils.js\";const I=r.getLogger(\"esri.layers.FeatureLayer\"),S=\"Feature Service\";function g(e,t){return`Layer (title: ${e.title}, id: ${e.id}) of type '${e.declaredClass}' ${t}`}function j(e,r){if(r.type!==S)throw new t(\"feature-layer:portal-item-wrong-type\",g(e,`should have portal item of type \"${S}\"`))}async function L(e){if(await e.load(),c(e))throw new t(\"feature-layer:save\",g(e,\"using an in-memory source cannot be saved to a portal item\"))}function P(e,r){let a=(e.messages??[]).filter((({type:e})=>\"error\"===e)).map((({name:e,message:r,details:a})=>new t(e,r,a)));if(r?.ignoreUnsupported&&(a=a.filter((({name:e})=>\"layer:unsupported\"!==e&&\"symbol:unsupported\"!==e&&\"symbol-layer:unsupported\"!==e&&\"property:unsupported\"!==e&&\"url:unsupported\"!==e))),a.length>0)throw new t(\"feature-layer:save\",\"Failed to save feature layer due to unsupported or invalid content. See 'details.errors' for more detailed information\",{errors:a})}async function J(e,t,r){\"beforeSave\"in e&&\"function\"==typeof e.beforeSave&&await e.beforeSave();const a=e.write({},t);return P(t,r),a}function N(e){const{layer:t,layerJSON:r}=e;return t.isTable?{layers:[],tables:[r]}:{layers:[r],tables:[]}}function O(e){w(e,h.JSAPI),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)))}function E(e){const r=e.portalItem;if(!r)throw I.error(\"save: requires the portalItem property to be set\"),new t(\"feature-layer:portal-item-not-set\",g(e,\"requires the portalItem property to be set\"));if(!r.loaded)throw new t(\"feature-layer:portal-item-not-loaded\",g(e,\"cannot be saved to a portal item that does not exist or is inaccessible\"));j(e,r)}async function T(e,t){return/\\/\\d+\\/?$/.test(e.url??\"\")?N(t[0]):$(e,t)}async function $(e,t){const{layer:{url:r,customParameters:a,apiKey:o}}=t[0];let s=await e.fetchData(\"json\");s&&null!=s.layers&&null!=s.tables||(s=await x(s,{url:r??\"\",customParameters:a,apiKey:o},t.map((e=>e.layer.layerId))));for(const l of t)K(l.layer,l.layerJSON,s);return s}async function x(e,t,r){var a,o;e||(e={}),(a=e).layers||(a.layers=[]),(o=e).tables||(o.tables=[]);const{url:s,customParameters:l,apiKey:i}=t,{serviceJSON:n,layersJSON:u}=await p(s,{customParameters:l,apiKey:i}),c=A(e.layers,n.layers,r),y=A(e.tables,n.tables,r);e.layers=c.itemResources,e.tables=y.itemResources;const d=[...c.added,...y.added],m=u?[...u.layers,...u.tables]:[];return await U(e,d,s,m),e}function A(t,r,a){const o=e(t,r,((e,t)=>e.id===t.id));t=t.filter((e=>!o.removed.some((t=>t.id===e.id))));const s=o.added.map((({id:e})=>({id:e})));return s.forEach((({id:e})=>{t.push({id:e})})),{itemResources:t,added:s.filter((({id:e})=>!a.includes(e)))}}async function U(e,t,r,o){const s=t.map((({id:e})=>new n({url:r,layerId:e,sourceJSON:o.find((({id:t})=>t===e))})));await l(s.map((e=>e.load()))),s.forEach((t=>{const{layerId:r,loaded:o,defaultPopupTemplate:s}=t;if(!o||a(s))return;K(t,{id:r,popupInfo:s.toJSON()},e)}))}function K(e,t,r){e.isTable?F(r.tables,t):F(r.layers,t)}function F(e,t){if(!e)return;const r=e.findIndex((({id:e})=>e===t.id));-1===r?e.push(t):e[r]=t}function R(e){const{portalItem:t}=e;return y(e)&&!e.dynamicDataSource&&!!t?.loaded&&t.type===S}async function D(e){if(!e?.length)throw new t(\"feature-layer-utils-saveall:missing-parameters\",\"'layers' array should contain at least one feature layer\");await Promise.all(e.map((e=>e.load())));for(const o of e)if(!R(o))throw new t(\"feature-layer-utils-saveall:invalid-parameters\",`'layers' array should only contain layers or tables in a feature service loaded from 'Feature Service' item. ${g(o,\"does not conform\")}`,{layer:o});const r=e.map((e=>e.portalItem.id));if(new Set(r).size>1)throw new t(\"feature-layer-utils-saveall:invalid-parameters\",\"All layers in the 'layers' array should be loaded from the same portal item\");const a=e.map((e=>e.layerId));if(new Set(a).size!==a.length)throw new t(\"feature-layer-utils-saveall:invalid-parameters\",\"'layers' array should contain only one instance each of layer or table in a feature service\")}function q(e,t){var r,a;let o=m.from(t);return o.id&&(o=o.clone(),o.id=null),(r=o).type??(r.type=S),(a=o).portal??(a.portal=d.getDefault()),j(e,o),o}async function z(e,t){const{url:r,layerId:a,title:s,fullExtent:l,isTable:i}=e,n=u(r),p=o(n)&&\"FeatureServer\"===n.serverType;t.url=p?r:`${r}/${a}`,t.title||(t.title=s),t.extent=null,!i&&o(l)&&(t.extent=await v(l)),b(t,h.METADATA),b(t,h.MULTI_LAYER),w(t,h.SINGLE_LAYER),i&&w(t,h.TABLE),O(t)}async function C(e,t,r){const a=e.portal;await(a?.signIn()),await(a?.user?.addItem({item:e,data:t,folder:r?.folder}))}const M=s(Y);async function Y(e,t){await L(e),E(e);const r=e.portalItem,a=f(r),o=await J(e,a,t),s=await T(r,[{layer:e,layerJSON:o}]);return O(r),await r.update({data:s}),i(a),r}const _=s((async(e,t)=>{await D(e);const r=e[0].portalItem,a=f(r),o=await Promise.all(e.map((e=>J(e,a,t)))),s=await T(r,e.map(((e,t)=>({layer:e,layerJSON:o[t]}))));return O(r),await r.update({data:s}),await Promise.all(e.slice(1).map((e=>e.portalItem.reload()))),i(a),r.clone()})),B=s(G);async function G(e,t,r){await L(e);const a=q(e,t),o=f(a),s=N({layer:e,layerJSON:await J(e,o,r)});return await z(e,a),await C(a,s,r),e.portalItem=a,i(o),a}export{M as save,_ as saveAll,B as saveAs};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{fetchArcGISServiceJSON as e}from\"../../support/requestPresets.js\";async function r(r,s){const a=await e(r,s);a.layers=a.layers.filter(t);const n={serviceJSON:a};if((a.currentVersion??0)<10.5)return n;const i=await e(r+\"/layers\",s);return n.layersJSON={layers:i.layers.filter(t),tables:i.tables},n}function t(e){return!e.type||\"Feature Layer\"===e.type}export{r as fetchFeatureService};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{urlToObject as r}from\"../../core/urlUtils.js\";import t from\"../Portal.js\";function e(e){return{origin:\"portal-item\",url:r(e.itemUrl),portal:e.portal||t.getDefault(),portalItem:e,readResourcePaths:[]}}function o(e){return{origin:\"portal-item\",messages:[],writtenProperties:[],url:e.itemUrl?r(e.itemUrl):null,portal:e.portal||t.getDefault(),portalItem:e}}export{e as createForItemRead,o as createForItemWrite};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../request.js\";async function t(t,o){const{data:r}=await e(t,{responseType:\"json\",query:{f:\"json\",...o?.customParameters,token:o?.apiKey}});return r}export{t as fetchArcGISServiceJSON};\n"],"names":["i","writtenProperties","forEach","target","propName","t","newOrigin","e","r","originOf","updateOrigin","I","S","g","title","id","declaredClass","j","type","async","L","load","c","J","beforeSave","a","write","messages","filter","map","name","message","details","ignoreUnsupported","length","errors","P","N","layer","layerJSON","isTable","layers","tables","O","w","h","typeKeywords","indexOf","T","test","url","customParameters","apiKey","o","s","fetchData","l","serviceJSON","n","layersJSON","u","p","A","y","itemResources","d","added","m","layerId","sourceJSON","find","loaded","defaultPopupTemplate","K","popupInfo","toJSON","U","x","$","removed","some","push","includes","F","findIndex","R","portalItem","dynamicDataSource","M","error","E","f","update","data","_","Promise","all","Set","size","D","slice","reload","clone","B","portal","q","fullExtent","serverType","extent","v","b","z","signIn","user","addItem","item","folder","C","currentVersion","origin","itemUrl","readResourcePaths","responseType","query","token"],"sourceRoot":""}