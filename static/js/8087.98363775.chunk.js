"use strict";(globalThis.webpackChunkmy_app=globalThis.webpackChunkmy_app||[]).push([[8087],{44680:(t,e,n)=>{function o(){return[1,0,0,0,1,0,0,0,1]}function i(t,e,n,o,i,s,r,c,d){return[t,e,n,o,i,s,r,c,d]}n.d(e,{fA:()=>i,vt:()=>o,zK:()=>s});const s=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:function(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},create:o,createView:function(t,e){return new Float64Array(t,e,9)},fromValues:i},Symbol.toStringTag,{value:"Module"}))},44230:(t,e,n)=>{n.d(e,{Cr:()=>u,H6:()=>g,_I:()=>h,kb:()=>a,vt:()=>d});var o=n(15941),i=n(97467),s=n(20664),r=n(9392),c=n(75762);function d(t){return t?{origin:(0,r.o8)(t.origin),vector:(0,r.o8)(t.vector)}:{origin:(0,r.vt)(),vector:(0,r.vt)()}}function u(t,e,n=d()){return(0,s.c)(n.origin,t),(0,s.d)(n.vector,e,t),n}function a(t,e){const n=(0,s.d)(c.rq.get(),e,t.origin),i=(0,s.f)(t.vector,n),r=(0,s.f)(t.vector,t.vector),d=(0,o.qE)(i/r,0,1),u=(0,s.d)(c.rq.get(),(0,s.h)(c.rq.get(),t.vector,d),n);return(0,s.f)(u,u)}function h(t,e,n){return g(t,e,0,1,n)}function g(t,e,n,i,r){const{vector:d,origin:u}=t,a=(0,s.d)(c.rq.get(),e,u),h=(0,s.f)(d,a)/(0,s.k)(d);return(0,s.h)(r,d,(0,o.qE)(h,n,i)),(0,s.g)(r,r,t.origin)}(0,r.vt)(),(0,r.vt)(),new i.I((()=>d()))},51264:(t,e,n)=>{n.r(e),n.d(e,{default:()=>l});var o=n(35143),i=n(50346),s=(n(76460),n(81806),n(47249),n(50076),n(85842)),r=n(20664),c=n(9392),d=n(44230),u=n(78315),a=n(94536),h=n(57420);function g(t,e,n){const o=(0,u.c)(),i=(0,u.a)(o);return(0,r.b)(i,i,t,.5),(0,r.b)(i,i,e,.5),o[3]=(0,r.j)(i,t),(0,r.g)(i,i,n),o}let p=class{constructor(){this._idToComponent=new Map,this._components=new a.A((t=>t.bounds)),this._edges=new a.A((t=>t.bounds)),this._tmpLineSegment=(0,d.vt)(),this._tmpP1=(0,c.vt)(),this._tmpP2=(0,c.vt)(),this._tmpP3=(0,c.vt)(),this.remoteClient=null}async fetchCandidates(t,e){await Promise.resolve(),(0,i.Te)(e),await this._ensureEdgeLocations(t,e);const n=[];return this._edges.forEachNeighbor((e=>(this._addCandidates(t,e,n),n.length<1e3)),t.bounds),{result:{candidates:n}}}async _ensureEdgeLocations(t,e){const n=[];if(this._components.forEachNeighbor((t=>{if(null==t.info){const{id:e,uid:o}=t;n.push({id:e,uid:o})}return!0}),t.bounds),!n.length)return;const o={components:n},i=await this.remoteClient.invoke("fetchAllEdgeLocations",o,e??{});for(const s of i.components)this._setFetchEdgeLocations(s)}async add(t){const e=new _(t.id,t.bounds);return this._idToComponent.set(e.id,e),this._components.add([e]),{result:{}}}async remove(t){const e=this._idToComponent.get(t.id);if(e){const t=[];this._edges.forEachNeighbor((n=>(n.component===e&&t.push(n),!0)),e.bounds),this._edges.remove(t),this._components.remove([e]),this._idToComponent.delete(e.id)}return{result:{}}}_setFetchEdgeLocations(t){const e=this._idToComponent.get(t.id);if(null==e||t.uid!==e.uid)return;const n=h.HY.createView(t.locations),o=new Array(n.count),i=(0,c.vt)(),s=(0,c.vt)();for(let c=0;c<n.count;c++){n.position0.getVec(c,i),n.position1.getVec(c,s);const r=g(i,s,t.origin),d=new m(e,c,r);o[c]=d}this._edges.add(o);const{objectIds:r,origin:d}=t;e.info={locations:n,objectIds:r,origin:d}}_addCandidates(t,e,n){const{info:o}=e.component,{origin:i,objectIds:s}=o,c=o.locations,d=c.position0.getVec(e.index,this._tmpP1),u=c.position1.getVec(e.index,this._tmpP2);(0,r.g)(d,d,i),(0,r.g)(u,u,i);const a=s[c.componentIndex.get(e.index)];this._addEdgeCandidate(t,a,d,u,n),f(t,a,d,n),f(t,a,u,n)}_addEdgeCandidate(t,e,n,o,i){if(!t.returnEdge)return;const s=(0,u.a)(t.bounds),a=(0,d.Cr)(n,o,this._tmpLineSegment),h=(0,d._I)(a,s,this._tmpP3);(0,u.o)(t.bounds,h)&&i.push({type:"edge",objectId:e,target:(0,c.o8)(h),distance:(0,r.j)(s,h),start:(0,c.o8)(n),end:(0,c.o8)(o)})}};p=(0,o._)([(0,s.$)("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],p);const l=p;function f(t,e,n,o){if(!t.returnVertex||!(0,u.o)(t.bounds,n))return;const i=(0,u.a)(t.bounds);o.push({type:"vertex",objectId:e,target:(0,c.o8)(n),distance:(0,r.j)(i,n)})}class _{constructor(t,e){this.id=t,this.bounds=e,this.info=null,this.uid=++_.uid}}_.uid=0;class m{constructor(t,e,n){this.component=t,this.index=e,this.bounds=n}}}}]);
//# sourceMappingURL=8087.98363775.chunk.js.map