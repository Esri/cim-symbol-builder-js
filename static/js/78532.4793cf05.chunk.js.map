{"version":3,"file":"static/js/78532.4793cf05.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/analysis/Viewshed.js","../node_modules/@arcgis/core/analysis/ViewshedAnalysis.js","../node_modules/@arcgis/core/layers/ViewshedLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import{featureReferenceEquals as r,featureReferenceProperty as i}from\"./featureReferenceUtils.js\";import o from\"../core/Clonable.js\";import{cyclicalDegrees as t}from\"../core/Cyclical.js\";import s from\"../core/JSONSupport.js\";import{equalsMaybe as a}from\"../core/maybe.js\";import{property as l}from\"../core/accessorSupport/decorators/property.js\";import{cast as n}from\"../core/accessorSupport/decorators/cast.js\";import\"../core/has.js\";import\"../core/RandomLCG.js\";import{subclass as p}from\"../core/accessorSupport/decorators/subclass.js\";import{ensureNumber as c}from\"../core/accessorSupport/ensureType.js\";import m from\"../geometry/Point.js\";let u=class extends(s.JSONSupportMixin(o)){constructor(e){super(e),this.observer=null,this.farDistance=1e3,this.heading=0,this.tilt=90,this.horizontalFieldOfView=45,this.verticalFieldOfView=45,this.feature=null}isValid(){return null!=this.observer&&this.farDistance>0}equals(e){return a(this.observer,e.observer)&&this.farDistance===e.farDistance&&this.heading===e.heading&&this.tilt===e.tilt&&this.horizontalFieldOfView===e.horizontalFieldOfView&&this.verticalFieldOfView===e.verticalFieldOfView&&r(this.feature,e.feature)}};e([l({type:m,json:{write:{isRequired:!0}}})],u.prototype,\"observer\",void 0),e([l({type:Number,nonNullable:!0,range:{min:0},json:{write:{isRequired:!0}}})],u.prototype,\"farDistance\",void 0),e([l({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),n((e=>t.normalize(c(e),void 0,!0)))],u.prototype,\"heading\",void 0),e([l({type:Number,nonNullable:!0,range:{min:0,max:180},json:{write:{isRequired:!0}}})],u.prototype,\"tilt\",void 0),e([l({type:Number,nonNullable:!0,range:{min:0,max:360},json:{write:{isRequired:!0}}})],u.prototype,\"horizontalFieldOfView\",void 0),e([l({type:Number,nonNullable:!0,range:{min:0,max:180},json:{write:{isRequired:!0}}})],u.prototype,\"verticalFieldOfView\",void 0),e([l(i)],u.prototype,\"feature\",void 0),e([l({json:{read:!1}})],u.prototype,\"isValid\",null),u=e([p(\"esri.analysis.Viewshed\")],u);const d=u;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"./Analysis.js\";import r from\"./Viewshed.js\";import n from\"../core/Collection.js\";import{referenceSetter as s,castForReferenceSetter as i}from\"../core/collectionUtils.js\";import{cyclicalDegrees as o}from\"../core/Cyclical.js\";import{deg2rad as l,clamp as a}from\"../core/mathUtils.js\";import{watch as p,syncAndInitial as c}from\"../core/reactiveUtils.js\";import{property as u}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/RandomLCG.js\";import{subclass as m}from\"../core/accessorSupport/decorators/subclass.js\";import d from\"../geometry/Extent.js\";import{projectOrLoadMany as h}from\"../geometry/projection.js\";const f=n.ofType(r);let x=class extends t{constructor(e){super(e),this.type=\"viewshed\",this._extent=null}initialize(){this.addHandles(p((()=>this._computeExtent()),(e=>{null==e.pending&&(this._extent=e.extent)}),c))}get viewsheds(){return this._get(\"viewsheds\")||new f}set viewsheds(e){this._set(\"viewsheds\",s(e,this.viewsheds,f))}get spatialReference(){for(const e of this.viewsheds)if(null!=e.observer)return e.observer.spatialReference;return null}get extent(){return this._extent}get requiredPropertiesForEditing(){return this.viewsheds.items.map((({observer:e})=>e))}async waitComputeExtent(){const e=this._computeExtent();null!=e.pending&&await e.pending}_computeExtent(){const{spatialReference:e}=this;if(null==e)return{pending:null,extent:null};const t=this.viewsheds.filter((e=>null!=e.observer)),r=t.map((e=>e.observer)).toArray(),n=h(r,e);if(null!=n.pending)return{pending:n.pending,extent:null};return{pending:null,extent:n.geometries.map(((e,r)=>{const n=t.at(r);return null!=e&&null!=n?this._computeViewshedExtent(this.viewsheds.at(r),e):null})).filter((e=>null!=e)).reduce(((e,t)=>y(e,t)),null)}}_computeViewshedExtent(e,t){const{farDistance:r,heading:n,tilt:s,horizontalFieldOfView:i,verticalFieldOfView:p}=e,{spatialReference:c}=t,u=i/2,m=p/2,h=r/c.metersPerUnit,f=[o.normalize(n-u),n,o.normalize(n+u)],x=d.fromPoint(t),y=e=>{const t=f.map((t=>o.normalize(t-e)));if(t[0]>t[2]||360===i)return h;const r=t.map((e=>Math.abs(e>180?360-e:e))).reduce(((e,t)=>e>t?t:e));return r>90?0:h*Math.cos(l(r))};x.xmax+=y(90),x.xmin-=y(-90),x.ymax+=y(0),x.ymin-=y(180);const w=t.z;if(null!=w){let e=w,t=w;const n=s-90,i=a(n+m,-90,90),o=a(n-m,-90,90),l=c?.isGeographic?r:h;e+=l*g(i),t+=l*g(o);const p=v(m)*l,d=g(n)*p*(1-v(u));s<90&&(e-=d),s>90&&(t-=d),x.zmax=Math.max(e,w),x.zmin=Math.min(t,w)}return x}clear(){this.viewsheds.removeAll()}};function y(e,t){return null==e?t:null==t?e:e.union(t)}function v(e){return Math.cos(l(e))}function g(e){return Math.sin(l(e))}e([u({type:[\"viewshed\"]})],x.prototype,\"type\",void 0),e([u({cast:i,type:f,nonNullable:!0})],x.prototype,\"viewsheds\",null),e([u({readOnly:!0})],x.prototype,\"spatialReference\",null),e([u()],x.prototype,\"_extent\",void 0),e([u({readOnly:!0})],x.prototype,\"extent\",null),e([u({readOnly:!0})],x.prototype,\"requiredPropertiesForEditing\",null),x=e([m(\"esri.analysis.ViewshedAnalysis\")],x);const w=x;export{w as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import r from\"../analysis/Viewshed.js\";import s from\"../analysis/ViewshedAnalysis.js\";import t from\"../core/Collection.js\";import{MultiOriginJSONMixin as o}from\"../core/MultiOriginJSONSupport.js\";import{watch as i,syncAndInitial as a}from\"../core/reactiveUtils.js\";import{property as p}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/RandomLCG.js\";import{subclass as n}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as l}from\"../core/accessorSupport/decorators/writer.js\";import c from\"./Layer.js\";import{OperationalLayer as d}from\"./mixins/OperationalLayer.js\";let y=class extends(d(o(c))){constructor(e){super(e),this.type=\"viewshed\",this.operationalLayerType=\"ViewshedLayer\",this.source=new s,this.opacity=1}initialize(){this.addHandles(i((()=>this.source),((e,r)=>{null!=r&&r.parent===this&&(r.parent=null),null!=e&&(e.parent=this)}),a))}async load(){return this.addResolvingPromise(this.source.waitComputeExtent()),this}get spatialReference(){return this.source.spatialReference}get fullExtent(){return this.source.extent}releaseAnalysis(e){this.source===e&&(this.source=new s)}get analysis(){return this.source}set analysis(e){this.source=e}get viewsheds(){return this.source.viewsheds}set viewsheds(e){this.source.viewsheds=e}writeViewsheds(e,r,s,t){r.viewsheds=e.filter((e=>e.isValid())).map((e=>e.toJSON(t))).toJSON()}};e([p({json:{read:!1},readOnly:!0})],y.prototype,\"type\",void 0),e([p({type:[\"ViewshedLayer\"]})],y.prototype,\"operationalLayerType\",void 0),e([p({type:s,nonNullable:!0})],y.prototype,\"source\",void 0),e([p({readOnly:!0})],y.prototype,\"spatialReference\",null),e([p({readOnly:!0})],y.prototype,\"fullExtent\",null),e([p({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},\"portal-item\":{read:!1,write:!1},\"web-document\":{read:!1,write:!1}}}})],y.prototype,\"opacity\",void 0),e([p({type:[\"show\",\"hide\"]})],y.prototype,\"listMode\",void 0),e([p({type:t.ofType(r),json:{write:{ignoreOrigin:!0},origins:{\"web-scene\":{write:{ignoreOrigin:!0}}}}})],y.prototype,\"viewsheds\",null),e([l(\"web-scene\",\"viewsheds\")],y.prototype,\"writeViewsheds\",null),y=e([n(\"esri.layers.ViewshedLayer\")],y);const u=y;export{u as default};\n"],"names":["u","s","JSONSupportMixin","o","constructor","e","super","this","observer","farDistance","heading","tilt","horizontalFieldOfView","verticalFieldOfView","feature","isValid","equals","a","r","l","type","m","json","write","isRequired","prototype","Number","nonNullable","range","min","n","t","normalize","c","max","i","read","p","d","f","ofType","x","_extent","initialize","addHandles","_computeExtent","pending","extent","viewsheds","_get","_set","spatialReference","requiredPropertiesForEditing","items","map","waitComputeExtent","filter","toArray","h","geometries","at","_computeViewshedExtent","reduce","union","y","metersPerUnit","fromPoint","Math","abs","cos","xmax","xmin","ymax","ymin","w","z","isGeographic","g","v","zmax","zmin","clear","removeAll","sin","cast","readOnly","operationalLayerType","source","opacity","parent","load","addResolvingPromise","fullExtent","releaseAnalysis","analysis","writeViewsheds","toJSON","origins","service","ignoreOrigin"],"sourceRoot":""}