"use strict";(globalThis.webpackChunkmy_app=globalThis.webpackChunkmy_app||[]).push([[8103],{8103:(e,t,a)=>{a.r(t),a.d(t,{getContrastingBackgroundTheme:()=>M,getRenderSymbolParameters:()=>z,previewSymbol2D:()=>L});var n=a(51995),l=a(86950),i=a(10064),o=a(82272),s=a(17842),c=a(79563),r=a(37817),h=a(69157),u=a(81283);const m="picture-fill",p=r.b_.size,d=r.b_.maxSize,f=r.b_.maxOutlineSize,y=r.b_.lineWidth,g=225,w=document.createElement("canvas");function b(e,t){const a=w.getContext("2d"),n=[];return t&&(t.weight&&n.push(t.weight),t.size&&n.push(t.size+"px"),t.family&&n.push(t.family)),a.font=n.join(" "),a.measureText(e).width}function v(e){if(0===e.length)return 0;if(e.length>2){const t=(0,s.Wz)(1),a=parseFloat(e);switch(e.slice(-2)){case"px":return a;case"pt":return a*t;case"in":return 72*a*t;case"pc":return 12*a*t;case"mm":return 2.8346456692913384*a*t;case"cm":return 28.346456692913385*a*t}}return parseFloat(e)}function k(e){const t=e?.size;return{width:null!=t&&"object"==typeof t&&"width"in t?(0,s.F2)(t.width):null,height:null!=t&&"object"==typeof t&&"height"in t?(0,s.F2)(t.height):null}}function x(e,t){return e>t?"dark":"light"}function z(e,t){const a="number"==typeof t?.size?t?.size:null,n=null!=a?(0,s.F2)(a):null,l=null!=t?.maxSize?(0,s.F2)(t.maxSize):null,i=null!=t?.rotation?t.rotation:"angle"in e?e.angle:null,o=(0,c._M)(e);let h=(0,c.mx)(e);"dark"!==M(e,245)||t?.ignoreWhiteSymbols||(h={width:.75,...h,color:"#bdc3c7"});const u={shape:null,fill:o,stroke:h,offset:[0,0]};h?.width&&(h.width=Math.min(h.width,f));const g=h?.width||0;let w=null!=t?.size&&(null==t?.scale||t?.scale),x=0,z=0,L=!1;switch(e.type){case"simple-marker":{const a=e.style,{width:o,height:c}=k(t),r=o===c&&null!=o?o:null!=n?n:Math.min((0,s.F2)(e.size),l||d);switch(x=r,z=r,a){case"circle":u.shape={type:"circle",cx:0,cy:0,r:.5*r},w||(x+=g,z+=g);break;case"cross":u.shape={type:"path",path:[{command:"M",values:[0,.5*z]},{command:"L",values:[x,.5*z]},{command:"M",values:[.5*x,0]},{command:"L",values:[.5*x,z]}]};break;case"diamond":u.shape={type:"path",path:[{command:"M",values:[0,.5*z]},{command:"L",values:[.5*x,0]},{command:"L",values:[x,.5*z]},{command:"L",values:[.5*x,z]},{command:"Z",values:[]}]},w||(x+=g,z+=g);break;case"square":u.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[x,0]},{command:"L",values:[x,z]},{command:"L",values:[0,z]},{command:"Z",values:[]}]},w||(x+=g,z+=g),i&&(L=!0);break;case"triangle":u.shape={type:"path",path:[{command:"M",values:[.5*x,0]},{command:"L",values:[x,z]},{command:"L",values:[0,z]},{command:"Z",values:[]}]},w||(x+=g,z+=g),i&&(L=!0);break;case"x":u.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[x,z]},{command:"M",values:[x,0]},{command:"L",values:[0,z]}]},i&&(L=!0);break;case"path":u.shape={type:"path",path:e.path||""},w||(x+=g,z+=g),i&&(L=!0),w=!0}break}case"simple-line":{const{width:e,height:a}=k(t),l=null!=a?a:null!=n?n:g,i=null!=e?e:y;h&&(h.width=l),x=i,z=l;const o=u?.stroke?.cap||"butt",s="round"===o;w=!0,u.stroke&&(u.stroke.cap="butt"===o?"square":o),u.shape={type:"path",path:[{command:"M",values:[s?l/2:0,z/2]},{command:"L",values:[s?x-l/2:x,z/2]}]};break}case m:case"simple-fill":{const e="object"==typeof t?.symbolConfig&&!!t?.symbolConfig?.isSquareFill,{width:a,height:l}=k(t);x=!e&&a!==l||null==a?null!=n?n:p:a,z=!e&&a!==l||null==l?x:l,w||(x+=g,z+=g),w=!0,u.shape=e?{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[x,0]},{command:"L",values:[x,z]},{command:"L",values:[0,z]},{command:"L",values:[0,0]},{command:"Z",values:[]}]}:r.JZ.fill[0];break}case"picture-marker":{const a=Math.min((0,s.F2)(e.width),l||d),o=Math.min((0,s.F2)(e.height),l||d),{width:c,height:r}=k(t),h=c===r&&null!=c?c:null!=n?n:Math.max(a,o),m=a/o;x=m<=1?Math.ceil(h*m):h,z=m<=1?h:Math.ceil(h/m),u.shape={type:"image",x:-Math.round(x/2),y:-Math.round(z/2),width:x,height:z,src:e.url||""},i&&(L=!0);break}case"text":{const a=e,i=t?.overrideText||a.text||"Aa",o=a.font,{width:c,height:r}=k(t),h=null!=r?r:null!=n?n:Math.min((0,s.F2)(o.size),l||d),m=b(i,{weight:o.weight,size:h,family:o.family}),p=/[\uE600-\uE6FF]/.test(i);x=c??(p?h:m),z=h;let f=.25*v((o?h:0).toString());p&&(f+=5),u.shape={type:"text",text:i,x:a.xoffset||0,y:a.yoffset||f,align:"middle",alignBaseline:a.verticalAlignment,decoration:o&&o.decoration,rotated:a.rotated,kerning:a.kerning},u.font=o&&{size:h,style:o.style,decoration:o.decoration,weight:o.weight,family:o.family};break}}return{shapeDescriptor:u,size:[x,z],renderOptions:{node:t?.node,scale:w,opacity:t?.opacity,rotation:i,useRotationSize:L,effectView:t?.effectView,ariaLabel:t?.ariaLabel}}}async function L(e,t){const{shapeDescriptor:a,size:n,renderOptions:l}=z(e,t);if(!a.shape)throw new i.Z("symbolPreview: renderPreviewHTML2D","symbol not supported.");await async function(e,t){const a=t.fill,n=e.color;if("pattern"===a?.type&&n&&e.type!==m){const e=await(0,c.Od)(a.src,n.toCss(!0));a.src=e,t.fill=a}}(e,a),await async function(e,t,a,n){if(!("font"in e)||!e.font||"text"!==t.shape.type)return;try{await(0,o.mx)(e.font)}catch{}const{width:l}=k(n),i=/[\uE600-\uE6FF]/.test(t.shape.text);null!=l||i||(a[0]=b(t.shape.text,{weight:t.font?.weight,size:t.font?.size,family:t.font?.family}))}(e,a,n,t);const p=[[a]];if("object"==typeof t?.symbolConfig&&t?.symbolConfig?.applyColorModulation){const e=.6*n[0];p.unshift([{...a,offset:[-e,0],fill:(0,r.dc)(a.fill,-.3)}]),p.push([{...a,offset:[e,0],fill:(0,r.dc)(a.fill,.3)}]),n[0]+=2*e,l.scale=!1}return"text"===e.type&&function(e,t,a,n,l){if(null!=e.haloColor&&null!=e.haloSize){l.masking??=a.map((()=>[]));const i=(0,s.F2)(e.haloSize);n[0]+=i,n[1]+=i,a.unshift([{...t,fill:null,stroke:{color:e.haloColor,width:2*i,join:"round",cap:"round"}}]),l.masking.unshift([{shape:{type:"rect",x:0,y:0,width:n[0]+2*u.c9,height:n[1]+2*u.c9},fill:[255,255,255],stroke:null},{...t,fill:[0,0,0,0],stroke:null}])}null==e.backgroundColor&&null==e.borderLineColor||(n[0]+=2*u.c9,n[1]+=2*u.c9,a.unshift([{shape:{type:"rect",x:0,y:0,width:n[0],height:n[1]},fill:e.backgroundColor,stroke:{color:e.borderLineColor,width:(0,s.F2)(e.borderLineSize)}}]),l.masking?.unshift([]))}(e,a,p,n,l),(0,h.wh)(p,n,l)}function M(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;const a=(0,c._M)(e),i=(0,c.mx)(e),o=!a||"type"in a?null:new n.Z(a),s=i?.color?new n.Z(i?.color):null,r=o?x((0,l.EX)(o),t):null,h=s?x((0,l.EX)(s),t):null;return h?r?r===h?r:t>=g?"light":"dark":h:r}}}]);
//# sourceMappingURL=8103.5efa2bc3.chunk.js.map