{"version":3,"file":"static/js/99386.b3cb7f84.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/layers/StreamLayerView.js","../node_modules/@arcgis/core/views/2d/layers/StreamLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../chunks/tslib.es6.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../layers/support/FeatureFilter.js\";const r=r=>{let i=class extends r{resume(){this._isUserPaused=!1,this.suspended||this._doResume()}pause(){this._isUserPaused=!0,this.suspended||this._doPause()}disconnect(){this._doDisconnect()}connect(){this._doConnect()}clear(){this._doClear()}constructor(...s){super(...s),this._isUserPaused=!1,this.filter=null}get connectionStatus(){return(this._isUserPaused||this.suspended)&&\"connected\"===this._streamConnectionStatus?\"paused\":this._streamConnectionStatus}_onSuspendedChange(s){s?this._doPause():this._isUserPaused||this._doResume()}};return s([e()],i.prototype,\"_isUserPaused\",void 0),s([e({readOnly:!0})],i.prototype,\"connectionStatus\",null),s([e({type:o})],i.prototype,\"filter\",void 0),i=s([t(\"esri.views.layers.StreamLayerView\")],i),i};export{r as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/Error.js\";import{handlesGroup as t,makeHandle as s}from\"../../../core/handleUtils.js\";import{watch as n}from\"../../../core/reactiveUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import a from\"../../../rest/support/FeatureSet.js\";import{isNumber as c}from\"../../../support/guards.js\";import l from\"./FeatureLayerView2D.js\";import{handleNoEngineError as h}from\"./support/handleNoEngineError.js\";import u from\"../../layers/StreamLayerView.js\";let p=class extends(u(l)){constructor(){super(...arguments),this.pipelineConnectionStatus=\"disconnected\",this.pipelineErrorString=null}initialize(){this.addHandles([n((()=>this.layer.customParameters),(async e=>{(await this.getWorker()).streamMessenger.updateCustomParameters(e)})),this.layer.on(\"send-message-to-socket\",(async e=>{(await this.getWorker()).streamMessenger.sendMessageToSocket(e)})),this.layer.on(\"send-message-to-client\",(async e=>{(await this.getWorker()).streamMessenger.sendMessageToClient(e),this._isUserPaused&&\"type\"in e&&\"clear\"===e.type&&this.incrementSourceRefreshVersion()})),n((()=>this.layer.purgeOptions),(()=>this._update())),n((()=>this.suspended),this._onSuspendedChange.bind(this))],\"constructor\"),this._doResume()}destroy(){this._doPause()}get connectionError(){return this.pipelineErrorString?new r(\"stream-controller\",this.pipelineErrorString):null}on(e,r){if(Array.isArray(e))return t(e.map((e=>this.on(e,r))));const n=[\"data-received\",\"message-received\"].includes(e);n&&this.getWorker().then((r=>r.streamMessenger.enableEvent(e,!0)));const o=super.on(e,r),i=this;return s((()=>{o.remove(),n&&(i._workerProxy.closed||i.hasEventListener(e)||i.getWorker().then((r=>r.streamMessenger.enableEvent(e,!1))))}))}async queryLatestObservations(e,t){if(!(this.layer.timeInfo?.endField||this.layer.timeInfo?.startField||this.layer.timeInfo?.trackIdField))throw new r(\"streamlayer-no-timeField\",\"queryLatestObservation can only be used with services that define a TrackIdField\");const s=await this.getWorker();return h(s.features.executeQueryForLatestObservations(this._cleanUpQuery(e),t).then((e=>{const r=a.fromJSON(e);return r.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),r})),new a({features:[]}))}detach(){super.detach(),this.pipelineConnectionStatus=\"disconnected\"}async queryObjectIds(e,r){return(await super.queryObjectIds(e,r)).filter(c)}get _streamConnectionStatus(){return this.pipelineConnectionStatus}_doPause(){null!=this._refreshInterval&&(clearInterval(this._refreshInterval),this._refreshInterval=null)}_doResume(){null==this._refreshInterval&&(this._refreshInterval=setInterval((()=>this.incrementSourceRefreshVersion()),this.layer.updateInterval))}_doDisconnect(){this.getWorker().then((e=>e.streamMessenger.disconnect())),this._doPause()}_doConnect(){this.getWorker().then((e=>e.streamMessenger.connect())),this.resume()}_doClear(){this.getWorker().then((e=>e.streamMessenger.clear())),null==this._refreshInterval&&this.incrementSourceRefreshVersion()}_createClientOptions(){const e=super._createClientOptions(),r=this;return{...e,get container(){return r.featureContainer},setProperty:e=>{this.set(e.propertyName,e.value)}}}};e([o()],p.prototype,\"pipelineConnectionStatus\",void 0),e([o()],p.prototype,\"pipelineErrorString\",void 0),e([o({readOnly:!0})],p.prototype,\"connectionError\",null),e([o({readOnly:!0})],p.prototype,\"_streamConnectionStatus\",null),p=e([i(\"esri.views.2d.layers.StreamLayerView2D\")],p);const d=p;export{d as default};\n"],"names":["r","i","resume","this","_isUserPaused","suspended","_doResume","pause","_doPause","disconnect","_doDisconnect","connect","_doConnect","clear","_doClear","constructor","s","super","filter","connectionStatus","_streamConnectionStatus","_onSuspendedChange","e","prototype","readOnly","type","o","t","p","u","l","arguments","pipelineConnectionStatus","pipelineErrorString","initialize","addHandles","n","layer","customParameters","async","getWorker","streamMessenger","updateCustomParameters","on","sendMessageToSocket","sendMessageToClient","incrementSourceRefreshVersion","purgeOptions","_update","bind","destroy","connectionError","Array","isArray","map","includes","then","enableEvent","remove","_workerProxy","closed","hasEventListener","queryLatestObservations","timeInfo","endField","startField","trackIdField","h","features","executeQueryForLatestObservations","_cleanUpQuery","a","fromJSON","forEach","sourceLayer","detach","queryObjectIds","c","_refreshInterval","clearInterval","setInterval","updateInterval","_createClientOptions","container","featureContainer","setProperty","set","propertyName","value","d"],"sourceRoot":""}