"use strict";(globalThis.webpackChunkmy_app=globalThis.webpackChunkmy_app||[]).push([[81835],{81835:(e,t,n)=>{n.r(t),n.d(t,{classBreaks:()=>s,heatmapStatistics:()=>u,histogram:()=>l,summaryStatistics:()=>o,uniqueValues:()=>r});var i=n(28383),a=n(72003);async function o(e){const{attribute:t,features:n}=e,{normalizationType:o,normalizationField:r,minValue:s,maxValue:l,fieldType:u,outStatisticTypes:f}=t,m=await(0,i.Jc)({field:t.field,valueExpression:t.valueExpression,normalizationType:o,normalizationField:r,normalizationTotal:t.normalizationTotal,viewInfoParams:t.viewInfoParams,timeZone:t.timeZone,fieldInfos:t.fieldInfos},n),c=(0,a.Vb)({normalizationType:o,normalizationField:r,minValue:s,maxValue:l}),d={value:.5,fieldType:u},p="esriFieldTypeString"===u?(0,a.z9)({values:m,supportsNullCount:c,percentileParams:d,outStatisticTypes:f}):(0,a.G_)({values:m,minValue:s,maxValue:l,useSampleStdDev:!o,supportsNullCount:c,percentileParams:d,outStatisticTypes:f});return(0,a.oZ)(p,f,"esriFieldTypeDate"===u)}async function r(e){const{attribute:t,features:n}=e,o=await(0,i.Jc)({field:t.field,field2:t.field2,field3:t.field3,fieldDelimiter:t.fieldDelimiter,valueExpression:t.valueExpression,viewInfoParams:t.viewInfoParams,timeZone:t.timeZone,fieldInfos:t.fieldInfos},n,!1),r=(0,a.b3)(o);return(0,a.lv)(r,t.domains,t.returnAllCodedValues,t.fieldDelimiter)}async function s(e){const{attribute:t,features:n}=e,{field:o,normalizationType:r,normalizationField:s,normalizationTotal:l,classificationMethod:u}=t,f=await(0,i.Jc)({field:o,valueExpression:t.valueExpression,normalizationType:r,normalizationField:s,normalizationTotal:l,viewInfoParams:t.viewInfoParams,timeZone:t.timeZone,fieldInfos:t.fieldInfos},n),m=(0,a.Rw)(f,{field:o,normalizationType:r,normalizationField:s,normalizationTotal:l,classificationMethod:u,standardDeviationInterval:t.standardDeviationInterval,numClasses:t.numClasses,minValue:t.minValue,maxValue:t.maxValue});return(0,a.jM)(m,u)}async function l(e){const{attribute:t,features:n}=e,{field:o,normalizationType:r,normalizationField:s,normalizationTotal:l,classificationMethod:u}=t,f=await(0,i.Jc)({field:o,valueExpression:t.valueExpression,normalizationType:r,normalizationField:s,normalizationTotal:l,viewInfoParams:t.viewInfoParams,timeZone:t.timeZone,fieldInfos:t.fieldInfos},n);return(0,a.$y)(f,{field:o,normalizationType:r,normalizationField:s,normalizationTotal:l,classificationMethod:u,standardDeviationInterval:t.standardDeviationInterval,numBins:t.numBins,minValue:t.minValue,maxValue:t.maxValue})}async function u(e){const{attribute:t,features:n}=e,{field:a,radius:o,transform:r,spatialReference:s}=t,l=t.size??[0,0],u=(0,i.$r)(n??[],r,s,l);return(0,i.gV)(u,o??void 0,a,l[0],l[1])}},28383:(e,t,n)=>{n.d(t,{$r:()=>v,Jc:()=>w,Lc:()=>z,MH:()=>b,Wk:()=>F,gV:()=>g,lX:()=>I,rb:()=>T,sf:()=>x});var i=n(50076),a=n(76931),o=n(18288),r=n(19247),s=n(13312),l=n(76279),u=n(80963),f=n(53430),m=n(4414),c=n(42633),d=n(72003),p=n(76386);let y=null;const h=/^(?<hh>([0-1][0-9])|([2][0-3])):(?<mm>[0-5][0-9])(:(?<ss>[0-5][0-9]))?([.](?<ms>\d+))?$/;function v(e,t,n,i){const a=(0,u.d9)(n)?(0,u.Vp)(n):null,o=a?Math.round((a.valid[1]-a.valid[0])/t.scale[0]):null;return e.map((e=>{const n=new r.A(e.geometry);return(0,l.Gy)(t,n,n),e.geometry=a?function(e,t,n){return e.x<0?e.x+=t:e.x>n&&(e.x-=t),e}(n,o??0,i[0]):n,e}))}function g(e,t=18,n,i,o){const r=new Float64Array(i*o);t=Math.round((0,a.Lz)(t));let s=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY;const u=(0,m.YW)(n);for(const{geometry:a,attributes:f}of e){const{x:e,y:n}=a,c=Math.max(0,e-t),d=Math.max(0,n-t),p=Math.min(o,n+t),y=Math.min(i,e+t),h=+u(f);for(let a=d;a<p;a++)for(let o=c;o<y;o++){const u=a*i+o,f=(0,m.hv)(o-e,a-n,t)*h,c=r[u]+=f;s=Math.min(s,c),l=Math.max(l,c)}}return{min:s,max:l}}function T(e){const t=h.exec(e);if(!t)return null;const{hh:n,mm:i,ss:a,ms:r}=t.groups;return Number(n)*o.vf.hours+Number(i)*o.vf.minutes+Number(a)*o.vf.seconds+Number(r||0)}async function w(e,t,n=!0){if(!t)return[];const{field:i,field2:a,field3:o,fieldDelimiter:r,fieldInfos:l,timeZone:u}=e,m=i&&l?.find((e=>e.name.toLowerCase()===i.toLowerCase())),h=!!m&&(0,f.OH)(m),v=!!m&&(0,c.fs)(m),g=e.valueExpression,w=e.normalizationType,z=e.normalizationField,I=e.normalizationTotal,x=[],F=e.viewInfoParams;let b=null,$=null;if(g){if(!y){const{arcadeUtils:e}=await(0,p.l)();y=e}y.hasGeometryOperations(g)&&await y.enableGeometryOperations(),b=y.createFunction(g),$=F?y.getViewInfo({viewingMode:F.viewingMode,scale:F.scale,spatialReference:new s.A(F.spatialReference)}):null}const M=e.fieldInfos,V=t[0]&&"declaredClass"in t[0]&&"esri.Graphic"===t[0].declaredClass||!M?null:{fields:M};return t.forEach((e=>{const t=e.attributes;let s;if(g){const t=V?{...e,layer:V}:e,n=y.createExecContext(t,$,u);s=y.executeFunction(b,n)}else t&&(s=t[i],a?(s=`${(0,d.gJ)(s)}${r}${(0,d.gJ)(t[a])}`,o&&(s=`${s}${r}${(0,d.gJ)(t[o])}`)):"string"==typeof s&&n&&(v?s=s?new Date(s).getTime():null:h&&(s=s?T(s):null)));if(w&&"number"==typeof s&&isFinite(s)){const e=t&&parseFloat(t[z]);s=(0,d.zS)(s,w,e,I)}x.push(s)})),x}function z(e){const t=e.field,n=e.normalizationType,i=e.normalizationField;let a;return"field"===n?a="(NOT "+i+" = 0)":"log"!==n&&"natural-log"!==n&&"square-root"!==n||(a=`(${t} > 0)`),a}function I(e,t,n){const i=null!=t?e+" >= "+t:"",a=null!=n?e+" <= "+n:"";let o="";return o=i&&a?x(i,a):i||a,o?"("+o+")":""}function x(e,t){let n=null!=e?e:"";return null!=t&&t&&(n=n?"("+n+") AND ("+t+")":t),n}function F(e,t){if(e&&"intersects"!==e.spatialRelationship)return new i.A(t,"Only 'intersects' spatialRelationship is supported for featureFilter")}function b(e,t,n){const a=function(e){const t=e.layer;return e.fields.filter((e=>!t.getField(e)))}({layer:e,fields:t});if(a.length)return new i.A(n,"Unknown fields: "+a.join(", ")+". You can only use fields defined in the layer schema");const o=function(e){const t=e.layer;return e.fields.filter((e=>{const n=t.getFieldUsageInfo(e);return!n||!n.supportsStatistics}))}({layer:e,fields:t});return o.length?new i.A(n,"Unsupported fields: "+o.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true"):void 0}},42633:(e,t,n)=>{n.d(t,{EG:()=>d,Ll:()=>T,R3:()=>g,UH:()=>l,aM:()=>h,fs:()=>c,i0:()=>w});var i=n(65256),a=n(53430),o=(n(86300),n(76386)),r=n(36693),s=n(67478);const l=",",u={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},f=new Set(["integer","small-integer"]);let m=null;function c(e){return(0,a.vE)(e)||(0,a.zD)(e)||(0,a.Ah)(e)}async function d(e){const{field:t,field2:n,field3:i,normalizationField:a,valueExpression:r}=e;let s=[];if(r){if(!m){const{arcadeUtils:e}=await(0,o.l)();m=e}s=m.extractFieldNames(r)}return t&&s.push(t),n&&s.push(n),i&&s.push(i),a&&s.push(a),s}function p(e){return String(e).padStart(2,"0")}function y(e,t,n){let i;return"date"===t||"number"===t?("number"===t&&(e=new Date(e)),i=`TIMESTAMP'${n?e.getFullYear():e.getUTCFullYear()}-${p((n?e.getMonth():e.getUTCMonth())+1)}-${p(n?e.getDate():e.getUTCDate())} ${p(n?e.getHours():e.getUTCHours())}:${p(n?e.getMinutes():e.getUTCMinutes())}:${p(n?e.getSeconds():e.getUTCSeconds())}'`):i=e,i}function h(e,t,n,i){const{hasQueryEngine:a}=e,o=`(${y(n,v(e,n),a)} - ${y(t,v(e,t),a)})`;let r=u[i],s="/";return r<1&&(r=1/r,s="*"),{sqlExpression:1===r?o:`(${o} ${s} ${r})`,sqlWhere:null}}function v(e,t){if(t instanceof Date)return"date";if("number"==typeof t)return"number";if("string"==typeof t){const n=e.getField(t);if("<now>"===t.toLowerCase())return;if((0,a.vE)(n))return"field"}}function g(e,t){const n=t&&e.getField(t);return!!n&&f.has(n.type)}function T(e){return`cast(${e} as float)`}function w(e,t){const{format:n,timeZoneOptions:a,fieldType:o}=t??{};let l,u;if(a&&({timeZone:l,timeZoneName:u}=(0,s.hv)(a.layerTimeZone,a.datesInUnknownTimezone,a.viewTimeZone,(0,i.J2)(n||"short-date-short-time"),o)),"string"==typeof e&&isNaN(Date.parse("time-only"===o?`1970-01-01T${e}Z`:e)))return e;switch(o){case"date-only":{const t=(0,i.J2)(n||"short-date");return"string"==typeof e?(0,i.iS)(e,{...t}):(0,i.Yq)(e,{...t,timeZone:r.n$})}case"time-only":{const t=(0,i.J2)(n||"short-time");return"string"==typeof e?(0,i.F8)(e,t):(0,i.Yq)(e,{...t,timeZone:r.n$})}case"timestamp-offset":{if(!l&&"string"==typeof e&&new Date(e).toISOString()!==e)return e;const t=n||a?(0,i.J2)(n||"short-date-short-time"):void 0,o=t?{...t,timeZone:l,timeZoneName:u}:void 0;return"string"==typeof e?(0,i.Ey)(e,o):(0,i.Yq)(e,o)}default:{const t=n||a?(0,i.J2)(n||"short-date-short-time"):void 0;return(0,i.Yq)("string"==typeof e?new Date(e):e,t?{...t,timeZone:l,timeZoneName:u}:void 0)}}}}}]);
//# sourceMappingURL=81835.0a389b72.chunk.js.map