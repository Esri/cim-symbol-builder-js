(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[187],{608:function(e,n,t){"use strict";t.r(n),t.d(n,"destroyContext",(function(){return O})),t.d(n,"dracoDecompressPointCloudData",(function(){return E})),t.d(n,"filterObbsForModifications",(function(){return g})),t.d(n,"filterObbsForModificationsSync",(function(){return F})),t.d(n,"initialize",(function(){return M})),t.d(n,"interpretObbModificationResults",(function(){return T})),t.d(n,"process",(function(){return p})),t.d(n,"setLegacySchema",(function(){return _})),t.d(n,"setModifications",(function(){return w})),t.d(n,"setModificationsSync",(function(){return A})),t.d(n,"test",(function(){return N}));var r,o,i,s=t(2),f=t(141);(i=r||(r={}))[i.None=0]="None",i[i.Int16=1]="Int16",i[i.Int32=2]="Int32",function(e){e[e.Replace=0]="Replace",e[e.Outside=1]="Outside",e[e.Inside=2]="Inside",e[e.Finished=3]="Finished"}(o||(o={}));var a=t(45);function u(e){return Object(a.a)("esri/libs/i3s/"+e)}let c;var l,d,b,m,y,h;t(753);(h=l||(l={}))[h.Unmodified=0]="Unmodified",h[h.Culled=1]="Culled",h[h.NotChecked=2]="NotChecked",function(e){e[e.Unmodified=0]="Unmodified",e[e.PotentiallyModified=1]="PotentiallyModified",e[e.Culled=2]="Culled",e[e.Unknown=3]="Unknown",e[e.NotChecked=4]="NotChecked"}(d||(d={}));!function(e){e[e.Unknown=0]="Unknown",e[e.Uncached=1]="Uncached",e[e.Cached=2]="Cached"}(b||(b={})),function(e){e[e.None=0]="None",e[e.MaxScreenThreshold=1]="MaxScreenThreshold",e[e.ScreenSpaceRelative=2]="ScreenSpaceRelative",e[e.RemovedFeatureDiameter=3]="RemovedFeatureDiameter",e[e.DistanceRangeFromDefaultCamera=4]="DistanceRangeFromDefaultCamera"}(m||(m={})),function(e){e[e.Hole=0]="Hole",e[e.Leaf=1]="Leaf"}(y||(y={}));async function p(e){await M();const n=[e.geometryBuffer];return{result:L(e,n),transferList:n}}async function E(e){var n;await M();const t=[e.geometryBuffer],{geometryBuffer:r}=e,o=r.byteLength,i=I._malloc(o),s=new Uint8Array(I.HEAPU8.buffer,i,o);s.set(new Uint8Array(r));const a=I.dracoDecompressPointCloudData(i,s.byteLength);if(I._free(i),a.error.length>0)throw"i3s.wasm: "+a.error;const u=(null==(n=a.featureIds)?void 0:n.length)>0?Object(f.m)(a.featureIds):null,c=Object(f.m)(a.positions);return u&&t.push(u.buffer),t.push(c.buffer),{result:{positions:c,featureIds:u},transferList:t}}async function g(e){await M(),F(e);const n={buffer:e.buffer};return{result:n,transferList:[n.buffer]}}async function w(e){await M(),A(e)}async function _(e){await M(),I.setLegacySchema(e.context,e.jsonSchema)}function O(e){P(e)}let U,I;function A(e){const n=e.modifications,t=I._malloc(8*n.length),r=new Float64Array(I.HEAPU8.buffer,t,n.length);for(let o=0;o<n.length;++o)r[o]=n[o];I.setModifications(e.context,t,n.length,e.isGeodetic),I._free(t)}function L(e,n){if(!I)return null;const{context:t,localOrigin:o,globalTrafo:i,mbs:a,obb:u,elevationOffset:c,geometryBuffer:l,geometryDescriptor:d,indexToVertexProjector:b,vertexToRenderProjector:m}=e,y=I._malloc(l.byteLength),h=I._malloc(33*Float64Array.BYTES_PER_ELEMENT),p=new Uint8Array(I.HEAPU8.buffer,y,l.byteLength);p.set(new Uint8Array(l));const E=new Float64Array(I.HEAPU8.buffer,h,33);R(E,o);let g=E.byteOffset+3*E.BYTES_PER_ELEMENT,w=new Float64Array(E.buffer,g);R(w,i),g+=16*E.BYTES_PER_ELEMENT,w=new Float64Array(E.buffer,g),R(w,a),g+=4*E.BYTES_PER_ELEMENT,Object(s.j)(u)&&(w=new Float64Array(E.buffer,g),R(w,u.center),g+=3*E.BYTES_PER_ELEMENT,w=new Float64Array(E.buffer,g),R(w,u.halfSize),g+=3*E.BYTES_PER_ELEMENT,w=new Float64Array(E.buffer,g),R(w,u.quaternion));const _=d,O={isDraco:!1,isLegacy:!1,color:e.layouts.some(e=>e.some(e=>"color"===e.name)),normal:e.needNormals&&e.layouts.some(e=>e.some(e=>"normalCompressed"===e.name)),uv0:e.layouts.some(e=>e.some(e=>"uv0"===e.name)),uvRegion:e.layouts.some(e=>e.some(e=>"uvRegion"===e.name)),featureIndex:_.featureIndex},U=I.process(t,!!e.obb,y,p.byteLength,_,O,h,c,b,m,e.normalReferenceFrame);if(I._free(h),I._free(y),U.error.length>0)throw"i3s.wasm: "+U.error;if(U.discarded)return null;const A=U.componentOffsets.length>0?Object(f.m)(U.componentOffsets):null,L=U.featureIds.length>0?Object(f.m)(U.featureIds):null,T=Object(f.m)(U.interleavedVertedData).buffer,F=U.indicesType===r.Int16?Object(f.m)(new Uint16Array(U.indices.buffer,U.indices.byteOffset,U.indices.byteLength/2)):Object(f.m)(new Uint32Array(U.indices.buffer,U.indices.byteOffset,U.indices.byteLength/4)),P=Object(f.m)(U.positions),M=U.positionIndicesType===r.Int16?Object(f.m)(new Uint16Array(U.positionIndices.buffer,U.positionIndices.byteOffset,U.positionIndices.byteLength/2)):Object(f.m)(new Uint32Array(U.positionIndices.buffer,U.positionIndices.byteOffset,U.positionIndices.byteLength/4)),N={layout:e.layouts[0],interleavedVertexData:T,indices:F,hasColors:U.hasColors,hasModifications:U.hasModifications,positionData:{data:P,indices:M}};return L&&n.push(L.buffer),A&&n.push(A.buffer),n.push(T),n.push(F.buffer),n.push(P.buffer),n.push(M.buffer),{componentOffsets:A,featureIds:L,transformedGeometry:N,obb:U.obb}}function T(e){return 0===e?d.Unmodified:1===e?d.PotentiallyModified:2===e?d.Culled:d.Unknown}function F(e){const{context:n,buffer:t}=e,r=I._malloc(t.byteLength),o=t.byteLength/Float64Array.BYTES_PER_ELEMENT,i=new Float64Array(I.HEAPU8.buffer,r,o),s=new Float64Array(t);i.set(s),I.filterOBBs(n,r,o),s.set(i),I._free(r)}function P(e){I&&I.destroy(e)}function R(e,n){for(let t=0;t<n.length;++t)e[t]=n[t]}function M(){return I?Promise.resolve():(U||(U=(c||(c=new Promise(e=>t.e(185).then(t.bind(null,1055)).then(e=>e.i).then(({default:n})=>{const t=n({locateFile:u,onRuntimeInitialized:()=>e(t)});delete t.then})).catch(e=>Promise.reject(e))),c).then(e=>{I=e,U=null})),U)}const N={transform:L,destroy:P}},753:function(e,n,t){"use strict";function r(){return[0,0,0,0]}function o(e,n,t,r){return[e,n,t,r]}function i(e){const n=[0,0,0,0],t=Math.min(4,e.length);for(let r=0;r<t;++r)n[r]=e[r];return n}function s(e,n){return new Float64Array(e,n,4)}function f(){return[0,0,0,0]}function a(){return o(1,1,1,1)}function u(){return o(1,0,0,0)}function c(){return o(0,1,0,0)}function l(){return o(0,0,1,0)}function d(){return o(0,0,0,1)}t.d(n,"a",(function(){return s})),t.d(n,"b",(function(){return r})),t.d(n,"c",(function(){return i})),t.d(n,"d",(function(){return o}));const b=[0,0,0,0],m=a(),y=u(),h=c(),p=l(),E=d();Object.freeze({__proto__:null,create:r,clone:function(e){return[e[0],e[1],e[2],e[3]]},fromValues:o,fromArray:i,createView:s,zeros:f,ones:a,unitX:u,unitY:c,unitZ:l,unitW:d,ZEROS:b,ONES:m,UNIT_X:y,UNIT_Y:h,UNIT_Z:p,UNIT_W:E})}}]);
//# sourceMappingURL=187.65f9bea1.chunk.js.map