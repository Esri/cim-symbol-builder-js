{"version":3,"file":"static/js/6500.91e3d7ae.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/support/floorFilterUtils.js","../node_modules/@arcgis/core/core/mapCollectionUtils.js","../node_modules/@arcgis/core/views/interactive/snapping/FeatureSnappingSourceInfo.js","../node_modules/@arcgis/core/views/interactive/snapping/FeatureSnappingEngine.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nfunction o(o){const n=o.layer;if(\"floorInfo\"in n&&n.floorInfo?.floorField&&\"floors\"in o.view){return l(o.view.floors,n.floorInfo.floorField)}return null}function n(o,n){return\"floorInfo\"in n&&n.floorInfo?.floorField?l(o,n.floorInfo.floorField):null}function l(o,n){if(!o?.length)return null;const l=o.filter((o=>\"\"!==o)).map((o=>`'${o}'`));return l.push(\"''\"),`${n} IN (${l.join(\",\")}) OR ${n} IS NULL`}export{o as getFloorFilterClause,n as getLayerFloorFilterClause};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{createTask as e}from\"./asyncUtils.js\";import t from\"./Collection.js\";import{destroyHandle as o,removeIfHandle as s}from\"./handleUtils.js\";import{ignoreAbortErrors as r,isAborted as n,createAbortError as i}from\"./promiseUtils.js\";import{on as a}from\"./reactiveUtils.js\";function c(e,o,s){const r=s?.createCollection?.()??new t,n=!!s?.recycleItems?new d:null,i=(e,t=0)=>{if(!e?.length)return;const o=r.splice(t,e.length);n?n.processRemoved(e):o.forEach(m)},c=(e,t=0)=>{if(!e?.length)return;const s=[];for(const r of e){const e=n?.use(r);if(e)s.push(e);else{const e=o(r);n?.register(r,e),s.push(e)}}r.addMany(s,t)},l=a(e,\"after-splice\",(({added:e,start:t,removed:o})=>{i(o,t),c(e,t)}),{sync:!0,onListenerRemove:e=>i(e.items),onListenerAdd:e=>c(e.items)});return r.addHandles(l),r}class d{constructor(){this._originalToMapped=new Map,this._removedItemCandidates=new Set,this._garbageCollectionQueued=!1}processRemoved(e){if(!e?.length)return;const{_removedItemCandidates:t}=this;for(const o of e)this._getItem(o)?.markRemoved()&&(t.add(o),this._queueGarbageCollection())}use(e){const t=this._getItem(e);return t&&(t.removed=!1),t?.item}register(e,t){this._originalToMapped.set(e,new l(t))}_getItem(e){return this._originalToMapped.get(e)}_queueGarbageCollection(){this._garbageCollectionQueued||(this._garbageCollectionQueued=!0,queueMicrotask((()=>this._garbageCollectCandidates())))}_garbageCollectCandidates(){this._garbageCollectionQueued=!1;const{_removedItemCandidates:e}=this,t=Array.from(e);e.clear(),t.forEach((e=>this._garbageCollectIfRemoved(e)))}_garbageCollectIfRemoved(e){const{_originalToMapped:t}=this,o=this._getItem(e);o?.removed&&(m(o.item),t.delete(e))}}class l{constructor(e){this.item=e,this.removed=!1}markRemoved(){return this.removed=!0,!0}}function m(e){\"object\"==typeof e&&e&&(\"destroy\"in e&&\"function\"==typeof e.destroy?e.destroy():s(e))}function u(s,a,d){const l=new t,u=c(s,(t=>e((async e=>{const o=await a(t,e);if(n(e))throw m(o),i();return o}))),d),f=()=>null,g=async e=>{const t=await e.promise,o=u.indexOf(e);o<0||l.splice(o,1,t)};l.addMany(u.items.map(f));for(const e of u)r(g(e));const h=u.on(\"after-splice\",(({added:e,start:t,deleteCount:o})=>{const s=l.splice(t,o);for(const r of s)m(r);if(e?.length){l.addMany(e.map(f),t);for(const t of e)r(g(t))}}));return l.addHandles([o(u),h]),l}export{c as mapCollection,u as mapCollectionAsync};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import has from\"../../../core/has.js\";import r from\"../../../core/Logger.js\";import{watch as i,syncAndInitial as l}from\"../../../core/reactiveUtils.js\";import{sqlAnd as s}from\"../../../core/sql.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/RandomLCG.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import n from\"../../../layers/support/FeatureFilter.js\";import{getFloorFilterClause as u}from\"../../../layers/support/floorFilterUtils.js\";import{isSubtypeGroupLayer as p,isFeatureLayer as d}from\"../../../layers/support/layerUtils.js\";import{isUtilityNetworkWebMap as c}from\"./snappingUtils.js\";import{scaleBoundsPredicate as y}from\"../../support/layerViewUtils.js\";let f=class extends t{set attributeRulesEnabled(e){this._set(\"attributeRulesEnabled\",e),e&&this.loadRules()}get layerView(){return this.view?.allLayerViews?.find((e=>e.layer===this.layer))}get valid(){const{_valid:e,snappingSource:t,layer:r}=this;return!(!t||!r)&&e}get subtypeFilter(){const{layer:e,snappingSource:t}=this;if(!p(e)||!e.subtypes?.length||!t)return{mode:\"not-in-use\",filter:null};const r=t.layerSource.sublayerSources.filter((e=>e.enabled&&e.layer.visible&&y(this.view?.scale,e.layer.effectiveScaleRange.minScale,e.layer.effectiveScaleRange.maxScale))).map((e=>e.layer.subtypeCode));if(!r.length)return{mode:\"none-visible\",filter:null};if(r.length===e.subtypes.length)return{mode:\"all-visible\",filter:null};const i=e.fieldsIndex.get(e.subtypeField)?.name??e.subtypeField;return 1===r.length?{mode:\"in-use\",filter:`${i} = ${r.getItemAt(0)}`}:{mode:\"in-use\",filter:`${i} IN (${r.join(\", \")})`}}get floorFilter(){const{view:e,layer:t}=this;return e&&t?u({view:e,layer:t}):null}constructor(e){super(e),this.layer=null,this.snappingSource=null,this.rulesTable=null,this._valid=null}initialize(){if(!this.snappingSource||!this.layer)return void(this._valid=!1);const{layer:e,snappingSource:t}=this;if(\"refresh\"in e){const r=e;this.addHandles(r.on(\"refresh\",(()=>t.refresh())))}this.loadRules(),this.addHandles([i((()=>t.updating),(e=>t.layerSource.updating=e),l),i((()=>t.availability),(e=>t.layerSource.availability=e),l)])}getFetchCandidatesParameters(e,t,r){if(!this.valid)return[];const{layer:i,layerView:l,floorFilter:o,rulesTable:a,subtypeFilter:u}=this,y={distance:r,mode:this.view?.type??\"2d\",point:e,coordinateHelper:t.coordinateHelper,...h(),filter:l&&\"filter\"in l?l.filter:null};if(o&&(y.filter=m(y.filter,o)),\"not-in-use\"!==u.mode&&\"all-visible\"!==u.mode){if(\"none-visible\"===u.mode)return[];y.filter?y.filter.where=s(y.filter.where,u.mode):y.filter=new n({where:u.filter})}if(!this.attributeRulesEnabled)return[y];const f=t.feature,v=\"subtype-sublayer\"===f?.sourceLayer?.type?f.sourceLayer.parent:f?.sourceLayer;if(a&&f&&c(this.view?.map)&&(d(i)||p(i))&&(d(v)||p(v))&&this.view.map.utilityNetworks?.find((e=>e.isUtilityLayer(v)))){if(\"loaded\"!==a.loadStatus)return[];const e=[],t=i.layerId,r=a.getFeatureSQL(v,f)?.[t];if(!r)return[];const l=r.anyVertex;let s=r.endVertex;return s&&l&&s===l&&(s=\"\"),s&&e.push({...y,returnEdge:!1,vertexMode:\"ends\",filter:m(y.filter,s)}),l&&e.push({...y,returnEdge:has(\"snapping-include-edges-when-applying-any-vertex-rule\")??!1,vertexMode:\"all\",filter:m(y.filter,l)}),e}return[y]}async loadRules(){this._valid=null;const{layer:e,view:t,attributeRulesEnabled:i}=this;if(i&&e&&t&&c(t?.map)&&(d(e)||p(e)))try{await Promise.allSettled(t.map.utilityNetworks?.map((e=>e.load()))??[]);const r=t.map.utilityNetworks?.find((t=>t.isUtilityLayer(e)));r&&(this.rulesTable=await r.getRulesTable(),await(this.rulesTable?.load()))}catch(l){return this._valid=!1,void r.getLogger(\"esri.views.interactive.snapping.FeatureSnappingSourceInfo\").error(\"Failed to load rules table for snapping source\",e.title)}this._valid=!0}remove(){this.destroy()}destroy(){this.snappingSource?.destroy()}};function h(){return{returnEdge:!0,vertexMode:\"all\"}}function m(e,t){return null==e?new n({where:t}):e.where?new n({where:s(e.where,t)}):new n({where:t})}e([o({constructOnly:!0})],f.prototype,\"layer\",void 0),e([o({constructOnly:!0})],f.prototype,\"snappingSource\",void 0),e([o({constructOnly:!0})],f.prototype,\"view\",void 0),e([o({value:!1})],f.prototype,\"attributeRulesEnabled\",null),e([o()],f.prototype,\"layerView\",null),e([o()],f.prototype,\"rulesTable\",void 0),e([o()],f.prototype,\"valid\",null),e([o()],f.prototype,\"subtypeFilter\",null),e([o()],f.prototype,\"floorFilter\",null),e([o()],f.prototype,\"_valid\",void 0),f=e([a(\"esri.views.interactive.snapping.FeatureSnappingSourceInfo\")],f);export{f as FeatureSnappingSourceInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import{isSome as r}from\"../../../core/arrayUtils.js\";import{destroyHandle as a}from\"../../../core/handleUtils.js\";import\"../../../core/has.js\";import{mapCollectionAsync as n}from\"../../../core/mapCollectionUtils.js\";import{allSettledValues as s,throwIfAborted as o}from\"../../../core/promiseUtils.js\";import{watch as i,sync as c}from\"../../../core/reactiveUtils.js\";import{getMetersPerUnitForSR as u,getMetersPerVerticalUnitForSR as l}from\"../../../core/unitUtils.js\";import{property as p}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/Logger.js\";import{subclass as d}from\"../../../core/accessorSupport/decorators/subclass.js\";import{squaredDistance as m}from\"../../../core/libs/gl-matrix-2/math/vec2.js\";import{c as g,s as h}from\"../../../chunks/vec32.js\";import{create as S}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{getEpsilon as f}from\"../../../core/libs/gl-matrix-2/math/common.js\";import{UpdatingHandles as y}from\"../../../core/support/UpdatingHandles.js\";import{absoluteHeightElevationInfo as _}from\"../../../support/elevationInfoUtils.js\";import{VerticalHalfPlaneConstraint as v}from\"../sketch/constraints.js\";import{fromAnyMapPoint as w,asVec2 as j,markAsTarget as F}from\"../sketch/normalizedPoint.js\";import{FeatureSnappingSourceInfo as b}from\"./FeatureSnappingSourceInfo.js\";import{SnappingDomain as x}from\"./SnappingDomain.js\";import{sortCandidatesInPlace as C,screenDistance as R}from\"./snappingUtils.js\";import{DrapedEdgeSnappingCandidate as E}from\"./candidates/DrapedEdgeSnappingCandidate.js\";import{EdgeSnappingCandidate as M}from\"./candidates/EdgeSnappingCandidate.js\";import{FeatureSnappingCandidate as L}from\"./candidates/FeatureSnappingCandidate.js\";import{RightAngleSnappingCandidate as I,OtherVertexType as G}from\"./candidates/RightAngleSnappingCandidate.js\";import{vectorToScreenPoint as H}from\"../support/viewUtils.js\";let P=class extends t{get updating(){return this._snappingSources.some((e=>null==e?.valid||!0===e.valid&&!0===e.snappingSource?.updating))||this._updatingHandles.updating}constructor(e){super(e),this.options=null,this._domain=x.FEATURE,this._updatingHandles=new y,this._sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null},notes:{module:null,loader:null},scene:{module:null,loader:null}}}initialize(){const e=n((()=>this.options?._effectiveFeatureSources),((e,t)=>this._createSourceInfo(e,t)));this._snappingSources=e,this.addHandles([a(e),i((()=>({rulesEnabled:!!this.options?.attributeRulesEnabled,sources:this._snappingSources.filter(r)})),(({rulesEnabled:e,sources:t})=>{for(const r of t)r.attributeRulesEnabled=e}),c)])}destroy(){this._set(\"options\",null),this._updatingHandles.destroy()}async fetchCandidates(e,t,r,a){if(!(t&this._domain&&null!=this.options&&this.options.effectiveFeatureEnabled))return[];const n=[],i=this._computeScreenSizeDistanceParameters(e,r);for(const s of this._snappingSources){if(!s?.valid||!s.snappingSource?.layerSource?.enabled||s.layerView?.suspended)continue;const t=s.getFetchCandidatesParameters(e,r,i);for(const e of t)n.push(s.snappingSource.fetchCandidates(e,a).then((e=>e.filter((e=>!this._candidateIsExcluded(s.snappingSource,e,r.excludeFeature))))))}const c=(await s(n)).flat();return this._addRightAngleCandidates(c,e,i,r),o(a),C(e,c),c}_addRightAngleCandidates(e,t,r,a){const n=null!=a.vertexHandle?a.vertexHandle.rightEdge?.rightVertex?.pos:null!=a.editGeometryOperations&&\"polygon\"===a.editGeometryOperations.data.type?a.editGeometryOperations.data.components[0]?.getFirstVertex()?.pos:null,s=null!=a.vertexHandle?a.vertexHandle.leftEdge?.leftVertex?.pos:null!=a.editGeometryOperations?a.editGeometryOperations.data.components[0]?.getLastVertex()?.pos:null,{view:o}=this,i=w(n,o,a),c=w(s,o,a),u=e.length;for(let l=0;l<u;l++)this._addRightAngleCandidate(e[l],c,t,r,e),this._addRightAngleCandidate(e[l],i,t,r,e)}_addRightAngleCandidate(e,t,r,a,n){if(null==t||!U(e))return;const s=e.constraint.closestTo(t),o=(s[0]-r[0])/a.x,i=(s[1]-r[1])/a.y,{start:c,end:u}=e.constraint;if(o*o+i*i<=1){const r=m(j(s),j(c))>m(j(s),j(u))?c:u,a=new I({targetPoint:F(s),otherVertex:t,otherVertexType:G.NEXT,previousVertex:r,constraint:new v(t,s),objectId:e.objectId,isDraped:e.isDraped,domain:x.FEATURE});n.push(a)}}_computeScreenSizeDistanceParameters(e,t){let r=null!=this.options?this.options.distance*(\"touch\"===t.pointer?this.options.touchSensitivityMultiplier:1):0;return null==this.view?{x:r,y:r,z:r,distance:r}:\"2d\"===this.view.type?(r*=this.view.resolution,{x:r,y:r,z:r,distance:r}):this._computeScreenSizeDistanceParameters3D(e,r,this.view,t)}_computeScreenSizeDistanceParameters3D(e,t,r,a){const{spatialReference:n}=a;r.renderCoordsHelper.toRenderCoords(e,n,D);const s=r.state.camera.computeScreenPixelSizeAt(D),o=s*r.renderCoordsHelper.unitInMeters,i=o/u(n),c=o/l(n),p=t*i,d=t*c,m=H(e,n,_,r),g=m?z(m,e,i,0,0,r,a):0,h=m?z(m,e,0,i,0,r,a):0,S=m?z(m,e,0,0,c,r,a):0;return{x:0===g?0:p/g,y:0===h?0:p/h,z:0===S?0:d/S,distance:s*t}}_candidateIsExcluded(e,t,r){if(null==r)return!1;const a=this._getCandidateObjectId(t);if(null==a)return!1;const n=e.layerSource.layer;return\"graphics\"===n.type?r.uid===a:r.sourceLayer===n&&(!(!r.attributes||!(\"objectIdField\"in n))&&r.attributes[n.objectIdField]===a)}_getCandidateObjectId(e){return e instanceof L?e.objectId:null}async _createSourceInfo(e,t){const r=e.layer;r.loaded||(await r.load(),o(t));const{view:a}=this,n=await this._createFeatureSnappingSourceType(e);return o(t),new b(null==n?{}:{snappingSource:n,view:a,layer:r})}async _createFeatureSnappingSourceType(e){switch(e.layer.type){case\"feature\":case\"geojson\":case\"csv\":case\"oriented-imagery\":case\"subtype-group\":case\"wfs\":return this._createFeatureSnappingSourceFeatureLayer(e);case\"graphics\":return this._createFeatureSnappingSourceGraphicsLayer(e);case\"map-notes\":return this._createFeatureSnappingSourceMapNotesLayer(e);case\"scene\":case\"building-scene\":return this._createFeatureSnappingSourceSceneLayer(e)}return null}async _createFeatureSnappingSourceSceneLayer(e){const{view:t}=this;if(null==t||\"3d\"!==t.type)return null;return new((await this._getSourceModule(\"scene\")).SceneLayerSnappingSource)({layerSource:e,view:t})}async _createFeatureSnappingSourceFeatureLayer(e){switch(e.layer.source?.type){case\"feature-layer\":case\"oriented-imagery\":return new((await this._getSourceModule(\"featureService\")).FeatureServiceSnappingSource)({spatialReference:this.spatialReference,view:this.view,layerSource:e});case\"memory\":case\"csv\":case\"geojson\":case\"wfs\":if(\"mesh\"===e.layer.geometryType)return null;return new((await this._getSourceModule(\"featureCollection\")).FeatureCollectionSnappingSource)({layerSource:e,view:this.view})}return null}async _createFeatureSnappingSourceGraphicsLayer(e){return new((await this._getSourceModule(\"graphics\")).GraphicsSnappingSource)({getGraphicsLayers:()=>[e.layer],spatialReference:this.spatialReference,view:this.view,layerSource:e})}async _createFeatureSnappingSourceMapNotesLayer(e){return new((await this._getSourceModule(\"notes\")).GraphicsSnappingSource)({getGraphicsLayers:()=>e.layer.sublayers?.toArray()??[],spatialReference:this.spatialReference,view:this.view,layerSource:e})}async _getSourceModule(e){const t=this._sourceModules[e];if(null==t.loader){const t=this._loadSourceModule(e),r={module:null,loader:t};this._sourceModules[e]=r;const a=await t,n={module:a,loader:t};return this._sourceModules[e]=n,a}return null==t.module?t.loader:t.module}_loadSourceModule(e){const t=this._updatingHandles;switch(e){case\"featureService\":return t.addPromise(import(\"./featureSources/FeatureServiceSnappingSource.js\"));case\"featureCollection\":return t.addPromise(import(\"./featureSources/FeatureCollectionSnappingSource.js\"));case\"graphics\":case\"notes\":return t.addPromise(import(\"./featureSources/GraphicsSnappingSource.js\"));case\"scene\":return t.addPromise(import(\"./featureSources/SceneLayerSnappingSource.js\"))}}get test(){}};function U(e){return(e instanceof M||e instanceof E)&&!A(e)}function A({constraint:{start:e,end:t}}){const r=h(e,t),a=m(j(e),j(t));return r<f()||a/r<T}function z(e,t,r,a,n,s,{spatialReference:o}){const i=g(O,t);i[0]+=r,i[1]+=a,i[2]+=n;const c=H(i,o,_,s);return c?R(c,e):1/0}e([p({constructOnly:!0})],P.prototype,\"spatialReference\",void 0),e([p({constructOnly:!0})],P.prototype,\"view\",void 0),e([p()],P.prototype,\"options\",void 0),e([p({readOnly:!0})],P.prototype,\"updating\",null),e([p()],P.prototype,\"_snappingSources\",void 0),P=e([d(\"esri.views.interactive.snapping.FeatureSnappingEngine\")],P);const D=S(),O=S(),T=1e-4;export{P as FeatureSnappingEngine};\n"],"names":["o","n","layer","floorInfo","floorField","view","l","floors","length","filter","map","push","join","c","e","s","r","createCollection","t","recycleItems","d","i","splice","processRemoved","forEach","m","use","register","addMany","a","added","start","removed","sync","onListenerRemove","items","onListenerAdd","addHandles","constructor","this","_originalToMapped","Map","_removedItemCandidates","Set","_garbageCollectionQueued","_getItem","markRemoved","add","_queueGarbageCollection","item","set","get","queueMicrotask","_garbageCollectCandidates","Array","from","clear","_garbageCollectIfRemoved","delete","destroy","f","attributeRulesEnabled","_set","loadRules","layerView","allLayerViews","find","valid","_valid","snappingSource","subtypeFilter","p","subtypes","mode","layerSource","sublayerSources","enabled","visible","y","scale","effectiveScaleRange","minScale","maxScale","subtypeCode","fieldsIndex","subtypeField","name","getItemAt","floorFilter","u","super","rulesTable","initialize","on","refresh","updating","availability","getFetchCandidatesParameters","distance","type","point","coordinateHelper","returnEdge","vertexMode","where","feature","v","sourceLayer","parent","utilityNetworks","isUtilityLayer","loadStatus","layerId","getFeatureSQL","anyVertex","endVertex","has","Promise","allSettled","load","getRulesTable","getLogger","error","title","remove","constructOnly","prototype","value","P","_snappingSources","some","_updatingHandles","options","_domain","x","FEATURE","_sourceModules","featureService","module","loader","featureCollection","graphics","notes","scene","async","g","promise","indexOf","h","deleteCount","_effectiveFeatureSources","_createSourceInfo","rulesEnabled","sources","fetchCandidates","effectiveFeatureEnabled","_computeScreenSizeDistanceParameters","suspended","then","_candidateIsExcluded","excludeFeature","flat","_addRightAngleCandidates","C","vertexHandle","rightEdge","rightVertex","pos","editGeometryOperations","data","components","getFirstVertex","leftEdge","leftVertex","getLastVertex","w","_addRightAngleCandidate","M","E","constraint","end","j","T","A","U","closestTo","I","targetPoint","F","otherVertex","otherVertexType","G","NEXT","previousVertex","objectId","isDraped","domain","pointer","touchSensitivityMultiplier","z","resolution","_computeScreenSizeDistanceParameters3D","spatialReference","renderCoordsHelper","toRenderCoords","D","state","camera","computeScreenPixelSizeAt","unitInMeters","H","_","S","_getCandidateObjectId","uid","attributes","objectIdField","L","loaded","_createFeatureSnappingSourceType","b","_createFeatureSnappingSourceFeatureLayer","_createFeatureSnappingSourceGraphicsLayer","_createFeatureSnappingSourceMapNotesLayer","_createFeatureSnappingSourceSceneLayer","_getSourceModule","SceneLayerSnappingSource","source","FeatureServiceSnappingSource","geometryType","FeatureCollectionSnappingSource","GraphicsSnappingSource","getGraphicsLayers","sublayers","toArray","_loadSourceModule","addPromise","test","O","R","readOnly"],"sourceRoot":""}