"use strict";(globalThis.webpackChunkmy_app=globalThis.webpackChunkmy_app||[]).push([[2105],{52105:(e,t,a)=>{a.r(t),a.d(t,{getContrastingBackgroundTheme:()=>F,getRenderSymbolParameters:()=>z,previewSymbol2D:()=>L});var n=a(51995),l=a(10064),i=a(82272),o=a(17842),s=a(79563),r=a(37817),c=a(69157),u=a(81283);a(67077);function h(e){let{r:t,g:a,b:l,a:i}=e;return i<1&&(t=Math.round(i*t+255*(1-i)),a=Math.round(i*a+255*(1-i)),l=Math.round(i*l+255*(1-i))),new n.Z({r:t,g:a,b:l})}function m(e,t){const{r:a,g:n,b:l}=t?.ignoreAlpha?e:h(e);return.2126*a+.7152*n+.0722*l}const p="picture-fill",d=r.b_.size,f=r.b_.maxSize,y=r.b_.maxOutlineSize,g=r.b_.lineWidth,w=225,b=document.createElement("canvas");function v(e,t){const a=b.getContext("2d"),n=[];return t&&(t.weight&&n.push(t.weight),t.size&&n.push(t.size+"px"),t.family&&n.push(t.family)),a.font=n.join(" "),a.measureText(e).width}function k(e){if(0===e.length)return 0;if(e.length>2){const t=(0,o.Wz)(1),a=parseFloat(e);switch(e.slice(-2)){case"px":return a;case"pt":return a*t;case"in":return 72*a*t;case"pc":return 12*a*t;case"mm":return 2.8346456692913384*a*t;case"cm":return 28.346456692913385*a*t}}return parseFloat(e)}function M(e){const t=e?.size;return{width:null!=t&&"object"==typeof t&&"width"in t?(0,o.F2)(t.width):null,height:null!=t&&"object"==typeof t&&"height"in t?(0,o.F2)(t.height):null}}function x(e,t){return e>t?"dark":"light"}function z(e,t){const a="number"==typeof t?.size?t?.size:null,n=null!=a?(0,o.F2)(a):null,l=null!=t?.maxSize?(0,o.F2)(t.maxSize):null,i=null!=t?.rotation?t.rotation:"angle"in e?e.angle:null,c=(0,s._M)(e);let u=(0,s.mx)(e);"dark"!==F(e,245)||t?.ignoreWhiteSymbols||(u={width:.75,...u,color:"#bdc3c7"});const h={shape:null,fill:c,stroke:u,offset:[0,0]};u?.width&&(u.width=Math.min(u.width,y));const m=u?.width||0;let w=null!=t?.size&&(null==t?.scale||t?.scale),b=0,x=0,z=!1;switch(e.type){case"simple-marker":{const a=e.style,{width:s,height:r}=M(t),c=s===r&&null!=s?s:null!=n?n:Math.min((0,o.F2)(e.size),l||f);switch(b=c,x=c,a){case"circle":h.shape={type:"circle",cx:0,cy:0,r:.5*c},w||(b+=m,x+=m);break;case"cross":h.shape={type:"path",path:[{command:"M",values:[0,.5*x]},{command:"L",values:[b,.5*x]},{command:"M",values:[.5*b,0]},{command:"L",values:[.5*b,x]}]};break;case"diamond":h.shape={type:"path",path:[{command:"M",values:[0,.5*x]},{command:"L",values:[.5*b,0]},{command:"L",values:[b,.5*x]},{command:"L",values:[.5*b,x]},{command:"Z",values:[]}]},w||(b+=m,x+=m);break;case"square":h.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[b,0]},{command:"L",values:[b,x]},{command:"L",values:[0,x]},{command:"Z",values:[]}]},w||(b+=m,x+=m),i&&(z=!0);break;case"triangle":h.shape={type:"path",path:[{command:"M",values:[.5*b,0]},{command:"L",values:[b,x]},{command:"L",values:[0,x]},{command:"Z",values:[]}]},w||(b+=m,x+=m),i&&(z=!0);break;case"x":h.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[b,x]},{command:"M",values:[b,0]},{command:"L",values:[0,x]}]},i&&(z=!0);break;case"path":h.shape={type:"path",path:e.path||""},w||(b+=m,x+=m),i&&(z=!0),w=!0}break}case"simple-line":{const{width:e,height:a}=M(t),l=null!=a?a:null!=n?n:m,i=null!=e?e:g;u&&(u.width=l),b=i,x=l;const o=h?.stroke?.cap||"butt",s="round"===o;w=!0,h.stroke&&(h.stroke.cap="butt"===o?"square":o),h.shape={type:"path",path:[{command:"M",values:[s?l/2:0,x/2]},{command:"L",values:[s?b-l/2:b,x/2]}]};break}case p:case"simple-fill":{const e="object"==typeof t?.symbolConfig&&!!t?.symbolConfig?.isSquareFill,{width:a,height:l}=M(t);b=!e&&a!==l||null==a?null!=n?n:d:a,x=!e&&a!==l||null==l?b:l,w||(b+=m,x+=m),w=!0,h.shape=e?{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[b,0]},{command:"L",values:[b,x]},{command:"L",values:[0,x]},{command:"L",values:[0,0]},{command:"Z",values:[]}]}:r.JZ.fill[0];break}case"picture-marker":{const a=Math.min((0,o.F2)(e.width),l||f),s=Math.min((0,o.F2)(e.height),l||f),{width:r,height:c}=M(t),u=r===c&&null!=r?r:null!=n?n:Math.max(a,s),m=a/s;b=m<=1?Math.ceil(u*m):u,x=m<=1?u:Math.ceil(u/m),h.shape={type:"image",x:-Math.round(b/2),y:-Math.round(x/2),width:b,height:x,src:e.url||""},i&&(z=!0);break}case"text":{const a=e,i=t?.overrideText||a.text||"Aa",s=a.font,{width:r,height:c}=M(t),u=null!=c?c:null!=n?n:Math.min((0,o.F2)(s.size),l||f),m=v(i,{weight:s.weight,size:u,family:s.family}),p=/[\uE600-\uE6FF]/.test(i);b=r??(p?u:m),x=u;let d=.25*k((s?u:0).toString());p&&(d+=5),h.shape={type:"text",text:i,x:a.xoffset||0,y:a.yoffset||d,align:"middle",alignBaseline:a.verticalAlignment,decoration:s&&s.decoration,rotated:a.rotated,kerning:a.kerning},h.font=s&&{size:u,style:s.style,decoration:s.decoration,weight:s.weight,family:s.family};break}}return{shapeDescriptor:h,size:[b,x],renderOptions:{node:t?.node,scale:w,opacity:t?.opacity,rotation:i,useRotationSize:z,effectView:t?.effectView,ariaLabel:t?.ariaLabel}}}async function L(e,t){const{shapeDescriptor:a,size:n,renderOptions:h}=z(e,t);if(!a.shape)throw new l.Z("symbolPreview: renderPreviewHTML2D","symbol not supported.");await async function(e,t){const a=t.fill,n=e.color;if("pattern"===a?.type&&n&&e.type!==p){const e=await(0,s.Od)(a.src,n.toCss(!0));a.src=e,t.fill=a}}(e,a),await async function(e,t,a,n){if(!("font"in e)||!e.font||"text"!==t.shape.type)return;try{await(0,i.mx)(e.font)}catch{}const{width:l}=M(n),o=/[\uE600-\uE6FF]/.test(t.shape.text);null!=l||o||(a[0]=v(t.shape.text,{weight:t.font?.weight,size:t.font?.size,family:t.font?.family}))}(e,a,n,t);const m=[[a]];if("object"==typeof t?.symbolConfig&&t?.symbolConfig?.applyColorModulation){const e=.6*n[0];m.unshift([{...a,offset:[-e,0],fill:(0,r.dc)(a.fill,-.3)}]),m.push([{...a,offset:[e,0],fill:(0,r.dc)(a.fill,.3)}]),n[0]+=2*e,h.scale=!1}return"text"===e.type&&function(e,t,a,n,l){if(null!=e.haloColor&&null!=e.haloSize){l.masking??=a.map((()=>[]));const i=(0,o.F2)(e.haloSize);n[0]+=i,n[1]+=i,a.unshift([{...t,fill:null,stroke:{color:e.haloColor,width:2*i,join:"round",cap:"round"}}]),l.masking.unshift([{shape:{type:"rect",x:0,y:0,width:n[0]+2*u.M8,height:n[1]+2*u.M8},fill:[255,255,255],stroke:null},{...t,fill:[0,0,0,0],stroke:null}])}null==e.backgroundColor&&null==e.borderLineColor||(n[0]+=2*u.M8,n[1]+=2*u.M8,a.unshift([{shape:{type:"rect",x:0,y:0,width:n[0],height:n[1]},fill:e.backgroundColor,stroke:{color:e.borderLineColor,width:(0,o.F2)(e.borderLineSize)}}]),l.masking?.unshift([]))}(e,a,m,n,h),(0,c.wh)(m,n,h)}function F(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w;const a=(0,s._M)(e),l=(0,s.mx)(e),i=!a||"type"in a?null:new n.Z(a),o=l?.color?new n.Z(l?.color):null,r=i?x(m(i),t):null,c=o?x(m(o),t):null;return c?r?r===c?r:t>=w?"light":"dark":c:r}}}]);
//# sourceMappingURL=2105.bd81b61a.chunk.js.map