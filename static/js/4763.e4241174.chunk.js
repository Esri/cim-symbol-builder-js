"use strict";(globalThis.webpackChunkmy_app=globalThis.webpackChunkmy_app||[]).push([[4763],{54763:(e,t,a)=>{a.r(t),a.d(t,{previewCIMSymbol:()=>m});var l=a(17842),i=a(94304),n=a(49729),s=a(37817),c=a(1682);const o=new i.U(null,!0),h=s.b_.maxSize;async function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{size:a,maxSize:i,node:s,opacity:m}=t,p=t.cimOptions||t,{feature:u,fieldMap:y,geometryType:r,style:d}=p,f=(0,n.kW)(e),g="number"==typeof a?a:null,w=Math.min(null!=g?g:f,null!=i?i:(0,l.Wz)(h));w!==f&&(e=e.clone(),(0,n.PI)(e,w,{preserveOutlineWidth:!0}));let b=3;e&&e.data&&e.data.symbol&&"CIMPointSymbol"!==e.data.symbol.type&&(b=1);const C=await o.rasterizeCIMSymbolAsync(e,u,y,r,{scaleFactor:b,style:d}),M=document.createElement("canvas");M.width=C.imageData.width,M.height=C.imageData.height,M.getContext("2d").putImageData(C.imageData,0,0);let k=M.width/b,I=M.height/b;if(null!=a&&(null==t?.scale||t?.scale)){const e=k/I;k=e<=1?Math.ceil(w*e):w,I=e<=1?w:Math.ceil(w/e)}const v=new Image(k,I);v.src=M.toDataURL(),null!=m&&(v.style.opacity=`${m}`);let z=v;if(null!=t.effectView){const e={shape:{type:"image",x:0,y:0,width:k,height:I,src:v.src},fill:null,stroke:null,offset:[0,0]};z=(0,c.w)([[e]],[k,I],{effectView:t.effectView})}return s&&s.appendChild(z),z}}}]);
//# sourceMappingURL=4763.e4241174.chunk.js.map