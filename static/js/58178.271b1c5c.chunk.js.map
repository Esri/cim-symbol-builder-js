{"version":3,"file":"static/js/58178.271b1c5c.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/graphics/sources/WFSSourceWorker.js","../node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{createTask as e}from\"../../../core/asyncUtils.js\";import t from\"../../../core/Error.js\";import r from\"../../../core/Logger.js\";import{throwIfAborted as s,isAbortError as a}from\"../../../core/promiseUtils.js\";import{equals as i}from\"../../../geometry/support/spatialReferenceUtils.js\";import{convertFromGeometry as o,convertToGeometry as n}from\"../featureConversionUtils.js\";import u from\"../data/FeatureStore.js\";import{checkProjectionSupport as p,project as l}from\"../data/projectionSupport.js\";import{QueryEngine as h}from\"../data/QueryEngine.js\";import{validateGeoJSON as c,createOptimizedFeatures as m}from\"./geojson/geojson.js\";import{mixAttributes as y}from\"./support/sourceUtils.js\";import{getGetFeatureSpatialReference as f,getFeature as g}from\"../../ogc/wfsUtils.js\";import d from\"../../support/FieldsIndex.js\";import{utc as _}from\"../../../time/timeZoneUtils.js\";class F{constructor(){this._queryEngine=null,this._customParameters=null}destroy(){this._queryEngine?.destroy(),this._queryEngine=null}async load(e,r){const{getFeatureUrl:a,getFeatureOutputFormat:i,fields:o,geometryType:n,featureType:l,objectIdField:c,customParameters:m}=e,{spatialReference:y,getFeatureSpatialReference:g}=f(a,l,e.spatialReference);this._featureType=l,this._customParameters=m,this._getFeatureUrl=a,this._getFeatureOutputFormat=i,this._getFeatureSpatialReference=g;try{await p(g,y)}catch{throw new t(\"unsupported-projection\",\"Projection not supported\",{inSpatialReference:g,outSpatialReference:y})}s(r);const F=d.fromLayerJSON({fields:o,dateFieldsTimeReference:o.some((e=>\"esriFieldTypeDate\"===e.type))?{timeZoneIANA:_}:null}),w=await this._snapshotFeatures({fieldsIndex:F,geometryType:n,objectIdField:c,spatialReference:y},r.signal);return this._queryEngine=new h({fieldsIndex:F,geometryType:n,hasM:!1,hasZ:!1,objectIdField:c,spatialReference:y,timeInfo:null,featureStore:new u({geometryType:n,hasM:!1,hasZ:!1})}),this._queryEngine.featureStore.addMany(w),{extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async applyEdits(){throw new t(\"wfs-source:editing-not-supported\",\"applyEdits() is not supported on WFSLayer\")}async queryFeatures(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(e,t.signal)}async querySnapping(e,t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(e,t.signal)}async refresh(s){return this._customParameters=s,this._snapshotTask?.abort(),this._snapshotTask=e((e=>this._snapshotFeatures(this._queryEngine,e))),this._snapshotTask.promise.then((e=>{this._queryEngine.featureStore.clear(),e&&this._queryEngine.featureStore.addMany(e)}),(e=>{this._queryEngine.featureStore.clear(),a(e)||r.getLogger(\"esri.layers.WFSLayer\").error(new t(\"wfs-layer:getfeature-error\",\"An error occurred during the GetFeature request\",{error:e}))})),await this._waitSnapshotComplete(),{extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _snapshotFeatures({objectIdField:e,geometryType:t,spatialReference:r,fieldsIndex:a},u){const p=await g(this._getFeatureUrl??\"\",this._featureType.typeName,this._getFeatureSpatialReference,this._getFeatureOutputFormat,{customParameters:this._customParameters,signal:u});c(p,this._getFeatureSpatialReference.wkid),s(u);const h=m(p,{geometryType:t,hasZ:!1,objectIdField:e});if(!i(r,this._getFeatureSpatialReference))for(const s of h)null!=s.geometry&&(s.geometry=o(l(n(s.geometry,t,!1,!1),this._getFeatureSpatialReference,r)));let f=1;for(const s of h){const t={};y(a,t,s.attributes,!0),s.attributes=t,null==t[e]&&(s.objectId=t[e]=f++)}return h}}export{F as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{parseDate as t}from\"../../../../core/date.js\";import{isValid as n}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{validateFieldValue as e,validationErrorToString as r,isNumericField as i,isStringField as o,isDateField as s,sanitizeNullFieldValue as l}from\"../../../support/fieldUtils.js\";class u{constructor(){this.code=null,this.description=null}}class c{constructor(t){this.error=new u,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=t}}function f(t){return new c(t)}class a{constructor(t){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=t}}function d(t){return new a(t)}const m=new Set;function p(t,n,i,o=!1){m.clear();for(const s in i){const l=t.get(s);if(!l)continue;const u=h(l,i[s]);if(m.add(l.name),l&&(o||l.editable)){const t=e(l,u);if(t)return f(r(t,l,u));n[l.name]=u}}for(const e of t?.requiredFields??[])if(!m.has(e.name))return f(`missing required field \"${e.name}\"`);return null}function g(n,e){if(n?.length)for(const{name:r}of n)\"string\"==typeof e[r]&&(e[r]=t(e[r]))}function h(n,e){let r=e;return i(n)&&\"string\"==typeof e?r=parseFloat(e):o(n)&&null!=e&&\"string\"!=typeof e?r=String(e):s(n)&&\"string\"==typeof e&&(r=t(e)),l(r)}let y;function w(t,e){if(!t||!n(e))return t;if(\"rings\"in t||\"paths\"in t){if(null==y)throw new TypeError(\"geometry engine not loaded\");return y.simplify(e,t)}return t}async function j(){return null==y&&(y=await import(\"../../../../geometry/geometryEngineJSON.js\")),y}async function I(t,e){!n(t)||\"esriGeometryPolygon\"!==e&&\"esriGeometryPolyline\"!==e||await j()}export{f as createFeatureEditErrorResult,d as createFeatureEditSuccessResult,I as loadGeometryEngineForSimplify,p as mixAttributes,g as parseStringDateFieldValues,w as simplify};\n"],"names":["F","constructor","this","_queryEngine","_customParameters","destroy","e","r","getFeatureUrl","a","getFeatureOutputFormat","i","fields","o","geometryType","n","featureType","l","objectIdField","c","customParameters","m","spatialReference","y","getFeatureSpatialReference","g","f","_featureType","_getFeatureUrl","_getFeatureOutputFormat","_getFeatureSpatialReference","p","t","inSpatialReference","outSpatialReference","s","d","dateFieldsTimeReference","some","type","timeZoneIANA","_","w","_snapshotFeatures","fieldsIndex","signal","h","hasM","hasZ","timeInfo","featureStore","u","addMany","extent","fetchRecomputedExtents","fullExtent","_waitSnapshotComplete","executeQuery","executeQueryForCount","executeQueryForIds","executeQueryForExtent","executeQueryForSnapping","_snapshotTask","abort","promise","then","clear","error","finished","typeName","wkid","geometry","attributes","objectId","code","description","globalId","success","uniqueId","Set","get","add","name","editable","requiredFields","has","parseFloat","String","TypeError","simplify","async","I","j"],"sourceRoot":""}