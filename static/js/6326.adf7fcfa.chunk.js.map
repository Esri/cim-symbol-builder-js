{"version":3,"file":"static/js/6326.adf7fcfa.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/support/kmlUtils.js","../node_modules/@arcgis/core/views/support/imageReprojection.js","../node_modules/@arcgis/core/views/2d/layers/KMLLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../config.js\";import{id as o}from\"../../kernel.js\";import t from\"../../PopupTemplate.js\";import r from\"../../request.js\";import{clone as s}from\"../../core/lang.js\";import{addQueryParameters as n}from\"../../core/urlUtils.js\";import i from\"../../geometry/SpatialReference.js\";import{create as f,NEGATIVE_INFINITY as a,expandWithAABB as l,equals as u}from\"../../geometry/support/aaBoundingBox.js\";import{getBoundsXYZ as p}from\"../../geometry/support/boundsUtils.js\";import{fromJSON as m}from\"../../renderers/support/jsonUtils.js\";import y from\"../../rest/support/FeatureSet.js\";const c={esriGeometryPoint:\"points\",esriGeometryPolyline:\"polylines\",esriGeometryPolygon:\"polygons\"};function d(e){const o=e.folders||[],t=o.slice(),r=new Map,n=new Map,i=new Map,f=new Map,a=new Map,l={esriGeometryPoint:n,esriGeometryPolyline:i,esriGeometryPolygon:f};(e.featureCollection&&e.featureCollection.layers||[]).forEach((e=>{const o=s(e);o.featureSet.features=[];const t=e.featureSet.geometryType;r.set(t,o);const a=e.layerDefinition.objectIdField;\"esriGeometryPoint\"===t?G(n,a,e.featureSet.features):\"esriGeometryPolyline\"===t?G(i,a,e.featureSet.features):\"esriGeometryPolygon\"===t&&G(f,a,e.featureSet.features)})),e.groundOverlays&&e.groundOverlays.forEach((e=>{a.set(e.id,e)})),o.forEach((o=>{o.networkLinkIds.forEach((r=>{const s=P(r,o.id,e.networkLinks);s&&t.push(s)}))})),t.forEach((e=>{if(e.featureInfos){e.points=s(r.get(\"esriGeometryPoint\")),e.polylines=s(r.get(\"esriGeometryPolyline\")),e.polygons=s(r.get(\"esriGeometryPolygon\")),e.mapImages=[];for(const o of e.featureInfos)switch(o.type){case\"esriGeometryPoint\":case\"esriGeometryPolyline\":case\"esriGeometryPolygon\":{const t=l[o.type].get(o.id);t&&e[c[o.type]].featureSet.features.push(t);break}case\"GroundOverlay\":{const t=a.get(o.id);t&&e.mapImages.push(t);break}}e.fullExtent=j([e])}}));const u=j(t);return{folders:o,sublayers:t,extent:u}}function g(t,s,i,f){const a=o&&o.findCredential(t);t=n(t,{token:a&&a.token});const l=e.kmlServiceUrl;return r(l,{query:{url:t,model:\"simple\",folders:\"\",refresh:0!==i||void 0,outSR:JSON.stringify(s)},responseType:\"json\",signal:f})}function S(e,o,t=null,r=[]){const s=[],n={},i=o.sublayers,f=o.folders.map((e=>e.id));return i.forEach((o=>{const i=new e;if(t?i.read(o,t):i.read(o),r.length&&f.includes(i.id)&&(i.visible=r.includes(i.id)),n[o.id]=i,null!=o.parentFolderId&&-1!==o.parentFolderId){const e=n[o.parentFolderId];e.sublayers||(e.sublayers=[]),e.sublayers.unshift(i)}else s.unshift(i)})),s}function G(e,o,t){t.forEach((t=>{e.set(t.attributes[o],t)}))}function h(e,o){let t;return o.some((o=>o.id===e&&(t=o,!0))),t}function P(e,o,t){const r=h(e,t);return r&&(r.parentFolderId=o,r.networkLink=r),r}async function b(e){const o=y.fromJSON(e.featureSet).features,r=e.layerDefinition,s=m(r.drawingInfo.renderer),n=t.fromJSON(e.popupInfo),i=[];for(const t of o){const e=await s.getSymbolAsync(t);t.symbol=e,t.popupTemplate=n,t.visible=!0,i.push(t)}return i}function j(e){const o=f(a),t=f(a);for(const r of e){if(r.polygons&&r.polygons.featureSet&&r.polygons.featureSet.features)for(const e of r.polygons.featureSet.features)p(o,e.geometry),l(t,o);if(r.polylines&&r.polylines.featureSet&&r.polylines.featureSet.features)for(const e of r.polylines.featureSet.features)p(o,e.geometry),l(t,o);if(r.points&&r.points.featureSet&&r.points.featureSet.features)for(const e of r.points.featureSet.features)p(o,e.geometry),l(t,o);if(r.mapImages)for(const e of r.mapImages)p(o,e.extent),l(t,o)}return u(t,a)?null:{xmin:t[0],ymin:t[1],zmin:t[2],xmax:t[3],ymax:t[4],zmax:t[5],spatialReference:i.WGS84}}export{j as computeExtent,g as fetchService,b as getGraphics,d as parseKML,S as sublayersFromJSON};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport t from\"../../request.js\";import e from\"../../geometry/Point.js\";import{project as r}from\"../../geometry/projection.js\";import{projectResolution as i,getProjectionOffsetGrid as a}from\"../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import{isImageSource as s,rasterize as o}from\"../2d/engine/Bitmap.js\";import n from\"../2d/engine/webgl/VertexStream.js\";import{createProgramTemplate as m}from\"../2d/engine/webgl/shaders/MaterialPrograms.js\";import{PixelFormat as p,PixelType as h,TextureWrapMode as c,TextureSamplingMode as x,TargetType as d,DepthStencilTargetType as g,ColorAttachment as u}from\"../webgl/enums.js\";import{FramebufferObject as _}from\"../webgl/FramebufferObject.js\";import{createTransformTexture as f}from\"../webgl/rasterUtils.js\";import{RenderingContext as l}from\"../webgl/RenderingContext.js\";import{Texture as w}from\"../webgl/Texture.js\";class b{constructor(t){if(t)this._ownsRctx=!1,this._rctx=t;else{this._ownsRctx=!0;const t=document.createElement(\"canvas\").getContext(\"webgl\");t.getExtension(\"OES_texture_float\"),this._rctx=new l(t,{})}const e={applyProjection:!0,bilinear:!1,bicubic:!1},r=m(\"raster/reproject\",\"raster/reproject\",new Map([[\"a_position\",0]]),e);this._program=this._rctx.programCache.acquire(r.shaders.vertexShader,r.shaders.fragmentShader,r.attributes),this._rctx.useProgram(this._program),this._program.setUniform1f(\"u_opacity\",1),this._program.setUniform1i(\"u_image\",0),this._program.setUniform1i(\"u_flipY\",0),this._program.setUniform1i(\"u_transformGrid\",1),this._quad=new n(this._rctx,[0,0,1,0,0,1,1,1])}reprojectTexture(t,s,o=!1){const n=r(t.extent,s),m=new e({x:(t.extent.xmax-t.extent.xmin)/t.texture.descriptor.width,y:(t.extent.ymax-t.extent.ymin)/t.texture.descriptor.height,spatialReference:t.extent.spatialReference}),{x:l,y:b}=i(m,s,t.extent);let D=(l+b)/2;const T=Math.round((n.xmax-n.xmin)/D),j=Math.round((n.ymax-n.ymin)/D);D=(n.width/T+n.height/j)/2;const E=new e({x:D,y:D,spatialReference:n.spatialReference}),R=a({projectedExtent:n,srcBufferExtent:t.extent,pixelSize:E,hasWrapAround:!0,spacing:[16,16]}),y=f(this._rctx,R),M=new w(this._rctx,{width:T,height:j,pixelFormat:p.RGBA,dataType:h.UNSIGNED_BYTE,wrapMode:c.CLAMP_TO_EDGE,samplingMode:x.LINEAR,hasMipmap:!1}),A=new _(this._rctx,{colorTarget:d.TEXTURE,depthStencilTarget:g.NONE,width:T,height:j},M);if(this._rctx.bindFramebuffer(A),this._rctx.setViewport(0,0,T,j),this._rctx.useProgram(this._program),this._rctx.bindTexture(t.texture,0),this._rctx.bindTexture(y,1),this._quad.bind(),this._program.setUniform2f(\"u_srcImageSize\",t.texture.descriptor.width,t.texture.descriptor.height),this._program.setUniform2fv(\"u_transformSpacing\",R.spacing),this._program.setUniform2fv(\"u_transformGridSize\",R.size),this._program.setUniform2f(\"u_targetImageSize\",T,j),this._quad.draw(),this._quad.unbind(),this._rctx.useProgram(null),this._rctx.bindFramebuffer(null),y.dispose(),o){const t=new ImageData(A.descriptor.width,A.descriptor.height);return A.readPixels(0,0,A.descriptor.width,A.descriptor.height,p.RGBA,h.UNSIGNED_BYTE,t.data),A.detachColorTexture(u.COLOR_ATTACHMENT0),A.dispose(),{texture:M,extent:n,imageData:t}}return A.detachColorTexture(u.COLOR_ATTACHMENT0),A.dispose(),{texture:M,extent:n}}reprojectBitmapData(t,e){const r=s(t.bitmapData)?o(t.bitmapData):t.bitmapData,i=new w(this._rctx,{width:t.bitmapData.width,height:t.bitmapData.height,pixelFormat:p.RGBA,dataType:h.UNSIGNED_BYTE,wrapMode:c.CLAMP_TO_EDGE,samplingMode:x.LINEAR,hasMipmap:!1},r),a=this.reprojectTexture({texture:i,extent:t.extent},e,!0);a.texture.dispose();const n=document.createElement(\"canvas\");n.width=a.imageData.width,n.height=a.imageData.height;return n.getContext(\"2d\").putImageData(a.imageData,0,0),{bitmapData:n,extent:a.extent}}async loadAndReprojectBitmapData(e,r,i){const a=(await t(e,{responseType:\"image\"})).data,s=document.createElement(\"canvas\");s.width=a.width,s.height=a.height;const o=s.getContext(\"2d\");o.drawImage(a,0,0);const n=o.getImageData(0,0,s.width,s.height);if(r.spatialReference.equals(i))return{bitmapData:n,extent:r};const m=this.reprojectBitmapData({bitmapData:n,extent:r},i);return{bitmapData:m.bitmapData,extent:m.extent}}destroy(){this._quad.dispose(),this._program.dispose(),this._ownsRctx&&this._rctx.dispose()}}export{b as ImageReprojector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{version as i}from\"../../../kernel.js\";import t from\"../../../core/Collection.js\";import{isSome as s,isNone as a}from\"../../../core/maybe.js\";import{watch as o}from\"../../../core/reactiveUtils.js\";import{queryToObject as l,objectToQuery as r}from\"../../../core/urlUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as h}from\"../../../core/accessorSupport/decorators/subclass.js\";import p from\"../../../geometry/Extent.js\";import{load as m,project as c}from\"../../../geometry/projection.js\";import d from\"../../../geometry/SpatialReference.js\";import{getGraphics as y,fetchService as g,parseKML as w}from\"../../../layers/support/kmlUtils.js\";import{parseUrl as u}from\"../../../rest/utils.js\";import{GraphicsCollection as _}from\"../../../support/GraphicsCollection.js\";import{Bitmap as b}from\"../engine/Bitmap.js\";import{BitmapContainer as V}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as f}from\"./LayerView2D.js\";import v from\"./graphics/GraphicContainer.js\";import S from\"./graphics/GraphicsView2D.js\";import I from\"../../layers/LayerView.js\";import{ImageReprojector as x}from\"../../support/imageReprojection.js\";class C{constructor(){this.allSublayers=new Map,this.allPoints=[],this.allPolylines=[],this.allPolygons=[],this.allMapImages=[]}}let j=class extends(f(I)){constructor(){super(...arguments),this._bitmapIndex=new Map,this._mapImageContainer=new V,this._kmlVisualData=new C,this.allVisiblePoints=new _,this.allVisiblePolylines=new _,this.allVisiblePolygons=new _,this.allVisibleMapImages=new t}async hitTest(e,i){const t=this.layer;return[this._pointsView?.hitTest(e),this._polylinesView?.hitTest(e),this._polygonsView?.hitTest(e)].flat().filter(Boolean).map((i=>(i.layer=t,i.sourceLayer=t,{type:\"graphic\",graphic:i,layer:t,mapPoint:e})))}update(e){this._polygonsView&&this._polygonsView.processUpdate(e),this._polylinesView&&this._polylinesView.processUpdate(e),this._pointsView&&this._pointsView.processUpdate(e)}attach(){this._fetchController=new AbortController,this.container.addChild(this._mapImageContainer),this._polygonsView=new S({view:this.view,graphics:this.allVisiblePolygons,requestUpdateCallback:()=>this.requestUpdate(),container:new v(this.view.featuresTilingScheme)}),this.container.addChild(this._polygonsView.container),this._polylinesView=new S({view:this.view,graphics:this.allVisiblePolylines,requestUpdateCallback:()=>this.requestUpdate(),container:new v(this.view.featuresTilingScheme)}),this.container.addChild(this._polylinesView.container),this._pointsView=new S({view:this.view,graphics:this.allVisiblePoints,requestUpdateCallback:()=>this.requestUpdate(),container:new v(this.view.featuresTilingScheme)}),this.container.addChild(this._pointsView.container),this.handles.add([this.allVisibleMapImages.on(\"change\",(e=>{e.added.forEach((e=>this._addMapImage(e))),e.removed.forEach((e=>this._removeMapImage(e)))})),o((()=>this.layer.visibleSublayers),(e=>{for(const[i,t]of this._kmlVisualData.allSublayers)t.visibility=0;for(const i of e){const e=this._kmlVisualData.allSublayers.get(i.id);e&&(e.visibility=1)}this._refreshCollections()}))]),this.updatingHandles.addPromise(this._fetchService(this._fetchController.signal)),this._imageReprojector=new x}detach(){this._fetchController.abort(),this._fetchController=null,this._mapImageContainer.removeAllChildren(),this.container.removeAllChildren(),this._bitmapIndex.clear(),this._polygonsView&&(this._polygonsView.destroy(),this._polygonsView=null),this._polylinesView&&(this._polylinesView.destroy(),this._polylinesView=null),this._pointsView&&(this._pointsView.destroy(),this._pointsView=null),this._imageReprojector&&(this._imageReprojector.destroy(),this._imageReprojector=null)}moveStart(){}viewChange(){this._polygonsView.viewChange(),this._polylinesView.viewChange(),this._pointsView.viewChange()}moveEnd(){}isUpdating(){return this._pointsView.updating||this._polygonsView.updating||this._polylinesView.updating}_addMapImage(e){(this.view.spatialReference.isWGS84||this.view.spatialReference.isWebMercator)&&this._imageReprojector.loadAndReprojectBitmapData(e.href,p.fromJSON(e.extent),this.view.spatialReference).then((i=>{const t=new b(i.bitmapData,{immutable:!1,requestRenderOnSourceChangedEnabled:!0});t.x=i.extent.xmin,t.y=i.extent.ymax,t.resolution=i.extent.width/i.bitmapData.width,t.rotation=e.rotation,this._mapImageContainer.addChild(t),this._bitmapIndex.set(e,t)}))}async _getViewDependentUrl(e,t){const{viewFormat:o,viewBoundScale:n,httpQuery:h}=e;if(s(o)){if(a(t))throw new Error(\"Loading this network link requires a view state.\");let y;if(await m(),s(n)&&1!==n){const e=new p(t.extent);e.expand(n),y=e}else y=t.extent;y=c(y,d.WGS84);const g=c(y,d.WebMercator),w=y.xmin,_=y.xmax,b=y.ymin,V=y.ymax,f=t.size[0]*t.pixelRatio,v=t.size[1]*t.pixelRatio,S=Math.max(g.width,g.height),I={\"[bboxWest]\":w.toString(),\"[bboxEast]\":_.toString(),\"[bboxSouth]\":b.toString(),\"[bboxNorth]\":V.toString(),\"[lookatLon]\":y.center.x.toString(),\"[lookatLat]\":y.center.y.toString(),\"[lookatRange]\":S.toString(),\"[lookatTilt]\":\"0\",\"[lookatHeading]\":t.rotation.toString(),\"[lookatTerrainLon]\":y.center.x.toString(),\"[lookatTerrainLat]\":y.center.y.toString(),\"[lookatTerrainAlt]\":\"0\",\"[cameraLon]\":y.center.x.toString(),\"[cameraLat]\":y.center.y.toString(),\"[cameraAlt]\":S.toString(),\"[horizFov]\":\"60\",\"[vertFov]\":\"60\",\"[horizPixels]\":f.toString(),\"[vertPixels]\":v.toString(),\"[terrainEnabled]\":\"0\",\"[clientVersion]\":i,\"[kmlVersion]\":\"2.2\",\"[clientName]\":\"ArcGIS API for JavaScript\",\"[language]\":\"en-US\"},x=e=>{for(const i in e)for(const t in I)e[i]=e[i].replace(t,I[t])},C=l(o);x(C);let j={};s(h)&&(j=l(h),x(j));const k=u(e.href);k.query={...k.query,...C,...j};return`${k.path}?${r(C)}`}return e.href}async _fetchService(e){const i=new C;await this._loadVisualData(this.layer.url,i,e),this._kmlVisualData=i,this._refreshCollections()}_refreshCollections(){this.allVisiblePoints.removeAll(),this.allVisiblePolylines.removeAll(),this.allVisiblePolygons.removeAll(),this.allVisibleMapImages.removeAll(),this.allVisiblePoints.addMany(this._kmlVisualData.allPoints.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisiblePolylines.addMany(this._kmlVisualData.allPolylines.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisiblePolygons.addMany(this._kmlVisualData.allPolygons.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisibleMapImages.addMany(this._kmlVisualData.allMapImages.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e)))}_isSublayerVisible(e){const i=this._kmlVisualData.allSublayers.get(e);return!!i.visibility&&(-1===i.parentFolderId||this._isSublayerVisible(i.parentFolderId))}_loadVisualData(e,i,t){return this._fetchParsedKML(e,t).then((async e=>{for(const s of e.sublayers){i.allSublayers.set(s.id,s);const e=s.points?await y(s.points):[],a=s.polylines?await y(s.polylines):[],o=s.polygons?await y(s.polygons):[],l=s.mapImages||[];if(i.allPoints.push(...e.map((e=>({item:e,sublayerId:s.id})))),i.allPolylines.push(...a.map((e=>({item:e,sublayerId:s.id})))),i.allPolygons.push(...o.map((e=>({item:e,sublayerId:s.id})))),i.allMapImages.push(...l.map((e=>({item:e,sublayerId:s.id})))),s.networkLink){const e=await this._getViewDependentUrl(s.networkLink,this.view.state);await this._loadVisualData(e,i,t)}}}))}_fetchParsedKML(e,i){return g(e,this.layer.spatialReference,this.layer.refreshInterval,i).then((e=>w(e.data)))}_removeMapImage(e){const i=this._bitmapIndex.get(e);i&&(this._mapImageContainer.removeChild(i),this._bitmapIndex.delete(e))}};e([n()],j.prototype,\"_pointsView\",void 0),e([n()],j.prototype,\"_polylinesView\",void 0),e([n()],j.prototype,\"_polygonsView\",void 0),e([n()],j.prototype,\"updating\",void 0),j=e([h(\"esri.views.2d.layers.KMLLayerView2D\")],j);const k=j;export{k as default};\n"],"names":["c","esriGeometryPoint","esriGeometryPolyline","esriGeometryPolygon","d","e","o","folders","t","slice","r","Map","n","i","f","a","l","featureCollection","layers","forEach","s","featureSet","features","geometryType","set","layerDefinition","objectIdField","G","groundOverlays","id","networkLinkIds","some","h","parentFolderId","networkLink","P","networkLinks","push","featureInfos","points","get","polylines","polygons","mapImages","type","fullExtent","j","u","sublayers","extent","g","token","query","url","model","refresh","outSR","JSON","stringify","responseType","signal","S","map","read","length","includes","visible","unshift","attributes","async","b","y","m","drawingInfo","renderer","popupInfo","getSymbolAsync","symbol","popupTemplate","p","geometry","xmin","ymin","zmin","xmax","ymax","zmax","spatialReference","constructor","this","_ownsRctx","_rctx","document","createElement","getContext","getExtension","applyProjection","bilinear","bicubic","_program","programCache","acquire","shaders","vertexShader","fragmentShader","useProgram","setUniform1f","setUniform1i","_quad","reprojectTexture","x","texture","descriptor","width","height","D","T","Math","round","E","R","projectedExtent","srcBufferExtent","pixelSize","hasWrapAround","spacing","M","w","pixelFormat","dataType","wrapMode","samplingMode","hasMipmap","A","_","colorTarget","depthStencilTarget","bindFramebuffer","setViewport","bindTexture","bind","setUniform2f","setUniform2fv","size","draw","unbind","dispose","ImageData","readPixels","data","detachColorTexture","imageData","reprojectBitmapData","bitmapData","putImageData","drawImage","getImageData","equals","destroy","C","allSublayers","allPoints","allPolylines","allPolygons","allMapImages","I","super","arguments","_bitmapIndex","_mapImageContainer","V","_kmlVisualData","allVisiblePoints","allVisiblePolylines","allVisiblePolygons","allVisibleMapImages","layer","_pointsView","hitTest","_polylinesView","_polygonsView","flat","filter","Boolean","sourceLayer","graphic","mapPoint","update","processUpdate","attach","_fetchController","AbortController","container","addChild","view","graphics","requestUpdateCallback","requestUpdate","v","featuresTilingScheme","handles","add","on","added","_addMapImage","removed","_removeMapImage","visibleSublayers","visibility","_refreshCollections","updatingHandles","addPromise","_fetchService","_imageReprojector","detach","abort","removeAllChildren","clear","moveStart","viewChange","moveEnd","isUpdating","updating","isWGS84","isWebMercator","loadAndReprojectBitmapData","href","then","immutable","requestRenderOnSourceChangedEnabled","resolution","rotation","viewFormat","viewBoundScale","httpQuery","Error","expand","pixelRatio","max","toString","center","replace","k","path","_loadVisualData","removeAll","addMany","_isSublayerVisible","sublayerId","item","_fetchParsedKML","_getViewDependentUrl","state","refreshInterval","removeChild","delete","prototype"],"sourceRoot":""}