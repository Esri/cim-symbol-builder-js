"use strict";(globalThis.webpackChunkmy_app=globalThis.webpackChunkmy_app||[]).push([[4763],{54763:(e,t,i)=>{i.r(t),i.d(t,{previewCIMSymbol:()=>d});var l=i(17842),n=i(78915),o=i(94304),a=i(31027),r=i(37817),s=i(1682);const h=new o.U(null,!0),c=(0,l.Wz)(r.b_.size),u=(0,l.Wz)(r.b_.maxSize),y=(0,l.Wz)(r.b_.lineWidth);function g(e){const t=e?.size;return"number"==typeof t?{width:t,height:t}:{width:null!=t&&"object"==typeof t&&"width"in t?t.width:null,height:null!=t&&"object"==typeof t&&"height"in t?t.height:null}}async function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{node:i,opacity:r,symbolConfig:d}=t,m="object"==typeof d&&"isSquareFill"in d&&d.isSquareFill,p=t.cimOptions||t,f=p.geometryType||(0,a.JW)(e?.data?.symbol),w=g(t),{feature:b,fieldMap:v}=p;if(null==w.width||null==w.height){const t=await n.E0.resolveSymbolOverrides(e.data,b,null,v,f);if(!t)return null;(e=e.clone()).data={type:"CIMSymbolReference",symbol:t},e.data.primitiveOverrides=null;const i=[];n.B$.fetchResources(t,h.resourceManager,i),i.length>0&&await Promise.all(i);const{width:l,height:o}=n.B$.getEnvelope(t,null,h.resourceManager);w.width="esriGeometryPolygon"===f?c:"esriGeometryPolyline"===f?y:null!=l&&isFinite(l)?Math.min(l,u):c,w.height="esriGeometryPolygon"===f?c:null!=o&&isFinite(o)?Math.max(Math.min(o,u),1):c}const C=await h.rasterizeCIMSymbolAsync(e,b,w,m||"esriGeometryPolygon"!==f?o.C.Preview:o.C.Legend,v,f);if(!C)return null;const{width:M,height:z}=C,S=document.createElement("canvas");S.width=M,S.height=z,S.getContext("2d").putImageData(C,0,0);const F=(0,l.F2)(w.width),P=(0,l.F2)(w.height),k=new Image(F,P);k.src=S.toDataURL(),null!=r&&(k.style.opacity=`${r}`);let I=k;if(null!=t.effectView){const e={shape:{type:"image",x:0,y:0,width:F,height:P,src:k.src},fill:null,stroke:null,offset:[0,0]};I=(0,s.w)([[e]],[F,P],{effectView:t.effectView})}return i&&I&&i.appendChild(I),I}}}]);
//# sourceMappingURL=4763.f87cfe7c.chunk.js.map