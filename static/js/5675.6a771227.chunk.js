"use strict";(globalThis.webpackChunkmy_app=globalThis.webpackChunkmy_app||[]).push([[5675],{34785:(t,e,r)=>{r.d(e,{W:()=>u});var o=r(19545),s=r(76200),a=r(92026),p=r(66978),i=r(64326),n=r(70032),l=r(98995);class u{constructor(t,e,r,o){this._parsedUrl=t,this._portalItem=e,this._apiKey=r,this.signal=o,this._rootDocument=null;const s=this._parsedUrl?.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);s&&(this._urlParts={root:s[1],layerId:parseInt(s[2],10)})}async fetch(){if(!this._urlParts)return null;const t=this._portalItem??await this._portalItemFromServiceItemId();if((0,a.Wi)(t))return this._loadFromUrl();const e=await this._findAndLoadRelatedPortalItem(t);return(0,a.Wi)(e)?null:this._loadFeatureLayerFromPortalItem(e)}async fetchPortalItem(){if(!this._urlParts)return null;const t=this._portalItem??await this._portalItemFromServiceItemId();return(0,a.Wi)(t)?null:this._findAndLoadRelatedPortalItem(t)}async _fetchRootDocument(){if((0,a.pC)(this._rootDocument))return this._rootDocument;if((0,a.Wi)(this._urlParts))return this._rootDocument={},{};const t={query:{f:"json",token:this._apiKey},responseType:"json",signal:this.signal},e=`${this._urlParts.root}/SceneServer`;try{const r=await(0,s.default)(e,t);this._rootDocument=r.data}catch{this._rootDocument={}}return this._rootDocument}async _fetchServiceOwningPortalUrl(){const t=this._parsedUrl?.path,e=t?o.id?.findServerInfo(t):null;if(e?.owningSystemUrl)return e.owningSystemUrl;const r=t?t.replace(/(.*\/rest)\/.*/i,"$1")+"/info":null;try{const t=(await(0,s.default)(r,{query:{f:"json"},responseType:"json",signal:this.signal})).data.owningSystemUrl;if(t)return t}catch(a){(0,p.r9)(a)}return null}async _findAndLoadRelatedPortalItem(t){try{return(await t.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:this.signal})).find((t=>"Feature Service"===t.type))||null}catch(e){return(0,p.r9)(e),null}}async _loadFeatureLayerFromPortalItem(t){await t.load({signal:this.signal});const e=await this._findMatchingAssociatedSublayerUrl(t.url??"");return new i.default({url:e,portalItem:t}).load({signal:this.signal})}async _loadFromUrl(){const t=await this._findMatchingAssociatedSublayerUrl(`${this._urlParts?.root}/FeatureServer`);return new i.default({url:t}).load({signal:this.signal})}async _findMatchingAssociatedSublayerUrl(t){const e=t.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1"),r={query:{f:"json"},responseType:"json",authMode:"no-prompt",signal:this.signal},o=this._urlParts?.layerId,a=this._fetchRootDocument(),p=(0,s.default)(e,r),[i,n]=await Promise.all([p,a]),l=n&&n.layers,u=i.data&&i.data.layers;if(!Array.isArray(u))throw new Error("expected layers array");if(Array.isArray(l)){for(let s=0;s<Math.min(l.length,u.length);s++)if(l[s].id===o)return`${e}/${u[s].id}`}else if(null!=o&&o<u.length)return`${e}/${u[o].id}`;throw new Error("could not find matching associated sublayer")}async _portalItemFromServiceItemId(){const t=(await this._fetchRootDocument()).serviceItemId;if(!t)return null;const e=new l.default({id:t,apiKey:this._apiKey}),r=await this._fetchServiceOwningPortalUrl();(0,a.pC)(r)&&(e.portal=new n.Z({url:r}));try{return e.load({signal:this.signal})}catch(o){return(0,p.r9)(o),null}}}},34207:(t,e,r)=>{r.d(e,{H3:()=>_,QI:()=>c,U4:()=>n,Yh:()=>y});var o=r(27366),s=r(46784),a=r(49861),p=(r(63780),r(25243),r(27135)),i=r(69912);let n=class extends s.wq{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};(0,o._)([(0,a.Cb)({type:Number})],n.prototype,"nodesPerPage",void 0),(0,o._)([(0,a.Cb)({type:Number})],n.prototype,"rootIndex",void 0),(0,o._)([(0,a.Cb)({type:String})],n.prototype,"lodSelectionMetricType",void 0),n=(0,o._)([(0,i.j)("esri.layer.support.I3SNodePageDefinition")],n);let l=class extends s.wq{constructor(){super(...arguments),this.factor=1}};(0,o._)([(0,a.Cb)({type:Number,json:{read:{source:"textureSetDefinitionId"}}})],l.prototype,"id",void 0),(0,o._)([(0,a.Cb)({type:Number})],l.prototype,"factor",void 0),l=(0,o._)([(0,i.j)("esri.layer.support.I3SMaterialTexture")],l);let u=class extends s.wq{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};(0,o._)([(0,a.Cb)({type:[Number]})],u.prototype,"baseColorFactor",void 0),(0,o._)([(0,a.Cb)({type:l})],u.prototype,"baseColorTexture",void 0),(0,o._)([(0,a.Cb)({type:l})],u.prototype,"metallicRoughnessTexture",void 0),(0,o._)([(0,a.Cb)({type:Number})],u.prototype,"metallicFactor",void 0),(0,o._)([(0,a.Cb)({type:Number})],u.prototype,"roughnessFactor",void 0),u=(0,o._)([(0,i.j)("esri.layer.support.I3SMaterialPBRMetallicRoughness")],u);let c=class extends s.wq{constructor(){super(...arguments),this.alphaMode="opaque",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace="none",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};(0,o._)([(0,p.J)({opaque:"opaque",mask:"mask",blend:"blend"})],c.prototype,"alphaMode",void 0),(0,o._)([(0,a.Cb)({type:Number})],c.prototype,"alphaCutoff",void 0),(0,o._)([(0,a.Cb)({type:Boolean})],c.prototype,"doubleSided",void 0),(0,o._)([(0,p.J)({none:"none",back:"back",front:"front"})],c.prototype,"cullFace",void 0),(0,o._)([(0,a.Cb)({type:l})],c.prototype,"normalTexture",void 0),(0,o._)([(0,a.Cb)({type:l})],c.prototype,"occlusionTexture",void 0),(0,o._)([(0,a.Cb)({type:l})],c.prototype,"emissiveTexture",void 0),(0,o._)([(0,a.Cb)({type:[Number]})],c.prototype,"emissiveFactor",void 0),(0,o._)([(0,a.Cb)({type:u})],c.prototype,"pbrMetallicRoughness",void 0),c=(0,o._)([(0,i.j)("esri.layer.support.I3SMaterialDefinition")],c);let d=class extends s.wq{};(0,o._)([(0,a.Cb)({type:String,json:{read:{source:["name","index"],reader:(t,e)=>null!=t?t:`${e.index}`}}})],d.prototype,"name",void 0),(0,o._)([(0,p.J)({jpg:"jpg",png:"png",dds:"dds","ktx-etc2":"ktx-etc2",ktx2:"ktx2",basis:"basis"})],d.prototype,"format",void 0),d=(0,o._)([(0,i.j)("esri.layer.support.I3STextureFormat")],d);let y=class extends s.wq{constructor(){super(...arguments),this.atlas=!1}};(0,o._)([(0,a.Cb)({type:[d]})],y.prototype,"formats",void 0),(0,o._)([(0,a.Cb)({type:Boolean})],y.prototype,"atlas",void 0),y=(0,o._)([(0,i.j)("esri.layer.support.I3STextureSetDefinition")],y);let h=class extends s.wq{};(0,o._)([(0,p.J)({Float32:"Float32",UInt64:"UInt64",UInt32:"UInt32",UInt16:"UInt16",UInt8:"UInt8"})],h.prototype,"type",void 0),(0,o._)([(0,a.Cb)({type:Number})],h.prototype,"component",void 0),h=(0,o._)([(0,i.j)("esri.layer.support.I3SGeometryAttribute")],h);let m=class extends s.wq{};(0,o._)([(0,p.J)({draco:"draco"})],m.prototype,"encoding",void 0),(0,o._)([(0,a.Cb)({type:[String]})],m.prototype,"attributes",void 0),m=(0,o._)([(0,i.j)("esri.layer.support.I3SGeometryCompressedAttributes")],m);let f=class extends s.wq{constructor(){super(...arguments),this.offset=0}};(0,o._)([(0,a.Cb)({type:Number})],f.prototype,"offset",void 0),(0,o._)([(0,a.Cb)({type:h})],f.prototype,"position",void 0),(0,o._)([(0,a.Cb)({type:h})],f.prototype,"normal",void 0),(0,o._)([(0,a.Cb)({type:h})],f.prototype,"uv0",void 0),(0,o._)([(0,a.Cb)({type:h})],f.prototype,"color",void 0),(0,o._)([(0,a.Cb)({type:h})],f.prototype,"uvRegion",void 0),(0,o._)([(0,a.Cb)({type:h})],f.prototype,"featureId",void 0),(0,o._)([(0,a.Cb)({type:h})],f.prototype,"faceRange",void 0),(0,o._)([(0,a.Cb)({type:m})],f.prototype,"compressedAttributes",void 0),f=(0,o._)([(0,i.j)("esri.layer.support.I3SGeometryBuffer")],f);let _=class extends s.wq{};(0,o._)([(0,p.J)({triangle:"triangle"})],_.prototype,"topology",void 0),(0,o._)([(0,a.Cb)()],_.prototype,"geometryBuffers",void 0),_=(0,o._)([(0,i.j)("esri.layer.support.I3SGeometryDefinition")],_)},96978:(t,e,r)=>{r.d(e,{C:()=>o});const o={analytics:{supportsCacheHint:!1},attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1,supportsCacheHint:!1,supportsResize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsCompactGeometry:!1,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsStatistics:!1,tileMaxRecordCount:0}}},55664:(t,e,r)=>{r.d(e,{xe:()=>b});var o=r(76200),s=(r(63780),r(10064),r(93169),r(66978)),a=r(18722),p=(r(22753),r(11873)),i=(r(14226),r(81949)),n=(r(48976),r(4582)),l=r(98131),u=(r(11186),r(71353)),c=(r(52587),r(92183),r(78952),r(65156)),d=(r(92975),r(86638),r(50951),r(28278));r(51995);var y,h=r(67077);function m(t){return{...f,...t,type:"solid"}}!function(t){t[t.INVISIBLE=0]="INVISIBLE",t[t.TRANSPARENT=1]="TRANSPARENT",t[t.OPAQUE=2]="OPAQUE"}(y||(y={}));const f={color:(0,h.f)(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:y.OPAQUE,hasSlicePlane:!1};(0,h.f)(0,0,0,.2),y.OPAQUE;r(49420);var _=r(8229);r(90045),r(41414),r(76146);(0,l.a)(),(0,u.c)(),(0,u.c)(),(0,h.c)(),(0,p.c)();function I(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[-1,-1,-1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0,1];return{center:(0,u.a)(t),halfSize:(0,_.b)(e),quaternion:(0,n.b)(r)}}(()=>{const t=new Int8Array(162);let e=0;const r=r=>{for(let o=0;o<r.length;o++)t[e+o]=r[o];e+=6};r([6,2,3,1,5,4]),r([0,2,3,1,5,4]),r([0,2,3,7,5,4]),r([0,1,3,2,6,4]),r([0,1,3,2,0,0]),r([0,1,5,7,3,2]),r([0,1,3,7,6,4]),r([0,1,3,7,6,2]),r([0,1,5,7,6,2]),r([0,1,5,4,6,2]),r([0,1,5,4,0,0]),r([0,1,3,7,5,4]),r([0,2,6,4,0,0]),r([0,0,0,0,0,0]),r([1,3,7,5,0,0]),r([2,3,7,6,4,0]),r([2,3,7,6,0,0]),r([2,3,1,5,7,6]),r([0,1,5,7,6,2]),r([0,1,5,7,6,4]),r([0,1,3,7,6,4]),r([4,5,7,6,2,0]),r([4,5,7,6,0,0]),r([4,5,1,3,7,6]),r([0,2,3,7,5,4]),r([6,2,3,7,5,4]),r([6,2,3,1,5,4])})();(0,c.Ue)();var g;function b(t,e,r,a,p){const i=[];for(const o of e)if(o&&p.includes(o.name)){const e=`${t}/nodes/${r}/attributes/${o.key}/0`;i.push({url:e,storageInfo:o})}return(0,s.as)(i.map((t=>(0,o.default)(t.url,{responseType:"array-buffer"}).then((e=>(0,d.qM)(t.storageInfo,e.data)))))).then((t=>{const e=[];for(const r of a){const o={};for(let e=0;e<t.length;e++)null!=t[e].value&&(o[i[e].storageInfo.name]=S(t[e].value,r));e.push(o)}return e}))}!function(t){t[t.OUTSIDE=0]="OUTSIDE",t[t.INTERSECTS_CENTER_OUTSIDE=1]="INTERSECTS_CENTER_OUTSIDE",t[t.INTERSECTS_CENTER_INSIDE=2]="INTERSECTS_CENTER_INSIDE",t[t.INSIDE=3]="INSIDE"}(g||(g={}));function S(t,e){if(!t)return null;const r=t[e];return(0,a.z3)(t)?-32768===r?null:r:(0,a.Hx)(t)?-2147483648===r?null:r:r!=r?null:r}m({color:[0,0,0,0],opacity:0});(0,u.c)(),(0,u.c)(),(0,u.c)(),(0,l.a)();new Float64Array(24),(0,u.c)(),(0,u.c)(),(0,p.c)();(0,i.c)(),(0,n.c)(),(0,c.Ue)(),(0,c.Ue)(),I(),new Array(72),(0,i.c)()},49420:(t,e,r)=>{r.d(e,{a9:()=>o});var o;r(16889);!function(t){t[t.Multiply=1]="Multiply",t[t.Ignore=2]="Ignore",t[t.Replace=3]="Replace",t[t.Tint=4]="Tint"}(o||(o={}))},24405:(t,e,r)=>{r.d(e,{V:()=>p,e:()=>a});var o=r(92026),s=r(80031);async function a(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.popupTemplate;if((0,o.Wi)(e))return[];const r=await e.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:a}=e,{objectIdField:p,typeIdField:i,globalIdField:n,relationships:l}=t;if(r.includes("*"))return["*"];const u=a?await(0,s.CH)(t):[],c=(0,s.Q0)(t.fieldsIndex,[...r,...u]);return i&&c.push(i),c&&p&&t.fieldsIndex.has(p)&&!c.includes(p)&&c.push(p),c&&n&&t.fieldsIndex.has(n)&&!c.includes(n)&&c.push(n),l&&l.forEach((e=>{const{keyField:r}=e;c&&r&&t.fieldsIndex.has(r)&&!c.includes(r)&&c.push(r)})),c}function p(t,e){return t.popupTemplate?t.popupTemplate:(0,o.pC)(e)&&e.defaultPopupTemplateEnabled&&(0,o.pC)(t.defaultPopupTemplate)?t.defaultPopupTemplate:null}}}]);
//# sourceMappingURL=5675.6a771227.chunk.js.map