"use strict";(globalThis.webpackChunkmy_app=globalThis.webpackChunkmy_app||[]).push([[2105],{52105:(e,t,a)=>{a.r(t),a.d(t,{getContrastingBackgroundTheme:()=>z,getRenderSymbolParameters:()=>k,previewSymbol2D:()=>x});var n=a(51995),l=a(10064),s=a(17842),i=a(79563),o=a(37817),c=a(1682);function r(e){let{r:t,g:a,b:l,a:s}=e;return s<1&&(t=Math.round(s*t+255*(1-s)),a=Math.round(s*a+255*(1-s)),l=Math.round(s*l+255*(1-s))),new n.Z({r:t,g:a,b:l})}function u(e){const{r:t,g:a,b:n}=r(e);return.2126*t+.7152*a+.0722*n}const m="picture-fill",h=o.b_.size,p=o.b_.maxSize,d=o.b_.maxOutlineSize,f=o.b_.lineWidth,y=225,g=document.createElement("canvas");function b(e,t){const a=g.getContext("2d"),n=[];return t&&(t.weight&&n.push(t.weight),t.size&&n.push(t.size+"px"),t.family&&n.push(t.family)),a.font=n.join(" "),a.measureText(e).width}function w(e){if(0===e.length)return 0;if(e.length>2){const t=(0,s.Wz)(1),a=parseFloat(e);switch(e.slice(-2)){case"px":return a;case"pt":return a*t;case"in":return 72*a*t;case"pc":return 12*a*t;case"mm":return 2.8346456692913384*a*t;case"cm":return 28.346456692913385*a*t}}return parseFloat(e)}function v(e){const t=e?.size;return{width:null!=t&&"object"==typeof t&&"width"in t?(0,s.F2)(t.width):null,height:null!=t&&"object"==typeof t&&"height"in t?(0,s.F2)(t.height):null}}function M(e,t){return e>t?"dark":"light"}function k(e,t){const a="number"==typeof t?.size?t?.size:null,n=null!=a?(0,s.F2)(a):null,l=null!=t?.maxSize?(0,s.F2)(t.maxSize):null,c=null!=t?.rotation?t.rotation:"angle"in e?e.angle:null,r=(0,i._M)(e);let u=(0,i.mx)(e);"dark"!==z(e,245)||t?.ignoreWhiteSymbols||(u={width:.75,...u,color:"#bdc3c7"});const y={shape:null,fill:r,stroke:u,offset:[0,0]};u?.width&&(u.width=Math.min(u.width,d));const g=u?.width||0;let M=null!=t?.size&&(null==t?.scale||t?.scale),k=0,x=0,L=!1;switch(e.type){case"simple-marker":{const t=e.style,a=Math.min(null!=n?n:(0,s.F2)(e.size),l||p);switch(k=a,x=a,t){case"circle":y.shape={type:"circle",cx:0,cy:0,r:.5*a},M||(k+=g,x+=g);break;case"cross":y.shape={type:"path",path:[{command:"M",values:[0,.5*x]},{command:"L",values:[k,.5*x]},{command:"M",values:[.5*k,0]},{command:"L",values:[.5*k,x]}]};break;case"diamond":y.shape={type:"path",path:[{command:"M",values:[0,.5*x]},{command:"L",values:[.5*k,0]},{command:"L",values:[k,.5*x]},{command:"L",values:[.5*k,x]},{command:"Z",values:[]}]},M||(k+=g,x+=g);break;case"square":y.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[k,0]},{command:"L",values:[k,x]},{command:"L",values:[0,x]},{command:"Z",values:[]}]},M||(k+=g,x+=g),c&&(L=!0);break;case"triangle":y.shape={type:"path",path:[{command:"M",values:[.5*k,0]},{command:"L",values:[k,x]},{command:"L",values:[0,x]},{command:"Z",values:[]}]},M||(k+=g,x+=g),c&&(L=!0);break;case"x":y.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[k,x]},{command:"M",values:[k,0]},{command:"L",values:[0,x]}]},c&&(L=!0);break;case"path":y.shape={type:"path",path:e.path||""},M||(k+=g,x+=g),c&&(L=!0),M=!0}break}case"simple-line":{const{width:e,height:a}=v(t),s=null!=a?a:Math.min(null!=n?n:g,l||d),i=null!=e?e:f;u.width=s,k=i,x=s;const o=y?.stroke?.cap||"butt",c="round"===o;M=!0,y.stroke.cap="butt"===o?"square":o,y.shape={type:"path",path:[{command:"M",values:[c?s/2:0,x/2]},{command:"L",values:[c?k-s/2:k,x/2]}]};break}case m:case"simple-fill":{const e="object"==typeof t?.symbolConfig&&t?.symbolConfig.isSquareFill,{width:a,height:l}=v(t);k=e&&null!=a?a:null!=n?n:h,x=e&&null!=l?l:k,M||(k+=g,x+=g),M=!0,y.shape=e?{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[k,0]},{command:"L",values:[k,x]},{command:"L",values:[0,x]},{command:"L",values:[0,0]},{command:"Z",values:[]}]}:o.JZ.fill[0];break}case"picture-marker":{let t=(0,s.F2)(e.width),a=(0,s.F2)(e.height);const i=null!=n?n:Math.max(t,a),o=t/a;t=o<=1?Math.ceil(i*o):i,a=o<=1?i:Math.ceil(i/o),k=Math.min(t,l||p),x=Math.min(a,l||p),y.shape={type:"image",x:-Math.round(k/2),y:-Math.round(x/2),width:k,height:x,src:e.url||""},c&&(L=!0);break}case"text":{const t=e,a=t.text||"Aa",i=t.font,o=Math.min(null!=n?n:(0,s.F2)(i.size),l||p),c=b(a,{weight:i.weight,size:o,family:i.family}),r=/[\uE600-\uE6FF]/.test(a);k=r?o:c,x=o;let u=.25*w((i?o:0).toString());r&&(u+=5),y.shape={type:"text",text:a,x:t.xoffset||0,y:t.yoffset||u,align:"middle",alignBaseline:t.verticalAlignment,decoration:i&&i.decoration,rotated:t.rotated,kerning:t.kerning},y.font=i&&{size:o,style:i.style,decoration:i.decoration,weight:i.weight,family:i.family};break}}return{shapeDescriptor:y,size:[k,x],renderOptions:{node:t?.node,scale:M,opacity:t?.opacity,rotation:c,useRotationSize:L,effectView:t?.effectView}}}async function x(e,t){const{shapeDescriptor:a,size:n,renderOptions:s}=k(e,t);if(!a.shape)throw new l.Z("symbolPreview: renderPreviewHTML2D","symbol not supported.");await async function(e,t){const a=t.fill,n=e.color;if("pattern"===a?.type&&n&&e.type!==m){const e=await(0,i.Od)(a.src,n.toCss(!0));a.src=e,t.fill=a}}(e,a);const r=[[a]];if("object"==typeof t?.symbolConfig&&t?.symbolConfig.applyColorModulation){const e=.6*n[0];r.unshift([{...a,offset:[-e,0],fill:(0,o.dc)(a.fill,-.3)}]),r.push([{...a,offset:[e,0],fill:(0,o.dc)(a.fill,.3)}]),n[0]+=2*e,s.scale=!1}return(0,c.w)(r,n,s)}function z(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y;const a=(0,i._M)(e),l=(0,i.mx)(e),s=!a||"type"in a?null:new n.Z(a),o=l?.color?new n.Z(l?.color):null,c=s?M(u(s),t):null,r=o?M(u(o),t):null;return r?c?c===r?c:t>=y?"light":"dark":r:c}}}]);
//# sourceMappingURL=2105.849efaa1.chunk.js.map