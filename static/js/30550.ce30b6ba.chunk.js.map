{"version":3,"file":"static/js/30550.ce30b6ba.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/arcade.js","../node_modules/@arcgis/core/arcade/ImmutableArray.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport e from\"./Graphic.js\";import{ArcadeDate as t}from\"./arcade/ArcadeDate.js\";import r from\"./arcade/ImmutableArray.js\";import\"./core/has.js\";import{deprecated as a}from\"./core/deprecate.js\";import n from\"./core/Error.js\";import{clone as o}from\"./core/lang.js\";import c from\"./core/Logger.js\";import{DateOnly as s}from\"./core/sql/DateOnly.js\";import{TimeOnly as i}from\"./core/sql/TimeOnly.js\";import p from\"./layers/FeatureLayer.js\";import u from\"./portal/Portal.js\";import l from\"./rest/support/FeatureSet.js\";import{loadArcade as m}from\"./support/loadArcade.js\";let y=null;function f(e,t,a,n={}){const o=t.elementType,c=\"value\",s=\"array\"===o.type?[{name:c,type:o.type,elementType:o.elementType}]:\"dictionary\"===o.type?[{name:c,type:o.type,properties:o.properties}]:[{name:c,type:o.type}];return new r(e.map((e=>{const t={};return g(t,s,{[c]:e},a,n),t[c]})))}function d(e,t,r={}){const a=e instanceof l?new p({source:e.features,geometryType:e.geometryType,fields:e.fields,spatialReference:e.spatialReference}):e;return t.constructFeatureSet(a,r.spatialReference,null,!0,r.lruCache,r.interceptor)}function b(e,t,r={}){const{spatialReference:a,interceptor:n,lruCache:o}=r;return\"string\"==typeof e?t.createFeatureSetCollectionFromService(e,a,o,n):t.createFeatureSetCollectionFromMap(e,a,o,n)}function v(e,t,r,a={}){const n=Object.create(null);return g(n,t.properties,e,r,a),new y.Dictionary(n)}function g(e,r,a,n,o={}){const c={};for(const t of Object.keys(a))c[t.toLowerCase()]=a[t];for(const p of r){const r=p.name.toLowerCase();if(o.variablesPreProcessed)e[r]=c[r];else switch(p.type){case\"array\":{const t=c[r];e[r]=null==t?null:f(t,p,n,o);break}case\"feature\":{const t=c[r];e[r]=null==t?null:y.Feature.createFromGraphic(t,o?.timeZone);break}case\"featureSet\":{const t=c[r];e[r]=null==t?null:n?d(t,n,o):null;break}case\"featureSetCollection\":{const t=c[r];e[r]=null==t?null:n?b(t,n,o):null;break}case\"dictionary\":{const t=c[r];e[r]=null==t?null:v(t,p,n,o);break}case\"date\":{const a=c[r];e[r]=a?a instanceof t?a:o?.timeZone?t.dateJSAndZoneToArcadeDate(a,o?.timeZone):t.dateJSToArcadeDate(a):null;break}case\"dateOnly\":{const t=c[r];e[r]=t?t instanceof s?t:s.fromReader(t):null;break}case\"time\":{const t=c[r];e[r]=t?t instanceof i?t:i.fromReader(t):null;break}case\"knowledgeGraph\":case\"geometry\":case\"boolean\":case\"text\":case\"number\":e[r]=c[r];break;case\"voxel\":{const t=c[r];e[r]=null==t?null:new y.Voxel(t,o?.timeZone);break}}}}function w(e,t){for(const r of e)t.push(r),\"dictionary\"===r.type&&w(r.properties,t);return t}function S(e,t,r,a,n){const{spatialReference:o,interceptor:c,lruCache:s,console:i,abortSignal:p,timeZone:l,services:m={portal:u.getDefault()}}=r,y={vars:{},spatialReference:o,interceptor:c,timeZone:l,lrucache:s,useAsync:n,services:m,console:i,abortSignal:p};return t?(g(y.vars,e.variables,t,a,r),y):y}function h(t,r){switch(r.getArcadeType(t)){case\"number\":case\"text\":case\"boolean\":case\"point\":case\"polygon\":case\"polyline\":case\"multipoint\":case\"extent\":return t;case\"date\":return t.toJSDate();case\"time\":case\"dateOnly\":return t.toString();case\"feature\":{const r=(t.type,t),a=\"geometry\"in r?r.geometry():null,n=\"readAttributes\"in r?r.readAttributes():r.attributes;return new e({geometry:a,attributes:n})}case\"dictionary\":{const e=t,a=e.attributes,n={};for(const t of Object.keys(a))n[t]=h(e.field(t),r);return n}case\"array\":return(\"toArray\"in t?t.toArray():t).map((e=>h(e,r)))}return t}const $={variables:[{name:\"$feature\",type:\"feature\"},{name:\"$layer\",type:\"featureSet\"},{name:\"$datastore\",type:\"featureSetCollection\"},{name:\"$map\",type:\"featureSetCollection\"},{name:\"$userInput\",type:\"geometry\"},{name:\"$graph\",type:\"knowledgeGraph\"},{name:\"$view\",type:\"dictionary\",properties:[{name:\"scale\",type:\"number\"},{name:\"timeProperties\",type:\"dictionary\",properties:[{name:\"currentStart\",type:\"date\"},{name:\"currentEnd\",type:\"date\"},{name:\"startIncluded\",type:\"boolean\"},{name:\"endIncluded\",type:\"boolean\"}]}]}]},x={variables:[{name:\"$feature\",type:\"feature\"},{name:\"$aggregatedFeatures\",type:\"featureSet\"},{name:\"$view\",type:\"dictionary\",properties:[{name:\"scale\",type:\"number\"},{name:\"timeProperties\",type:\"dictionary\",properties:[{name:\"currentStart\",type:\"date\"},{name:\"currentEnd\",type:\"date\"},{name:\"startIncluded\",type:\"boolean\"},{name:\"endIncluded\",type:\"boolean\"}]}]}]},C={variables:[{name:\"$voxel\",type:\"voxel\"}]},j=new Map([[\"aggregate-field\",{variables:[{name:\"$feature\",type:\"feature\"}]}],[\"form-constraint\",{variables:[{name:\"$feature\",type:\"feature\"}]}],[\"feature-z\",{variables:[{name:\"$feature\",type:\"feature\"}]}],[\"field-calculation\",{variables:[{name:\"$feature\",type:\"feature\"},{name:\"$datastore\",type:\"featureSetCollection\"}]}],[\"form-calculation\",{variables:[{name:\"$feature\",type:\"feature\"},{name:\"$originalFeature\",type:\"feature\"},{name:\"$layer\",type:\"featureSet\"},{name:\"$featureSet\",type:\"featureSet\"},{name:\"$datastore\",type:\"featureSetCollection\"},{name:\"$map\",type:\"featureSetCollection\"},{name:\"$editContext\",type:\"dictionary\",properties:[{name:\"editType\",type:\"text\"}]}]}],[\"labeling\",{variables:[{name:\"$feature\",type:\"feature\"},{name:\"$view\",type:\"dictionary\",properties:[{name:\"scale\",type:\"number\"},{name:\"timeProperties\",type:\"dictionary\",properties:[{name:\"currentStart\",type:\"date\"},{name:\"currentEnd\",type:\"date\"},{name:\"startIncluded\",type:\"boolean\"},{name:\"endIncluded\",type:\"boolean\"}]}]}]}],[\"popup\",$],[\"popup-element\",$],[\"popup-feature-reduction\",x],[\"popup-element-feature-reduction\",x],[\"visualization\",{variables:[{name:\"$feature\",type:\"feature\"},{name:\"$view\",type:\"dictionary\",properties:[{name:\"scale\",type:\"number\"},{name:\"timeProperties\",type:\"dictionary\",properties:[{name:\"currentStart\",type:\"date\"},{name:\"currentEnd\",type:\"date\"},{name:\"startIncluded\",type:\"boolean\"},{name:\"endIncluded\",type:\"boolean\"}]}]}]}],[\"popup-voxel\",C],[\"popup-element-voxel\",C]]);function A(e){\"feature-reduction-popup\"===e?(a(c.getLogger(\"esri.arcade\"),'profile name: \"feature-reduction-popup\"',{replacement:'\"popup-feature-reduction\"',version:\"4.32\",warnOnce:!0}),e=\"popup-feature-reduction\"):\"feature-reduction-popup-element\"===e&&(a(c.getLogger(\"esri.arcade\"),'profile name: \"feature-reduction-popup-element\"',{replacement:'\"popup-element-feature-reduction\"',version:\"4.32\",warnOnce:!0}),e=\"popup-element-feature-reduction\");const t=j.get(e);if(!t){const t=Array.from(j.keys()).map((e=>`'${e}'`)).join(\", \");throw new n(\"createArcadeProfile:invalid-profile-name\",`Invalid profile name '${e}'. You must specify one of the following values: ${t}`)}return o(t)}async function k(e,t,r={}){y||(y=await m());const{arcade:a,arcadeUtils:o,batchExec:{createBatchExecutor:c},aiServices:{BatchTranslationServiceFactory:s,PortalTranslationService:i}}=y,{loadScriptDependencies:p,referencesMember:l,scriptIsAsync:f}=a,d=w(t.variables,[]),b=d.filter((e=>\"featureSet\"===e.type||\"featureSetCollection\"===e.type)).map((e=>e.name.toLowerCase())),v=a.parseScript(e,b);if(!v)throw new n(\"arcade:invalid-script\",\"Unable to create SyntaxTree\");const g=o.extractFieldNames(v),$=a.scriptTouchesGeometry(v),x=d.map((e=>e.name.toLowerCase())).filter((e=>l(v,e))),C=f(v,b);await p(v,C,b);const j={vars:{},useAsync:C};for(const n of x)j.vars[n]=\"any\";const{lruCache:A,services:k}=r,T=a.compileScript(v,j),F=a.featureSetUtils(),I=(e,r={})=>{if(C)throw new n(\"arcade:invalid-execution-mode\",\"Cannot execute the script in synchronous mode\");const a={...k,...r.services},c={lruCache:A,...r,services:a},s=T(S(t,e,c,F,C));return r.rawOutput?s:h(s,o)},O=async(e,r={})=>{const a={...k,...r.services},n={lruCache:A,...r,services:a},c=await T(S(t,e,n,F,C));return r.rawOutput?c:h(c,o)},D=async(e,r,a={})=>{const n=[],p=c(e,(async(e,c)=>{const s=r(e);try{const e={...l,translation:m.create(c)},r={lruCache:A,...a,services:e},i=await T(S(t,s,r,F,C)),p=a.rawOutput?i:h(i,o);n.push({id:c.id,result:{status:\"fulfilled\",value:p}})}catch(i){throw n.push({id:c.id,result:{status:\"rejected\",reason:i}}),i}}),a.maxConcurrency??64,a.abortSignal),l={...k,...a.services},m=new s(p,l.translation??new i(l.portal??u.getDefault(),a.console));return await p.run(),n.sort((({id:e},{id:t})=>e-t)).map((({result:e})=>e))};return{execute:I,executeAsync:O,executeAsyncBatch:D,isAsync:C,variablesUsed:x,fieldsUsed:g,geometryUsed:$,syntaxTree:v}}export{k as createArcadeExecutor,A as createArcadeProfile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nclass t{constructor(t=[]){this._elements=t}length(){return this._elements.length}get(t){return this._elements[t]}toArray(){return this.slice()}slice(t=0,e=this.length()){const s=[];for(let r=t;r<e;r++)s.push(this.get(r));return s}}export{t as default};\n"],"names":["y","f","e","t","a","n","o","elementType","c","s","type","name","properties","r","map","g","d","l","p","source","features","geometryType","fields","spatialReference","constructFeatureSet","lruCache","interceptor","b","createFeatureSetCollectionFromService","createFeatureSetCollectionFromMap","v","Object","create","Dictionary","keys","toLowerCase","variablesPreProcessed","Feature","createFromGraphic","timeZone","dateJSAndZoneToArcadeDate","dateJSToArcadeDate","fromReader","i","Voxel","w","push","S","console","abortSignal","services","m","portal","u","getDefault","vars","lrucache","useAsync","variables","h","getArcadeType","toJSDate","toString","geometry","readAttributes","attributes","field","toArray","$","x","C","j","Map","A","getLogger","replacement","version","warnOnce","get","Array","from","join","async","k","arcade","arcadeUtils","batchExec","createBatchExecutor","aiServices","BatchTranslationServiceFactory","PortalTranslationService","loadScriptDependencies","referencesMember","scriptIsAsync","filter","parseScript","extractFieldNames","scriptTouchesGeometry","T","compileScript","F","featureSetUtils","execute","I","rawOutput","executeAsync","executeAsyncBatch","translation","id","result","status","value","reason","maxConcurrency","run","sort","isAsync","variablesUsed","fieldsUsed","geometryUsed","syntaxTree","constructor","this","_elements","length","slice"],"sourceRoot":""}