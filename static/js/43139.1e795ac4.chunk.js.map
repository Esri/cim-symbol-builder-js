{"version":3,"file":"static/js/43139.1e795ac4.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/support/LayerLoadContext.js","../node_modules/@arcgis/core/layers/support/associatedFeatureServiceUtils.js","../node_modules/@arcgis/core/layers/support/lazyLayerLoader.js","../node_modules/@arcgis/core/portal/support/loadUtils.js","../node_modules/@arcgis/core/portal/support/portalLayers.js","../node_modules/@arcgis/core/support/requestPresets.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{fetchArcGISServiceJSON as t}from\"../../support/requestPresets.js\";class e{constructor(){this._serviceMetadatas=new Map}async fetchServiceMetadata(e,s){const a=this._serviceMetadatas.get(e);if(a)return a;const r=await t(e,s);return this._serviceMetadatas.set(e,r),r}}export{e as LayerLoadContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{id as r}from\"../../kernel.js\";import e from\"../../request.js\";import n from\"../../core/Error.js\";import{throwIfAbortError as t}from\"../../core/promiseUtils.js\";import{parse as o}from\"./arcgisLayerUrl.js\";import a from\"../../portal/Portal.js\";import i from\"../../portal/PortalItem.js\";async function l(r,e){const t=o(r);if(!t)throw new n(\"invalid-url\",\"Invalid scene service url\");const a={...e,sceneServerUrl:t.url.path,layerId:t.sublayer??void 0};if(a.sceneLayerItem??=await s(a),null==a.sceneLayerItem)return f(a.sceneServerUrl.replace(\"/SceneServer\",\"/FeatureServer\"),a);const i=await y(a);if(!i?.url)throw new n(\"related-service-not-found\",\"Could not find feature service through portal item relationship\");const l=await f(i.url,a);return l.portalItem=i,l}async function s(r){const e=(await c(r)).serviceItemId;if(!e)return null;const n=new i({id:e,apiKey:r.apiKey}),o=await u(r);null!=o&&(n.portal=new a({url:o}));try{return n.load({signal:r.signal})}catch(l){return t(l),null}}async function c(r){if(r.rootDocument)return r.rootDocument;const n={query:{f:\"json\",token:r.apiKey},responseType:\"json\",signal:r.signal};try{const t=await e(r.sceneServerUrl,n);r.rootDocument=t.data}catch{r.rootDocument={}}return r.rootDocument}async function u(n){const o=r?.findServerInfo(n.sceneServerUrl);if(o?.owningSystemUrl)return o.owningSystemUrl;const a=n.sceneServerUrl.replace(/(.*\\/rest)\\/.*/i,\"$1\")+\"/info\";try{const r=(await e(a,{query:{f:\"json\"},responseType:\"json\",signal:n.signal})).data.owningSystemUrl;if(r)return r}catch(i){t(i)}return null}async function f(r,t){const a=o(r);if(!a)throw new n(\"invalid-feature-service-url\",\"Invalid feature service url\");const i=a.url.path,l=t.layerId;if(null==l)return{serverUrl:i};const s=c(t),u=r=>{const n={query:{f:\"json\"},responseType:\"json\",authMode:r,signal:t.signal};return e(i,n)},f=u(\"anonymous\").catch((()=>u(\"no-prompt\"))),[y,m]=await Promise.all([f,s]),p=m?.layers,d=y.data&&y.data.layers;if(!Array.isArray(d))throw new Error(\"expected layers array\");if(Array.isArray(p))for(let e=0;e<Math.min(p.length,d.length);e++){if(p[e].id===l)return{serverUrl:i,layerId:d[e].id}}else if(null!=l&&l<d.length)return{serverUrl:i,layerId:d[l].id};throw new Error(\"could not find matching associated sublayer\")}async function y({sceneLayerItem:r,signal:e}){if(!r)return null;try{const n=(await r.fetchRelatedItems({relationshipType:\"Service2Service\",direction:\"reverse\"},{signal:e})).find((r=>\"Feature Service\"===r.type))||null;if(!n)return null;const t=new i({portal:n.portal,id:n.id});return await t.load(),t}catch(n){return t(n),null}}export{l as findAssociatedFeatureService};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nconst a={BingMapsLayer:async()=>(await import(\"../BingMapsLayer.js\")).default,BuildingSceneLayer:async()=>(await import(\"../BuildingSceneLayer.js\")).default,CSVLayer:async()=>(await import(\"../CSVLayer.js\")).default,DimensionLayer:async()=>(await import(\"../DimensionLayer.js\")).default,ElevationLayer:async()=>(await import(\"../ElevationLayer.js\")).default,FeatureLayer:async()=>(await import(\"../FeatureLayer.js\")).default,GeoJSONLayer:async()=>(await import(\"../GeoJSONLayer.js\")).default,GeoRSSLayer:async()=>(await import(\"../GeoRSSLayer.js\")).default,GroupLayer:async()=>(await import(\"../GroupLayer.js\")).default,ImageryLayer:async()=>(await import(\"../ImageryLayer.js\")).default,ImageryTileLayer:async()=>(await import(\"../ImageryTileLayer.js\")).default,IntegratedMeshLayer:async()=>(await import(\"../IntegratedMeshLayer.js\")).default,KMLLayer:async()=>(await import(\"../KMLLayer.js\")).default,LineOfSightLayer:async()=>(await import(\"../LineOfSightLayer.js\")).default,LinkChartLayer:async()=>(await import(\"../LinkChartLayer.js\")).default,MapImageLayer:async()=>(await import(\"../MapImageLayer.js\")).default,MapNotesLayer:async()=>(await import(\"../MapNotesLayer.js\")).default,MediaLayer:async()=>(await import(\"../MediaLayer.js\")).default,OGCFeatureLayer:async()=>(await import(\"../OGCFeatureLayer.js\")).default,OpenStreetMapLayer:async()=>(await import(\"../OpenStreetMapLayer.js\")).default,OrientedImageryLayer:async()=>(await import(\"../OrientedImageryLayer.js\")).default,PointCloudLayer:async()=>(await import(\"../PointCloudLayer.js\")).default,RouteLayer:async()=>(await import(\"../RouteLayer.js\")).default,SceneLayer:async()=>(await import(\"../SceneLayer.js\")).default,StreamLayer:async()=>(await import(\"../StreamLayer.js\")).default,SubtypeGroupLayer:async()=>(await import(\"../SubtypeGroupLayer.js\")).default,TileLayer:async()=>(await import(\"../TileLayer.js\")).default,UnknownLayer:async()=>(await import(\"../UnknownLayer.js\")).default,UnsupportedLayer:async()=>(await import(\"../UnsupportedLayer.js\")).default,VectorTileLayer:async()=>(await import(\"../VectorTileLayer.js\")).default,VoxelLayer:async()=>(await import(\"../VoxelLayer.js\")).default,WFSLayer:async()=>(await import(\"../WFSLayer.js\")).default,WMSLayer:async()=>(await import(\"../WMSLayer.js\")).default,WMTSLayer:async()=>(await import(\"../WMTSLayer.js\")).default,WebTileLayer:async()=>(await import(\"../WebTileLayer.js\")).default};export{a as layerLookupMap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{findAssociatedFeatureService as e}from\"../../layers/support/associatedFeatureServiceUtils.js\";function t(e){const t={id:e.id,name:e.name};return\"Oriented Imagery Layer\"===e.type&&(t.layerType=\"OrientedImageryLayer\"),t}async function a(e,a,r){if(null==e?.layers||null==e?.tables){const l=await r.fetchServiceMetadata(a);(e=e||{}).layers=e.layers||l?.layers?.map(t),e.tables=e.tables||l?.tables?.map(t)}return e}function r(e){const t=e.layers;if(t?.length)return t[0].id;const a=e.tables;return a?.length?a[0].id:null}function l(e){return(e?.layers?.length??0)+(e?.tables?.length??0)}function n(e){const t=[];return e?.layers?.forEach((e=>{\"SubtypeGroupLayer\"===e.layerType&&t.push(e.id)})),t}function s(e){return e?.layers?.filter((({layerType:e})=>\"OrientedImageryLayer\"===e)).map((({id:e})=>e))}async function i(a,r,l){if(!a?.url)return r??{};if(r??={},!r.layers){const e=await l.fetchServiceMetadata(a.url);r.layers=e.layers?.map(t)}const{serverUrl:n,portalItem:s}=await e(a.url,{sceneLayerItem:a}).catch((()=>({serverUrl:null,portalItem:null})));if(null==n)return r.tables=[],r;if(!r.tables&&s){const e=await s.fetchData();if(e?.tables)r.tables=e.tables.map(t);else{const e=await l.fetchServiceMetadata(n);r.tables=e?.tables?.map(t)}}if(r.tables)for(const e of r.tables)e.url=`${n}/${e.id}`;return r}export{t as createSublayerData,r as getFirstLayerOrTableId,l as getNumLayersAndTables,s as getOrientedImageryLayerIds,n as getSubtypeGroupLayerIds,i as populateSceneServiceItemData,a as preprocessFSItemData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{findAssociatedFeatureService as a}from\"../../layers/support/associatedFeatureServiceUtils.js\";import{LayerLoadContext as r}from\"../../layers/support/LayerLoadContext.js\";import{sceneServiceLayerTypeToClassName as t}from\"../../layers/support/layerUtils.js\";import{layerLookupMap as n}from\"../../layers/support/lazyLayerLoader.js\";import s from\"../PortalItem.js\";import{getNumLayersAndTables as c,preprocessFSItemData as o,getSubtypeGroupLayerIds as i,getOrientedImageryLayerIds as u,populateSceneServiceItemData as l,getFirstLayerOrTableId as y}from\"./loadUtils.js\";import{hasTypeKeyword as m}from\"./portalItemUtils.js\";async function p(e){!e.portalItem||e.portalItem instanceof s||(e={...e,portalItem:new s(e.portalItem)});const a=await f(e.portalItem);return new(0,a.constructor)({portalItem:e.portalItem,...a.properties})}async function f(e){await e.load();const a=new r;return d(await L(e,a))}async function L(a,r){switch(a.type){case\"Map Service\":return w(a,r);case\"Feature Service\":return S(a,r);case\"Feature Collection\":return I(a);case\"Scene Service\":return N(a,r);case\"Image Service\":return v(a,r);case\"Stream Service\":return M();case\"Vector Tile Service\":return h();case\"GeoJson\":return T();case\"CSV\":return g();case\"KML\":return j();case\"WFS\":return F();case\"WMTS\":return b();case\"WMS\":return G();case\"Feed\":return C();case\"Group Layer\":return U();default:throw new e(\"portal:unknown-item-type\",\"Unknown item type '${type}'\",{type:a.type})}}async function d(e){const a=e.className,r=n[a];return{constructor:await r(),properties:e.properties}}async function w(e,a){return await V(e,a)?{className:\"TileLayer\"}:{className:\"MapImageLayer\"}}async function S(e,a){const r=await W(e,a);if(\"object\"==typeof r){const e={};return null!=r.id&&(e.layerId=r.id),{className:r.className||\"FeatureLayer\",properties:e}}return{className:\"GroupLayer\"}}async function N(e,r){const n=await W(e,r,(async()=>{try{if(!e.url)return[];const{serverUrl:t}=await a(e.url,{sceneLayerItem:e}),n=await r.fetchServiceMetadata(t);return n?.tables??[]}catch{return[]}}));if(\"object\"==typeof n){const a={};let s;if(null!=n.id?(a.layerId=n.id,s=`${e.url}/layers/${n.id}`):s=e.url,e.typeKeywords?.length)for(const r of Object.keys(t))if(e.typeKeywords.includes(r))return{className:t[r]};const c=await r.fetchServiceMetadata(s);return{className:t[c?.layerType]||\"SceneLayer\",properties:a}}if(!1===n){const a=await r.fetchServiceMetadata(e.url);if(\"Voxel\"===a?.layerType)return{className:\"VoxelLayer\"}}return{className:\"GroupLayer\"}}async function I(e){await e.load();const a=m(e,\"Map Notes\"),r=m(e,\"Markup\");if(a||r)return{className:\"MapNotesLayer\"};if(m(e,\"Route Layer\"))return{className:\"RouteLayer\"};const t=await e.fetchData();return 1===c(t)?{className:\"FeatureLayer\"}:{className:\"GroupLayer\"}}async function v(e,a){await e.load();const r=e.typeKeywords?.map((e=>e.toLowerCase()))??[];if(r.includes(\"elevation 3d layer\"))return{className:\"ElevationLayer\"};if(r.includes(\"tiled imagery\"))return{className:\"ImageryTileLayer\"};const t=await e.fetchData(),n=t?.layerType;if(\"ArcGISTiledImageServiceLayer\"===n)return{className:\"ImageryTileLayer\"};if(\"ArcGISImageServiceLayer\"===n)return{className:\"ImageryLayer\"};const s=await a.fetchServiceMetadata(e.url),c=s.cacheType?.toLowerCase(),o=s.capabilities?.toLowerCase().includes(\"tilesonly\");return\"map\"===c||o?{className:\"ImageryTileLayer\"}:{className:\"ImageryLayer\"}}function M(){return{className:\"StreamLayer\"}}function h(){return{className:\"VectorTileLayer\"}}function T(){return{className:\"GeoJSONLayer\"}}function g(){return{className:\"CSVLayer\"}}function j(){return{className:\"KMLLayer\"}}function F(){return{className:\"WFSLayer\"}}function G(){return{className:\"WMSLayer\"}}function b(){return{className:\"WMTSLayer\"}}function C(){return{className:\"StreamLayer\"}}function U(){return{className:\"GroupLayer\"}}async function V(e,a){return(await a.fetchServiceMetadata(e.url)).tileInfo}async function W(e,a,r){const t=e.url;if(!t||/\\/\\d+$/.test(t))return{};await e.load();let n=await e.fetchData();if(\"Feature Service\"===e.type){const e=await o(n,t,a),r=K(e);if(\"object\"==typeof r){const a=i(e),t=u(e);r.className=null!=r.id&&a.includes(r.id)?\"SubtypeGroupLayer\":null!=r.id&&t?.includes(r.id)?\"OrientedImageryLayer\":\"FeatureLayer\"}return r}\"Scene Service\"===e.type&&(n=await l(e,n,a));if(c(n)>0)return K(n);const s=await a.fetchServiceMetadata(t);return r&&(s.tables=await r()),K(s)}function K(e){return 1===c(e)&&{id:y(e)}}export{p as fromItem,L as selectLayerClassPath};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport e from\"../request.js\";async function t(t,o){const{data:r}=await e(t,{responseType:\"json\",query:{f:\"json\",...o?.customParameters,token:o?.apiKey}});return r}export{t as fetchArcGISServiceJSON};\n"],"names":["e","constructor","this","_serviceMetadatas","Map","s","a","get","r","t","set","async","l","o","n","sceneServerUrl","url","path","layerId","sublayer","sceneLayerItem","c","serviceItemId","i","id","apiKey","findServerInfo","owningSystemUrl","replace","query","f","responseType","signal","data","u","portal","load","fetchRelatedItems","relationshipType","direction","find","type","y","portalItem","rootDocument","token","serverUrl","authMode","catch","m","Promise","all","p","layers","d","Array","isArray","Error","Math","min","length","BingMapsLayer","default","BuildingSceneLayer","CSVLayer","DimensionLayer","ElevationLayer","FeatureLayer","GeoJSONLayer","GeoRSSLayer","GroupLayer","ImageryLayer","ImageryTileLayer","IntegratedMeshLayer","KMLLayer","LineOfSightLayer","LinkChartLayer","MapImageLayer","MapNotesLayer","MediaLayer","OGCFeatureLayer","OpenStreetMapLayer","OrientedImageryLayer","PointCloudLayer","RouteLayer","SceneLayer","StreamLayer","SubtypeGroupLayer","TileLayer","UnknownLayer","UnsupportedLayer","VectorTileLayer","VoxelLayer","WFSLayer","WMSLayer","WMTSLayer","WebTileLayer","name","layerType","tables","fetchServiceMetadata","map","forEach","push","filter","fetchData","className","properties","L","tileInfo","V","w","W","S","I","typeKeywords","Object","keys","includes","N","toLowerCase","cacheType","capabilities","v","test","K","customParameters"],"sourceRoot":""}