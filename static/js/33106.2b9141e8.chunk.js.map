{"version":3,"file":"static/js/33106.2b9141e8.chunk.js","mappings":"2QAIuIA,eAAeC,EAAEC,EAAEC,EAAE,CAAC,EAAEC,SAASF,EAAEG,KAAKD,GAAG,MAAMH,GAAEK,EAAAA,EAAAA,IAAEJ,EAAEK,QAAQ,cAAcC,MAAMC,EAAE,EAAEC,IAAIC,EAAE,GAAGC,UAAUC,EAAE,MAAMC,UAAUC,EAAE,YAAYZ,EAAEa,EAAE,CAACC,MAAM,CAACT,MAAMC,EAAEC,IAAIC,EAAEC,UAAUC,EAAEC,UAAUC,EAAEG,MAAMhB,EAAEiB,QAAQC,OAAOhB,GAAGgB,QAAQC,QAAQnB,EAAEoB,OAAOC,QAAQtB,EAAEe,GAAG,MAAM,CAACQ,MAAMH,EAAEG,MAAMC,UAAUJ,EAAEI,UAAUC,UAAUL,EAAEK,UAAUC,KAAK,EAAEC,QAAQzB,EAAE0B,KAAKvB,EAAEwB,SAAS1B,MAAE,CAAKwB,QAAQ,IAAIG,KAAK5B,GAAG0B,KAAKvB,EAAEwB,SAAS5B,EAAE8B,iBAAiB5B,OAAO,CAACJ,eAAeS,EAAEP,EAAEE,EAAEH,EAAEQ,GAAG,MAAME,EAAE,IAAIsB,IAAI,IAAI,MAAMH,SAASxB,EAAE4B,QAAQlB,EAAEmB,SAASd,EAAEe,OAAOC,KAAKjC,EAAE,CAAC,IAAIE,EAAEgC,UAAU,MAAM,IAAInC,EAAAA,EAAE,wBAAwBF,iBAAiB,uCAAuC,MAAMC,EAAEE,GAAGW,EAAET,EAAEiC,MAAM9B,EAAE,GAAGP,KAAKmB,GAAG,MAAMgB,GAAG,KAAK1B,EAAE6B,IAAI/B,IAAIE,EAAE8B,IAAIhC,EAAE,CAACiC,OAAOxC,EAAEiC,SAASd,EAAEe,OAAOC,EAAEM,MAAM,KAAKhC,EAAEiC,IAAInC,GAAGkC,MAAME,KAAK,CAACC,SAAS1C,EAAE8B,QAAQlB,GAAG,OAAOd,EAAEG,KAAKI,GAAG,MAAMI,GAAEP,EAAAA,EAAAA,IAAEJ,EAAE6C,YAAY,QAAQ9C,EAAE,eAAe,mBAAmB,IAAI,MAAMyC,OAAOvC,EAAEgC,SAAS7B,EAAE8B,OAAOrB,EAAE4B,MAAM3B,KAAKL,EAAEqC,SAAS,CAAC,MAAM5C,EAAE,GAAG,IAAI,IAAIH,EAAE,EAAEA,EAAEe,EAAEiC,OAAOhD,GAAGG,EAAE,CAAC,MAAMO,EAAEK,EAAEkC,MAAMjD,EAAEA,EAAEG,GAAGiB,EAAE,IAAI8B,SAAShD,GAAG,MAAMA,GAAGkB,EAAE+B,OAAO,kBAAkBjD,GAAGG,GAAGe,EAAE+B,OAAO,WAAW,QAAQrC,GAAGM,EAAE+B,OAAO,SAASrC,GAAG,IAAIsB,EAAE,EAAE,IAAI,MAAMS,SAAS5C,EAAEgC,QAAQ/B,KAAKQ,EAAEU,EAAE+B,OAAO,UAAUf,EAAElC,EAAED,GAAGmB,EAAE+B,OAAO,IAAI,cAAclD,EAAEoB,OAAOC,QAAQV,EAAE,CAACwC,OAAO,OAAOC,KAAKjC,EAAED,OAAOX,GAAGW,QAAQ,CAAC,CAAC,CAACpB,eAAeW,EAAET,EAAEE,EAAEH,GAAG,IAAIG,EAAEkC,UAAU,MAAM,IAAInC,EAAAA,EAAE,4CAA4C,6CAA6CD,EAAEG,KAAKJ,GAAG,MAAMQ,GAAEH,EAAAA,EAAAA,IAAEJ,EAAE6C,YAAY,yBAAyB7C,EAAEoB,OAAOC,QAAQd,EAAE,CAAC4C,OAAO,OAAOpC,MAAM,CAACa,SAAS1B,EAAEmC,MAAMnB,OAAOnB,GAAGmB,SAAShB,EAAEmD,WAAW,IAAI,CAACvD,eAAea,EAAEX,EAAEC,SAASD,EAAEG,KAAKF,GAAG,MAAMC,GAAEE,EAAAA,EAAAA,IAAEJ,EAAE6C,YAAY,mBAAmB,OAAO7C,EAAEoB,OAAOC,QAAQnB,EAAE,CAACiD,OAAO,OAAOpC,MAAM,CAACuC,WAAU,GAAIpC,OAAOjB,GAAGiB,QAAQ,CAAC,SAASL,EAAEb,GAAG,MAAMC,EAAED,EAAEuD,YAAY,KAAK,OAAO,IAAItD,EAAE,CAAC,IAAID,GAAG,CAACA,EAAEgD,MAAM,EAAE/C,GAAGD,EAAEgD,MAAM/C,EAAE,GAAG,CAAC,SAASa,EAAEd,GAAG,MAAMC,EAAEG,GAAiC,SAAWJ,GAAG,MAAMC,GAAEC,EAAAA,EAAAA,IAAEF,GAAG,OAAO,MAAMC,EAAE,CAACD,EAAE,IAAI,CAACA,EAAEgD,MAAM,EAAEhD,EAAE+C,OAAO9C,EAAE8C,OAAO,GAAG,IAAI9C,IAAI,CAAvHkB,CAAEnB,IAAIE,EAAEH,GAAGc,EAAEZ,GAAG,MAAM,CAACC,EAAEH,EAAEK,EAAE,CAA2FN,eAAeqC,EAAElC,GAAG,MAAG,SAASA,EAAEuD,KAAYvD,EAAEwD,KAAQ,SAASxD,EAAEuD,KAAY,IAAIE,KAAK,CAACzD,EAAE0D,YAAY,CAACH,KAAK,4BAAkCxD,EAAAA,EAAAA,GAAEC,EAAE2D,IAAI,CAACC,aAAa,UAAUC,IAAI,CAAkH,SAASC,EAAE/D,EAAEC,GAAG,IAAID,EAAEoC,UAAU,OAAO,KAAK,MAAMlC,EAAE,CAACH,GAAGe,EAAEd,EAAEqC,MAAM,OAAOrC,EAAEqD,WAAWvB,kBAAiB1B,EAAAA,EAAAA,IAAEF,EAAED,EAAEF,GAAG,C","sources":["../node_modules/@arcgis/core/portal/support/resourceUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../core/Error.js\";import{join as r,getPathExtension as s}from\"../../core/urlUtils.js\";async function o(e,t={},s){await e.load(s);const o=r(e.itemUrl,\"resources\"),{start:a=1,num:n=10,sortOrder:c=\"asc\",sortField:l=\"resource\"}=t,i={query:{start:a,num:n,sortOrder:c,sortField:l,token:e.apiKey},signal:s?.signal},u=await e.portal.request(o,i);return{total:u.total,nextStart:u.nextStart,resources:u.resources.map((({created:t,size:r,resource:s})=>({created:new Date(t),size:r,resource:e.resourceFromPath(s)})))}}async function a(e,s,o,a){const n=new Map;for(const{resource:r,content:i,compress:u,access:p}of s){if(!r.hasPath())throw new t(`portal-item-resource-${o}:invalid-path`,\"Resource does not have a valid path\");const[e,s]=l(r.path),a=`${e}/${u??\"\"}/${p??\"\"}`;n.has(a)||n.set(a,{prefix:e,compress:u,access:p,files:[]});n.get(a).files.push({fileName:s,content:i})}await e.load(a);const c=r(e.userItemUrl,\"add\"===o?\"addResources\":\"updateResources\");for(const{prefix:t,compress:r,access:l,files:i}of n.values()){const s=25;for(let o=0;o<i.length;o+=s){const n=i.slice(o,o+s),u=new FormData;t&&\".\"!==t&&u.append(\"resourcesPrefix\",t),r&&u.append(\"compress\",\"true\"),l&&u.append(\"access\",l);let p=0;for(const{fileName:e,content:t}of n)u.append(\"file\"+ ++p,t,e);u.append(\"f\",\"json\"),await e.portal.request(c,{method:\"post\",body:u,signal:a?.signal})}}}async function n(e,s,o){if(!s.hasPath())throw new t(\"portal-item-resources-remove:invalid-path\",\"Resource does not have a valid path\");await e.load(o);const a=r(e.userItemUrl,\"removeResources\");await e.portal.request(a,{method:\"post\",query:{resource:s.path},signal:o?.signal}),s.portalItem=null}async function c(e,t){await e.load(t);const s=r(e.userItemUrl,\"removeResources\");return e.portal.request(s,{method:\"post\",query:{deleteAll:!0},signal:t?.signal})}function l(e){const t=e.lastIndexOf(\"/\");return-1===t?[\".\",e]:[e.slice(0,t),e.slice(t+1)]}function i(e){const[t,r]=u(e),[s,o]=l(t);return[s,o,r]}function u(e){const t=s(e);return null==t?[e,\"\"]:[e.slice(0,e.length-t.length-1),`.${t}`]}async function p(t){if(\"blob\"===t.type)return t.blob;if(\"json\"===t.type)return new Blob([t.jsonString],{type:\"application/json\"});return(await e(t.url,{responseType:\"blob\"})).data}function f(e,t){if(!e.hasPath())return null;const[s,,o]=i(e.path);return e.portalItem.resourceFromPath(r(s,t+o))}function m(e,t){if(!e.hasPath())return null;const[s,,o]=i(e.path);return e.portalItem.resourceFromPath(r(s,t+o))}export{a as addOrUpdateResources,p as contentToBlob,o as fetchResources,f as getSiblingOfSameType,m as getSiblingOfSameTypeI,c as removeAllResources,n as removeResource,i as splitPrefixFileNameAndExtension};\n"],"names":["async","o","e","t","s","load","r","itemUrl","start","a","num","n","sortOrder","c","sortField","l","i","query","token","apiKey","signal","u","portal","request","total","nextStart","resources","map","created","size","resource","Date","resourceFromPath","Map","content","compress","access","p","hasPath","path","has","set","prefix","files","get","push","fileName","userItemUrl","values","length","slice","FormData","append","method","body","portalItem","deleteAll","lastIndexOf","type","blob","Blob","jsonString","url","responseType","data","m"],"sourceRoot":""}