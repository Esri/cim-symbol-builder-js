"use strict";(globalThis.webpackChunkmy_app=globalThis.webpackChunkmy_app||[]).push([[54763],{54763:(e,t,i)=>{i.r(t),i.d(t,{previewCIMSymbol:()=>f});var l=i(17842),a=i(78915),n=i(94304),o=i(31027),r=i(37817),s=i(69157);const c=new n.U(null,!0),u=(0,l.Wz)(r.b_.size),h=(0,l.Wz)(r.b_.maxSize),y=(0,l.Wz)(r.b_.lineWidth);async function m(e,t,i){const l=t?.size;let n=null!=l&&"object"==typeof l&&"width"in l?l.width:l,o=null!=l&&"object"==typeof l&&"height"in l?l.height:l;if(null==n||null==o)if("esriGeometryPolygon"===i)n=u,o=u;else{const l=await async function(e,t,i){const{feature:l,fieldMap:n,viewParams:o}=t.cimOptions||t,r=await a.E0.resolveSymbolOverrides(e.data,l,null,n,i,null,o);if(!r)return null;(e=e.clone()).data={type:"CIMSymbolReference",symbol:r},e.data.primitiveOverrides=void 0;const s=[];return a.B$.fetchResources(r,c.resourceManager,s),a.B$.fetchFonts(r,c.resourceManager,s),s.length>0&&await Promise.all(s),a.B$.getEnvelope(r,null,c.resourceManager)}(e,t,i);l&&(n=l.width,o=l.height),"esriGeometryPolyline"===i&&(n=y),n=null!=n&&isFinite(n)?Math.min(n,h):u,o=null!=o&&isFinite(o)?Math.max(Math.min(o,h),1):u}return"legend"===t.style&&"esriGeometryPolyline"===i&&(n=y),{width:n,height:o}}async function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{node:i,opacity:a,symbolConfig:n}=t,r=null!=n&&"object"==typeof n&&"isSquareFill"in n&&n.isSquareFill,u=t.cimOptions||t,h=u.geometryType||(0,o.JW)(e?.data?.symbol),y=await m(e,t,h),{feature:f,fieldMap:p}=u,d=r||"esriGeometryPolygon"!==h?"preview":"legend",g=await c.rasterizeCIMSymbolAsync(e,f,y,d,p,h,null,u.viewParams,u.allowScalingUp);if(!g)return null;const{width:w,height:b}=g,v=document.createElement("canvas");v.width=w,v.height=b,v.getContext("2d").putImageData(g,0,0);const M=(0,l.F2)(y.width),C=(0,l.F2)(y.height),S=new Image(M,C);S.src=v.toDataURL(),S.ariaLabel=t.ariaLabel??null,S.alt=t.ariaLabel??"",null!=a&&(S.style.opacity=`${a}`);let z=S;if(null!=t.effectView){const e={shape:{type:"image",x:0,y:0,width:M,height:C,src:S.src},fill:null,stroke:null,offset:[0,0]};z=(0,s.wh)([[e]],[M,C],{effectView:t.effectView,ariaLabel:t.ariaLabel})}return i&&z&&i.appendChild(z),z}}}]);
//# sourceMappingURL=54763.79920f76.chunk.js.map