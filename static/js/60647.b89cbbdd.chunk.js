"use strict";(globalThis.webpackChunkmy_app=globalThis.webpackChunkmy_app||[]).push([[60647],{78315:(t,n,e)=>{e.d(n,{N:()=>l,a:()=>b,c:()=>v,e:()=>M,f:()=>N,g:()=>T,k:()=>w,l:()=>p,m:()=>q,n:()=>m,o:()=>L,p:()=>O,s:()=>F,w:()=>E});e(81806),e(76460);var r=e(15941),i=e(34761),o=e(20664),c=e(9392),s=e(43047),u=e(55855),a=e(53494),f=e(5568),h=e(95925);function d(t,n){const e=(0,o.l)(t),i=(0,r.YN)(t[2]/e),c=Math.atan2(t[1]/e,t[0]/e);return(0,o.i)(n,e,i,c),n}var g=e(96190),_=e(75762);const l=v();function v(){return(0,u.vt)()}const m=s.e,I=s.e;function M(t,n){return(0,s.c)(n,t)}function p(t,n){return(0,u.fA)(t[0],t[1],t[2],n)}function E(t){return t}function T(t){return t[3]}function b(t){return t}function N(t,n,e,r){return(0,u.fA)(t,n,e,r)}function S(t,n,e){if(null==n)return!1;if(!P(t,n,C))return!1;let{t0:r,t1:i}=C;if((r<0||i<r&&i>0)&&(r=i),r<0)return!1;if(e){const{origin:t,direction:i}=n;e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r}return!0}function q(t,n,e){const r=(0,h.Cr)(n,e);if(!P(t,r,C))return[];const{origin:i,direction:s}=r,{t0:u,t1:f}=C,d=n=>{const e=(0,c.vt)();return(0,o.b)(e,i,s,n),O(t,e,e)};return Math.abs(u-f)<(0,a.FD)()?[d(u)]:[d(u),d(f)]}const C={t0:0,t1:0};function P(t,n,e){const{origin:r,direction:i}=n,o=A;o[0]=r[0]-t[0],o[1]=r[1]-t[1],o[2]=r[2]-t[2];const c=i[0]*i[0]+i[1]*i[1]+i[2]*i[2];if(0===c)return!1;const s=2*(i[0]*o[0]+i[1]*o[1]+i[2]*o[2]),u=s*s-4*c*(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]-t[3]*t[3]);if(u<0)return!1;const a=Math.sqrt(u);return e.t0=(-s-a)/(2*c),e.t1=(-s+a)/(2*c),!0}const A=(0,c.vt)();function w(t,n){return S(t,n,null)}function y(t,n,e){const r=_.rq.get(),c=_.Rc.get();(0,o.h)(r,n.origin,n.direction);const s=T(t);(0,o.h)(e,r,n.origin),(0,o.g)(e,e,1/(0,o.l)(e)*s);const u=V(t,n.origin),a=(0,g.g7)(n.origin,e);return(0,i.$0)(c,a+u,r),(0,o.t)(e,e,c),e}function O(t,n,e){const r=(0,o.d)(_.rq.get(),n,t),i=(0,o.g)(_.rq.get(),r,t[3]/(0,o.l)(r));return(0,o.f)(e,i,t)}function V(t,n){const e=(0,o.d)(_.rq.get(),n,t),i=(0,o.l)(e),c=T(t),s=c+Math.abs(c-i);return(0,r.XM)(c/s)}const j=(0,c.vt)();function D(t,n,e,r){const i=(0,o.d)(j,n,t);switch(e){case f._.X:{const t=d(i,j)[2];return(0,o.i)(r,-Math.sin(t),Math.cos(t),0)}case f._.Y:{const t=d(i,j),n=t[1],e=t[2],c=Math.sin(n);return(0,o.i)(r,-c*Math.cos(e),-c*Math.sin(e),Math.cos(n))}case f._.Z:return(0,o.n)(r,i);default:return}}function R(t,n){const e=(0,o.d)(x,n,t);return(0,o.l)(e)-t[3]}function L(t,n){const e=(0,o.s)(t,n),r=T(t);return e<=r*r}const x=(0,c.vt)(),U=v(),F=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:l,altitudeAt:R,angleToSilhouette:V,axisAt:D,cameraFrustumCoverage:function(t,n,e,r){const i=T(t),o=i*i,c=n+.5*Math.PI,s=e*e+o-2*Math.cos(c)*e*i,u=Math.sqrt(s),a=s-o;if(a<=0)return.5;const f=Math.sqrt(a),h=Math.acos(f/u)-Math.asin(i/(u/Math.sin(c)));return Math.min(1,(h+.5*r)/r)},clear:function(t){t[0]=t[1]=t[2]=t[3]=0},closestPoint:function(t,n,e){return S(t,n,e)?e:((0,h.oC)(n,t,e),O(t,e,e))},closestPointOnSilhouette:y,containsPoint:L,copy:M,create:v,distanceToSilhouette:function(t,n){const e=(0,o.d)(_.rq.get(),n,t),r=(0,o.k)(e),i=t[3]*t[3];return Math.sqrt(Math.abs(r-i))},elevate:function(t,n,e){return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2]),e[3]=t[3]+n,e},equals:I,exactEquals:m,fromCenterAndRadius:p,fromRadius:function(t,n){return t[0]=t[1]=t[2]=0,t[3]=n,t},fromValues:N,getCenter:b,getExtent:function(t,n){return n},getRadius:T,intersectLine:q,intersectRay:S,intersectRayClosestSilhouette:function(t,n,e){if(S(t,n,e))return e;const r=y(t,n,_.rq.get());return(0,o.f)(e,n.origin,(0,o.g)(_.rq.get(),n.direction,(0,o.j)(n.origin,r)/(0,o.l)(n.direction))),e},intersectsRay:w,projectPoint:O,setAltitudeAt:function(t,n,e,r){const i=R(t,n),c=D(t,n,f._.Z,x),s=(0,o.g)(x,c,e-i);return(0,o.f)(r,n,s)},setExtent:function(t,n,e){return t!==e&&M(t,e),e},tmpSphere:U,union:function(t,n,e=(0,u.vt)()){const r=(0,o.j)(t,n),i=t[3],c=n[3];return r+c<i?((0,s.c)(e,t),e):r+i<c?((0,s.c)(e,n),e):((0,o.m)(e,t,n,(r+c-i)/(2*r)),e[3]=(r+i+c)/2,e)},wrap:E},Symbol.toStringTag,{value:"Module"}))},97467:(t,n,e)=>{e.d(n,{I:()=>i});var r=e(77944);class i{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,r.d)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*o);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,o));t++)this._items.push(this._allocator())}}const o=1024},44680:(t,n,e)=>{function r(){return[1,0,0,0,1,0,0,0,1]}function i(t,n,e,r,i,o,c,s,u){return[t,n,e,r,i,o,c,s,u]}e.d(n,{fA:()=>i,vt:()=>r,zK:()=>o});const o=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:function(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},create:r,fromValues:i},Symbol.toStringTag,{value:"Module"}))},13191:(t,n,e)=>{function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function o(t,n,e,r,i,o,c,s,u,a,f,h,d,g,_,l){return[t,n,e,r,i,o,c,s,u,a,f,h,d,g,_,l]}e.d(n,{fA:()=>o,o8:()=>i,vt:()=>r,zK:()=>c});const c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:c,clone:i,create:r,fromValues:o},Symbol.toStringTag,{value:"Module"}))},4336:(t,n,e)=>{function r(){return[0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3]]}e.d(n,{o8:()=>i,vt:()=>r,zK:()=>o});const o=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:i,create:r,fromValues:function(t,n,e,r){return[t,n,e,r]}},Symbol.toStringTag,{value:"Module"}))},44230:(t,n,e)=>{e.d(n,{C:()=>a,Cr:()=>h,H6:()=>l,_I:()=>g,dz:()=>v,fA:()=>f,kb:()=>d,ld:()=>m,sd:()=>_,vt:()=>u});var r=e(15941),i=e(97467),o=e(20664),c=e(9392),s=e(75762);function u(t){return t?{origin:(0,c.o8)(t.origin),vector:(0,c.o8)(t.vector)}:{origin:(0,c.vt)(),vector:(0,c.vt)()}}function a(t,n=u()){return f(t.origin,t.vector,n)}function f(t,n,e=u()){return(0,o.c)(e.origin,t),(0,o.c)(e.vector,n),e}function h(t,n,e=u()){return(0,o.c)(e.origin,t),(0,o.d)(e.vector,n,t),e}function d(t,n){const e=(0,o.d)(s.rq.get(),n,t.origin),i=(0,o.e)(t.vector,e),c=(0,o.e)(t.vector,t.vector),u=(0,r.qE)(i/c,0,1),a=(0,o.d)(s.rq.get(),(0,o.g)(s.rq.get(),t.vector,u),e);return(0,o.e)(a,a)}function g(t,n,e){return l(t,n,0,1,e)}function _(t,n,e){return(0,o.f)(e,t.origin,(0,o.g)(e,t.vector,n))}function l(t,n,e,i,c){const{vector:u,origin:a}=t,f=(0,o.d)(s.rq.get(),n,a),h=(0,o.e)(u,f)/(0,o.k)(u);return(0,o.g)(c,u,(0,r.qE)(h,e,i)),(0,o.f)(c,c,t.origin)}function v(t,n){if(I(t,function(t,n){const e=p.get();return e.origin=t,e.vector=n,e}(n.origin,n.direction),!1,M)){const{tA:n,pB:e,distance2:r}=M;if(n>=0&&n<=1)return r;if(n<0)return(0,o.s)(t.origin,e);if(n>1)return(0,o.s)((0,o.f)(s.rq.get(),t.origin,t.vector),e)}return null}function m(t,n,e){return!!I(t,n,!0,M)&&((0,o.c)(e,M.pA),!0)}function I(t,n,e,i){const c=1e-6,u=t.origin,a=(0,o.f)(s.rq.get(),u,t.vector),f=n.origin,h=(0,o.f)(s.rq.get(),f,n.vector),d=s.rq.get(),g=s.rq.get();if(d[0]=u[0]-f[0],d[1]=u[1]-f[1],d[2]=u[2]-f[2],g[0]=h[0]-f[0],g[1]=h[1]-f[1],g[2]=h[2]-f[2],Math.abs(g[0])<c&&Math.abs(g[1])<c&&Math.abs(g[2])<c)return!1;const _=s.rq.get();if(_[0]=a[0]-u[0],_[1]=a[1]-u[1],_[2]=a[2]-u[2],Math.abs(_[0])<c&&Math.abs(_[1])<c&&Math.abs(_[2])<c)return!1;const l=d[0]*g[0]+d[1]*g[1]+d[2]*g[2],v=g[0]*_[0]+g[1]*_[1]+g[2]*_[2],m=d[0]*_[0]+d[1]*_[1]+d[2]*_[2],I=g[0]*g[0]+g[1]*g[1]+g[2]*g[2],M=(_[0]*_[0]+_[1]*_[1]+_[2]*_[2])*I-v*v;if(Math.abs(M)<c)return!1;let p=(l*v-m*I)/M,E=(l+v*p)/I;e&&(p=(0,r.qE)(p,0,1),E=(0,r.qE)(E,0,1));const T=s.rq.get(),b=s.rq.get();return T[0]=u[0]+p*_[0],T[1]=u[1]+p*_[1],T[2]=u[2]+p*_[2],b[0]=f[0]+E*g[0],b[1]=f[1]+E*g[1],b[2]=f[2]+E*g[2],i.tA=p,i.tB=E,i.pA=T,i.pB=b,i.distance2=(0,o.s)(T,b),!0}const M={tA:0,tB:0,pA:(0,c.vt)(),pB:(0,c.vt)(),distance2:0},p=new i.I((()=>u()))},13927:(t,n,e)=>{e.d(n,{C:()=>h,Cr:()=>l,Io:()=>D,LV:()=>f,O_:()=>_,Qj:()=>d,T7:()=>A,Tj:()=>y,U5:()=>C,Ui:()=>P,Z1:()=>j,_I:()=>V,b6:()=>O,ci:()=>m,fA:()=>g,gv:()=>w,lU:()=>v,mN:()=>R,mP:()=>N,mR:()=>q,vt:()=>a,ze:()=>S});var r=e(15941),i=e(20664),o=e(9392),c=(e(43047),e(96190)),s=e(75762),u=e(94966);function a(t=F){return[t[0],t[1],t[2],t[3]]}function f(t=F[0],n=F[1],e=F[2],r=F[3]){return g(t,n,e,r,s.Km.get())}function h(t,n){return g(n[0],n[1],n[2],n[3],t)}function d(t){return t}function g(t,n,e,r,i=a()){return i[0]=t,i[1]=n,i[2]=e,i[3]=r,i}function _(t,n,e){const r=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],i=Math.abs(r-1)>1e-5&&r>1e-12?1/Math.sqrt(r):1;return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=-(e[0]*t[0]+e[1]*t[1]+e[2]*t[2]),e}function l(t,n,e,r=a()){const i=e[0]-n[0],o=e[1]-n[1],c=e[2]-n[2],s=t[0]-n[0],u=t[1]-n[1],f=t[2]-n[2],h=o*f-c*u,d=c*s-i*f,g=i*u-o*s,_=h*h+d*d+g*g,l=Math.abs(_-1)>1e-5&&_>1e-12?1/Math.sqrt(_):1;return r[0]=h*l,r[1]=d*l,r[2]=g*l,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),r}function v(t,n,e,r=0,o=Math.floor(e*(1/3)),c=Math.floor(e*(2/3))){if(e<3)return!1;n(M,r);let s=o,u=!1;for(;s<e-1&&!u;)n(p,s),s++,u=!(0,i.q)(M,p);if(!u)return!1;for(s=Math.max(s,c),u=!1;s<e&&!u;)n(E,s),s++,(0,i.d)(T,M,p),(0,i.n)(T,T),(0,i.d)(b,p,E),(0,i.n)(b,b),u=!(0,i.q)(M,E)&&!(0,i.q)(p,E)&&Math.abs((0,i.e)(T,b))<I;return u?(l(M,p,E,t),!0):(0!==r||1!==o||2!==c)&&v(t,n,e,0,1,2)}function m(t,n,e=!0){const r=n.length/3;return v(t,((t,e)=>(0,i.i)(t,n[3*e+0],n[3*e+1],n[3*e+2])),e?r-1:r)}const I=.99619469809,M=(0,o.vt)(),p=(0,o.vt)(),E=(0,o.vt)(),T=(0,o.vt)(),b=(0,o.vt)();function N(t,n,e){return n!==t&&h(t,n),t[3]=-(0,i.e)(t,e),t}function S(t,n){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=-t[3],n}function q(t,n,e,r){return(0,i.h)(E,n,t),_(e,E,r)}function C(t,n,e,r){return x(U(t,n,(0,i.d)(s.rq.get(),e,n),z,r))}function P(t,n,e){return null!=n&&x(U(t,n.origin,n.direction,X,e))}function A(t,n,e){return x(U(t,n.origin,n.vector,k.NONE,e))}function w(t,n,e){return x(U(t,n.origin,n.vector,k.CLAMP,e))}function y(t,n){return R(t,n)>=0}function O(t,n){const e=(0,i.e)(t,n.ray.direction),r=-R(t,n.ray.origin);if(e>-1e-6&&e<1e-6)return r>0;const o=r/e;return e>0?o<n.c1&&(n.c1=o):o>n.c0&&(n.c0=o),n.c0<=n.c1}function V(t,n,e){const r=(0,i.g)(s.rq.get(),t,-t[3]),o=function(t,n,e){const r=(0,i.g)(s.rq.get(),t,(0,i.e)(t,n));return(0,i.d)(e,n,r),e}(t,(0,i.d)(s.rq.get(),n,r),s.rq.get());return(0,i.f)(e,o,r),e}function j(t,n,e,r){const o=t,a=s.rq.get(),f=s.rq.get();(0,u.VV)(o,a,f);const h=(0,i.d)(s.rq.get(),e,n),d=(0,c.gr)(a,h),g=(0,c.gr)(f,h),_=(0,c.gr)(o,h);return(0,i.i)(r,d,g,_)}function D(t,n){return Math.abs(R(t,n))}function R(t,n){return(0,i.e)(t,n)+t[3]}var L;function x(t){return t===L.INTERSECTS_INSIDE_OUT||t===L.INTERSECTS_OUTSIDE_IN}function U(t,n,e,o,c){const s=(0,i.e)(t,e),u=R(t,n);if(0===s)return u>=0?L.INSIDE:L.OUTSIDE;let a=-u/s;return o&k.CLAMP&&(a=(0,r.qE)(a,0,1)),!(o&k.INFINITE_MIN)&&a<0||!(o&k.INFINITE_MAX)&&a>1?u>=0?L.INSIDE:L.OUTSIDE:((0,i.f)(c,n,(0,i.g)(c,e,a)),u>=0?L.INTERSECTS_INSIDE_OUT:L.INTERSECTS_OUTSIDE_IN)}!function(t){t[t.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",t[t.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",t[t.INSIDE=2]="INSIDE",t[t.OUTSIDE=3]="OUTSIDE"}(L||(L={}));const F=[0,0,1,0];var k;!function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"}(k||(k={}));const z=k.INFINITE_MIN|k.INFINITE_MAX,X=k.INFINITE_MAX},95925:(t,n,e)=>{e.d(n,{C:()=>h,Cr:()=>d,LV:()=>f,kb:()=>g,oC:()=>_,vt:()=>u});e(18690);var r=e(97467),i=(e(63919),e(44680)),o=e(20664),c=e(9392),s=e(75762);function u(t){return t?a((0,c.o8)(t.origin),(0,c.o8)(t.direction)):a((0,c.vt)(),(0,c.vt)())}function a(t,n){return{origin:t,direction:n}}function f(t,n){const e=l.get();return e.origin=t,e.direction=n,e}function h(t,n=u()){return function(t,n,e=u()){return(0,o.c)(e.origin,t),(0,o.c)(e.direction,n),e}(t.origin,t.direction,n)}function d(t,n,e=u()){return(0,o.c)(e.origin,t),(0,o.d)(e.direction,n,t),e}function g(t,n){const e=(0,o.h)(s.rq.get(),(0,o.n)(s.rq.get(),t.direction),(0,o.d)(s.rq.get(),n,t.origin));return(0,o.e)(e,e)}function _(t,n,e){const r=(0,o.e)(t.direction,(0,o.d)(e,n,t.origin));return(0,o.f)(e,t.origin,(0,o.g)(e,t.direction,r)),e}const l=new r.I((()=>u()));(0,c.vt)(),(0,c.vt)(),(0,c.vt)(),(0,i.vt)()},96190:(t,n,e)=>{e.d(n,{EJ:()=>a,_I:()=>c,g7:()=>u,gr:()=>s});var r=e(15941),i=e(20664),o=e(9392);function c(t,n,e){const r=(0,i.e)(t,n)/(0,i.e)(t,t);return(0,i.g)(e,t,r)}function s(t,n){return(0,i.e)(t,n)/(0,i.l)(t)}function u(t,n){const e=(0,i.e)(t,n)/((0,i.l)(t)*(0,i.l)(n));return-(0,r.XM)(e)}function a(t,n,e){(0,i.n)(f,t),(0,i.n)(h,n);const o=(0,i.e)(f,h),c=(0,r.XM)(o),s=(0,i.h)(f,f,h);return(0,i.e)(s,e)<0?2*Math.PI-c:c}const f=(0,o.vt)(),h=(0,o.vt)()},75762:(t,n,e)=>{e.d(n,{Rc:()=>_,J8:()=>l,oG:()=>h,rq:()=>d,Km:()=>g});e(81806);var r=e(77944),i=e(44680),o=e(13191),c=e(4336),s=e(72745),u=e(9392),a=e(55855);class f{constructor(t){this._create=t,this._items=new Array,this._itemsPtr=0}get(){return 0===this._itemsPtr&&(0,r.d)((()=>this._reset())),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const t=2*this._itemsPtr;this._items.length>t&&(this._items.length=t),this._itemsPtr=0}static createVec2f64(){return new f(s.vt)}static createVec3f64(){return new f(u.vt)}static createVec4f64(){return new f(a.vt)}static createMat3f64(){return new f(i.vt)}static createMat4f64(){return new f(o.vt)}static createQuatf64(){return new f(c.vt)}get test(){}}const h=f.createVec2f64(),d=f.createVec3f64(),g=f.createVec4f64(),_=(f.createMat3f64(),f.createMat4f64()),l=f.createQuatf64()},94966:(t,n,e)=>{e.d(n,{VV:()=>s,hG:()=>o,wp:()=>c});e(15941);var r=e(20664),i=e(9392);function o(t){const n=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],e=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],r=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(n,e,r))}function c(t,n){const e=Math.sqrt(n[0]*n[0]+n[4]*n[4]+n[8]*n[8]),i=Math.sqrt(n[1]*n[1]+n[5]*n[5]+n[9]*n[9]),o=Math.sqrt(n[2]*n[2]+n[6]*n[6]+n[10]*n[10]);return(0,r.i)(t,e,i,o),t}function s(t,n,e){Math.abs(t[0])>Math.abs(t[1])?(0,r.i)(n,0,1,0):(0,r.i)(n,1,0,0),(0,r.h)(e,t,n),(0,r.h)(n,e,t),(0,r.n)(e,e),(0,r.n)(n,n)}(0,i.vt)(),(0,i.vt)(),(0,i.vt)(),(0,i.vt)(),(0,i.vt)()},51264:(t,n,e)=>{e.r(n),e.d(n,{default:()=>_});var r=e(35143),i=e(50346),o=(e(76460),e(81806),e(47249),e(50076),e(85842)),c=e(20664),s=e(9392),u=e(44230),a=e(78315),f=e(94536),h=e(2259);function d(t,n,e){const r=(0,a.c)(),i=(0,a.a)(r);return(0,c.b)(i,i,t,.5),(0,c.b)(i,i,n,.5),r[3]=(0,c.j)(i,t),(0,c.f)(i,i,e),r}let g=class{constructor(){this._idToComponent=new Map,this._components=new f.A((t=>t.bounds)),this._edges=new f.A((t=>t.bounds)),this._tmpLineSegment=(0,u.vt)(),this._tmpP1=(0,s.vt)(),this._tmpP2=(0,s.vt)(),this._tmpP3=(0,s.vt)(),this.remoteClient=null}async fetchCandidates(t,n){await Promise.resolve(),(0,i.Te)(n),await this._ensureEdgeLocations(t,n);const e=[];return this._edges.forEachNeighbor((n=>(this._addCandidates(t,n,e),e.length<1e3)),t.bounds),{result:{candidates:e}}}async _ensureEdgeLocations(t,n){const e=[];if(this._components.forEachNeighbor((t=>{if(null==t.info){const{id:n,uid:r}=t;e.push({id:n,uid:r})}return!0}),t.bounds),!e.length)return;const r={components:e},i=await this.remoteClient.invoke("fetchAllEdgeLocations",r,n??{});for(const o of i.components)this._setFetchEdgeLocations(o)}async add(t){const n=new v(t.id,t.bounds);return this._idToComponent.set(n.id,n),this._components.add([n]),{result:{}}}async remove(t){const n=this._idToComponent.get(t.id);if(n){const t=[];this._edges.forEachNeighbor((e=>(e.component===n&&t.push(e),!0)),n.bounds),this._edges.remove(t),this._components.remove([n]),this._idToComponent.delete(n.id)}return{result:{}}}_setFetchEdgeLocations(t){const n=this._idToComponent.get(t.id);if(null==n||t.uid!==n.uid)return;const e=h.HY.createView(t.locations),r=new Array(e.count),i=(0,s.vt)(),o=(0,s.vt)();for(let s=0;s<e.count;s++){e.position0.getVec(s,i),e.position1.getVec(s,o);const c=d(i,o,t.origin),u=new m(n,s,c);r[s]=u}this._edges.add(r);const{objectIds:c,origin:u}=t;n.info={locations:e,objectIds:c,origin:u}}_addCandidates(t,n,e){const{info:r}=n.component,{origin:i,objectIds:o}=r,s=r.locations,u=s.position0.getVec(n.index,this._tmpP1),a=s.position1.getVec(n.index,this._tmpP2);(0,c.f)(u,u,i),(0,c.f)(a,a,i);const f=o[s.componentIndex.get(n.index)];this._addEdgeCandidate(t,f,u,a,e),l(t,f,u,e),l(t,f,a,e)}_addEdgeCandidate(t,n,e,r,i){if(!t.returnEdge)return;const o=(0,a.a)(t.bounds),f=(0,u.Cr)(e,r,this._tmpLineSegment),h=(0,u._I)(f,o,this._tmpP3);(0,a.o)(t.bounds,h)&&i.push({type:"edge",objectId:n,target:(0,s.o8)(h),distance:(0,c.j)(o,h),start:(0,s.o8)(e),end:(0,s.o8)(r)})}};g=(0,r._)([(0,o.$)("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],g);const _=g;function l(t,n,e,r){if(!t.returnVertex||!(0,a.o)(t.bounds,e))return;const i=(0,a.a)(t.bounds);r.push({type:"vertex",objectId:n,target:(0,s.o8)(e),distance:(0,c.j)(i,e)})}class v{constructor(t,n){this.id=t,this.bounds=n,this.info=null,this.uid=++v.uid}static{this.uid=0}}class m{constructor(t,n,e){this.component=t,this.index=n,this.bounds=e}}},21812:(t,n,e)=>{e.d(n,{_:()=>r});class r{constructor(t,n,e,r,i,o=!1,c=0){this.name=t,this.count=n,this.type=e,this.offset=r,this.stride=i,this.normalized=o,this.divisor=c}}}}]);
//# sourceMappingURL=60647.b89cbbdd.chunk.js.map