{"version":3,"file":"static/js/16553.fce847c6.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/support/labelFormatUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import r from\"../../core/Logger.js\";import{parseWhereClause as t}from\"../../core/sql.js\";import{formatDate as n,convertDateFormatToIntlOptions as a}from\"../../intl/date.js\";import{formatNumber as o}from\"../../intl/number.js\";import{isDateField as i,isNumericField as l}from\"./fieldUtils.js\";import{getLabelExpression as u,getSingleFieldArcadeExpression as s}from\"./labelUtils.js\";import{createLabelExpression as c}from\"../../support/arcadeOnDemand.js\";const f=r.getLogger(\"esri.layers.support.labelFormatUtils\"),m={type:\"simple\",evaluate:()=>null},p={getAttribute:(e,r)=>e.field(r)};async function d(r,n,a){if(!r||!r.symbol||!n)return m;const o=r.where,i=u(r);let l;if(\"arcade\"===i.type){const r=await c(i.expression,a,n);if(null==r)return m;l={type:\"arcade\",evaluate(t,n){try{const e=\"attributes\"in t?r.repurposeFeature(t):t;e.contextTimeZone=n??null;const a=r.evaluate({$view:{timeZone:n},$feature:e},r.services);if(null!=a)return a.toString()}catch(a){f.error(new e(\"arcade-expression-error\",\"Encountered an error when evaluating label expression for feature\",{error:a,feature:t,expression:i}))}return null},needsHydrationToEvaluate:()=>null==s(i.expression)}}else l={type:\"simple\",evaluate:e=>i.expression.replaceAll(/{[^}]*}/g,(r=>{const t=r.slice(1,-1),a=n.get(t);if(!a)return r;let o=null;if(\"attributes\"in e){e&&e.attributes&&(o=e.attributes[a.name])}else o=e.field(a.name);return null==o?\"\":g(o,a)}))};if(o){let r;try{r=await t(o,n)}catch(d){return f.error(new e(\"bad-where-clause\",\"Encountered an error when evaluating where clause, ignoring\",{where:o,error:d})),m}const a=l.evaluate;l.evaluate=(t,n)=>{const i=\"attributes\"in t?void 0:p;try{if(r.testFeature(t,i))return a(t,n)}catch(d){f.error(new e(\"bad-where-clause\",\"Encountered an error when evaluating where clause for feature\",{where:o,feature:t,error:d}))}return null}}return l}function g(e,r){if(null==e)return\"\";const t=r.domain;if(t)if(\"codedValue\"===t.type||\"coded-value\"===t.type){const r=e;for(const e of t.codedValues)if(e.code===r)return e.name}else if(\"range\"===t.type){const r=+e,n=\"range\"in t?t.range[0]:t.minValue,a=\"range\"in t?t.range[1]:t.maxValue;if(n<=r&&r<=a)return t.name}let u=e;return i(r)?u=n(u,a(\"short-date\")):l(r)&&(u=o(+u)),u||\"\"}export{d as createLabelFunction,g as formatField};\n"],"names":["f","r","m","type","evaluate","p","getAttribute","e","field","async","d","n","a","symbol","o","where","i","u","l","c","expression","t","repurposeFeature","contextTimeZone","$view","timeZone","$feature","services","toString","error","feature","needsHydrationToEvaluate","s","replaceAll","slice","get","attributes","name","g","testFeature","domain","codedValues","code","range","minValue","maxValue"],"sourceRoot":""}