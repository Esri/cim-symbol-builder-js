{"version":3,"file":"static/js/55039.8df58a9c.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/support/StreamConnection.js","../node_modules/@arcgis/core/layers/graphics/sources/connections/WebSocketConnection.js","../node_modules/@arcgis/core/layers/graphics/sources/connections/GeoEventConnection.js","../node_modules/@arcgis/core/layers/support/ClientSideConnection.js","../node_modules/@arcgis/core/layers/graphics/sources/connections/createConnection.js","../node_modules/@arcgis/core/rest/operations/urlUtils.js","../node_modules/@arcgis/core/rest/query/operations/query.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Error.js\";import o from\"../../core/Evented.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";let c=class extends o.EventedAccessor{destroy(){this.emit(\"destroy\")}get connectionError(){return this.errorString?new e(\"stream-connection\",this.errorString):null}onFeature(r){this.emit(\"data-received\",r)}onMessage(r){this.emit(\"message-received\",r)}};r([t({readOnly:!0})],c.prototype,\"connectionError\",null),c=r([s(\"esri.layers.support.StreamConnection\")],c);const n=c;export{n as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Error.js\";import o from\"../../../../core/Logger.js\";import{after as s,createResolver as r}from\"../../../../core/promiseUtils.js\";import{addQueryParameters as n}from\"../../../../core/urlUtils.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/RandomLCG.js\";import{subclass as c}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{getGeometryZScaler as a}from\"../../../../geometry/support/zscale.js\";import l from\"../../../support/StreamConnection.js\";var h;!function(e){e[e.CONNECTING=0]=\"CONNECTING\",e[e.OPEN=1]=\"OPEN\",e[e.CLOSING=2]=\"CLOSING\",e[e.CLOSED=3]=\"CLOSED\"}(h||(h={}));let d=class extends l{constructor(e){super({}),this._outstandingMessages=[],this.errorString=null;const{geometryType:t,spatialReference:o,sourceSpatialReference:s}=e;this._config=e,this._featureZScaler=a(t,s,o),this._open()}normalizeCtorArgs(){return{}}async _open(){await this._tryCreateWebSocket(),this.destroyed||await this._handshake()}destroy(){super.destroy(),null!=this._websocket&&(this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.onerror=null,this._websocket.onmessage=null,this._websocket.close()),this._websocket=null}get connectionStatus(){if(null==this._websocket)return\"disconnected\";switch(this._websocket.readyState){case h.CONNECTING:case h.OPEN:return\"connected\";case h.CLOSING:case h.CLOSED:return\"disconnected\"}}sendMessageToSocket(e){null!=this._websocket?this._websocket.send(JSON.stringify(e)):this._outstandingMessages.push(e)}sendMessageToClient(e){this._onMessage(e)}updateCustomParameters(e){this._config.customParameters=e,null!=this._websocket&&this._websocket.close()}async _tryCreateWebSocket(e=this._config.source.path,r=1e3,i=0){try{if(this.destroyed)return;const t=n(e,this._config.customParameters??{});this._websocket=await this._createWebSocket(t),this.notifyChange(\"connectionStatus\")}catch(c){const n=r/1e3;return this._config.maxReconnectionAttempts&&i>=this._config.maxReconnectionAttempts?(o.getLogger(this).error(new t(\"websocket-connection\",\"Exceeded maxReconnectionAttempts attempts. No further attempts will be made\")),void this.destroy()):(o.getLogger(this).error(new t(\"websocket-connection\",`Failed to connect. Attempting to reconnect in ${n}s`,c)),await s(r),this._tryCreateWebSocket(e,Math.min(1.5*r,1e3*this._config.maxReconnectionInterval),i+1))}}_setWebSocketJSONParseHandler(e){e.onmessage=e=>{try{const t=JSON.parse(e.data);this._onMessage(t)}catch(s){return void o.getLogger(this).error(new t(\"websocket-connection\",\"Failed to parse message, invalid JSON\",{error:s}))}}}_createWebSocket(e){return new Promise(((t,o)=>{const s=new WebSocket(e);s.onopen=()=>{if(s.onopen=null,this.destroyed)return s.onclose=null,void s.close();s.onclose=e=>this._onClose(e),s.onerror=e=>this._onError(e),this._setWebSocketJSONParseHandler(s),t(s)},s.onclose=e=>{s.onopen=s.onclose=null,o(e)}}))}async _handshake(e=1e4){const s=this._websocket;if(null==s)return;const n=r(),i=s.onmessage,{filter:c,outFields:a,spatialReference:l}=this._config;return n.timeout(e),s.onmessage=e=>{let r=null;try{r=JSON.parse(e.data)}catch(h){}r&&\"object\"==typeof r||(o.getLogger(this).error(new t(\"websocket-connection\",\"Protocol violation. Handshake failed - malformed message\",e.data)),n.reject(),this.destroy()),r.spatialReference?.wkid!==l?.wkid&&(o.getLogger(this).error(new t(\"websocket-connection\",`Protocol violation. Handshake failed - expected wkid of ${l.wkid}`,e.data)),n.reject(),this.destroy()),\"json\"!==r.format&&(o.getLogger(this).error(new t(\"websocket-connection\",\"Protocol violation. Handshake failed - format is not set\",e.data)),n.reject(),this.destroy()),c&&r.filter!==c&&o.getLogger(this).error(new t(\"websocket-connection\",\"Tried to set filter, but server doesn't support it\")),a&&r.outFields!==a&&o.getLogger(this).error(new t(\"websocket-connection\",\"Tried to set outFields, but server doesn't support it\")),s.onmessage=i;for(const t of this._outstandingMessages)s.send(JSON.stringify(t));this._outstandingMessages=[],n.resolve()},s.send(JSON.stringify({filter:c,outFields:a,format:\"json\",spatialReference:{wkid:l.wkid}})),n.promise}_onMessage(e){if(this.onMessage(e),\"type\"in e)switch(e.type){case\"features\":case\"featureResult\":for(const t of e.features)null!=this._featureZScaler&&this._featureZScaler(t.geometry),this.onFeature(t)}}_onError(e){const t=\"Encountered an error over WebSocket connection\";this._set(\"errorString\",t),o.getLogger(this).error(\"websocket-connection\",t)}_onClose(e){this._websocket=null,this.notifyChange(\"connectionStatus\"),1e3!==e.code&&o.getLogger(this).error(\"websocket-connection\",`WebSocket closed unexpectedly with error code ${e.code}`),this.destroyed||this._open()}};e([i()],d.prototype,\"connectionStatus\",null),e([i()],d.prototype,\"errorString\",void 0),d=e([c(\"esri.layers.graphics.sources.connections.WebSocketConnection\")],d);export{d as WebSocketConnection};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../request.js\";import r from\"../../../../core/Error.js\";import i from\"../../../../core/Logger.js\";import{createResolver as o}from\"../../../../core/promiseUtils.js\";import{addQueryParameters as s}from\"../../../../core/urlUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/RandomLCG.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import a from\"../../../../geometry/SpatialReference.js\";import{fromJSON as c}from\"../../../../geometry/support/jsonUtils.js\";import{WebSocketConnection as u}from\"./WebSocketConnection.js\";import{executeQuery as l}from\"../../../../rest/query/operations/query.js\";import f from\"../../../../rest/support/Query.js\";const h=1e4,d={maxQueryDepth:5,maxRecordCountFactor:3};let g=class extends u{constructor(e){super({...d,...e}),this._buddyServicesQuery=null,this._relatedFeatures=null}async _open(){const e=await this._fetchServiceDefinition(this._config.source);e.timeInfo.trackIdField||i.getLogger(this).warn(\"GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.\");const t=this._fetchWebSocketUrl(e.streamUrls,this._config.spatialReference);this._buddyServicesQuery||(this._buddyServicesQuery=this._queryBuddyServices()),await this._buddyServicesQuery,await this._tryCreateWebSocket(t);const{filter:r,outFields:o}=this._config;this.destroyed||this._setFilter(r,o)}_onMessage(e){if(\"attributes\"in e){let o;try{o=this._enrich(e),null!=this._featureZScaler&&this._featureZScaler(o.geometry)}catch(t){return void i.getLogger(this).error(new r(\"geoevent-connection\",\"Failed to parse message\",t))}this.onFeature(o)}else this.onMessage(e)}async _fetchServiceDefinition(e){const r={f:\"json\",...this._config.customParameters},i=t(e.path,{query:r,responseType:\"json\"}),o=(await i).data;return this._serviceDefinition=o,o}_fetchWebSocketUrl(e,t){const r=e[0],{urls:i,token:o}=r,n=this._inferWebSocketBaseUrl(i);return s(`${n}/subscribe`,{outSR:\"\"+t.wkid,token:o})}_inferWebSocketBaseUrl(e){if(1===e.length)return e[0];for(const t of e)if(t.includes(\"wss\"))return t;return i.getLogger(this).error(new r(\"geoevent-connection\",\"Unable to infer WebSocket url\",e)),null}async _setFilter(e,t){const s=this._websocket;if(null==s||null==e&&null==t)return;const n=JSON.stringify({filter:this._serializeFilter(e,t)});let a=!1;const c=o(),u=()=>{a||(this.destroyed||this._websocket!==s||i.getLogger(this).error(new r(\"geoevent-connection\",\"Server timed out when setting filter\")),c.reject())},l=e=>{const t=JSON.parse(e.data);t.filter&&(t.error&&(i.getLogger(this).error(new r(\"geoevent-connection\",\"Failed to set service filter\",t.error)),this._set(\"errorString\",`Could not set service filter - ${t.error}`),c.reject(t.error)),this._setWebSocketJSONParseHandler(s),a=!0,c.resolve())};return s.onmessage=l,s.send(n),setTimeout(u,h),c.promise}_serializeFilter(e,t){const o={};if(null==e&&null==t)return o;if(e?.geometry)try{const t=c(e.geometry);if(\"extent\"!==t.type)throw new r(`Expected extent but found type ${t.type}`);o.geometry=JSON.stringify(t.shiftCentralMeridian())}catch(s){i.getLogger(this).error(new r(\"geoevent-connection\",\"Encountered an error when setting connection geometryDefinition\",s))}return e?.where&&\"1 = 1\"!==e.where&&\"1=1\"!==e.where&&(o.where=e.where),null!=t&&(o.outFields=t.join(\",\")),o}_enrich(e){if(!this._relatedFeatures)return e;const t=this._serviceDefinition.relatedFeatures.joinField,o=e.attributes[t],s=this._relatedFeatures.get(o);if(!s)return i.getLogger(this).warn(\"geoevent-connection\",\"Feature join failed. Is the join field configured correctly?\",e),e;const{attributes:n,geometry:a}=s;for(const r in n)e.attributes[r]=n[r];return a&&(e.geometry=a),e.geometry||e.centroid||i.getLogger(this).error(new r(\"geoevent-connection\",\"Found malformed feature - no geometry found\",e)),e}async _queryBuddyServices(){try{const{relatedFeatures:e,keepLatestArchive:t}=this._serviceDefinition,r=this._queryRelatedFeatures(e),i=this._queryArchive(t);await r;const o=await i;if(!o)return;for(const s of o.features)this.onFeature(this._enrich(s))}catch(e){i.getLogger(this).error(new r(\"geoevent-connection\",\"Encountered an error when querying buddy services\",{error:e}))}}async _queryRelatedFeatures(e){if(!e)return;const t=await this._queryBuddy(e.featuresUrl);this._addRelatedFeatures(t)}async _queryArchive(e){if(e)return this._queryBuddy(e.featuresUrl)}async _queryBuddy(e){const t=new((await import(\"../../../FeatureLayer.js\")).default)({url:e}),{capabilities:r}=await t.load(),i=r.query.supportsMaxRecordCountFactor,o=r.query.supportsPagination,s=r.query.supportsCentroid,n=this._config.maxRecordCountFactor,c=t.capabilities.query.maxRecordCount,u=i?c*n:c,h=new f;if(h.outFields=this._config.outFields??[\"*\"],h.where=this._config.filter?.where??\"1=1\",h.returnGeometry=!0,h.returnExceededLimitFeatures=!0,h.outSpatialReference=a.fromJSON(this._config.spatialReference),s&&(h.returnCentroid=!0),i&&(h.maxRecordCountFactor=n),o)return h.num=u,t.destroy(),this._queryPages(e,h);const d=await l(e,h,this._config.sourceSpatialReference);return t.destroy(),d.data}async _queryPages(e,t,r=[],i=0){t.start=null!=t.num?i*t.num:null;const{data:o}=await l(e,t,this._config.sourceSpatialReference);return o.exceededTransferLimit&&i<(this._config.maxQueryDepth??0)?(o.features.forEach((e=>r.push(e))),this._queryPages(e,t,r,i+1)):(r.forEach((e=>o.features.push(e))),o)}_addRelatedFeatures(e){const t=new Map,r=e.features,i=this._serviceDefinition.relatedFeatures.joinField;for(const o of r){const e=o.attributes[i];t.set(e,o)}this._relatedFeatures=t}};g=e([n(\"esri.layers.graphics.sources.connections.GeoEventConnection\")],g);const y=g;export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import{getGeometryZScaler as o}from\"../../geometry/support/zscale.js\";import s from\"./StreamConnection.js\";let a=class extends s{constructor(e){super({}),this.connectionStatus=\"connected\",this.errorString=null;const{geometryType:r,spatialReference:t,sourceSpatialReference:s}=e;this._featureZScaler=o(r,s,t)}normalizeCtorArgs(){return{}}updateCustomParameters(e){}sendMessageToSocket(e){}sendMessageToClient(e){if(\"type\"in e)switch(e.type){case\"features\":case\"featureResult\":for(const r of e.features)null!=this._featureZScaler&&this._featureZScaler(r.geometry),this.onFeature(r)}this.onMessage(e)}};e([r()],a.prototype,\"connectionStatus\",void 0),e([r()],a.prototype,\"errorString\",void 0),a=e([t(\"esri.layers.support.ClientSideConnection\")],a);export{a as ClientSideConnection};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"./GeoEventConnection.js\";import{WebSocketConnection as t}from\"./WebSocketConnection.js\";import{ClientSideConnection as n}from\"../../../support/ClientSideConnection.js\";function o(e,t){if(null==e&&null==t)return null;const n={};return null!=t&&(n.geometry=t),null!=e&&(n.where=e),n}function r(r,i,s,c,l,u,a,m,p){const f={source:r,sourceSpatialReference:i,spatialReference:s,geometryType:c,filter:o(l,u),maxReconnectionAttempts:a,maxReconnectionInterval:m,customParameters:p};if(!r)return new n(f);return r.path.startsWith(\"wss://\")||r.path.startsWith(\"ws://\")?new t(f):new e(f)}export{r as createConnection};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nfunction t(n){const o={};for(const e in n){if(\"declaredClass\"===e)continue;const r=n[e];if(null!=r&&\"function\"!=typeof r)if(Array.isArray(r)){o[e]=[];for(let n=0;n<r.length;n++)o[e][n]=t(r[n])}else\"object\"==typeof r?r.toJSON&&(o[e]=JSON.stringify(r)):o[e]=r}return o}export{t as mapParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport t from\"../../../request.js\";import{urlToObject as e,join as n}from\"../../../core/urlUtils.js\";import{getJsonType as r}from\"../../../geometry/support/jsonUtils.js\";import{normalizeCentralMeridian as i}from\"../../../geometry/support/normalizeUtils.js\";import{srToRESTValue as a}from\"../../../geometry/support/spatialReferenceUtils.js\";import{mapParameters as o}from\"../../operations/urlUtils.js\";import{parsePBFFeatureQuery as u}from\"./pbfQueryUtils.js\";import{applyFeatureSetZUnitScaling as l}from\"./queryZScale.js\";const s=\"Layer does not support extent calculation.\";function m(t,e){if(e&&\"extent\"===t.type)return`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`;if(e&&\"point\"===t.type)return`${t.x},${t.y}`;const n=t.toJSON();return delete n.spatialReference,JSON.stringify(n)}function y(t,e){const n=t.geometry,i=t.toJSON();delete i.compactGeometryEnabled,delete i.defaultSpatialReferenceEnabled;const o=i;let u,l,s;if(null!=n&&(l=n.spatialReference,s=a(l),o.geometryType=r(n),o.geometry=m(n,t.compactGeometryEnabled),o.inSR=s),i.groupByFieldsForStatistics&&(o.groupByFieldsForStatistics=i.groupByFieldsForStatistics.join(\",\")),i.objectIds&&(o.objectIds=i.objectIds.join(\",\")),i.orderByFields&&(o.orderByFields=i.orderByFields.join(\",\")),!i.outFields||!i.returnDistinctValues&&(e?.returnCountOnly||e?.returnExtentOnly||e?.returnIdsOnly)?delete o.outFields:i.outFields.includes(\"*\")?o.outFields=\"*\":o.outFields=i.outFields.join(\",\"),i.outSR?(o.outSR=a(i.outSR),u=t.outSpatialReference):n&&(i.returnGeometry||i.returnCentroid)&&(o.outSR=o.inSR,u=l),i.returnGeometry&&delete i.returnGeometry,i.outStatistics&&(o.outStatistics=JSON.stringify(i.outStatistics)),i.fullText&&(o.fullText=JSON.stringify(i.fullText)),i.pixelSize&&(o.pixelSize=JSON.stringify(i.pixelSize)),i.quantizationParameters&&(t.defaultSpatialReferenceEnabled&&null!=l&&null!=t.quantizationParameters?.extent&&l.equals(t.quantizationParameters.extent.spatialReference)&&delete i.quantizationParameters.extent.spatialReference,o.quantizationParameters=JSON.stringify(i.quantizationParameters)),i.parameterValues&&(o.parameterValues=JSON.stringify(i.parameterValues)),i.rangeValues&&(o.rangeValues=JSON.stringify(i.rangeValues)),i.dynamicDataSource&&(o.layer=JSON.stringify({source:i.dynamicDataSource}),delete i.dynamicDataSource),i.timeExtent){const t=i.timeExtent,{start:e,end:n}=t;null==e&&null==n||(o.time=e===n?e:`${e??\"null\"},${n??\"null\"}`),delete i.timeExtent}return t.defaultSpatialReferenceEnabled&&null!=l&&null!=u&&l.equals(u)&&(o.defaultSR=o.inSR,delete o.inSR,delete o.outSR),o}async function c(t,e,n,r){const i=null!=e.timeExtent&&e.timeExtent.isEmpty?{data:{features:[]}}:await E(t,e,\"json\",r);return l(e,n,i.data),i}async function f(t,e,n,r){if(null!=e.timeExtent&&e.timeExtent.isEmpty)return{data:n.createFeatureResult()};const i=await d(t,e,r),a=i;return a.data=u(i.data,n),a}function d(t,e,n){return E(t,e,\"pbf\",n)}function p(t,e,n){return null!=e.timeExtent&&e.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):E(t,e,\"json\",n,{returnIdsOnly:!0})}function S(t,e,n){return null!=e.timeExtent&&e.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):E(t,e,\"json\",n,{returnIdsOnly:!0,returnCountOnly:!0})}async function x(t,e,n){if(null!=e.timeExtent&&e.timeExtent.isEmpty)return{data:{count:0,extent:null}};const r=await E(t,e,\"json\",n,{returnExtentOnly:!0,returnCountOnly:!0}),i=r.data;if(i.hasOwnProperty(\"extent\"))return r;if(i.features)throw new Error(s);if(i.hasOwnProperty(\"count\"))throw new Error(s);return r}async function E(r,a,u,l={},s={}){const m=\"string\"==typeof r?e(r):r,c=a.geometry?[a.geometry]:[],f=await i(c,null,{signal:l.signal}),d=f?.[0];null!=d&&((a=a.clone()).geometry=d);const p=o({...m.query,f:u,...s,...y(a,s)});return t(n(m.path,g(a,s)?\"query3d\":\"query\"),{...l,responseType:\"pbf\"===u?\"array-buffer\":\"json\",query:{...p,...l.query}})}function g(t,e){return null!=t.formatOf3DObjects&&!(e.returnCountOnly||e.returnExtentOnly||e.returnIdsOnly)}export{m as encodeGeometry,c as executeQuery,S as executeQueryForCount,x as executeQueryForExtent,p as executeQueryForIds,f as executeQueryPBF,d as executeQueryPBFBuffer,y as queryToQueryStringParameters,E as runQuery};\n"],"names":["c","o","EventedAccessor","destroy","this","emit","connectionError","errorString","e","onFeature","r","onMessage","t","readOnly","prototype","s","n","h","CONNECTING","OPEN","CLOSING","CLOSED","d","l","constructor","super","_outstandingMessages","geometryType","spatialReference","sourceSpatialReference","_config","_featureZScaler","a","_open","normalizeCtorArgs","_tryCreateWebSocket","destroyed","_handshake","_websocket","onopen","onclose","onerror","onmessage","close","connectionStatus","readyState","sendMessageToSocket","send","JSON","stringify","push","sendMessageToClient","_onMessage","updateCustomParameters","customParameters","source","path","i","_createWebSocket","notifyChange","maxReconnectionAttempts","getLogger","error","Math","min","maxReconnectionInterval","_setWebSocketJSONParseHandler","parse","data","Promise","WebSocket","_onClose","_onError","filter","outFields","timeout","reject","wkid","format","resolve","promise","type","features","geometry","_set","code","maxQueryDepth","maxRecordCountFactor","g","u","_buddyServicesQuery","_relatedFeatures","_fetchServiceDefinition","timeInfo","trackIdField","warn","_fetchWebSocketUrl","streamUrls","_queryBuddyServices","_setFilter","_enrich","f","query","responseType","_serviceDefinition","urls","token","_inferWebSocketBaseUrl","outSR","length","includes","_serializeFilter","setTimeout","shiftCentralMeridian","where","join","relatedFeatures","joinField","attributes","get","centroid","keepLatestArchive","_queryRelatedFeatures","_queryArchive","_queryBuddy","featuresUrl","_addRelatedFeatures","default","url","capabilities","load","supportsMaxRecordCountFactor","supportsPagination","supportsCentroid","maxRecordCount","returnGeometry","returnExceededLimitFeatures","outSpatialReference","fromJSON","returnCentroid","num","_queryPages","start","exceededTransferLimit","forEach","Map","set","y","m","p","startsWith","Array","isArray","toJSON","compactGeometryEnabled","defaultSpatialReferenceEnabled","xmin","ymin","xmax","ymax","x","inSR","groupByFieldsForStatistics","objectIds","orderByFields","returnDistinctValues","returnCountOnly","returnExtentOnly","returnIdsOnly","outStatistics","fullText","pixelSize","quantizationParameters","extent","equals","parameterValues","rangeValues","dynamicDataSource","layer","timeExtent","end","time","defaultSR","async","isEmpty","E","createFeatureResult","S","count","hasOwnProperty","Error","signal","clone","formatOf3DObjects"],"sourceRoot":""}