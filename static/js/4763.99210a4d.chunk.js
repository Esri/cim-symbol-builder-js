"use strict";(globalThis.webpackChunkmy_app=globalThis.webpackChunkmy_app||[]).push([[4763],{54763:(e,t,i)=>{i.r(t),i.d(t,{previewCIMSymbol:()=>d});var l=i(17842),n=i(78915),a=i(94304),o=i(31027),r=i(37817),s=i(69157);const h=new a.U(null,!0),c=(0,l.Wz)(r.b_.size),u=(0,l.Wz)(r.b_.maxSize),y=(0,l.Wz)(r.b_.lineWidth);function g(e){const t=e?.size;return"number"==typeof t?{width:t,height:t}:{width:null!=t&&"object"==typeof t&&"width"in t?t.width:null,height:null!=t&&"object"==typeof t&&"height"in t?t.height:null}}async function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{node:i,opacity:r,symbolConfig:d}=t,m=null!=d&&"object"==typeof d&&"isSquareFill"in d&&d.isSquareFill,f=t.cimOptions||t,p=f.geometryType||(0,o.JW)(e?.data?.symbol),w=g(t),{feature:b,fieldMap:v}=f;if(null==w.width||null==w.height){const t=await n.E0.resolveSymbolOverrides(e.data,b,null,v,p);if(!t)return null;(e=e.clone()).data={type:"CIMSymbolReference",symbol:t},e.data.primitiveOverrides=void 0;const i=[];n.B$.fetchResources(t,h.resourceManager,i),n.B$.fetchFonts(t,h.resourceManager,i),i.length>0&&await Promise.all(i);const l=n.B$.getEnvelope(t,null,h.resourceManager),a=l?.width,o=l?.height;w.width="esriGeometryPolygon"===p?c:"esriGeometryPolyline"===p?y:null!=a&&isFinite(a)?Math.min(a,u):c,w.height="esriGeometryPolygon"===p?c:null!=o&&isFinite(o)?Math.max(Math.min(o,u),1):c}const C=await h.rasterizeCIMSymbolAsync(e,b,w,m||"esriGeometryPolygon"!==p?a.C.Preview:a.C.Legend,v,p);if(!C)return null;const{width:M,height:z}=C,F=document.createElement("canvas");F.width=M,F.height=z,F.getContext("2d").putImageData(C,0,0);const L=(0,l.F2)(w.width),S=(0,l.F2)(w.height),P=new Image(L,S);P.src=F.toDataURL(),P.ariaLabel=t.ariaLabel??null,P.alt=t.ariaLabel??"",null!=r&&(P.style.opacity=`${r}`);let k=P;if(null!=t.effectView){const e={shape:{type:"image",x:0,y:0,width:L,height:S,src:P.src},fill:null,stroke:null,offset:[0,0]};k=(0,s.wh)([[e]],[L,S],{effectView:t.effectView,ariaLabel:t.ariaLabel})}return i&&k&&i.appendChild(k),k}}}]);
//# sourceMappingURL=4763.99210a4d.chunk.js.map