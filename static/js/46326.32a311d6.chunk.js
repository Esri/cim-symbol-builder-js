"use strict";(globalThis.webpackChunkmy_app=globalThis.webpackChunkmy_app||[]).push([[46326],{84683:(e,t,n)=>{n.d(t,{bU:()=>d,fC:()=>y,tp:()=>h,v7:()=>u});const i=new Float64Array(2),r=new Float64Array(2);function o(e){return"0123456789bcdefghjkmnpqrstuvwxyz"[e]}function a(e){return(e[0]+e[1])/2}function s(e,t,n){return e[0]=t,e[1]=n,e}function l(e,t){const n=a(e),i=t,r=!t;e[0]=r*e[0]+i*n,e[1]=r*n+i*e[1]}function p(e,t){const n=t>a(e);return l(e,n),n}function d(e,t){let n=-90,i=90,r=-180,o=180;for(let a=0;a<t;a++){const t=Math.ceil((a+1)/2),s=Math.floor((a+1)/2),l=1-a%2,p=30-(3*t+2*s),d=30-(2*t+3*s),u=3*l+2*(1-l),h=2*l+3*(1-l),y=3*l+7*(1-l)<<d,c=(7*l+3*(1-l)<<p&e.geohashX)>>p,m=(y&e.geohashY)>>d;for(let e=u-1;e>=0;e--){const t=(r+o)/2,n=c&1<<e?1:0;r=(1-n)*r+n*t,o=(1-n)*t+n*o}for(let e=h-1;e>=0;e--){const t=(n+i)/2,r=m&1<<e?1:0;n=(1-r)*n+r*t,i=(1-r)*t+r*i}}return[r,n,o,i]}function u(e,t,n,i){i%2&&(i+=1);let r=0,o=0,a=-90,s=90,l=-180,p=180;for(let d=0;d<i/2;d++){for(let e=0;e<5;e++){const t=(l+p)/2,i=n>t?1:0;r|=i<<29-(e+5*d),l=(1-i)*l+i*t,p=(1-i)*t+i*p}for(let e=0;e<5;e++){const n=(a+s)/2,i=t>n?1:0;o|=i<<29-(e+5*d),a=(1-i)*a+i*n,s=(1-i)*n+i*s}}e.geohashX=r,e.geohashY=o}function h(e,t,n,i,r){r%2&&(r+=1);let o=0,a=0,s=-90,l=90,p=-180,d=180;for(let u=0;u<r/2;u++){for(let e=0;e<5;e++){const t=(p+d)/2,n=i>t?1:0;o|=n<<29-(e+5*u),p=(1-n)*p+n*t,d=(1-n)*t+n*d}for(let e=0;e<5;e++){const t=(s+l)/2,i=n>t?1:0;a|=i<<29-(e+5*u),s=(1-i)*s+i*t,l=(1-i)*t+i*l}}e[2*t]=o,e[2*t+1]=a}function y(e,t,n){let a="";const l=s(i,-90,90),d=s(r,-180,180);for(let i=0;i<n;i++){let n=0;i%2?(n|=p(l,e)<<4,n|=p(d,t)<<3,n|=p(l,e)<<2,n|=p(d,t)<<1,n|=p(l,e)<<0):(n|=p(d,t)<<4,n|=p(l,e)<<3,n|=p(d,t)<<2,n|=p(l,e)<<1,n|=p(d,t)<<0),a+=o(n)}return a}},46326:(e,t,n)=>{n.r(t),n.d(t,{default:()=>nn});var i=n(27366),r=(n(59486),n(40281)),o=n(10064),a=n(32718),s=n(66978),l=n(49861),p=(n(25243),n(63780),n(93169)),d=n(69912),u=n(84683),h=n(30651),y=n(83406),c=n(80457),m=n(7138),f=n(77427),g=n(76672),_=n(80885),b=n(45925),w=n(92975),T=n(3182),E=n(77981);class C{constructor(){this._featureLookup=new Map}static getInstance(){return C.instance||(C.instance=new C),C.instance}static resetInstance(){C.instance&&(C.instance=null)}deleteFromStore(e){e.forEach((e=>{this._featureLookup.delete(e)}))}readFromStoreByList(e){const t=[];return e.forEach((e=>{const n=this.readFromStoreById(e);n&&t.push(n)})),t}readFromStoreById(e){return this._featureLookup.get(e)??null}writeToStore(e,t,n){const i=[];return e.forEach((e=>{if(!e?.id)return;e.properties||(e.properties=[]);let r,o=null;if(n&&e.properties[n]&&(o=(0,y.GH)(e.properties[n])),"originId"in e&&"destinationId"in e&&(e.properties.ESRI__ORIGIN_ID=e.originId,e.properties.ESRI__DESTINATION_ID=e.destinationId),e.properties[t]=e.id,e.id&&this._featureLookup.has(e.id)&&this._featureLookup.get(e.id).attributes){const i=this._featureLookup.get(e.id),a=JSON.parse(JSON.stringify(Object.assign(i.attributes,e.properties)));n&&e.properties[n]&&(a[n]=(0,E.im)(e.properties[n])),r=new T.u_(o?JSON.parse(JSON.stringify(o)):i?.geometry?JSON.parse(JSON.stringify(i.geometry)):null,a,null,e.properties[t])}else r=new T.u_(o?JSON.parse(JSON.stringify(o)):null,e.properties,null,e.properties[t]);this._featureLookup.set(e.id,r),i.push(r)})),i}}var I=n(19545),M=n(76200);let k=class extends m.Z{constructor(e){super(e),this.resultRows=[]}};(0,i._)([(0,l.Cb)()],k.prototype,"resultRows",void 0),k=(0,i._)([(0,d.j)("esri.rest.knowledgeGraph.GraphQueryResult")],k);let L=class extends m.Z{constructor(e){super(e),this.resultRowsStream=new ReadableStream}};(0,i._)([(0,l.Cb)()],L.prototype,"resultRowsStream",void 0),L=(0,i._)([(0,d.j)("esri.rest.knowledgeGraph.GraphQueryResult")],L);const x=L;var R=n(46784),v=n(78952);let D=class extends R.wq{constructor(e){super(e),this.name=null,this.unique=null,this.ascending=null,this.description=null,this.fieldNames=null}};(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],D.prototype,"name",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],D.prototype,"unique",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],D.prototype,"ascending",void 0),(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],D.prototype,"description",void 0),(0,i._)([(0,l.Cb)({type:[String],json:{write:!0}})],D.prototype,"fieldNames",void 0),D=(0,i._)([(0,d.j)("esri.rest.knowledgeGraph.FieldIndex")],D);const S=D;let G=class extends R.wq{constructor(e){super(e),this.name=null,this.alias=null,this.fieldType=null,this.geometryType=null,this.hasM=null,this.hasZ=null,this.nullable=null,this.editable=null,this.required=null,this.defaultVisibility=null,this.systemMaintained=null,this.role=null,this.defaultValue=null}};(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],G.prototype,"name",void 0),(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],G.prototype,"alias",void 0),(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],G.prototype,"fieldType",void 0),(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],G.prototype,"geometryType",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],G.prototype,"hasM",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],G.prototype,"hasZ",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],G.prototype,"nullable",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],G.prototype,"editable",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],G.prototype,"required",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],G.prototype,"defaultVisibility",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],G.prototype,"systemMaintained",void 0),(0,i._)([(0,l.Cb)()],G.prototype,"role",void 0),(0,i._)([(0,l.Cb)({type:Object,json:{type:String,write:{writer:(e,t)=>{t.defaultValue=null!=e?e.toString():null}}}})],G.prototype,"defaultValue",void 0),G=(0,i._)([(0,d.j)("esri.rest.knowledgeGraph.GraphProperty")],G);const N=G;let O=class extends R.wq{constructor(e){super(e),this.name=null,this.alias=null,this.role=null,this.strict=null,this.properties=null,this.fieldIndexes=null}};(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],O.prototype,"name",void 0),(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],O.prototype,"alias",void 0),(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],O.prototype,"role",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],O.prototype,"strict",void 0),(0,i._)([(0,l.Cb)({type:[N],json:{write:!0}})],O.prototype,"properties",void 0),(0,i._)([(0,l.Cb)({type:[S],json:{write:!0}})],O.prototype,"fieldIndexes",void 0),O=(0,i._)([(0,d.j)("esri.rest.knowledgeGraph.GraphObjectType")],O);const j=O;let P=class extends j{constructor(e){super(e)}};P=(0,i._)([(0,d.j)("esri.rest.knowledgeGraph.EntityType")],P);const F=P;let A=class extends j{constructor(e){super(e),this.endPoints=[]}};(0,i._)([(0,l.Cb)()],A.prototype,"endPoints",void 0),A=(0,i._)([(0,d.j)("esri.rest.knowledgeGraph.RelationshipType")],A);const Z=A;let U=class extends R.wq{constructor(e){super(e),this.timestamp=null,this.spatialReference=null,this.strict=null,this.objectIdField=null,this.globalIdField=null,this.arcgisManaged=null,this.identifierInfo=null,this.searchIndexes=null,this.entityTypes=null,this.relationshipTypes=null}};(0,i._)([(0,l.Cb)({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.timestamp=e?.getTime()}}}})],U.prototype,"timestamp",void 0),(0,i._)([(0,l.Cb)({type:v.Z,json:{write:!0}})],U.prototype,"spatialReference",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],U.prototype,"strict",void 0),(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],U.prototype,"objectIdField",void 0),(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],U.prototype,"globalIdField",void 0),(0,i._)([(0,l.Cb)()],U.prototype,"arcgisManaged",void 0),(0,i._)([(0,l.Cb)()],U.prototype,"identifierInfo",void 0),(0,i._)([(0,l.Cb)()],U.prototype,"searchIndexes",void 0),(0,i._)([(0,l.Cb)({type:[F],json:{write:!0}})],U.prototype,"entityTypes",void 0),(0,i._)([(0,l.Cb)({type:[Z],json:{write:!0}})],U.prototype,"relationshipTypes",void 0),U=(0,i._)([(0,d.j)("esri.rest.knowledgeGraph.DataModel")],U);const Y=U;let z=class extends R.wq{constructor(e){super(e),this.capabilities=[],this.supportsSearch=!1,this.supportedQueryFormats=[],this.allowGeometryUpdates=!1,this.searchMaxRecordCount=null,this.serviceCapabilities=null,this.maxRecordCount=null,this.description="",this.copyrightText="",this.units="",this.spatialReference=null,this.currentVersion=null,this.dateFieldsTimeReference=null,this.serviceItemId="",this.supportsDocuments=!1,this.dataEditingNotSupported=!1,this.schemaEditingNotSupported=!1}};(0,i._)([(0,l.Cb)({type:[String],json:{write:!0}})],z.prototype,"capabilities",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],z.prototype,"supportsSearch",void 0),(0,i._)([(0,l.Cb)({type:[String],json:{write:!0}})],z.prototype,"supportedQueryFormats",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],z.prototype,"allowGeometryUpdates",void 0),(0,i._)([(0,l.Cb)({type:Number,json:{write:!0}})],z.prototype,"searchMaxRecordCount",void 0),(0,i._)([(0,l.Cb)({type:Object,json:{write:!0}})],z.prototype,"serviceCapabilities",void 0),(0,i._)([(0,l.Cb)({type:Number,json:{write:!0}})],z.prototype,"maxRecordCount",void 0),(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],z.prototype,"description",void 0),(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],z.prototype,"copyrightText",void 0),(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],z.prototype,"units",void 0),(0,i._)([(0,l.Cb)({type:Object,json:{write:!0}})],z.prototype,"spatialReference",void 0),(0,i._)([(0,l.Cb)({type:Number,json:{write:!0}})],z.prototype,"currentVersion",void 0),(0,i._)([(0,l.Cb)({type:Object,json:{write:!0}})],z.prototype,"dateFieldsTimeReference",void 0),(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],z.prototype,"serviceItemId",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],z.prototype,"supportsDocuments",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],z.prototype,"dataEditingNotSupported",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],z.prototype,"schemaEditingNotSupported",void 0),z=(0,i._)([(0,d.j)("esri.rest.knowledgeGraph.ServiceDefinition")],z);const Q=z;let q=class extends R.wq{constructor(e){super(e),this.dataModel=null,this.serviceDefinition=null}};(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],q.prototype,"url",void 0),(0,i._)([(0,l.Cb)({type:Y,json:{write:!0}})],q.prototype,"dataModel",void 0),(0,i._)([(0,l.Cb)({type:Q,json:{write:!0}})],q.prototype,"serviceDefinition",void 0),q=(0,i._)([(0,d.j)("esri.rest.knowledgeGraph.KnowledgeGraph")],q);const $=q;var B=n(65905);const H="esri/rest/knowledgeGraph/wasmInterface/";let J,V=null;async function W(){const e=V??J;if(e)return e;const t=(0,p.Z)("wasm-simd");return J=async function(e){if(e){const{default:e}=await n.e(2717).then(n.bind(n,2717)).then((e=>e.a));return e({locateFile:e=>(0,B.V)(H+e)})}const{default:t}=await n.e(43415).then(n.bind(n,43415)).then((e=>e.a));return t({locateFile:e=>(0,B.V)(H+e)})}(t),J}var K=n(77577),X=n(585),ee=n(29909),te=n(32238);function ne(e,t){const n=new t.ArrayValue;return n.deleteLater(),e.forEach((e=>{n.add_value(oe(e,t))})),n}function ie(e,t){const n=new t.ObjectValue;n.deleteLater();for(const[i,r]of Object.entries(e))n.set_key_value(i,oe(r,t));return n}function re(e,t){if(e instanceof K.Z)return function(e,t){const n=new t.GeometryValue;n.deleteLater(),n.geometry_type=n.geometry_type=t.esriGeometryType.esriGeometryMultipoint,n.has_z=e.hasZ,n.has_m=e.hasM;const i=[],r=[];r[0]=e.points.length;let o=0;return e.points.forEach((e=>{e.forEach((e=>{i[o]=e,o++}))})),n.coords=new Float64Array(i),n.lengths=new Uint32Array(r),n}(e,t);if(e instanceof X.Z)return function(e,t){const n=new t.GeometryValue;n.deleteLater(),n.geometry_type=t.esriGeometryType.esriGeometryPoint,n.has_z=e.hasZ,n.has_m=e.hasM;const i=[],r=[];r[0]=1,i[0]=e.x,i[1]=e.y;let o=2;return e.hasZ&&(i[o]=e.z,o++),e.hasM&&(i[o]=e.m,o++),n.coords=new Float64Array(i),n.lengths=new Uint32Array(r),n}(e,t);if(e instanceof ee.Z||e instanceof _.Z)return function(e,t){const n=new t.GeometryValue;n.deleteLater(),n.has_z=e.hasZ,n.has_m=e.hasM;const i=[],r=[];let o=[];e instanceof ee.Z?(n.geometry_type=t.esriGeometryType.esriGeometryPolyline,o=e.paths):e instanceof _.Z&&(n.geometry_type=t.esriGeometryType.esriGeometryPolygon,o=e.rings);let a=0,s=0;return o.forEach((e=>{let t=0;e.forEach((e=>{t++,e.forEach((e=>{i[s]=e,s++}))})),r[a]=t,a++})),n.coords=new Float64Array(i),n.lengths=new Uint32Array(r),n}(e,t);throw new o.Z("knowledge-graph:unsupported-geometry","Only Point, Multipoint, Polyline, and Polygon geometry are supported by ArcGIS Knowledge",{geometry:e})}function oe(e,t){if(null==e)return"";if("object"!=typeof e)return e;if(e instanceof Date)return e;if(e instanceof te.Z)return re(e,t);if(Array.isArray(e)){const n=new t.ArrayValue;return n.deleteLater(),e.forEach((e=>{n.add_value(oe(e,t))})),n}return ie(e,t)}let ae=class extends R.wq{constructor(e){super(e),this.properties=null}};(0,i._)([(0,l.Cb)({json:{write:!0}})],ae.prototype,"properties",void 0),ae=(0,i._)([(0,d.j)("esri.rest.knowledgeGraph.GraphObject")],ae);const se=ae;let le=class extends se{constructor(e){super(e),this.typeName=null,this.id=null}};(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],le.prototype,"typeName",void 0),(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],le.prototype,"id",void 0),le=(0,i._)([(0,d.j)("esri.rest.knowledgeGraph.GraphNamedObject")],le);const pe=le;let de=class extends pe{constructor(e){super(e),this.layoutGeometry=null}};(0,i._)([(0,l.Cb)({type:X.Z,json:{write:!0}})],de.prototype,"layoutGeometry",void 0),de=(0,i._)([(0,d.j)("esri.rest.knowledgeGraph.Entity")],de);const ue=de;let he=class extends pe{constructor(e){super(e),this.originId=null,this.destinationId=null,this.layoutGeometry=null}};(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],he.prototype,"originId",void 0),(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],he.prototype,"destinationId",void 0),(0,i._)([(0,l.Cb)({type:ee.Z,json:{write:!0}})],he.prototype,"layoutGeometry",void 0),he=(0,i._)([(0,d.j)("esri.rest.Relationship.Relationship")],he);const ye=he;let ce=class extends m.Z{constructor(e){super(e),this.name=null,this.supportedCategory=null,this.analyzers=[],this.searchProperties=new Map}};(0,i._)([(0,l.Cb)()],ce.prototype,"name",void 0),(0,i._)([(0,l.Cb)()],ce.prototype,"supportedCategory",void 0),(0,i._)([(0,l.Cb)()],ce.prototype,"analyzers",void 0),(0,i._)([(0,l.Cb)()],ce.prototype,"searchProperties",void 0),ce=(0,i._)([(0,d.j)("esri.rest.knowledgeGraph.SearchIndex")],ce);const me=ce;var fe,ge,_e,be,we,Te,Ee;function Ce(e){return e.deleteLater(),new F(Me(e))}function Ie(e){return e.deleteLater(),new S({name:e.name,unique:e.unique,ascending:e.ascending,description:e.description,fieldNames:Re(e.fields)})}function Me(e){return{name:e.name,alias:e.alias,role:fe[e.role.value]?fe[e.role.value]:null,strict:e.strict,properties:ve(e.properties),fieldIndexes:De(e.field_indexes)}}function ke(e){return e.deleteLater(),new N({alias:e.alias,name:e.name,fieldType:ge[e.field_type.value]?ge[e.field_type.value]:null,geometryType:_e[e.geometry_type.value]?_e[e.geometry_type.value]:null,hasM:e.has_m,hasZ:e.has_z,nullable:e.nullable,editable:e.editable,required:e.required,defaultVisibility:e.default_visibility,systemMaintained:e.system_maintained,role:Te[e.role.value],defaultValue:e.default_value})}function Le(e){e.deleteLater();const t=Me(e),n=[];for(let i=0;i<e.end_points.size();i++){const t=e.end_points.get(i);n.push({originEntityType:t.origin_entity_type,destinationEntityType:t.dest_entity_type})}return new Z(Object.assign({endPoints:n},t))}function xe(e){const t=[];for(let n=0;n<e.size();n++)t.push(Ce(e.get(n)));return t}function Re(e){const t=[];for(let n=0;n<e.size();n++)t.push(e.get(n));return t}function ve(e){const t=[];for(let n=0;n<e.size();n++)t.push(ke(e.get(n)));return t}function De(e){const t=[];for(let n=0;n<e.size();n++)t.push(Ie(e.get(n)));return t}function Se(e){const t=[];for(let n=0;n<e.size();n++)t.push(Le(e.get(n)));return t}function Ge(e){const t=[];for(let n=0;n<e.size();n++){const n=new me,i=e.get(0);n.name=i.name,n.supportedCategory=we[i.supported_category.value];const r=i.analyzers.size();for(let e=0;e<r;e++)n.analyzers.push({name:i.analyzers.get(e).name});for(let e=0;e<i.search_properties.keys().size();e++){const t=i.search_properties.keys().get(e),r=i.search_properties.get(t),o=[];for(let e=0;e<r.property_names.size();e++)o.push(r.property_names.get(e));n.searchProperties.set(t,{propertyNames:o})}t.push(n)}return t}!function(e){e[e.Regular=0]="Regular",e[e.Provenance=1]="Provenance",e[e.Document=2]="Document"}(fe||(fe={})),function(e){e[e.esriFieldTypeSmallInteger=0]="esriFieldTypeSmallInteger",e[e.esriFieldTypeInteger=1]="esriFieldTypeInteger",e[e.esriFieldTypeSingle=2]="esriFieldTypeSingle",e[e.esriFieldTypeDouble=3]="esriFieldTypeDouble",e[e.esriFieldTypeString=4]="esriFieldTypeString",e[e.esriFieldTypeDate=5]="esriFieldTypeDate",e[e.esriFieldTypeOID=6]="esriFieldTypeOID",e[e.esriFieldTypeGeometry=7]="esriFieldTypeGeometry",e[e.esriFieldTypeBlob=8]="esriFieldTypeBlob",e[e.esriFieldTypeRaster=9]="esriFieldTypeRaster",e[e.esriFieldTypeGUID=10]="esriFieldTypeGUID",e[e.esriFieldTypeGlobalID=11]="esriFieldTypeGlobalID",e[e.esriFieldTypeXML=12]="esriFieldTypeXML",e[e.esriFieldTypeBigInteger=13]="esriFieldTypeBigInteger",e[e.esriFieldTypeDateOnly=14]="esriFieldTypeDateOnly",e[e.esriFieldTypeTimeOnly=15]="esriFieldTypeTimeOnly",e[e.esriFieldTypeTimestampOffset=16]="esriFieldTypeTimestampOffset"}(ge||(ge={})),function(e){e[e.esriGeometryNull=0]="esriGeometryNull",e[e.esriGeometryPoint=1]="esriGeometryPoint",e[e.esriGeometryMultipoint=2]="esriGeometryMultipoint",e[e.esriGeometryPolyline=3]="esriGeometryPolyline",e[e.esriGeometryPolygon=4]="esriGeometryPolygon",e[e.esriGeometryEnvelope=5]="esriGeometryEnvelope",e[e.esriGeometryAny=6]="esriGeometryAny",e[e.esriGeometryMultiPatch=7]="esriGeometryMultiPatch"}(_e||(_e={})),function(e){e[e.esriMethodHintUNSPECIFIED=0]="esriMethodHintUNSPECIFIED",e[e.esriUUIDESRI=1]="esriUUIDESRI",e[e.esriUUIDRFC4122=2]="esriUUIDRFC4122"}(be||(be={})),function(e){e[e.esriTypeUNSPECIFIED=0]="esriTypeUNSPECIFIED",e[e.esriTypeEntity=1]="esriTypeEntity",e[e.esriTypeRelationship=2]="esriTypeRelationship",e[e.esriTypeBoth=4]="esriTypeBoth"}(we||(we={})),function(e){e[e.esriGraphPropertyUNSPECIFIED=0]="esriGraphPropertyUNSPECIFIED",e[e.esriGraphPropertyRegular=1]="esriGraphPropertyRegular",e[e.esriGraphPropertyDocumentName=2]="esriGraphPropertyDocumentName",e[e.esriGraphPropertyDocumentTitle=3]="esriGraphPropertyDocumentTitle",e[e.esriGraphPropertyDocumentUrl=4]="esriGraphPropertyDocumentUrl",e[e.esriGraphPropertyDocumentText=5]="esriGraphPropertyDocumentText",e[e.esriGraphPropertyDocumentKeywords=6]="esriGraphPropertyDocumentKeywords",e[e.esriGraphPropertyDocumentContentType=7]="esriGraphPropertyDocumentContentType",e[e.esriGraphPropertyDocumentMetadata=8]="esriGraphPropertyDocumentMetadata",e[e.esriGraphPropertyDocumentFileExtension=9]="esriGraphPropertyDocumentFileExtension"}(Te||(Te={})),function(e){e[e.esriIdentifierInfoTypeUNSPECIFIED=0]="esriIdentifierInfoTypeUNSPECIFIED",e[e.esriIdentifierInfoTypeDatabaseNative=1]="esriIdentifierInfoTypeDatabaseNative",e[e.esriIdentifierInfoTypeUniformProperty=2]="esriIdentifierInfoTypeUniformProperty"}(Ee||(Ee={}));let Ne=class extends se{constructor(e){super(e)}};Ne=(0,i._)([(0,d.j)("esri.rest.knowledgeGraph.ObjectValue")],Ne);const Oe=Ne;let je=class extends R.wq{constructor(e){super(e),this.path=null}};(0,i._)([(0,l.Cb)({type:[se],json:{write:!0}})],je.prototype,"path",void 0),je=(0,i._)([(0,d.j)("esri.rest.knowledgeGraph.Path")],je);const Pe=je;var Fe,Ae,Ze;function Ue(e){const t={},n=Ye(e,t),i=e.lengths,r=e.coords;let a="";if(e.geometry_type.value===Fe.ESRI_GEOMETRY_POLYGON)a="rings";else{if(e.geometry_type.value!==Fe.ESRI_GEOMETRY_POLYLINE)throw new o.Z("KnowledgeGraph:illegal-geometry-type","Illegal Geometry type for multipath conversion");a="paths"}t[a]=[];let s=0;return i.forEach((e=>{const i=[];for(let t=0;t<e;t++){const e=[];for(let t=0;t<n;t++)e[t]=r[s],s++;i.push(e)}t[a].push(i)})),t}function Ye(e,t){let n=2;return e.has_z?(t.hasZ=e.has_z,n++):t.hasZ=!1,e.has_m?(t.hasM=e.has_m,n++):t.hasM=!1,n}!function(e){e[e.ESRI_GEOMETRY_NULL=0]="ESRI_GEOMETRY_NULL",e[e.ESRI_GEOMETRY_POINT=1]="ESRI_GEOMETRY_POINT",e[e.ESRI_GEOMETRY_MULTIPOINT=2]="ESRI_GEOMETRY_MULTIPOINT",e[e.ESRI_GEOMETRY_POLYLINE=3]="ESRI_GEOMETRY_POLYLINE",e[e.ESRI_GEOMETRY_POLYGON=4]="ESRI_GEOMETRY_POLYGON",e[e.ESRI_GEOMETRY_ENVELOPE=5]="ESRI_GEOMETRY_ENVELOPE",e[e.ESRI_GEOMETRY_ANY=6]="ESRI_GEOMETRY_ANY",e[e.ESRI_GEOMETRY_MULTI_PATCH=7]="ESRI_GEOMETRY_MULTI_PATCH"}(Fe||(Fe={})),function(e){e[e.OBJECT=0]="OBJECT",e[e.ENTITY=1]="ENTITY",e[e.RELATIONSHIP=2]="RELATIONSHIP",e[e.PATH=3]="PATH",e[e.ARRAY=4]="ARRAY"}(Ae||(Ae={})),function(e){e[e.view=0]="view",e[e.edit=1]="edit"}(Ze||(Ze={}));const ze=a.Z.getLogger("esri.rest.knowledgeGraph.WasmToQueryResponseObjConstructors"),Qe=(e,t)=>{if(null==e)return null;if("object"!=typeof e)return e;if("getDate"in e)return e;if("geometry_type"in e)switch(e.geometry_type.value){case null:return null;case Fe.ESRI_GEOMETRY_POINT:return function(e){const t={};let n=2;Ye(e,t);const i=e.coords;return t.x=i[0],t.y=i[1],e.has_z&&(t.z=i[n],n++),e.has_m&&(t.m=i[n]),new X.Z(t)}(e);case Fe.ESRI_GEOMETRY_MULTIPOINT:return function(e){const t={},n=Ye(e,t),i=e.lengths,r=e.coords,o=i[0];t.points=[];let a=0;for(let s=0;s<o;s++){const e=[];for(let t=0;t<n;t++)e[t]=r[a],a++;t.points.push(e)}return new K.Z(t)}(e);case Fe.ESRI_GEOMETRY_POLYLINE:return function(e){return new ee.Z(Ue(e))}(e);case Fe.ESRI_GEOMETRY_POLYGON:return function(e){return new _.Z(Ue(e))}(e);case Fe.ESRI_GEOMETRY_ENVELOPE:case Fe.ESRI_GEOMETRY_MULTI_PATCH:return ze.warnOnce("Envelope and Multipatch are not supported on knowledge entities, but one of those geometry types was detected. Result interpreted as null"),null;case Fe.ESRI_GEOMETRY_NULL:case Fe.ESRI_GEOMETRY_ANY:default:return ze.warnOnce("Unknown or blank geometry type returned - Result interpreted as null"),null}else{if(!("object_value_type"in e))return ze.warnOnce("A decoded value came back of a type that is not supported. Result interpreted as null"),null;switch(e.object_value_type.value){case Ae.OBJECT:return function(e,t){return new Oe(Be(e,t))}(e,t);case Ae.ENTITY:return $e(e,t);case Ae.RELATIONSHIP:return He(e,t);case Ae.PATH:return function(e,t){const n=e.entity_count(),i=e.relationship_count(),r=[];for(let o=0;o<n;o++)r.push($e(e.get_entity_at(o),t)),o<i&&r.push(He(e.get_relationship_at(o),t));return new Pe({path:r})}(e,t);case Ae.ARRAY:return function(e,t){const n=[],i=e.count();for(let r=0;r<i;r++){const i=e.get_value_at(r);n.push(qe(i,t))}return n}(e,t);default:return ze.warnOnce("Unknown graph object type detected!  Result interpreted as null"),null}}};function qe(e,t){return Qe(e,t)}function $e(e,t){const n=e.type_name,i=Be(e,t),r=e.get_id();return new ue(Object.assign({typeName:n,id:r},i))}function Be(e,t){const n={},i=e.key_count();for(let r=0;r<i;r++)n[e.get_key_at(r)]=qe(e.get_value_at(r),t);return{properties:n}}function He(e,t){const n=e.type_name,i=Be(e,t);return new ye(Object.assign({typeName:n,id:e.get_id(),originId:e.get_origin_entity_id(),destinationId:e.get_destination_entity_id()},i))}let Je=class extends m.Z{constructor(e){super(e),this.hasError=null,this.error=null,this.editResults=[]}};(0,i._)([(0,l.Cb)()],Je.prototype,"hasError",void 0),(0,i._)([(0,l.Cb)()],Je.prototype,"error",void 0),(0,i._)([(0,l.Cb)()],Je.prototype,"editResults",void 0),Je=(0,i._)([(0,d.j)("esri.rest.knowledgeGraph.GraphApplyEdits")],Je);const Ve=async e=>{const t=new $({url:e}),n=[];return n.push(nt(t)),n.push(async function(e){return Ke(e)}(t)),await Promise.all(n),t},We=async e=>{e.dataModel=await pt(e)},Ke=async e=>{const t=(await(0,M.Z)(e.url,{query:{f:"json"}})).data;return t.capabilities=t?.capabilities?.split(","),t.supportedQueryFormats=t?.supportedQueryFormats?.split(","),e.serviceDefinition=new Q(t),e.serviceDefinition},Xe=async(e,t,n)=>{const i=`${e.url}/graph/query`;await rt(e);const r=await at(i,n);r.data.body=await async function(e,t){const n=await W(),i=new n.GraphQueryRequestEncoder;if(i.deleteLater(),i.output_spatial_reference=n.SpatialReferenceUtil.WGS84(),i.open_cypher_query=e.openCypherQuery,e.bindParameters)for(const[r,o]of Object.entries(e.bindParameters))ot(r,o,i,n);if(e.bindGeometryQuantizationParameters)!function(e,t){t.input_quantization_parameters={xy_resolution:e.xyResolution,x_false_origin:e.xFalseOrigin,y_false_origin:e.yFalseOrigin,z_resolution:e.zResolution,z_false_origin:e.zFalseOrigin,m_resolution:e.mResolution,m_false_origin:e.mFalseOrigin}}(e.bindGeometryQuantizationParameters,i);else{if(t.dataModel||await nt(t),4326!==t.dataModel?.spatialReference?.wkid)throw new o.Z("knowledge-graph:SR-quantization-mismatch","If the DataModel indicates a coordinate system other than WGS84, inputQuantizationParameters must be provided to the query encoder");i.input_quantization_parameters=n.InputQuantizationUtil.WGS84_lossless()}e.outputQuantizationParameters&&function(e,t,n){if(!e.extent)throw new o.Z("knowledge-graph:illegal-output-quantization","The Output quantization provided to the encoder had an illegal value as part of its extent",e.extent);if(!e.quantizeMode)throw new o.Z("knowledge-graph:illegal-output-quantization","The Output quantization contained an illegal mode setting",e.quantizeMode);if(!e.tolerance)throw new o.Z("knowledge-graph:illegal-output-quantization","The Output quantization contained an illegal tolerance setting",e.quantizeMode);t.output_quantization_parameters={extent:{xmax:e.extent.xmax,ymax:e.extent.ymax,xmin:e.extent.xmin,ymin:e.extent.ymin},quantize_mode:n.esriQuantizeMode[e.quantizeMode],tolerance:e.tolerance}}(e.outputQuantizationParameters,i,n);try{i.encode()}catch(r){throw new o.Z("knowledge-graph:query-encoding-failed","Attempting to encode the query failed",{error:r})}const a=i.get_encoding_result();if(0!==a.error.error_code)throw new o.Z("knowledge-graph:query-encoding-failed","Attempting to encode the query failed",{errorCode:a.error.error_code,errorMessage:a.error.error_message});return a.get_byte_buffer()}(t,e);const a=await it(r.data.url,r.data);if(e.dataModel)return new x({resultRowsStream:await lt(a,e.dataModel)});throw new o.Z("knowledge-graph:undefined-data-model","The KnowledgeGraph supplied did not have a data model")},et=async(e,t)=>fetch(e,t);async function tt(e,t,n){return Xe(e,t,n)}async function nt(e){return We(e)}async function it(e,t){return et(e,t)}async function rt(e){const t=I.id?.findCredential(e.url);t||(e.dataModel?await pt(e):await nt(e))}function ot(e,t,n,i){null==t?n.set_param_key_value(e,""):"object"!=typeof t||t instanceof Date?n.set_param_key_value(e,t):t instanceof te.Z?n.set_param_key_value(e,re(t,i)):t instanceof Array?n.set_param_key_value(e,ne(t,i)):n.set_param_key_value(e,ie(t,i))}async function at(e,t){return(0,M.Z)(e,{responseType:"native-request-init",method:"post",query:{f:"pbf",...t?.query},body:"x",headers:{"Content-Type":"application/octet-stream"},signal:t?.signal,timeout:t?.timeout})}function st(e,t,n){e.push_buffer(new Uint8Array(t));const i=[];let r=0;for(;e.next_row();){r||(r=e.get_header_keys().size());const t=new Array(r);for(let i=0;i<r;i++){const r=e.get_value(i);t[i]=qe(r,n)}i.push(t)}if(e.has_error())throw new o.Z("knowledge-graph:stream-decoding-error","One or more result rows were not successfully decoded",{errorCode:e.error.error_code,errorMessage:e.error.error_message});return i}async function lt(e,t){const n=e.headers.get("content-type");if(e.headers.get("content-length")&&a.Z.getLogger("esri.rest.knowledgeGraph.knowledgeGraphService").warnOnce("Found `Content-Length` header when expecting a streaming HTTP response! Please investigate whether all intermediate HTTP proxies and/or load balancers are configured such that they don't forcefully buffer the entire response before returning it to the client. A valid HTTP streaming response should use Chunked Transfer Encoding and not have a Content Length defined."),n?.includes("application/x-protobuf")){const n=e.body?.getReader(),i=new((await W()).GraphQueryDecoder);return i.deleteLater(),new ReadableStream({async start(e){try{return function r(){return n?.read().then((a=>{let{done:s,value:l}=a;if(s){let t;if(i.has_error()&&(t=new o.Z("knowledge-graph:stream-decoding-error","One or more result rows were not successfully decoded",{errorCode:i.error.error_code,errorMessage:i.error.error_message})),n.releaseLock(),t)throw e.error(t),t;return void e.close()}const p=st(i,l,t);return p.length>0&&e.enqueue(p),r()}))}()}catch(r){n?.releaseLock(),e.error(new o.Z("knowledge-graph:stream-decoding-error","The server returned a valid response, but there was an error decoding the response stream",{error:r})),e.close()}}})}throw new o.Z("knowledge-graph:unexpected-server-response","server returned an unexpected response",{responseType:n,data:e.text()})}async function pt(e){const t=`${e.url}/dataModel/queryDataModel`,n=await(0,M.Z)(t,{responseType:"array-buffer",query:{f:"pbf"}}),i=n.getHeader?.("content-type"),r=n.data;if(i?.includes("application/x-protobuf")){const e=(await W()).decode_data_model_from_protocol_buffer(new Uint8Array(r));if(!e)throw new o.Z("knowledge-graph:data-model-decode-failure","The server responded to the data model query, but the response failed to be decoded.  This typically occurs when the Knowledge JS API (4.26 or later) is used with an unsupported backend (11.0 or earlier)");return function(e){return e.deleteLater(),new Y({timestamp:e.timestamp,spatialReference:new v.Z(e.spatial_reference),strict:e.strict,objectIdField:e.objectid_property,globalIdField:e.globalid_property,arcgisManaged:e.arcgis_managed,identifierInfo:{identifierMappingInfo:{identifierInfoType:Ee[e.identifier_info?.identifier_mapping_info?.identifier_info_type?.value],databaseNativeIdentifier:e.identifier_info?.identifier_mapping_info?.database_native_identifier,uniformPropertyIdentifier:{identifierPropertyName:e.identifier_info?.identifier_mapping_info?.uniform_property_identifier?.identifier_property_name}},identifierGenerationInfo:{uuidMethodHint:be[e.identifier_info?.identifier_generation_info?.uuid_method_hint?.value]}},searchIndexes:Ge(e.search_indexes),entityTypes:xe(e.entity_types),relationshipTypes:Se(e.relationship_types)})}(e)}throw new o.Z("knowledge-graph:unexpected-server-response","server returned an unexpected response",{responseType:i,data:n.data})}let dt=class extends m.Z{constructor(e){super(e),this.openCypherQuery=""}};(0,i._)([(0,l.Cb)()],dt.prototype,"openCypherQuery",void 0),dt=(0,i._)([(0,d.j)("esri.rest.knowledgeGraph.GraphQuery")],dt);const ut=dt;let ht=class extends ut{constructor(e){super(e),this.bindParameters=null,this.bindGeometryQuantizationParameters=null,this.outputQuantizationParameters=null}};(0,i._)([(0,l.Cb)()],ht.prototype,"bindParameters",void 0),(0,i._)([(0,l.Cb)()],ht.prototype,"bindGeometryQuantizationParameters",void 0),(0,i._)([(0,l.Cb)()],ht.prototype,"outputQuantizationParameters",void 0),ht=(0,i._)([(0,d.j)("esri.rest.knowledgeGraph.GraphQueryStreaming")],ht);const yt=ht;function ct(e){if(!e.spatialReference.isWGS84)throw new o.Z("knowledge-graph:layer-support-utils","The extentToInBoundsRings function only supports WGS84 spatial references.");let t;return t=e.xmax>180&&e.xmin<180?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[180,e.ymax],[180,e.ymin],[e.xmin,e.ymin]],[[-180,e.ymin],[-180,e.ymax],[e.xmax-360,e.ymax],[e.xmax-360,e.ymin],[-180,e.ymin]]]:e.xmax>180&&e.xmin>180?[[[e.xmin-360,e.ymin],[e.xmin-360,e.ymax],[e.xmax-360,e.ymax],[e.xmax-360,e.ymin],[e.xmin-360,e.ymin]]]:e.xmax>-180&&e.xmin<-180?[[[e.xmin+360,e.ymin],[e.xmin+360,e.ymax],[180,e.ymax],[180,e.ymin],[e.xmin+360,e.ymin]],[[-180,e.ymin],[-180,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[-180,e.ymin]]]:e.xmax<-180&&e.xmin<-180?[[[e.xmin+360,e.ymin],[e.xmin+360,e.ymax],[e.xmax+360,e.ymax],[e.xmax+360,e.ymin],[e.xmin+360,e.ymin]]]:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]],t}var mt=n(86638),ft=n(53866);const gt="ESRI__ID",_t="ESRI__LAYOUT_GEOMETRY",bt=12,wt=a.Z.getLogger("esri.rest.knowledgeGraph.knowledgeGraphLayer.KnowledgeGraphLayerDataManager");let Tt=class extends m.Z{constructor(e){super(e),this.inclusionModeDefinition={generateAllSublayers:!0,namedTypeDefinitions:new Map},this.entityTypeNames=new Set,this.relationshipTypeNames=new Set,this.geographicLookup=new Map,this.sublayerCaches=new Map,this.nodeConnectionsLookup=new Map,this.memberIdTypeLookup=new Map,this._processingCacheUpdatesLookup=new Map;const t=new Map;e.knowledgeGraph.dataModel.entityTypes?.forEach((n=>{n.name&&(t.set(n.name,"entity"),this._processingCacheUpdatesLookup.set(n.name,[]),e.inclusionModeDefinition&&!e.inclusionModeDefinition?.generateAllSublayers||this.entityTypeNames.add(n.name),n.properties?.forEach((e=>{e.geometryType&&"esriGeometryNull"!==e.geometryType&&this.geographicLookup.set(n.name,{name:e.name??"",geometryType:e.geometryType})})))})),e.knowledgeGraph.dataModel.relationshipTypes?.forEach((n=>{n.name&&(t.set(n.name,"relationship"),this._processingCacheUpdatesLookup.set(n.name,[]),e.inclusionModeDefinition&&!e.inclusionModeDefinition?.generateAllSublayers||this.relationshipTypeNames.add(n.name),n.properties?.forEach((e=>{e.geometryType&&"esriGeometryNull"!==e.geometryType&&this.geographicLookup.set(n.name,{name:e.name??"",geometryType:e.geometryType})})))})),e.inclusionModeDefinition?.namedTypeDefinitions.forEach(((n,i)=>{if("entity"===t.get(i))this.entityTypeNames.add(i);else{if("relationship"!==t.get(i))return wt.warn(`A named type, ${i}, was in the inclusion list that wasn't in the data model and will be removed`),void e.inclusionModeDefinition?.namedTypeDefinitions.delete(i);this.relationshipTypeNames.add(i)}const r=new Map;n.members?.forEach((e=>{this.memberIdTypeLookup.set(e.id,i);const t=this.getById(e.id);t&&r.set(e.id,t)})),this.sublayerCaches.set(i,r)}))}addToLayer(e){e.forEach((e=>{let{typeName:t,id:n}=e;if(!this.inclusionModeDefinition)throw new o.Z("knowledge-graph:layer-data-manager","You cannot add to a layer's exclusion list if it was not created with an exclusion list originally");if(this.inclusionModeDefinition.namedTypeDefinitions.has(t)){if(this.inclusionModeDefinition.namedTypeDefinitions.has(t)){const e=this.inclusionModeDefinition.namedTypeDefinitions.get(t);e.members||(e.members=new Map),e.members.set(n,{id:n}),this.memberIdTypeLookup.set(n,t)}}else{const e=new Map;e.set(n,{id:n}),this.inclusionModeDefinition.namedTypeDefinitions.set(t,{useAllData:!1,members:e}),this.memberIdTypeLookup.set(n,t)}}))}getById(e){return C.getInstance().readFromStoreById(e)}async getData(e,t,n){if(t.objectType.name&&this.inclusionModeDefinition?.namedTypeDefinitions&&this.inclusionModeDefinition.namedTypeDefinitions.size>0&&!this.inclusionModeDefinition.namedTypeDefinitions.has(t.objectType.name))return[];let i;if(i=e||new mt.Z({where:"1=1",outFields:["*"]}),"link-chart"===t.parentCompositeLayer.type){const e=t.parentCompositeLayer,n=this._processingCacheUpdatesLookup.get(t.objectType.name??""),r=i.outFields,o=i.geometry;let a="",s="";o&&o.extent&&(a=(0,u.fC)(o.extent.ymin,o.extent.xmin,bt),s=(0,u.fC)(o.extent.ymax,o.extent.xmax,bt)),r&&1===r.length&&r[0]===gt&&"1=1"===i.where||await Promise.all(n??[]);const l=this.sublayerCaches.has(t.objectType.name??"")?Array.from(this.sublayerCaches.get(t.objectType.name)?.values()):[],p=[];return l.forEach((n=>{if(n.geometry=e.linkChartDiagramLookup.get(n.attributes[t.objectIdField]),n.attributes.ESRI__LAYOUT_GEOMETRY=n.geometry,a&&s){const i=e.linkChartGeohashLookup.get(n.attributes[t.objectIdField]);i?i>=a&&i<=s&&p.push(n):p.push(n)}else p.push(n)})),p}return this.retrieveDataFromService(i,t,n)}async getConnectedRecordIds(e){const t=[],n=[],i=new Map;return e.forEach((e=>{if(this.memberIdTypeLookup.has(e)){const t=this.memberIdTypeLookup.get(e);if(!this.entityTypeNames.has(t))return;i.has(t)?i.get(t)?.push(e):i.set(t,[e])}})),i.forEach(((e,i)=>{const r=`MATCH (n:${i})-[r]-(m) WHERE id(n) IN $ids RETURN id(r), type(r), id(m), labels(m)[0]`,o=new Promise((n=>{(async()=>{const n=(await tt(this.knowledgeGraph,new yt({openCypherQuery:r,bindParameters:{ids:e}}))).resultRowsStream.getReader();try{for(;;){const{done:e,value:i}=await n.read();if(e)break;for(let n=0;n<i.length;n++){const e=i[n];t.push({id:e[0],typeName:e[1]}),t.push({id:e[2],typeName:e[3]})}}}catch(i){if("AbortError"!==i.name)throw i;wt.info("Request aborted as expected")}})().then((()=>{n()}))}));n.push(o)})),await Promise.all(n),t}async refreshCacheContent(e,t,n){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=C.getInstance(),a=[],s=new Map,l=new Map;this.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&l.set(e.name,e)})),this.knowledgeGraph.dataModel.relationshipTypes?.forEach((e=>{e.name&&l.set(e.name,e)})),e||this.inclusionModeDefinition?e?e.forEach((e=>{if(this.memberIdTypeLookup.has(e)){const t=this.memberIdTypeLookup.get(e);s.has(t)?s.get(t)?.push(e):s.set(t,[e])}})):this.inclusionModeDefinition?.namedTypeDefinitions?.forEach(((e,t)=>{e.useAllData?s.set(t,null):e.members&&e.members.forEach((e=>{s.has(t)&&null!==s.get(t)?s.get(t)?.push(e.id):s.set(t,[e.id])}))})):(this.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&s.set(e.name,null)})),this.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&s.set(e.name,null)})));for(const[p,d]of s){const e=new Promise((e=>{(async()=>{const e=new Set,a=[];let s,u="",h=!1;if(t||l.get(p)?.properties?.forEach((t=>{t.name&&e.add(t.name)})),n&&this.geographicLookup.has(p)){const t=this.geographicLookup.get(p)?.name;t&&e.add(t)}if(this.entityTypeNames.has(p))u=`MATCH (n:${p}) ${d?"WHERE id(n) IN $ids ":""}return ID(n)`,e.forEach((e=>{u+=`, n.${e}`,a.push(e)}));else{if(!this.relationshipTypeNames.has(p))throw new o.Z("knowledge-graph:layer-data-manager",`The graph type of ${p} could not be determined. Was this type set in the KG data model and inclusion definition?`);h=!0,u=`MATCH ()-[n:${p}]->() ${d?"WHERE id(n) IN $ids ":""}return ID(n), id(startNode(n)), id(endNode(n))`,e.forEach((e=>{u+=`, n.${e}`,a.push(e)}))}s=new yt(d?{openCypherQuery:u,bindParameters:{ids:d}}:{openCypherQuery:u});const y=(await tt(this.knowledgeGraph,s)).resultRowsStream.getReader();for(;;){const{done:e,value:t}=await y.read();if(e)break;const n=[];for(let i=0;i<t.length;i++){const e=t[i];let r=0,o=0;const s={properties:{}};for(s.id=e[r],r++,o++,h&&(s.originId=e[r],r++,o++,s.destinationId=e[r],r++,o++,(0,f.s1)(this.nodeConnectionsLookup,s.originId,(()=>new Set)).add(s.id),(0,f.s1)(this.nodeConnectionsLookup,s.destinationId,(()=>new Set)).add(s.id));r<e.length;r++)s.properties[a[r-o]]=e[r];n.push(s)}const o=r.writeToStore(n,gt,this.geographicLookup.get(p)?.name);this.sublayerCaches.has(p)||this.sublayerCaches.set(p,new Map),i&&!this.inclusionModeDefinition?.namedTypeDefinitions.has(p)&&this.inclusionModeDefinition?.namedTypeDefinitions.set(p,{useAllData:!1,members:new Map}),i&&!this.inclusionModeDefinition?.namedTypeDefinitions.get(p).members&&(this.inclusionModeDefinition.namedTypeDefinitions.get(p).members=new Map);const s=this.sublayerCaches.get(p);o.forEach((e=>{s?.set(e.attributes.ESRI__ID,e),i&&!this.inclusionModeDefinition?.namedTypeDefinitions.get(p).members.has(e.attributes.ESRI__ID)&&(this.inclusionModeDefinition?.namedTypeDefinitions.get(p).members.set(e.attributes.ESRI__ID,{id:e.attributes.ESRI__ID}),this.memberIdTypeLookup.set(e.attributes.ESRI__ID,p))}))}})().then((()=>{e(null)}))}));a.push(e),this._processingCacheUpdatesLookup.get(p)?.push(e)}await Promise.all(a)}removeFromLayer(e){const t=new Set,n=new Set(e.map((e=>e.id)));for(const i of e)t.add(i.typeName),this.memberIdTypeLookup.delete(i.id),this.inclusionModeDefinition?.namedTypeDefinitions.forEach((e=>{e.members?.has(i.id)&&e.members.delete(i.id)}));t.forEach((e=>{this.sublayerCaches.get(e)?.forEach(((t,i)=>{n.has(i)&&this.sublayerCaches.get(e)?.delete(i)}))}))}async retrieveDataFromService(e,t,n){const i=C.getInstance(),r=new Set,a=[];let s,l="",p=[];const d="relationship"===t.graphType,u=this.inclusionModeDefinition?.namedTypeDefinitions?.get(t.objectType.name)?.useAllData,h=t.parentCompositeLayer.sublayerIdsCache.get(t.objectType.name);let y=!u&&h?Array.from(h).sort():null;if(this.inclusionModeDefinition?.namedTypeDefinitions?.get(t.objectType.name)?.useAllData)this.inclusionModeDefinition?.namedTypeDefinitions?.get(t.objectType.name)?.useAllData&&null!=e.objectIds&&(y=e.objectIds);else if(null!=e.objectIds&&y&&y.length>0){const t=e.objectIds;e.objectIds=y.filter((e=>t.includes(e)))}else if(null!=e.objectIds)y=e.objectIds;else{if(this.inclusionModeDefinition?.namedTypeDefinitions.has(t.objectType.name)&&(!this.inclusionModeDefinition.namedTypeDefinitions.get(t.objectType.name)?.members||this.inclusionModeDefinition.namedTypeDefinitions.get(t.objectType.name)?.members?.size<1))return e.objectIds=[],[];e.objectIds=y}if(null!=e.outFields){const n=e.outFields;n.includes("*")?t.fields.forEach((e=>{r.add(e.name)})):n.forEach((e=>{e!==gt&&e!==t.geometryFieldName&&r.add(e)}))}if(null!=e.geometry){const n=e.geometry;let i;const p=t.parentCompositeLayer.dataManager.knowledgeGraph.serviceDefinition,u=p?.spatialReference,h=p?.serviceCapabilities?.geometryCapabilities;let y=h?.geometryMaxBoundingRectangleSizeX,c=h?.geometryMaxBoundingRectangleSizeY;if(n?.extent?.spatialReference&&!n.spatialReference?.isWGS84?(await(0,b.initializeProjection)(n.extent.spatialReference,w.Zn),i=(0,b.project)(n.extent,w.Zn)):i=n.extent,y&&c&&u){if(4326!==u.wkid){const e=new ft.Z({spatialReference:u,xmax:y,ymax:c}),t=(0,b.project)(e,w.Zn);y=t.xmax,c=t.ymax}if(i.xmax-i.xmin>y)throw new o.Z("knowledge-graph:layer-data-manager",`Extent x bounds should be within ${y}\xb0 latitude, limit exceeded`);if(i.ymax-i.ymin>c)throw new o.Z("knowledge-graph:layer-data-manager",`Extent y bounds should be within ${c}\xb0 longitude, limit exceeded`)}if(null!=e.where&&"1=1"!==e.where){const n=await(0,g.E)(e.where.toUpperCase(),t.fieldsIndex);t.fields.forEach((e=>{n.fieldNames.includes(e.name)&&r.add(e.name)}))}l=d?`Match ()-[n:${t.objectType.name}]->() WHERE esri.graph.ST_Intersects($param_filter_geom, n.${t.geometryFieldName}) return ID(n), id(startNode(r)), id(endNode(r))`:`Match (n:${t.objectType.name}) WHERE esri.graph.ST_Intersects($param_filter_geom, n.${t.geometryFieldName}) return ID(n)`,t.geometryFieldName&&r.add(t.geometryFieldName),r.forEach((e=>{l+=`, n.${e}`,a.push(e)})),s=new yt({openCypherQuery:l,bindParameters:{param_filter_geom:new _.Z({rings:ct(i)})}})}else{let n="";if(null!=e.where&&"1=1"!==e.where){const i=await(0,g.E)(e.where,t.fieldsIndex);t.fields.forEach((e=>{i.fieldNames.includes(e.name)&&r.add(e.name)}));const o=new Set(["column-reference","string","number","binary-expression"]),a=new Set(["=","<","<=","<>",">",">=","AND","OR","LIKE"]);let s=!1;const l=e=>{if("column-reference"===e.type)return`n.${e.column}`;if("string"===e.type)return`'${e.value}'`;if("number"===e.type)return`${e.value}`;if("binary-expression"===e.type&&o.has(e.left.type)&&o.has(e.right.type)&&a.has(e.operator))return`${l(e.left)} ${e.operator} ${l(e.right)}`;if("binary-expression"===e.type&&"LIKE"===e.operator){let t="";if("function"===e.left.type&&"column-reference"===e.left.args.value[0].type)t+=`lower(n.${e.left.args.value[0].column})`;else{if("column-reference"!==e.left.type)return s=!0,"";t+=`lower(n.${e.left.column})`}if(t+=" CONTAINS (","string"!==e.right.type)return s=!0,"";{let n=e.right.value;"%"===n.charAt(0)&&(n=n.slice(1)),"%"===n.charAt(n.length-1)&&(n=n.slice(0,-1)),t+=`'${n.toLowerCase()}')`}return t}return s=!0,""};n=l(i.parseTree),s&&(n="")}let i="";i=d?`Match ()-[n:${t.objectType.name}]->()`:`Match (n:${t.objectType.name})`;let o=!1;y&&(o=!0,i+=" WHERE ID(n) IN $ids"),n&&(i+=o?" AND":" WHERE",i+=` ${n}`),i+=" return ID(n)",d&&(i+=", id(startNode(n)), id(endNode(n))"),e.returnGeometry&&t.geometryFieldName&&r.add(t.geometryFieldName),r.forEach((e=>{i+=`, n.${e}`,a.push(e)})),s=new yt(y?{openCypherQuery:i,bindParameters:{ids:y}}:{openCypherQuery:i})}const c=(await tt(t.parentCompositeLayer.dataManager.knowledgeGraph,s,n)).resultRowsStream.getReader();for(;;){const{done:e,value:n}=await c.read();if(e)break;const r=[];for(let t=0;t<n.length;t++){const e=n[t];let i=0,o=0;const s={properties:{}};for(s.id=e[i],i++,o++,d&&(s.originId=e[i],i++,o++,s.destinationId=e[i],i++,o++);i<e.length;i++)s.properties[a[i-o]]=e[i];r.push(s)}p=p.concat(i.writeToStore(r,gt,t.parentCompositeLayer.dataManager.geographicLookup.get(t.objectType.name)?.name))}return p}};(0,i._)([(0,l.Cb)()],Tt.prototype,"knowledgeGraph",void 0),(0,i._)([(0,l.Cb)()],Tt.prototype,"inclusionModeDefinition",void 0),(0,i._)([(0,l.Cb)()],Tt.prototype,"entityTypeNames",void 0),(0,i._)([(0,l.Cb)()],Tt.prototype,"relationshipTypeNames",void 0),(0,i._)([(0,l.Cb)()],Tt.prototype,"geographicLookup",void 0),(0,i._)([(0,l.Cb)()],Tt.prototype,"sublayerCaches",void 0),(0,i._)([(0,l.Cb)()],Tt.prototype,"nodeConnectionsLookup",void 0),(0,i._)([(0,l.Cb)()],Tt.prototype,"memberIdTypeLookup",void 0),Tt=(0,i._)([(0,d.j)("esri.rest.knowledgeGraph.knowledgeGraphLayer.KnowledgeGraphLayerDataManager")],Tt);var Et=n(44055),Ct=(n(94931),n(78451),n(98689),n(57823),n(32066),n(49018),n(34999),n(28189),n(9014)),It=n(40464),Mt=(n(70431),n(33960)),kt=n(76143),Lt=n(63543);const xt=(0,n(25610).v)(),Rt=e=>{let t=class extends e{constructor(){super(...arguments),this.fields=[],this.fieldsIndex=null}};return(0,i._)([(0,l.Cb)(xt.fields)],t.prototype,"fields",void 0),(0,i._)([(0,l.Cb)(xt.fieldsIndex)],t.prototype,"fieldsIndex",void 0),t=(0,i._)([(0,d.j)("esri.layers.knowledgeGraphLayer.KnowledgeGraphSublayerBase")],t),t};var vt=n(6693),Dt=n(64390),St=n(71684),Gt=n(56811),Nt=n(83040),Ot=n(37270),jt=n(49818),Pt=n(81085),Ft=n(82485),At=n(27823);let Zt=class extends((0,Dt.M)(Rt((0,vt.h)((0,Gt.M)((0,St.Q)(h.Z)))))){constructor(e){var t;if(super(e),t=this,this.capabilities=(0,Lt.MS)(!1,!1),this.definitionExpression="",this.displayField="",this.elevationInfo=null,this.geometryType=null,this.geometryFieldName=null,this.graphType=null,this.hasM=!1,this.hasZ=!1,this.labelsVisible=null,this.labelingInfo=null,this.objectIdField=gt,this.objectType=null,this.parentCompositeLayer=null,this.popupTemplate=null,this.source={openPorts:()=>this.load().then((()=>{const e=new MessageChannel;return new Ft.Z(e.port1,{channel:e,client:{queryFeatures:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=mt.Z.fromJSON(e);return t.queryFeaturesJSON(i,n)}}}),[e.port2]}))},this.type="knowledge-graph-sublayer","link-chart"===e.parentCompositeLayer.type)"relationship"===e.graphType?this.geometryType="polyline":this.geometryType="point",this.geometryFieldName=_t;else if(e.parentCompositeLayer.dataManager.geographicLookup.get(e.objectType.name)?.geometryType&&"esriGeometryNull"!==e.parentCompositeLayer.dataManager.geographicLookup.get(e.objectType.name)?.geometryType){const t=e.parentCompositeLayer.dataManager.geographicLookup.get(e.objectType.name);this.geometryFieldName=t?.name??null,this.geometryType=t?.geometryType?At.M.fromJSON(t.geometryType):null;const n=t?.name,i=n?e.objectType.properties?.[n]:null;i?(this.hasM=i.hasM??!1,this.hasZ=i.hasZ??!1):(this.hasM=!1,this.hasZ=!1)}else this.geometryType=null;e.objectType.properties?.forEach((e=>{let t=e.fieldType;"esriFieldTypeOID"===t&&(t="esriFieldTypeInteger"),this.fields.push(Nt.Z.fromJSON({name:e.name,type:t,alias:e.alias,defaultValue:null,editable:e.editable,nullable:e.nullable}))})),this.fields.push(Nt.Z.fromJSON({name:this.objectIdField,type:"esriFieldTypeString",alias:this.objectIdField,editable:!1})),this._set("fields",[...this.fields]),e.parentCompositeLayer.dataManager.knowledgeGraph.dataModel?.spatialReference&&(this.spatialReference=e.parentCompositeLayer.dataManager.knowledgeGraph.dataModel.spatialReference),"link-chart"===e.parentCompositeLayer.type?"relationship"===e.graphType?this.renderer=(0,Ct.i)((0,Lt.bU)(At.M.toJSON("polyline")).renderer):this.renderer=(0,Ct.i)((0,Lt.bU)(At.M.toJSON("point")).renderer):this.renderer=(0,Ct.i)((0,Lt.bU)(At.M.toJSON(this.geometryType)).renderer)}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){(0,Ot.YN)(e,this.fieldsIndex),this._set("renderer",e)}createPopupTemplate(e){return(0,Pt.eZ)(this,e)}createQuery(){return new mt.Z({where:"1=1",outFields:["*"]})}getField(e){for(let t=0;t<this.fields.length;t++)if(this.fields[t].name===e)return this.fields[t];throw new Error("Field not found")}getFieldDomain(e,t){return null}async queryFeatures(e,t){const{resolvedQuery:n,queryEngine:i}=await this._setupQueryObjects(e),r=jt.Z.fromJSON(await i.executeQuery(n.toJSON(),t?.signal));return r.features.forEach((e=>{e.sourceLayer=this})),r}async queryFeaturesJSON(e,t){const{resolvedQuery:n,queryEngine:i}=await this._setupQueryObjects(e);return await i.executeQuery(n.toJSON(),t?.signal)}async queryFeatureCount(e,t){const{resolvedQuery:n,queryEngine:i}=await this._setupQueryObjects(e);return i.executeQueryForCount(n.toJSON(),t?.signal)}async queryExtent(){let e=arguments.length>1?arguments[1]:void 0;const t={...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},returnGeometry:!0},{resolvedQuery:n,queryEngine:i}=await this._setupQueryObjects(t),r=await i.executeQueryForExtent(n.toJSON(),e?.signal);let o;return o=null!=r.extent?.xmin&&null!=r.extent?.xmax&&null!=r.extent?.ymin&&null!=r.extent?.ymax?new ft.Z(r.extent):new ft.Z,{count:r.count,extent:o}}async queryObjectIds(e,t){const n=mt.Z.from(e);let i;if("link-chart"===this.parentCompositeLayer.type&&this._cachedQueryEngine)i=this._cachedQueryEngine;else{const e=await this.parentCompositeLayer.dataManager.getData(n,this,t);i=this.loadQueryEngine(e)}return i.executeQueryForIds(n.toJSON(),t?.signal)}loadQueryEngine(e){const t=new Mt.Z({geometryType:At.M.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ}),n=new kt.q({fieldsIndex:this.fieldsIndex.toJSON(),geometryType:At.M.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:this.spatialReference.toJSON(),timeInfo:null,featureStore:t});return n.featureStore.addMany(e),n}async refreshCachedQueryEngine(){const e=await this.parentCompositeLayer.dataManager.getData(new mt.Z({where:"1=1",outFields:[gt]}),this);this._cachedQueryEngine=this.loadQueryEngine(e)}async _setupQueryObjects(e,t){const n=mt.Z.from(e),i=n.geometry;let r;if(i&&!i.spatialReference?.isWGS84&&(await(0,b.initializeProjection)(i.spatialReference,w.Zn),n.geometry=(0,b.project)(i instanceof _.Z||i instanceof ee.Z?i:i.extent,w.Zn)),"link-chart"===this.parentCompositeLayer.type&&this._cachedQueryEngine)r=this._cachedQueryEngine;else{const e=await this.parentCompositeLayer.dataManager.getData(n,this,t);r=this.loadQueryEngine(e)}return{resolvedQuery:n,queryEngine:r}}};(0,i._)([(0,l.Cb)()],Zt.prototype,"capabilities",void 0),(0,i._)([(0,l.Cb)({readOnly:!0})],Zt.prototype,"defaultPopupTemplate",null),(0,i._)([(0,l.Cb)()],Zt.prototype,"definitionExpression",void 0),(0,i._)([(0,l.Cb)()],Zt.prototype,"displayField",void 0),(0,i._)([(0,l.Cb)()],Zt.prototype,"elevationInfo",void 0),(0,i._)([(0,l.Cb)()],Zt.prototype,"geometryType",void 0),(0,i._)([(0,l.Cb)()],Zt.prototype,"geometryFieldName",void 0),(0,i._)([(0,l.Cb)()],Zt.prototype,"graphType",void 0),(0,i._)([(0,l.Cb)()],Zt.prototype,"hasM",void 0),(0,i._)([(0,l.Cb)()],Zt.prototype,"hasZ",void 0),(0,i._)([(0,l.Cb)()],Zt.prototype,"labelsVisible",void 0),(0,i._)([(0,l.Cb)()],Zt.prototype,"labelingInfo",void 0),(0,i._)([(0,l.Cb)()],Zt.prototype,"objectIdField",void 0),(0,i._)([(0,l.Cb)()],Zt.prototype,"objectType",void 0),(0,i._)([(0,l.Cb)()],Zt.prototype,"parentCompositeLayer",void 0),(0,i._)([(0,l.Cb)({type:Et.Z,json:{name:"popupInfo",write:!0}})],Zt.prototype,"popupTemplate",void 0),(0,i._)([(0,l.Cb)({types:It.A,json:{write:{target:"layerDefinition.drawingInfo.renderer"}}})],Zt.prototype,"renderer",null),(0,i._)([(0,l.Cb)()],Zt.prototype,"source",void 0),(0,i._)([(0,l.Cb)({json:{read:!1}})],Zt.prototype,"type",void 0),Zt=(0,i._)([(0,d.j)("esri.layers.knowledgeGraph.KnowledgeGraphSublayer")],Zt);const Ut=Zt;let Yt,zt=null;function Qt(){return Yt||(Yt=n.e(39672).then(n.bind(n,39672)).then((e=>e.l)).then((e=>{let{default:t}=e;return t({locateFile:e=>(0,B.V)(`esri/libs/linkchartlayout/${e}`)})})).then((e=>{!function(e){zt=e}(e)})),Yt)}var qt;function $t(e,t,n,i,r,o){const a=n.length,s=r.length,l=Float64Array.BYTES_PER_ELEMENT,p=Uint32Array.BYTES_PER_ELEMENT,d=Uint8Array.BYTES_PER_ELEMENT,u=15+a*(d+2*l)+s*(2*p),h=zt._malloc(u);try{const d=h+16-h%16,u=d+a*l,y=u+a*l,c=y+s*p,m=c+s*p,f=()=>[zt.HEAPF64.subarray(d>>3,(d>>3)+a),zt.HEAPF64.subarray(u>>3,(u>>3)+a),zt.HEAPU32.subarray(y>>2,(y>>2)+s),zt.HEAPU32.subarray(c>>2,(c>>2)+s),zt.HEAPU8.subarray(m,m+a)],[g,_,b,w,T]=f();g.set(n),_.set(i),b.set(r),w.set(o),T.set(t);const E=e(a,m,d,u,s,y,c),[C,I,M,k,L]=f();return n.set(C),i.set(I),r.set(M),o.set(k),t.set(L),E}finally{zt._free(h)}}!function(e){e[e.None=0]="None",e[e.IsMovable=1]="IsMovable",e[e.IsGeographic=2]="IsGeographic",e[e.IsRoot=4]="IsRoot"}(qt||(qt={}));var Bt,Ht,Jt,Vt,Wt,Kt,Xt,en;!function(e){e.getMinIdealEdgeLength=function(){return zt.getMinIdealEdgeLength()},e.apply=function(e,t,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:-1;return $t(((e,t,n,i,r,l,p)=>zt.applyForceDirectedLayout(e,t,n,i,r,l,p,o,a,s)),e,t,n,i,r)}}(Bt||(Bt={})),function(e){e.apply=function(e,t,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:-1;return $t(((e,t,n,i,r,l,p)=>zt.applyCommunityLayout(e,t,n,i,r,l,p,o,a,s)),e,t,n,i,r)}}(Ht||(Ht={})),function(e){e.apply=function(e,t,n,i,r){return $t(zt.applySimpleLayout,e,t,n,i,r)}}(Jt||(Jt={})),function(e){e.apply=function(e,t,n,i,r){return $t(zt.applyHierarchicalLayout,e,t,n,i,r)}}(Vt||(Vt={})),function(e){e.apply=function(e,t,n,i,r){return $t(zt.applyRadialTreeLayout,e,t,n,i,r)}}(Wt||(Wt={})),function(e){e.apply=function(e,t,n,i,r){return $t(zt.applySmartTreeLayout,e,t,n,i,r)}}(Kt||(Kt={})),function(e){e[e.Undirected=0]="Undirected",e[e.Directed=1]="Directed",e[e.Reversed=2]="Reversed"}(Xt||(Xt={})),function(e){e[e.ByCC_Raw=0]="ByCC_Raw",e[e.ByCC_NormalizeGlobally=1]="ByCC_NormalizeGlobally",e[e.ByCC_NormalizeByCC=2]="ByCC_NormalizeByCC"}(en||(en={}));let tn=class extends((0,vt.h)((0,Gt.M)(h.Z))){constructor(e){if(super(e),this.dataPreloadedInLocalCache=!1,this.defaultLinkChartConfig=null,this._currentLinkChartConfig={layoutMode:"RADIAL_TREE",xScaleFactor:1,yScaleFactor:1},this._graphTypeLookup=new Map,this.knowledgeGraph=null,this.layers=new r.Z,this.linkChartDiagramLookup=new Map,this.linkChartExtent=new ft.Z({xmin:-1e-7,ymin:-1e-7,xmax:1e-7,ymax:1e-7}),this.linkChartGeohashLookup=new Map,this.memberEntityTypes=null,this.memberRelationshipTypes=null,this.sublayerIdsCache=new Map,this.tables=new r.Z,this.type="link-chart",this._originalInclusionList=e.inclusionModeDefinition,e.dataPreloadedInLocalCache&&!e.inclusionModeDefinition)throw new o.Z("knowledge-graph:linkchart-layer-constructor","If creating a link chart composite layer and configured that data is already loaded in the cache, you must specify an inclusion list so the Composite Layer knows what records belong to it")}normalizeCtorArgs(e){return{url:e.url,title:e.title,dataPreloadedInLocalCache:e.dataPreloadedInLocalCache,defaultLinkChartConfig:e.defaultLinkChartConfig}}_initializeLayerProperties(e){if(!this.title&&this.url){const e=this.url.split("/");this.title=e[e.length-2]}const t=new Set;let n=[],i=[];if(e.inclusionModeDefinition&&(!e.inclusionModeDefinition.namedTypeDefinitions||e.inclusionModeDefinition.namedTypeDefinitions.size<1))throw new o.Z("knowledge-graph:composite-layer-constructor","If an explicit inclusion definition is defined, at least one namedTypeDefinition must also be defined");e.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&this._graphTypeLookup.set(e.name,e)})),e.knowledgeGraph.dataModel.relationshipTypes?.forEach((e=>{e.name&&this._graphTypeLookup.set(e.name,e)})),e.inclusionModeDefinition?.generateAllSublayers?(n=e.knowledgeGraph.dataModel.entityTypes??[],i=e.knowledgeGraph.dataModel.relationshipTypes??[]):e.inclusionModeDefinition?.namedTypeDefinitions&&e.inclusionModeDefinition?.namedTypeDefinitions.size>0?e.inclusionModeDefinition?.namedTypeDefinitions.forEach(((r,o)=>{if(!this._graphTypeLookup.get(o))return a.Z.getLogger(this).warn(`A named type, ${o}, was in the inclusion list that wasn't in the data model and will be removed`),void e.inclusionModeDefinition?.namedTypeDefinitions.delete(o);this._graphTypeLookup.get(o)instanceof Z||"strictOrigin"in this._graphTypeLookup.get(o)?t.has(o)||(t.add(o),i.push(this._graphTypeLookup.get(o))):this._graphTypeLookup.get(o)instanceof F||"properties"in this._graphTypeLookup.get(o)?t.has(o)||(t.add(o),n.push(this._graphTypeLookup.get(o))):(a.Z.getLogger(this).warn(`A named type, ${o}, was in the inclusion list that wasn't properly modeled and will be removed`),e.inclusionModeDefinition?.namedTypeDefinitions.delete(o))})):(n=e.knowledgeGraph.dataModel.entityTypes??[],i=e.knowledgeGraph.dataModel.relationshipTypes??[]);const r=new Tt({knowledgeGraph:e.knowledgeGraph,inclusionModeDefinition:e.inclusionModeDefinition});this.knowledgeGraph=e.knowledgeGraph,this.memberEntityTypes=n,this.memberRelationshipTypes=i,this.dataManager=r}load(e){return this.addResolvingPromise(new Promise((t=>{(async function(e){return Ve(e)})(this.url).then((n=>{if(this._initializeLayerProperties({knowledgeGraph:n,inclusionModeDefinition:this._originalInclusionList}),this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.size||(this.dataManager.inclusionModeDefinition={generateAllSublayers:!1,namedTypeDefinitions:new Map},this.dataManager.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&this.dataManager.inclusionModeDefinition?.namedTypeDefinitions.set(e.name,{useAllData:!0})})),this.dataManager.knowledgeGraph.dataModel.relationshipTypes?.forEach((e=>{e.name&&this.dataManager.inclusionModeDefinition?.namedTypeDefinitions.set(e.name,{useAllData:!0})}))),this.dataPreloadedInLocalCache)this.loadLayerAssumingLocalCache(),this.dataManager.inclusionModeDefinition&&(this.dataManager.inclusionModeDefinition.generateAllSublayers=!1),this.dataManager.inclusionModeDefinition?.namedTypeDefinitions.forEach((e=>{e.useAllData=!1,e.members?.forEach((e=>{let t;t=e.linkChartLocation instanceof c.Z?e.linkChartLocation:e.linkChartLocation?(0,y.GH)(e.linkChartLocation):null,this.linkChartDiagramLookup.set(e.id,t),t&&2===t.coords.length&&0===t.lengths.length?this.linkChartGeohashLookup.set(e.id,(0,u.fC)(t.coords[1],t.coords[0],bt)):this.linkChartGeohashLookup.set(e.id,"")})),this.addResolvingPromise(this._initializeDiagram().then((async()=>{this.layers.forEach((async e=>{await e.refreshCachedQueryEngine()})),this.tables.forEach((async e=>{await e.refreshCachedQueryEngine()}))})))}));else{const t="GEOGRAPHIC"===this.defaultLinkChartConfig?.layoutMode;this.addResolvingPromise(this.dataManager.refreshCacheContent(void 0,!1,t,!0).then((async()=>{(0,s.k_)(e);const t=[],n=[];this.loadLayerAssumingLocalCache(),this.dataManager.inclusionModeDefinition&&(this.dataManager.inclusionModeDefinition.generateAllSublayers=!1,this.dataManager.inclusionModeDefinition.namedTypeDefinitions.forEach((e=>{e.useAllData=!1}))),await this._initializeDiagram(),this.layers.forEach((e=>{n.push(e.refreshCachedQueryEngine()),t.push(new Promise((t=>{e.on("layerview-create",(()=>{t(null)}))})))})),this.tables.forEach((e=>{n.push(e.refreshCachedQueryEngine())})),await Promise.all(n)})))}t(null)}))}))),Promise.resolve(this)}async addRecords(e,t){let n=[];t?.cascadeAddRelationshipEndNodes&&this.dataManager.knowledgeGraph.dataModel&&(n=await async function(e,t){const n=[],i=new Map,r=[];if(t.dataModel?.relationshipTypes)for(const o of t.dataModel.relationshipTypes)o.name&&i.set(o.name,[]);for(const o of e)i.has(o.typeName)&&i.get(o.typeName)?.push(o.id);for(const[o,a]of i){if(a.length<1)continue;const e=new yt({openCypherQuery:`MATCH (n)-[r:${o}]->(m) WHERE id(r) in $ids RETURN id(n), labels(n)[0], id(m), labels(m)[0]`,bindParameters:{ids:a}});r.push(tt(t,e).then((async e=>{const t=e.resultRowsStream.getReader();for(;;){const{done:e,value:i}=await t.read();if(e)break;for(const t of i)n.push({id:t[0],typeName:t[1]}),n.push({id:t[2],typeName:t[3]})}})))}return await Promise.all(r),n}(e,this.dataManager.knowledgeGraph));const i=e.concat(n).filter((e=>!this.sublayerIdsCache.get(e.typeName)?.has(e.id)));await this._handleNewRecords(i)}async removeRecords(e){let{cascadeRemoveRelationships:t=!0,recalculateLayout:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cascadeRemoveRelationships:!0,recalculateLayout:!1},i=[];for(const o of e)!1===this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.get(o.typeName)?.useAllData&&this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.get(o.typeName)?.members?.has(o.id)&&i.push(o);if(t){const e=new Set,t=[];for(const n of i)if(this.dataManager.nodeConnectionsLookup.has(n.id))for(const t of this.dataManager.nodeConnectionsLookup.get(n.id))e.add(t);for(const n of e)this.dataManager.memberIdTypeLookup.has(n)&&t.push({id:n,typeName:this.dataManager.memberIdTypeLookup.get(n)});i=i.concat(t)}this.dataManager.removeFromLayer(i);for(const o of i)this.sublayerIdsCache.get(o.typeName)?.delete(o.id),this.linkChartDiagramLookup.delete(o.id);n&&await this.calculateLinkChartLayout(this._currentLinkChartConfig.layoutMode,{xScaleFactor:this._currentLinkChartConfig.xScaleFactor,yScaleFactor:this._currentLinkChartConfig.xScaleFactor});const r=[];return this.layers.forEach((e=>{r.push(e.refreshCachedQueryEngine())})),await Promise.all(r),this._refreshNamedTypes(),i}async expand(e){const t=await this.dataManager.getConnectedRecordIds(e),n=t.filter((e=>!this.sublayerIdsCache.get(e.typeName)?.has(e.id)));return await this._handleNewRecords(t),{records:n}}loadLayerAssumingLocalCache(){this.memberRelationshipTypes.forEach((e=>{const t=new Ut({objectType:e,parentCompositeLayer:this,graphType:"relationship",title:e.name});t.geometryType?this.layers.push(t):this.tables.push(t),this.dataManager.sublayerCaches.has(e.name)||this.dataManager.sublayerCaches.set(e.name,new Map)})),this.memberEntityTypes.forEach((e=>{const t=new Ut({objectType:e,parentCompositeLayer:this,graphType:"entity",title:e.name});t.geometryType?this.layers.push(t):this.tables.push(t),this.dataManager.sublayerCaches.has(e.name)||this.dataManager.sublayerCaches.set(e.name,new Map)})),this.dataManager.inclusionModeDefinition?.namedTypeDefinitions&&this.dataManager.inclusionModeDefinition?.namedTypeDefinitions.forEach(((e,t)=>{const n=((e,t,n)=>(e.has(t)||e.set(t,n()),e.get(t)))(this.sublayerIdsCache,t,(()=>new Set));e.members?.forEach((e=>{if(n.add(e.id),e.linkChartLocation)if(e.linkChartLocation instanceof c.Z)this.linkChartDiagramLookup.set(e.id,e.linkChartLocation),2===e.linkChartLocation.coords.length&&0===e.linkChartLocation.lengths.length?this.linkChartGeohashLookup.set(e.id,(0,u.fC)(e.linkChartLocation.coords[1],e.linkChartLocation.coords[0],bt)):this.linkChartGeohashLookup.set(e.id,"");else{const t=(0,y.GH)(e.linkChartLocation);this.linkChartDiagramLookup.set(e.id,e.linkChartLocation?t:null),"x"in e.linkChartLocation&&"y"in e.linkChartLocation?this.linkChartGeohashLookup.set(e.id,(0,u.fC)(e.linkChartLocation.x,e.linkChartLocation.y,bt)):this.linkChartGeohashLookup.set(e.id,"")}}))}))}async calculateLinkChartLayout(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"RADIAL_TREE",t=arguments.length>1?arguments[1]:void 0;const n=[],i=[];this.dataManager.sublayerCaches.forEach(((e,t)=>{this.dataManager.entityTypeNames.has(t)?e.forEach((e=>{n.push({typeName:t,feature:e})})):this.dataManager.relationshipTypeNames.has(t)&&e.forEach((e=>{i.push({typeName:t,feature:e})}))})),this.linkChartDiagramLookup=new Map;const r=new Map,s=new Map,l=new Map,p=new Map,d=new Uint8Array(n.length),h=new Float64Array(n.length),c=new Float64Array(n.length),m=new Uint32Array(i.length),f=new Uint32Array(i.length),g=[],_=t?.xScaleFactor??1,b=t?.yScaleFactor??1,w=new ft.Z({xmin:-1e-7,ymin:-1e-7,xmax:1e-7,ymax:1e-7});let T,E="FORCE_DIRECTED",C=0,I=0;switch(E="GEOGRAPHIC"===e?"FORCE_DIRECTED":e,E){case"FORCE_DIRECTED":T=Bt.apply;break;case"COMMUNITY":T=Ht.apply;break;case"HIERARCHICAL":T=Vt.apply;break;case"RADIAL_TREE":T=Wt.apply;break;case"SMART_TREE":T=Kt.apply;break;default:T=Jt.apply}n.forEach((n=>{let{typeName:i,feature:r}=n;if(t?.lockedNodeLocations?.has(r.attributes.ESRI__ID)){"GEOGRAPHIC"===e&&this.dataManager.geographicLookup.has(i)?d[C]=qt.IsGeographic:d[C]=qt.None;const n=t.lockedNodeLocations.get(r.attributes.ESRI__ID);h[C]=n.x,c[C]=n.y}else if("GEOGRAPHIC"===e&&this.dataManager.geographicLookup.has(i)){d[C]=qt.IsGeographic;let e=null;const t=r.attributes[this.dataManager.geographicLookup.get(i).name],n=this.dataManager.geographicLookup.get(i)?.geometryType;switch(n){case"esriGeometryPoint":h[C]=t?.x,c[C]=t?.y;break;case"esriGeometryPolygon":e=t?.centroid,null!=e?.x&&null!=e?.y?(h[C]=e.x,c[C]=e.y):d[C]=qt.IsMovable;break;case"esriGeometryPolyline":case"esriGeometryMultipoint":e=t?.extent?.center,null!=e?.x&&null!=e?.y?(h[C]=e.x,c[C]=e.y):d[C]=qt.IsMovable;break;default:d[C]=qt.IsMovable}(null==h[C]||null==c[C]||Number.isNaN(h[C])||Number.isNaN(c[C]))&&(d[C]=qt.IsMovable,h[C]=0,c[C]=0)}else d[C]=qt.IsMovable,h[C]=0,c[C]=0;p.set(r.attributes.ESRI__ID,C),g[C]={feature:r,typeName:i},C++}));let M=!1;if(i.forEach((e=>{const t=p.get(e.feature.attributes.ESRI__ORIGIN_ID),n=p.get(e.feature.attributes.ESRI__DESTINATION_ID);void 0!==t&&void 0!==n?(m[I]=t,f[I]=n,I++):(M=!0,this.linkChartDiagramLookup.set(e.feature.attributes.ESRI__ORIGIN_ID,null),this.linkChartGeohashLookup.set(e.feature.attributes.ESRI__ORIGIN_ID,null))})),M&&a.Z.getLogger(this).warn("A relationship is a member of this layer that has either origin or destination entity nodes that are not members. The diagram geometry will be set to null"),await Qt(),!T(d,h,c,m,f))throw new o.Z("knowledge-graph:layout-failed","Attempting to arrange the records in the specified layout failed");for(let o=0;o<g.length;o++){if(d[o]===qt.IsMovable&&(h[o]=h[o]*_,c[o]=c[o]*b),c[o]>84.9999&&(c[o]=84.9999),c[o]<-84.9999&&(c[o]=-84.9999),h[o]>179.9999&&(h[o]=179.9999),h[o]<-179.9999&&(h[o]=-179.9999),g[o].feature.attributes.ESRI__LAYOUT_GEOMETRY=new X.Z(h[o],c[o]),r.has(g[o].typeName)){r.get(g[o].typeName)?.set(g[o].feature.attributes.ESRI__ID,g[o].feature)}else{const e=new Map;e.set(g[o].feature.attributes.ESRI__ID,g[o].feature),r.set(g[o].typeName,e)}l.set(g[o].feature.attributes.ESRI__ID,g[o].feature);const e=(0,y.GH)(g[o].feature.attributes.ESRI__LAYOUT_GEOMETRY);this.linkChartDiagramLookup.set(g[o].feature.attributes.ESRI__ID,g[o].feature.attributes.ESRI__LAYOUT_GEOMETRY?e:null),this.linkChartGeohashLookup.set(g[o].feature.attributes.ESRI__ID,(0,u.fC)(g[o].feature.attributes.ESRI__LAYOUT_GEOMETRY.y,g[o].feature.attributes.ESRI__LAYOUT_GEOMETRY.x,bt)),g[o].feature.attributes.ESRI__LAYOUT_GEOMETRY.x<w.xmin&&(w.xmin=g[o].feature.attributes.ESRI__LAYOUT_GEOMETRY.x),g[o].feature.attributes.ESRI__LAYOUT_GEOMETRY.x>w.xmax&&(w.xmax=g[o].feature.attributes.ESRI__LAYOUT_GEOMETRY.x),g[o].feature.attributes.ESRI__LAYOUT_GEOMETRY.y<w.ymin&&(w.ymin=g[o].feature.attributes.ESRI__LAYOUT_GEOMETRY.y),g[o].feature.attributes.ESRI__LAYOUT_GEOMETRY.y>w.ymax&&(w.ymax=g[o].feature.attributes.ESRI__LAYOUT_GEOMETRY.y)}return this.linkChartExtent.xmin=w.xmin,this.linkChartExtent.xmax=w.xmax,this.linkChartExtent.ymin=w.ymin,this.linkChartExtent.ymax=w.ymax,i.forEach((e=>{const t=g[p.get(e.feature.attributes.ESRI__ORIGIN_ID)]?.feature.attributes.ESRI__LAYOUT_GEOMETRY,n=g[p.get(e.feature.attributes.ESRI__DESTINATION_ID)]?.feature.attributes.ESRI__LAYOUT_GEOMETRY;if(!t||!n)return;const i=new ee.Z({paths:[[t.x,t.y],[n.x,n.y]]});if(e.feature.attributes.ESRI__LAYOUT_GEOMETRY=i,s.has(e.typeName)){s.get(e.typeName)?.set(e.feature.attributes.ESRI__ID,e.feature)}else{const t=new Map;t.set(e.feature.attributes.ESRI__ID,e.feature),s.set(e.typeName,t)}l.set(e.feature.attributes.ESRI__ID,e.feature);const r=(0,y.GH)(e.feature.attributes.ESRI__LAYOUT_GEOMETRY);this.linkChartDiagramLookup.set(e.feature.attributes.ESRI__ID,e.feature.attributes.ESRI__LAYOUT_GEOMETRY?r:null),this.linkChartGeohashLookup.set(e.feature.attributes.ESRI__ID,"")})),this._currentLinkChartConfig={layoutMode:e,xScaleFactor:_,yScaleFactor:b},{nodes:r,links:s,idMap:l}}async applyNewLinkChartLayout(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"RADIAL_TREE",t=arguments.length>1?arguments[1]:void 0;const n=[];await this.calculateLinkChartLayout(e,t),this.layers.forEach((e=>{n.push(e.refreshCachedQueryEngine())})),await Promise.all(n),this._refreshNamedTypes()}getCurrentNodeLocations(){const e=new Map;return this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.forEach((t=>{t?.members?.forEach((t=>{const n=t.linkChartLocation;let i;const r=t.id;n&&(i="x"in n?{x:n.x,y:n.y}:{x:n.coords[0],y:n.coords[1]},e.set(r,new X.Z({x:i.x,y:i.y})))}))})),e}async synchronizeInclusionListWithCache(){return new Promise((e=>{this.dataManager.inclusionModeDefinition?.namedTypeDefinitions.forEach(((e,t)=>{if(e.useAllData=!1,e.members&&e.members.size>0){if(!this.dataManager.sublayerCaches.get(t))return;const n=new Set(Array.from(this.dataManager.sublayerCaches.get(t).keys()));Array.from(e.members.keys()).filter((e=>!n.has(e))).forEach((t=>{e.members?.delete(t)}))}})),e()}))}async refreshLinkChartCache(e){await this.dataManager.refreshCacheContent(e);const t=[];this.layers.forEach((e=>{t.push(e.refreshCachedQueryEngine())})),await Promise.all(t),this._refreshNamedTypes()}async _handleNewRecords(e){const t=[];this.dataManager.addToLayer(e);for(const n of e)this.sublayerIdsCache.has(n.typeName)||(this.sublayerIdsCache.set(n.typeName,new Set),t.push(n.typeName)),this.sublayerIdsCache.get(n.typeName).add(n.id);for(const n of t)if(this._graphTypeLookup.has(n)){const e=this._graphTypeLookup.get(n),t="endPoints"in e?"relationship":"entity",i=new Ut({objectType:e,parentCompositeLayer:this,graphType:t,title:n});"entity"===t?this.dataManager.entityTypeNames.add(n):this.dataManager.relationshipTypeNames.add(n),i.geometryType?this.layers.push(i):this.tables.push(i),this.dataManager.sublayerCaches.set(n,new Map)}await this.dataManager.refreshCacheContent(e.map((e=>e.id))),await this.applyNewLinkChartLayout(this._currentLinkChartConfig.layoutMode,{xScaleFactor:this._currentLinkChartConfig.xScaleFactor,yScaleFactor:this._currentLinkChartConfig.xScaleFactor})}async _initializeDiagram(){this.defaultLinkChartConfig?this.defaultLinkChartConfig.doNotRecalculateLayout?(this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.forEach((e=>{e?.members?.forEach((e=>{const t=e.linkChartLocation;let n;const i=e.id;if(!t)return;n="x"in t?{x:t.x,y:t.y}:{x:t.coords[0],y:t.coords[1]};const r=(0,y.GH)(n);this.linkChartDiagramLookup.set(i,r),this.linkChartGeohashLookup.set(i,(0,u.fC)(n.x,n.y,bt)),this.linkChartExtent.xmin>n.x&&(this.linkChartExtent.xmin=n.x),this.linkChartExtent.xmax<n.x&&(this.linkChartExtent.xmax=n.x),this.linkChartExtent.ymin>n.y&&(this.linkChartExtent.ymin=n.y),this.linkChartExtent.ymax<n.y&&(this.linkChartExtent.ymax=n.y)}))})),this.memberRelationshipTypes.forEach((e=>{e.name&&this.dataManager.sublayerCaches.get(e.name)?.forEach((e=>{const t=this.linkChartDiagramLookup.get(e.attributes.ESRI__ORIGIN_ID),n=this.linkChartDiagramLookup.get(e.attributes.ESRI__DESTINATION_ID);if(t&&n){const i=(0,y.GH)(new ee.Z({paths:[[t.coords[0],t.coords[1]],[n.coords[0],n.coords[1]]]}));this.linkChartDiagramLookup.set(e.attributes.ESRI__ID,i)}else this.linkChartDiagramLookup.set(e.attributes.ESRI__ID,null);this.linkChartGeohashLookup.set(e.attributes.ESRI__ID,"")}))}))):await this.calculateLinkChartLayout(this.defaultLinkChartConfig.layoutMode,{xScaleFactor:this.defaultLinkChartConfig.xScaleFactor,yScaleFactor:this.defaultLinkChartConfig.yScaleFactor,lockedNodeLocations:this.getCurrentNodeLocations()}):await this.calculateLinkChartLayout("RADIAL_TREE",{lockedNodeLocations:this.getCurrentNodeLocations()})}_refreshNamedTypes(){for(const e of this.layers)e.emit("refresh",{dataChanged:!0});for(const e of this.tables)e.emit("refresh",{dataChanged:!0})}};(0,i._)([(0,l.Cb)()],tn.prototype,"dataPreloadedInLocalCache",void 0),(0,i._)([(0,l.Cb)()],tn.prototype,"defaultLinkChartConfig",void 0),(0,i._)([(0,l.Cb)()],tn.prototype,"dataManager",void 0),(0,i._)([(0,l.Cb)()],tn.prototype,"knowledgeGraph",void 0),(0,i._)([(0,l.Cb)()],tn.prototype,"layers",void 0),(0,i._)([(0,l.Cb)()],tn.prototype,"linkChartDiagramLookup",void 0),(0,i._)([(0,l.Cb)()],tn.prototype,"linkChartExtent",void 0),(0,i._)([(0,l.Cb)()],tn.prototype,"linkChartGeohashLookup",void 0),(0,i._)([(0,l.Cb)()],tn.prototype,"memberEntityTypes",void 0),(0,i._)([(0,l.Cb)()],tn.prototype,"memberRelationshipTypes",void 0),(0,i._)([(0,l.Cb)()],tn.prototype,"sublayerIdsCache",void 0),(0,i._)([(0,l.Cb)()],tn.prototype,"tables",void 0),(0,i._)([(0,l.Cb)({json:{read:!1}})],tn.prototype,"type",void 0),tn=(0,i._)([(0,d.j)("esri.layers.LinkChartLayer")],tn);const nn=tn},63543:(e,t,n)=>{n.d(t,{Dm:()=>d,Hq:()=>u,MS:()=>h,bU:()=>s});var i=n(93169),r=n(84652),o=n(60480),a=n(76115);function s(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?a.I4:"esriGeometryPolyline"===e?a.ET:a.lF}}}const l=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let p=1;function d(e,t){if((0,i.Z)("esri-csp-restrictions"))return()=>({[t]:null,...e});try{let n=`this.${t} = null;`;for(const t in e)n+=`this${l.test(t)?`.${t}`:`["${t}"]`} = ${JSON.stringify(e[t])};`;const i=new Function(`\n      return class AttributesClass$${p++} {\n        constructor() {\n          ${n};\n        }\n      }\n    `)();return()=>new i}catch(n){return()=>({[t]:null,...e})}}function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"New Feature",description:"",prototype:{attributes:(0,r.d9)(e)}}]}function h(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:o.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}}}]);
//# sourceMappingURL=46326.32a311d6.chunk.js.map