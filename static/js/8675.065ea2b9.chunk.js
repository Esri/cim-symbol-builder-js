"use strict";(globalThis.webpackChunkmy_app=globalThis.webpackChunkmy_app||[]).push([[8675],{28675:(e,t,i)=>{i.d(t,{previewCIMSymbol:()=>w});var l=i(76931),a=i(401),n=i(6840),o=i(42436),r=i(97763),s=i(65709),c=i(26291);const u=new n.Z(null),h=(0,l.PN)(s.CB.size),y=(0,l.PN)(s.CB.maxSize),p=(0,l.PN)(s.CB.lineWidth),f=1;async function m(e,t,i){const l=t?.size;let n=null!=l&&"object"==typeof l&&"width"in l?l.width:l,r=null!=l&&"object"==typeof l&&"height"in l?l.height:l;if(null==n||null==r)if("esriGeometryPolygon"===i)n=h,r=h;else{const l=await async function(e,t,i){const{feature:l,fieldMap:n,viewParams:r}=t.cimOptions||t,s=await o.$.resolveSymbolOverrides(e.data,l,null,n,i,null,r);if(!s)return null;(e=e.clone()).data={type:"CIMSymbolReference",symbol:s},e.data.primitiveOverrides=void 0;const c=[];return a.wp.fetchResources(s,u.resourceManager,c),a.wp.fetchFonts(s,u.resourceManager,c),c.length>0&&await Promise.all(c),a.wp.getEnvelope(s,null,u.resourceManager)}(e,t,i);l&&(n=l.width,r=l.height),"esriGeometryPolyline"===i&&(n=p),n=null!=n&&isFinite(n)?Math.min(n,y):h,r=null!=r&&isFinite(r)?Math.max(Math.min(r,y),f):h}return"legend"===t.style&&"esriGeometryPolyline"===i&&(n=p),{width:n,height:r}}async function w(e,t={}){const{node:i,opacity:a,symbolConfig:n}=t,o=null!=n&&"object"==typeof n&&"isSquareFill"in n&&n.isSquareFill,s=t.cimOptions||t,h=s.geometryType||(0,r.n5)(e?.data?.symbol),y=await m(e,t,h),{feature:p,fieldMap:f}=s,w=o||"esriGeometryPolygon"!==h?"preview":"legend",d=await u.rasterizeCIMSymbolAsync(e,p,y,w,f,h,null,s.viewParams,s.allowScalingUp);if(!d)return null;const{width:g,height:b}=d,v=document.createElement("canvas");v.width=g,v.height=b,v.getContext("2d").putImageData(d,0,0);const C=(0,l.Lz)(y.width),M=(0,l.Lz)(y.height),P=new Image(C,M);P.src=v.toDataURL(),P.ariaLabel=t.ariaLabel??null,P.alt=t.ariaLabel??"",null!=a&&(P.style.opacity=`${a}`);let L=P;if(null!=t.effectView){const e={shape:{type:"image",x:0,y:0,width:C,height:M,src:P.src},fill:null,stroke:null,offset:[0,0]};L=(0,c.fz)([[e]],[C,M],{effectView:t.effectView,ariaLabel:t.ariaLabel})}return i&&L&&i.appendChild(L),L}}}]);
//# sourceMappingURL=8675.065ea2b9.chunk.js.map