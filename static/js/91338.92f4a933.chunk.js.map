{"version":3,"file":"static/js/91338.92f4a933.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/smartMapping/renderers/support/referenceSizeUtils.js","../node_modules/@arcgis/core/widgets/Legend/support/sizeRampUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import{clone as r}from\"../../../core/lang.js\";import n from\"../../../renderers/visualVariables/support/SizeStop.js\";import t from\"../../../symbols/CIMSymbol.js\";import{PlacementPolygonCenterMethod as i}from\"../../../symbols/cim/enums.js\";var a;function o(r){if(null!=r.minDataValue&&null!=r.maxDataValue&&null!=r.minSize&&null!=r.maxSize&&\"number\"==typeof r.minSize&&\"number\"==typeof r.maxSize)return[new n({value:r.minDataValue,size:r.minSize}),new n({value:r.maxDataValue,size:r.maxSize})];throw new e(\"create-reference-size-symbol\",\"Invalid size variable\")}function l(e){const{view:r,field:n,normalizationField:t,sizeStops:i,sizeByScaleEnabled:o}=e,{value:l,size:s}=i[0],{value:m,size:c}=i[1];let u,y=0;n&&(y=`$feature[\"${n}\"]`,u=`\\n      if(!HasValue($feature, \"${n}\")){\\n        return 0;\\n      }\\n      $feature[\"${n}\"];\\n    `),t&&(y=`$feature[\"${n}\"] / $feature[\"${t}\"]`,u=`if(!HasValue($feature, \"${n}\") || !HasValue($feature, \"${t}\") || $feature[\"${t}\"] <= 0){\\n        return 0;\\n      }\\n      $feature[\"${n}\"];\\n      $feature[\"${t}\"];`);const p={type:\"CIMExpressionInfo\",title:\"Size in pixels of outer ring\",expression:o?`\\n      ${u}\\n      var maxSize = ${c};\\n      var referenceScale = ${r.scale};\\n      return (maxSize * (referenceScale / $view.scale));\\n    `:`${u}\\n      return ${c}`,returnType:\"Default\"},f={type:\"CIMExpressionInfo\",title:\"Size in pixels of inner ring\",expression:`\\n        ${u}\\n        var value = ${y};\\n\\n        var referenceScale = ${r.scale};\\n        var referenceScaleRatio = ${o?\"(referenceScale / $view.scale)\":1};\\n        var maxSize = ${c} * referenceScaleRatio;\\n        var minSize = ${s} * referenceScaleRatio;\\n\\n        var minDataValue = ${l};\\n        var maxDataValue = ${m};\\n\\n        var ratio = Constrain(( value - minDataValue ) / ( maxDataValue - minDataValue ), 0, 1);\\n\\n        var innerDotSize = Constrain(maxSize * ratio, minSize, maxSize);\\n        return innerDotSize;\\n      `,returnType:\"Default\"};return[{type:\"CIMPrimitiveOverride\",primitiveName:a.OuterRing,propertyName:\"Size\",valueExpressionInfo:p},{type:\"CIMPrimitiveOverride\",primitiveName:a.InnerDot,propertyName:\"Size\",valueExpressionInfo:f}]}function s(e){switch(e){case\"circle\":return{rings:[[[8.5,.2],[7.06,.33],[5.66,.7],[4.35,1.31],[3.16,2.14],[2.14,3.16],[1.31,4.35],[.7,5.66],[.33,7.06],[.2,8.5],[.33,9.94],[.7,11.34],[1.31,12.65],[2.14,13.84],[3.16,14.86],[4.35,15.69],[5.66,16.3],[7.06,16.67],[8.5,16.8],[9.94,16.67],[11.34,16.3],[12.65,15.69],[13.84,14.86],[14.86,13.84],[15.69,12.65],[16.3,11.34],[16.67,9.94],[16.8,8.5],[16.67,7.06],[16.3,5.66],[15.69,4.35],[14.86,3.16],[13.84,2.14],[12.65,1.31],[11.34,.7],[9.94,.33],[8.5,.2]]]};case\"square\":return{rings:[[[.5,.5],[.5,16.5],[16.5,16.5],[16.5,.5],[.5,.5]]]};case\"diamond\":return{rings:[[[8.5,.5],[.2,8.5],[8.5,16.5],[16.5,8.5],[8.5,.5]]]};case\"hexagon-pointy\":return{rings:[[[15.86,12.75],[15.86,4.25],[8.5,0],[1.14,4.25],[1.14,12.75],[8.5,17],[15.86,12.75]]]};case\"hexagon-flat\":return{rings:[[[12.75,15.86],[17,8.5],[12.75,1.14],[4.25,1.14],[0,8.5],[4.25,15.86],[12.75,15.86]]]}}}function m(e){const{type:r,color:n,colorLocked:t}=e;return{type:\"CIMVectorMarker\",enable:!0,colorLocked:!1,anchorPoint:{x:0,y:0},anchorPointUnits:\"Relative\",primitiveName:a.OuterRing,frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:s(r),symbol:{type:\"CIMPolygonSymbol\",symbolLayers:[{type:\"CIMSolidFill\",enable:!0,color:n.toArray(),colorLocked:!!t,effects:[{type:\"CIMGeometricEffectDonut\",width:.75}]}]}}],scaleSymbolsProportionally:!1,respectFrame:!0,markerPlacement:{type:\"CIMMarkerPlacementPolygonCenter\",placePerPart:!1,method:i.OnPolygon,offsetX:0,offsetY:0,clipAtBoundary:!1},size:20}}function c(e){const{type:r,color:n}=e;return{type:\"CIMVectorMarker\",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:\"Relative\",primitiveName:a.InnerDot,frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:s(r),symbol:{type:\"CIMPolygonSymbol\",symbolLayers:[{type:\"CIMSolidFill\",enable:!0,color:n.toArray()}]}}],scaleSymbolsProportionally:!0,respectFrame:!0,markerPlacement:{type:\"CIMMarkerPlacementPolygonCenter\",placePerPart:!1,method:i.OnPolygon,offsetX:0,offsetY:0,clipAtBoundary:!1},size:10}}function u(e){const{primitiveOverrides:r}=e;return new t({data:{type:\"CIMSymbolReference\",symbol:{type:\"CIMPolygonSymbol\",symbolLayers:[m(e),c(e)]},primitiveOverrides:r}})}function y(e){return\"CIMVectorMarker\"===e?.type?e.markerGraphics?.[0]:void 0}function p(e){return\"CIMPolygonSymbol\"===e?.symbol?.type?e.symbol.symbolLayers?.[0]:void 0}function f(e,r){\"CIMVectorMarker\"===e?.type&&null!=r&&(e.size=r)}function v(e,r){const n=y(e);n&&null!=r&&(n.geometry=s(r))}function S(e,r){const n=p(y(e));n&&null!=r&&(n.color=r.toArray())}function z(e,r,n){const t=p(y(e));t&&null!=r&&n&&(t.colorLocked=r)}function d(e,n){const{outerRingSize:t,innerDotSize:i,type:o,color:l,colorLocked:s,primitiveOverrides:m}=n,c=\"CIMPolygonSymbol\"===e.data.symbol?.type?e.data.symbol.symbolLayers:null;if(2===c?.length)for(const r of c){const e=r.primitiveName===a.OuterRing;f(r,e?t:i),v(r,o),S(r,l),z(r,s,e)}return null!=t&&null!=i&&(e.data.primitiveOverrides=null),void 0!==m&&(e.data.primitiveOverrides=r(m)),e}!function(e){e.OuterRing=\"reference-size-outer-ring\",e.InnerDot=\"reference-size-inner-dot\"}(a||(a={}));export{l as createPrimitiveOverrides,u as createReferenceSizeSymbol,o as getReferenceSizeStops,d as updateReferenceSizeSymbol};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../Color.js\";import{round as l,numDigits as t,percentChange as n}from\"../../../renderers/support/numberUtils.js\";import{updateReferenceSizeSymbol as o}from\"../../../smartMapping/renderers/support/referenceSizeUtils.js\";import s from\"../../../symbols/SimpleLineSymbol.js\";import i from\"../../../symbols/SimpleMarkerSymbol.js\";import{applyCIMSymbolColor as r}from\"../../../symbols/support/cimSymbolUtils.js\";import{isSymbol3D as a}from\"../../../symbols/support/typeUtils.js\";import{isVolumetricSymbol as u,getSymbolOutlineSize as c}from\"../../../symbols/support/utils.js\";import{getReferenceSizeAuthoringInfoVisualVariable as m,getSymbolForFlowRenderer as p,createStopLabel as f}from\"./utils.js\";import\"../../support/widgetUtils.js\";import{isDarkTheme as y}from\"../../../support/themeUtils.js\";const b=30,h=12,d=24,w=[255,255,255],S=[200,200,200],g=[128,128,128],v=20,z=5;function j(e){return\"esri.symbols.SimpleMarkerSymbol\"===e.declaredClass}function k(e){return\"esri.symbols.PictureMarkerSymbol\"===e.declaredClass}function V(e){return\"esri.symbols.SimpleLineSymbol\"===e.declaredClass}function x(e){return\"esri.symbols.TextSymbol\"===e.declaredClass}function U(e,l){const t=e.length-1;return e.map(((e,n)=>f(e,n,t,l)))}async function I(e,t,n,o,s,i,r){const a=t.legendOptions,p=a?.customValues,f=r||await D(e,n),y=t.stops,b=!!f,h=!!p,w=null!=t.minSize&&null!=t.maxSize,S=y&&y.length>1,g=!!t.target;if(!b||!h&&!(w||S&&!g))return;const v=u(f);let z=!1,j=null,k=null;j=v&&!S?l([t.minDataValue,t.maxDataValue]):p??await T(t,f,o,s?.type);const V=e?.authoringInfo,x=\"univariate-color-size\"===V?.type,I=x&&\"above-and-below\"===V?.univariateTheme,q=!!m(e);if(!j&&S&&(j=y.map((e=>e.value)),z=y.some((e=>!!e.label)),\"flow\"===e.type&&(j=l(j)),z&&(k=y.map((e=>e.label)))),v&&null!=j&&j?.length>2&&!I&&(j=[j[0],j[j.length-1]]),!j)return null;x&&5!==j?.length&&(j=P({minSize:j[0],maxSize:j[j.length-1]}));const B=v?L(e,j):null,E=c(f),R=z?null:U(j,i);return(await Promise.all(j.map((async(l,i)=>{const r=v?B[i]:await H(t,f,l,o,s?.type);return{value:l,symbol:!q||\"class-breaks\"!==e.type&&\"unique-value\"!==e.type?O(I&&\"class-breaks\"===e.type?C(e,i):f,r):M(e,r,t.maxSize,n)??f,label:z?k[i]:R[i],size:q?d:r,outlineSize:E}})))).reverse()}function L(e,l){const t=e?.authoringInfo,n=\"univariate-color-size\"===t?.type;let o=[h,b];if(n){const e=l[0],t=l[l.length-1],n=h,s=b;o=l.map((l=>n+(l-e)/(t-e)*(s-n)))}return n&&\"below\"===t?.univariateTheme&&o.reverse(),o}function M(l,t,n,s){const i=\"class-breaks\"===l.type,r=i?l.classBreakInfos?.[0]?.symbol?.clone():l.uniqueValueInfos?.[0]?.symbol?.clone();return r&&\"type\"in r&&\"cim\"===r.type?(o(r,{color:s??(i?null:new e(S)),innerDotSize:t*(d/n)||1,outerRingSize:d}),r):null}function C(e,l){const t=e.classBreakInfos,n=t.length,o=n<2||!(l>=2)?t[0].symbol.clone():t[n-1].symbol.clone(),s=e.visualVariables?.some((e=>\"color\"===e.type));return s&&(o.type.includes(\"3d\")?B(o):E(o)),o}async function D(e,l){if(\"flow\"===e.type)return p(e,l);if(\"pie-chart\"===e.type)return new i({color:null,outline:e.outline?.width?e.outline:new s});let t=null,n=null;if(\"simple\"===e.type)t=e.symbol;else if(\"class-breaks\"===e.type){const l=e.classBreakInfos;t=l&&l[0]&&l[0].symbol,n=l.length>1}else if(\"unique-value\"===e.type){const l=e.uniqueValueInfos;t=l?.[0]?.symbol,n=null!=l&&l.length>1}return!t||q(t)?null:(t=t.clone(),(l||n)&&(t.type.includes(\"3d\")?B(t):E(t)),t)}function q(e){return a(e)?e.symbolLayers?.some((e=>\"fill\"===e?.type))??!1:e?.type.includes(\"fill\")??!1}function B(e){\"line-3d\"===e.type?e.symbolLayers.forEach((e=>{e.material={color:g}})):e.symbolLayers.forEach((e=>{\"icon\"!==e.type||e.resource?.href?e.material={color:S}:(e.material={color:w},e.outline={color:g,size:1.5})}))}function E(l){const t=y();if(\"cim\"===l.type)r(l,new e(S));else if(l.type.includes(\"line\"))l.color=g;else if(l.color=t?g:w,\"simple-marker\"===l.type)if(l.outline){const e=l.outline?.color?.toHex();\"#ffffff\"===e&&(l.outline.color=g)}else l.outline={color:g,width:1.5}}async function T(e,t,n,o){const s=(await import(\"../../../renderers/visualVariables/support/visualVariableUtils.js\")).getSizeRangeAtScale(e,n,o),i=s&&P(s);if(!s||!i)return;let r=i.map((l=>R(l,e,s)));r=l(r);for(let l=1;l<r.length-1;l++){const s=await A(e,t,r[l],r[l-1],n,o);s&&(r[l]=s[0],i[l]=s[1])}return r}function P(e){const l=e.minSize,t=e.maxSize,n=z,o=(t-l)/(n-1),s=[];for(let i=0;i<n;i++)s.push(l+o*i);return s}function R(e,l,t){const n=t.minSize,o=t.maxSize,s=l.minDataValue,i=l.maxDataValue;let r;if(e<=n)r=s;else if(e>=o)r=i;else{r=(e-n)/(o-n)*(i-s)+s}return r}async function A(e,o,s,i,r,a){const u=await H(e,o,s,r,a),c=await H(e,o,i,r,a),m=t(s),p=m.fractional,f=v;let y=m.integer,b=null,h=null;s>0&&s<1&&(b=10**p,y=t(s*=b).integer);for(let t=y-1;t>=0;t--){const i=10**t;let m=Math.floor(s/i)*i,p=Math.ceil(s/i)*i;null!=b&&(m/=b,p/=b);let y=(m+p)/2;[,y]=l([m,y,p],{indexes:[1]});const d=await H(e,o,m,r,a),w=await H(e,o,p,r,a),S=await H(e,o,y,r,a),g=n(u,d,c,null),v=n(u,w,c,null),z=n(u,S,c,null);let j=g.previous<=f,k=v.previous<=f;if(j&&k&&(g.previous<=v.previous?(j=!0,k=!1):(k=!0,j=!1)),j?h=[m,d]:k?h=[p,w]:z.previous<=f&&(h=[y,S]),h)break}return h}async function H(e,l,t,n,o){const{getSize:s}=await import(\"../../../renderers/visualVariables/support/visualVariableUtils.js\");return s(e,t,{scale:n,view:o,shape:\"simple-marker\"===l.type?l.style:null})}function O(e,l){const t=e.clone();if(a(t))u(t)||t.symbolLayers.forEach((e=>{\"fill\"!==e.type&&(e.size=l)}));else if(j(t))t.size=l;else if(k(t)){const e=t.width,n=t.height;t.height=l,t.width=l*(e/n)}else V(t)?t.width=l:x(t)&&t.font&&(t.font.size=l);return t}export{I as getRampStops,M as getReferenceSizeSymbol,b as realWorldMaxSize,h as realWorldMinSize};\n"],"names":["a","s","e","rings","y","type","markerGraphics","p","symbol","symbolLayers","f","r","size","v","n","geometry","S","color","toArray","z","t","colorLocked","OuterRing","InnerDot","b","h","d","w","g","async","I","o","i","legendOptions","customValues","D","stops","minSize","maxSize","length","target","u","j","k","l","minDataValue","maxDataValue","T","V","authoringInfo","x","univariateTheme","q","m","map","value","some","label","P","B","L","E","c","R","U","Promise","all","H","O","C","M","outlineSize","reverse","classBreakInfos","clone","uniqueValueInfos","outerRingSize","innerDotSize","primitiveOverrides","data","primitiveName","visualVariables","includes","outline","width","forEach","material","resource","href","toHex","getSizeRangeAtScale","A","push","fractional","integer","Math","floor","ceil","indexes","previous","getSize","scale","view","shape","style","declaredClass","height","font"],"sourceRoot":""}