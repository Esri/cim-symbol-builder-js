"use strict";(globalThis.webpackChunkmy_app=globalThis.webpackChunkmy_app||[]).push([[3432],{91340:(e,t,n)=>{n.d(t,{aX:()=>k,or:()=>S});var o=n(42265),r=n(10064),s=n(32718),i=n(80885),l=n(29909),c=n(76335),a=n(92975),u=n(81753),f=(n(59486),n(76200)),p=n(77981),h=n(23084);var y=n(35995),m=n(35594);const g=s.Z.getLogger("esri.geometry.support.normalizeUtils");function d(e){return"polygon"===e[0].type}function w(e){return"polyline"===e[0].type}function b(e,t,n){if(t){const t=function(e,t){if(!(e instanceof l.Z||e instanceof i.Z)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw g.error(e),new r.Z(e)}const n=(0,c.x3)(e),o=[];for(const r of n){const e=[];o.push(e),e.push([r[0][0],r[0][1]]);for(let n=0;n<r.length-1;n++){const o=r[n][0],s=r[n][1],i=r[n+1][0],l=r[n+1][1],c=Math.sqrt((i-o)*(i-o)+(l-s)*(l-s)),a=(l-s)/c,u=(i-o)/c,f=c/t;if(f>1){for(let l=1;l<=f-1;l++){const n=l*t,r=u*n+o,i=a*n+s;e.push([r,i])}const n=(c+Math.floor(f-1)*t)/2,r=u*n+o,i=a*n+s;e.push([r,i])}e.push([i,l])}}return function(e){return"polygon"===e.type}(e)?new i.Z({rings:o,spatialReference:e.spatialReference}):new l.Z({paths:o,spatialReference:e.spatialReference})}(e,1e6);e=(0,u.Sx)(t,!0)}return n&&(e=(0,c.Sy)(e,n)),e}function x(e,t,n){if(Array.isArray(e)){const o=e[0];if(o>t){const n=(0,c.XZ)(o,t);e[0]=o+n*(-2*t)}else if(o<n){const t=(0,c.XZ)(o,n);e[0]=o+t*(-2*n)}}else{const o=e.x;if(o>t){const n=(0,c.XZ)(o,t);e=e.clone().offset(n*(-2*t),0)}else if(o<n){const t=(0,c.XZ)(o,n);e=e.clone().offset(t*(-2*n),0)}}return e}function Z(e,t){let n=-1;for(let o=0;o<t.cutIndexes.length;o++){const r=t.cutIndexes[o],s=t.geometries[o],i=(0,c.x3)(s);for(let e=0;e<i.length;e++){const t=i[e];t.some((n=>{if(n[0]<180)return!0;{let n=0;for(let e=0;e<t.length;e++){const o=t[e][0];n=o>n?o:n}n=Number(n.toFixed(9));const o=-360*(0,c.XZ)(n,180);for(let r=0;r<t.length;r++){const t=s.getPoint(e,r);s.setPoint(e,r,t.clone().offset(o,0))}return!0}}))}if(r===n){if(d(e))for(const t of(0,c.x3)(s))e[r]=e[r].addRing(t);else if(w(e))for(const t of(0,c.x3)(s))e[r]=e[r].addPath(t)}else n=r,e[r]=s}return e}async function k(e,t,n){if(!Array.isArray(e))return k([e],t);t&&"string"!=typeof t&&g.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r="string"==typeof t?t:t?.url??o.Z.geometryServiceUrl;let s,d,w,S,L,R,v,X,j=0;const z=[],U=[];for(const o of e)if(null!=o)if(s||(s=o.spatialReference,d=(0,a.C5)(s),w=s.isWebMercator,R=w?102100:4326,S=c.UZ[R].maxX,L=c.UZ[R].minX,v=c.UZ[R].plus180Line,X=c.UZ[R].minus180Line),d)if("mesh"===o.type)U.push(o);else if("point"===o.type)U.push(x(o.clone(),S,L));else if("multipoint"===o.type){const e=o.clone();e.points=e.points.map((e=>x(e,S,L))),U.push(e)}else if("extent"===o.type){const e=o.clone()._normalize(!1,!1,d);U.push(e.rings?new i.Z(e):e)}else if(o.extent){const e=o.extent,t=(0,c.XZ)(e.xmin,L)*(2*S);let n=0===t?o.clone():(0,c.Sy)(o.clone(),t);e.offset(t,0),e.intersects(v)&&e.xmax!==S?(j=e.xmax>j?e.xmax:j,n=b(n,w),z.push(n),U.push("cut")):e.intersects(X)&&e.xmin!==L?(j=e.xmax*(2*S)>j?e.xmax*(2*S):j,n=b(n,w,360),z.push(n),U.push("cut")):U.push(n)}else U.push(o.clone());else U.push(o);else U.push(o);let J=(0,c.XZ)(j,S),O=-90;const N=J,M=new l.Z;for(;J>0;){const e=360*J-180;M.addPath([[e,O],[e,-1*O]]),O*=-1,J--}if(z.length>0&&N>0){const t=Z(z,await async function(e,t,n,o){const r=(0,h.en)(e),s=t[0].spatialReference,i={...o,query:{...r.query,f:"json",sr:JSON.stringify(s),target:JSON.stringify({geometryType:(0,p.Ji)(t[0]),geometries:t}),cutter:JSON.stringify(n)}},l=await(0,f.default)(r.path+"/cut",i),{cutIndexes:c,geometries:a=[]}=l.data;return{cutIndexes:c,geometries:a.map((e=>{const t=(0,p.im)(e);return t.spatialReference=s,t}))}}(r,z,M,n)),o=[],s=[];for(let n=0;n<U.length;n++){const r=U[n];if("cut"!==r)s.push(r);else{const r=t.shift(),i=e[n];null!=i&&"polygon"===i.type&&i.rings&&i.rings.length>1&&r.rings.length>=i.rings.length?(o.push(r),s.push("simplify")):s.push(w?(0,u.$)(r):r)}}if(!o.length)return s;const i=await async function(e,t,n){const o="string"==typeof e?(0,y.mN)(e):e,r=t[0].spatialReference,s=(0,p.Ji)(t[0]),i={...n,query:{...o.query,f:"json",sr:r.wkid??JSON.stringify(r),geometries:JSON.stringify((0,m.F)(t))}},{data:l}=await(0,f.default)(o.path+"/simplify",i);return(0,m.o)(l.geometries,s,r)}(r,o,n),l=[];for(let e=0;e<s.length;e++){const t=s[e];"simplify"!==t?l.push(t):l.push(w?(0,u.$)(i.shift()):i.shift())}return l}const T=[];for(let o=0;o<U.length;o++){const e=U[o];if("cut"!==e)T.push(e);else{const e=z.shift();T.push(!0===w?(0,u.$)(e):e)}}return T}function S(e,t){const n=(0,a.C5)(t);if(n){const[t,o]=n.valid,r=o-t;if(e<t)for(;e<t;)e+=r;if(e>o)for(;e>o;)e-=r}return e}},76335:(e,t,n)=>{n.d(t,{Sy:()=>c,UZ:()=>i,XZ:()=>l,x3:()=>a});var o=n(29909),r=n(78952),s=n(77981);const i={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new o.Z({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:r.Z.WebMercator}),minus180Line:new o.Z({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:r.Z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new o.Z({paths:[[[180,-180],[180,180]]],spatialReference:r.Z.WGS84}),minus180Line:new o.Z({paths:[[[-180,-180],[-180,180]]],spatialReference:r.Z.WGS84})}};function l(e,t){return Math.ceil((e-t)/(2*t))}function c(e,t){const n=a(e);for(const o of n)for(const e of o)e[0]+=t;return e}function a(e){return(0,s.oU)(e)?e.rings:e.paths}},35594:(e,t,n)=>{n.d(t,{F:()=>r,o:()=>s});var o=n(77981);function r(e){return{geometryType:(0,o.Ji)(e[0]),geometries:e.map((e=>e.toJSON()))}}function s(e,t,n){const r=(0,o.q9)(t);return e.map((e=>{const t=r.fromJSON(e);return t.spatialReference=n,t}))}},79563:(e,t,n)=>{n.d(t,{Ne:()=>d,Od:()=>y,Sp:()=>g,_M:()=>h,mx:()=>m});var o=n(65905),r=n(51995),s=n(76200),i=n(16054),l=n(17842),c=n(49729);const a="picture-fill",u="simple-fill",f="simple-marker",p=new i.z(1e3);function h(e){const t=e.style;let n=null;if(e)switch(e.type){case f:"cross"!==t&&"x"!==t&&(n=e.color);break;case u:"solid"===t?n=e.color:"none"!==t&&(n={type:"pattern",x:0,y:0,src:(0,o.V)(`esri/symbols/patterns/${t}.png`),width:5,height:5});break;case a:n={type:"pattern",src:e.url,width:(0,l.F2)(e.width)*e.xscale,height:(0,l.F2)(e.height)*e.yscale,x:(0,l.F2)(e.xoffset),y:(0,l.F2)(e.yoffset)};break;case"text":n=e.color;break;case"cim":n=(0,c.iW)(e)}return n}function y(e,t){const n=e+"-"+t;return void 0!==p.get(n)?Promise.resolve(p.get(n)):(0,s.default)(e,{responseType:"image"}).then((e=>{const o=e.data,r=o.naturalWidth,s=o.naturalHeight,i=document.createElement("canvas");i.width=r,i.height=s;const l=i.getContext("2d");l.fillStyle=t,l.fillRect(0,0,r,s),l.globalCompositeOperation="destination-in",l.drawImage(o,0,0);const c=i.toDataURL();return p.put(n,c),c}))}function m(e){if(!e)return null;let t=null;switch(e.type){case u:case a:case f:t=m(e.outline);break;case"simple-line":{const n=(0,l.F2)(e.width);null!=e.style&&"none"!==e.style&&0!==n&&(t={color:e.color,style:g(e.style),width:n,cap:e.cap,join:"miter"===e.join?(0,l.F2)(e.miterLimit):e.join});break}default:t=null}return t}const g=(()=>{const e={};return t=>{if(e[t])return e[t];const n=t.replaceAll("-","");return e[t]=n,n}})(),d=new r.Z([128,128,128])},74579:(e,t,n)=>{n.d(t,{BR:()=>k,Q8:()=>L,YW:()=>p,_h:()=>y,e3:()=>Z,nf:()=>h,tb:()=>g,wJ:()=>S});var o=n(51995),r=n(51508),s=n(14921),i=(n(93169),n(92026)),l=n(71353),c=n(60676),a=n(49729),u=(n(79563),n(32537));const f=new o.Z("white");function p(e){if(null==e||!("symbolLayers"in e)||null==e.symbolLayers)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some((e=>"object"===e.type));case"line-3d":return e.symbolLayers.some((e=>"path"===e.type));case"polygon-3d":return e.symbolLayers.some((e=>"object"===e.type||"extrude"===e.type));default:return!1}}function h(e){return(0,i.s3)(e.resource).href}function y(e,t){if(!e)return null;let n=null;return(0,r.dU)(e)?n=function(e){const t=e.symbolLayers;if(!t)return null;let n=null;return t.forEach((e=>{"object"===e.type&&e.resource?.href||(n="water"===e.type?e.color:e.material?e.material.color:null)})),n?new o.Z(n):null}(e):(0,r.cT)(e)&&(n="cim"===e.type?(0,a.iW)(e):e.color?new o.Z(e.color):null),n?m(n,t):null}function m(e,t){if(null==t||null==e)return e;const n=e.toRgba();return n[3]=n[3]*t,new o.Z(n)}function g(e,t,n){e&&(t||null!=n)&&(t&&(t=new o.Z(t)),(0,r.dU)(e)?function(e,t,n){const o=e.symbolLayers;if(!o)return;const r=e=>m(t=t??e??(null!=n?f:null),n);o.forEach((e=>{if("object"!==e.type||!e.resource?.href||t)if("water"===e.type)e.color=r(e.color);else{const t=null!=e.material?e.material.color:null,o=r(t);null==e.material?e.material=new u.b({color:o}):e.material.color=o,null!=n&&"outline"in e&&null!=e.outline&&null!=e.outline.color&&(e.outline.color=m(e.outline.color,n))}}))}(e,t,n):(0,r.cT)(e)&&function(e,t,n){(t=t??e.color)&&(e.color=m(t,n)),null!=n&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=m(e.outline.color,n))}(e,t,n))}async function d(e,t){const o=e.symbolLayers;o&&await(0,s.Ed)(o,(async e=>async function(e,t){switch(e.type){case"extrude":!function(e,t){e.size="number"==typeof t[2]?t[2]:0}(e,t);break;case"icon":case"line":case"text":!function(e,t){const n=w(t);null!=n&&(e.size=n)}(e,t);break;case"path":!function(e,t){const n=b(t,l.O,[e.width,void 0,e.height]);e.width=x(t[0],e.width,1,n),e.height=x(t[2],e.height,1,n)}(e,t);break;case"object":await async function(e,t){const{resourceSize:o,symbolSize:r}=await async function(e){const{computeObjectLayerResourceSize:t}=await n.e(3657).then(n.bind(n,23657)),o=await t(e,10),{width:r,height:s,depth:i}=e,l=[r,i,s];let c=1;for(let n=0;n<3;n++){const e=l[n];if(null!=e){c=e/o[n];break}}for(let n=0;n<3;n++)null==l[n]&&(l[n]=o[n]*c);return{resourceSize:o,symbolSize:l}}(e),s=b(t,o,r);e.width=x(t[0],r[0],o[0],s),e.depth=x(t[1],r[1],o[1],s),e.height=x(t[2],r[2],o[2],s)}(e,t)}}(e,t)))}function w(e){for(const t of e)if("number"==typeof t)return t;return null}function b(e,t,n){for(let o=0;o<3;o++){const r=e[o];switch(r){case"symbol-value":{const e=n[o];return null!=e?e/t[o]:1}case"proportional":break;default:if(r&&t[o])return r/t[o]}}return 1}function x(e,t,n,o){switch(e){case"proportional":return n*o;case"symbol-value":return null!=t?t:n;default:return e}}async function Z(e,t){if(e&&t)return(0,r.dU)(e)?d(e,t):void((0,r.cT)(e)&&function(e,t){const n=w(t);if(null!=n)switch(e.type){case"simple-marker":e.size=n;break;case"picture-marker":{const t=e.width/e.height;t>1?(e.width=n,e.height=n*t):(e.width=n*t,e.height=n);break}case"simple-line":e.width=n;break;case"text":e.font.size=n}}(e,t))}function k(e,t,n){if(e&&null!=t)if((0,r.dU)(e)){const o=e.symbolLayers;o&&o.forEach((e=>{if(e&&"object"===e.type)switch(n){case"tilt":e.tilt=t;break;case"roll":e.roll=t;break;default:e.heading=t}}))}else(0,r.cT)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle=t))}function S(e){if(!e)return null;const t=e.effects.filter((e=>"bloom"!==e.type)).map((e=>e.toJSON()));return(0,c.rM)(t)}async function L(e,t){return await e.fetchSymbol(t)||e.fetchCIMSymbol(t)}}}]);
//# sourceMappingURL=3432.90083926.chunk.js.map