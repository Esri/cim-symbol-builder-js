{"version":3,"file":"static/js/1338.f01fcfc5.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/smartMapping/renderers/support/referenceSizeUtils.js","../node_modules/@arcgis/core/widgets/Legend/support/sizeRampUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../../../symbols.js\";import e from\"../../../core/Error.js\";import{clone as r}from\"../../../core/lang.js\";import n from\"../../../renderers/visualVariables/support/SizeStop.js\";import{PlacementPolygonCenterMethod as t}from\"../../../symbols/cim/enums.js\";import i from\"../../../symbols/CIMSymbol.js\";var o;function a(r){if(null!=r.minDataValue&&null!=r.maxDataValue&&null!=r.minSize&&null!=r.maxSize&&\"number\"==typeof r.minSize&&\"number\"==typeof r.maxSize)return[new n({value:r.minDataValue,size:r.minSize}),new n({value:r.maxDataValue,size:r.maxSize})];throw new e(\"create-reference-size-symbol\",\"Invalid size variable\")}function l(e){const{view:r,field:n,normalizationField:t,sizeStops:i,sizeByScaleEnabled:a}=e,{value:l,size:s}=i[0],{value:m,size:c}=i[1];let u,y=0;n&&(y=`$feature[\"${n}\"]`,u=`\\n      if(!HasValue($feature, \"${n}\")){\\n        return 0;\\n      }\\n      $feature[\"${n}\"];\\n    `),t&&(y=`$feature[\"${n}\"] / $feature[\"${t}\"]`,u=`if(!HasValue($feature, \"${n}\") || !HasValue($feature, \"${t}\") || $feature[\"${t}\"] <= 0){\\n        return 0;\\n      }\\n      $feature[\"${n}\"];\\n      $feature[\"${t}\"];`);const p={type:\"CIMExpressionInfo\",title:\"Size in pixels of outer ring\",expression:a?`\\n      ${u}\\n      var maxSize = ${c};\\n      var referenceScale = ${r.scale};\\n      return (maxSize * (referenceScale / $view.scale));\\n    `:`${u}\\n      return ${c}`,returnType:\"Default\"},f={type:\"CIMExpressionInfo\",title:\"Size in pixels of inner ring\",expression:`\\n        ${u}\\n        var value = ${y};\\n\\n        var referenceScale = ${r.scale};\\n        var referenceScaleRatio = ${a?\"(referenceScale / $view.scale)\":1};\\n        var maxSize = ${c} * referenceScaleRatio;\\n        var minSize = ${s} * referenceScaleRatio;\\n\\n        var minDataValue = ${l};\\n        var maxDataValue = ${m};\\n\\n        var ratio = Constrain(( value - minDataValue ) / ( maxDataValue - minDataValue ), 0, 1);\\n\\n        var innerDotSize = Constrain(maxSize * ratio, minSize, maxSize);\\n        return innerDotSize;\\n      `,returnType:\"Default\"};return[{type:\"CIMPrimitiveOverride\",primitiveName:o.OuterRing,propertyName:\"Size\",valueExpressionInfo:p},{type:\"CIMPrimitiveOverride\",primitiveName:o.InnerDot,propertyName:\"Size\",valueExpressionInfo:f}]}function s(e){switch(e){case\"circle\":return{rings:[[[8.5,.2],[7.06,.33],[5.66,.7],[4.35,1.31],[3.16,2.14],[2.14,3.16],[1.31,4.35],[.7,5.66],[.33,7.06],[.2,8.5],[.33,9.94],[.7,11.34],[1.31,12.65],[2.14,13.84],[3.16,14.86],[4.35,15.69],[5.66,16.3],[7.06,16.67],[8.5,16.8],[9.94,16.67],[11.34,16.3],[12.65,15.69],[13.84,14.86],[14.86,13.84],[15.69,12.65],[16.3,11.34],[16.67,9.94],[16.8,8.5],[16.67,7.06],[16.3,5.66],[15.69,4.35],[14.86,3.16],[13.84,2.14],[12.65,1.31],[11.34,.7],[9.94,.33],[8.5,.2]]]};case\"square\":return{rings:[[[.5,.5],[.5,16.5],[16.5,16.5],[16.5,.5],[.5,.5]]]};case\"diamond\":return{rings:[[[8.5,.5],[.2,8.5],[8.5,16.5],[16.5,8.5],[8.5,.5]]]};case\"hexagon-pointy\":return{rings:[[[15.86,12.75],[15.86,4.25],[8.5,0],[1.14,4.25],[1.14,12.75],[8.5,17],[15.86,12.75]]]};case\"hexagon-flat\":return{rings:[[[12.75,15.86],[17,8.5],[12.75,1.14],[4.25,1.14],[0,8.5],[4.25,15.86],[12.75,15.86]]]}}}function m(e){const{type:r,color:n,colorLocked:i}=e;return{type:\"CIMVectorMarker\",enable:!0,colorLocked:!1,anchorPoint:{x:0,y:0},anchorPointUnits:\"Relative\",primitiveName:o.OuterRing,frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:s(r),symbol:{type:\"CIMPolygonSymbol\",symbolLayers:[{type:\"CIMSolidFill\",enable:!0,color:n.toArray(),colorLocked:!!i,effects:[{type:\"CIMGeometricEffectDonut\",width:.75}]}]}}],scaleSymbolsProportionally:!1,respectFrame:!0,markerPlacement:{type:\"CIMMarkerPlacementPolygonCenter\",placePerPart:!1,method:t.OnPolygon,offsetX:0,offsetY:0,clipAtBoundary:!1},size:20}}function c(e){const{type:r,color:n}=e;return{type:\"CIMVectorMarker\",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:\"Relative\",primitiveName:o.InnerDot,frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:s(r),symbol:{type:\"CIMPolygonSymbol\",symbolLayers:[{type:\"CIMSolidFill\",enable:!0,color:n.toArray()}]}}],scaleSymbolsProportionally:!0,respectFrame:!0,markerPlacement:{type:\"CIMMarkerPlacementPolygonCenter\",placePerPart:!1,method:t.OnPolygon,offsetX:0,offsetY:0,clipAtBoundary:!1},size:10}}function u(e){const{primitiveOverrides:r}=e;return new i({data:{type:\"CIMSymbolReference\",symbol:{type:\"CIMPolygonSymbol\",symbolLayers:[m(e),c(e)]},primitiveOverrides:r}})}function y(e){return\"CIMVectorMarker\"===e?.type?e.markerGraphics?.[0]:void 0}function p(e){return\"CIMPolygonSymbol\"===e?.symbol?.type?e.symbol.symbolLayers?.[0]:void 0}function f(e,r){\"CIMVectorMarker\"===e?.type&&null!=r&&(e.size=r)}function v(e,r){const n=y(e);n&&null!=r&&(n.geometry=s(r))}function S(e,r){const n=p(y(e));n&&null!=r&&(n.color=r.toArray())}function z(e,r,n){const t=p(y(e));t&&null!=r&&n&&(t.colorLocked=r)}function d(e,n){const{outerRingSize:t,innerDotSize:i,type:a,color:l,colorLocked:s,primitiveOverrides:m}=n,c=\"CIMPolygonSymbol\"===e.data.symbol?.type?e.data.symbol.symbolLayers:null;if(2===c?.length)for(const r of c){const e=r.primitiveName===o.OuterRing;f(r,e?t:i),v(r,a),S(r,l),z(r,s,e)}return null!=t&&null!=i&&(e.data.primitiveOverrides=null),void 0!==m&&(e.data.primitiveOverrides=r(m)),e}!function(e){e.OuterRing=\"reference-size-outer-ring\",e.InnerDot=\"reference-size-inner-dot\"}(o||(o={}));export{l as createPrimitiveOverrides,u as createReferenceSizeSymbol,a as getReferenceSizeStops,d as updateReferenceSizeSymbol};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../../Color.js\";import{isSymbol3D as l}from\"../../../symbols.js\";import{round as t,numDigits as n,percentChange as o}from\"../../../renderers/support/numberUtils.js\";import{updateReferenceSizeSymbol as i}from\"../../../smartMapping/renderers/support/referenceSizeUtils.js\";import{applyCIMSymbolColor as s}from\"../../../symbols/support/cimSymbolUtils.js\";import{isVolumetricSymbol as r,getSymbolOutlineSize as a}from\"../../../symbols/support/utils.js\";import{getReferenceSizeAuthoringInfoVisualVariable as u,getSymbolForFlowRenderer as c,createStopLabel as m}from\"./utils.js\";import\"../../support/widgetUtils.js\";import{isDarkTheme as p}from\"../../../support/themeUtils.js\";import f from\"../../../symbols/SimpleMarkerSymbol.js\";import y from\"../../../symbols/SimpleLineSymbol.js\";const b=30,h=12,d=24,w=[255,255,255],S=[200,200,200],g=[128,128,128],v=20,z=5;function j(e){return\"esri.symbols.SimpleMarkerSymbol\"===e.declaredClass}function k(e){return\"esri.symbols.PictureMarkerSymbol\"===e.declaredClass}function V(e){return\"esri.symbols.SimpleLineSymbol\"===e.declaredClass}function x(e){return\"esri.symbols.TextSymbol\"===e.declaredClass}function I(e,l){const t=e.length-1;return e.map(((e,n)=>m(e,n,t,l)))}async function L(e,l,n,o,i,s,c){const m=l.legendOptions,p=m?.customValues,f=c||await D(e,n),y=l.stops,b=!!f,h=!!p,w=null!=l.minSize&&null!=l.maxSize,S=y&&y.length>1,g=!!l.target;if(!b||!h&&!(w||S&&!g))return;const v=r(f);let z=!1,j=null,k=null;j=v&&!S?t([l.minDataValue,l.maxDataValue]):p??await T(l,f,o,i?.type);const V=e?.authoringInfo,x=\"univariate-color-size\"===V?.type,L=x&&\"above-and-below\"===V?.univariateTheme,q=!!u(e);if(!j&&S&&(j=y.map((e=>e.value)),z=y.some((e=>!!e.label)),\"flow\"===e.type&&(j=t(j)),z&&(k=y.map((e=>e.label)))),v&&null!=j&&j?.length>2&&!L&&(j=[j[0],j[j.length-1]]),!j)return null;x&&5!==j?.length&&(j=P({minSize:j[0],maxSize:j[j.length-1]}));const B=v?U(e,j):null,E=a(f),R=z?null:I(j,s);return(await Promise.all(j.map((async(t,s)=>{const r=v?B[s]:await H(l,f,t,o,i?.type);return{value:t,symbol:!q||\"class-breaks\"!==e.type&&\"unique-value\"!==e.type?O(L&&\"class-breaks\"===e.type?C(e,s):f,r):M(e,r,l.maxSize,n)??f,label:z?k[s]:R[s],size:q?d:r,outlineSize:E}})))).reverse()}function U(e,l){const t=e?.authoringInfo,n=\"univariate-color-size\"===t?.type;let o=[h,b];if(n){const e=l[0],t=l[l.length-1],n=h,i=b;o=l.map((l=>n+(l-e)/(t-e)*(i-n)))}return n&&\"below\"===t?.univariateTheme&&o.reverse(),o}function M(l,t,n,o){const s=\"class-breaks\"===l.type,r=s?l.classBreakInfos?.[0]?.symbol?.clone():l.uniqueValueInfos?.[0]?.symbol?.clone();return r&&\"type\"in r&&\"cim\"===r.type?(i(r,{color:o??(s?null:new e(S)),innerDotSize:t*(d/n)||1,outerRingSize:d}),r):null}function C(e,l){const t=e.classBreakInfos,n=t.length,o=n<2||!(l>=2)?t[0].symbol.clone():t[n-1].symbol.clone(),i=e.visualVariables?.some((e=>\"color\"===e.type));return i&&(o.type.includes(\"3d\")?B(o):E(o)),o}async function D(e,l){if(\"flow\"===e.type)return c(e,l);if(\"pie-chart\"===e.type)return new f({color:null,outline:e.outline?.width?e.outline:new y});let t=null,n=null;if(\"simple\"===e.type)t=e.symbol;else if(\"class-breaks\"===e.type){const l=e.classBreakInfos;t=l&&l[0]&&l[0].symbol,n=l.length>1}else if(\"unique-value\"===e.type){const l=e.uniqueValueInfos;t=l?.[0]?.symbol,n=null!=l&&l.length>1}return!t||q(t)?null:(t=t.clone(),(l||n)&&(t.type.includes(\"3d\")?B(t):E(t)),t)}function q(e){if(e){if(l(e)){return!!e.symbolLayers&&e.symbolLayers.some((e=>e&&\"fill\"===e.type))}return e.type.includes(\"fill\")}return!1}function B(e){\"line-3d\"===e.type?e.symbolLayers.forEach((e=>{e.material={color:g}})):e.symbolLayers.forEach((e=>{\"icon\"!==e.type||e.resource?.href?e.material={color:S}:(e.material={color:w},e.outline={color:g,size:1.5})}))}function E(l){const t=p();if(\"cim\"===l.type)s(l,new e(S));else if(l.type.includes(\"line\"))l.color=g;else if(l.color=t?g:w,\"simple-marker\"===l.type)if(l.outline){const e=l.outline?.color?.toHex();\"#ffffff\"===e&&(l.outline.color=g)}else l.outline={color:g,width:1.5}}async function T(e,l,n,o){const i=(await import(\"../../../renderers/visualVariables/support/visualVariableUtils.js\")).getSizeRangeAtScale(e,n,o),s=i&&P(i);if(!i||!s)return;let r=s.map((l=>R(l,e,i)));r=t(r);for(let t=1;t<r.length-1;t++){const i=await A(e,l,r[t],r[t-1],n,o);i&&(r[t]=i[0],s[t]=i[1])}return r}function P(e){const l=e.minSize,t=e.maxSize,n=z,o=(t-l)/(n-1),i=[];for(let s=0;s<n;s++)i.push(l+o*s);return i}function R(e,l,t){const n=t.minSize,o=t.maxSize,i=l.minDataValue,s=l.maxDataValue;let r;if(e<=n)r=i;else if(e>=o)r=s;else{r=(e-n)/(o-n)*(s-i)+i}return r}async function A(e,l,i,s,r,a){const u=await H(e,l,i,r,a),c=await H(e,l,s,r,a),m=n(i),p=m.fractional,f=v;let y=m.integer,b=null,h=null;i>0&&i<1&&(b=10**p,y=n(i*=b).integer);for(let n=y-1;n>=0;n--){const s=10**n;let m=Math.floor(i/s)*s,p=Math.ceil(i/s)*s;null!=b&&(m/=b,p/=b);let y=(m+p)/2;[,y]=t([m,y,p],{indexes:[1]});const d=await H(e,l,m,r,a),w=await H(e,l,p,r,a),S=await H(e,l,y,r,a),g=o(u,d,c,null),v=o(u,w,c,null),z=o(u,S,c,null);let j=g.previous<=f,k=v.previous<=f;if(j&&k&&(g.previous<=v.previous?(j=!0,k=!1):(k=!0,j=!1)),j?h=[m,d]:k?h=[p,w]:z.previous<=f&&(h=[y,S]),h)break}return h}async function H(e,l,t,n,o){const{getSize:i}=await import(\"../../../renderers/visualVariables/support/visualVariableUtils.js\");return i(e,t,{scale:n,view:o,shape:\"simple-marker\"===l.type?l.style:null})}function O(e,t){const n=e.clone();if(l(n))r(n)||n.symbolLayers.forEach((e=>{\"fill\"!==e.type&&(e.size=t)}));else if(j(n))n.size=t;else if(k(n)){const e=n.width,l=n.height;n.height=t,n.width=t*(e/l)}else V(n)?n.width=t:x(n)&&n.font&&(n.font.size=t);return n}export{L as getRampStops,M as getReferenceSizeSymbol,b as realWorldMaxSize,h as realWorldMinSize};\n"],"names":["o","s","e","rings","y","type","markerGraphics","p","symbol","symbolLayers","f","r","size","v","n","geometry","S","color","toArray","z","t","colorLocked","d","outerRingSize","innerDotSize","i","a","l","primitiveOverrides","m","c","data","length","primitiveName","OuterRing","InnerDot","b","h","w","g","async","L","legendOptions","customValues","D","stops","minSize","maxSize","target","j","k","minDataValue","maxDataValue","T","V","authoringInfo","x","univariateTheme","q","u","map","value","some","label","P","B","U","E","R","I","Promise","all","H","O","C","M","outlineSize","reverse","classBreakInfos","clone","uniqueValueInfos","visualVariables","includes","outline","width","forEach","material","resource","href","toHex","getSizeRangeAtScale","A","push","fractional","integer","Math","floor","ceil","indexes","previous","getSize","scale","view","shape","style","declaredClass","height","font"],"sourceRoot":""}